(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function PS(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var _b={exports:{}},Jd={},wb={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bu=Symbol.for("react.element"),MS=Symbol.for("react.portal"),IS=Symbol.for("react.fragment"),RS=Symbol.for("react.strict_mode"),LS=Symbol.for("react.profiler"),NS=Symbol.for("react.provider"),BS=Symbol.for("react.context"),OS=Symbol.for("react.forward_ref"),HS=Symbol.for("react.suspense"),zS=Symbol.for("react.memo"),jS=Symbol.for("react.lazy"),Hv=Symbol.iterator;function WS(n){return n===null||typeof n!="object"?null:(n=Hv&&n[Hv]||n["@@iterator"],typeof n=="function"?n:null)}var Cb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sb=Object.assign,xb={};function tl(n,e,t){this.props=n,this.context=e,this.refs=xb,this.updater=t||Cb}tl.prototype.isReactComponent={};tl.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};tl.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Ab(){}Ab.prototype=tl.prototype;function Mg(n,e,t){this.props=n,this.context=e,this.refs=xb,this.updater=t||Cb}var Ig=Mg.prototype=new Ab;Ig.constructor=Mg;Sb(Ig,tl.prototype);Ig.isPureReactComponent=!0;var zv=Array.isArray,Fb=Object.prototype.hasOwnProperty,Rg={current:null},kb={key:!0,ref:!0,__self:!0,__source:!0};function Tb(n,e,t){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Fb.call(e,r)&&!kb.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Bu,type:n,key:o,ref:s,props:i,_owner:Rg.current}}function US(n,e){return{$$typeof:Bu,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Lg(n){return typeof n=="object"&&n!==null&&n.$$typeof===Bu}function VS(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var jv=/\/+/g;function lf(n,e){return typeof n=="object"&&n!==null&&n.key!=null?VS(""+n.key):e.toString(36)}function Yc(n,e,t,r,i){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case Bu:case MS:s=!0}}if(s)return s=n,i=i(s),n=r===""?"."+lf(s,0):r,zv(i)?(t="",n!=null&&(t=n.replace(jv,"$&/")+"/"),Yc(i,e,t,"",function(u){return u})):i!=null&&(Lg(i)&&(i=US(i,t+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(jv,"$&/")+"/")+n)),e.push(i)),1;if(s=0,r=r===""?".":r+":",zv(n))for(var a=0;a<n.length;a++){o=n[a];var l=r+lf(o,a);s+=Yc(o,e,t,l,i)}else if(l=WS(n),typeof l=="function")for(n=l.call(n),a=0;!(o=n.next()).done;)o=o.value,l=r+lf(o,a++),s+=Yc(o,e,t,l,i);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function gc(n,e,t){if(n==null)return n;var r=[],i=0;return Yc(n,r,"","",function(o){return e.call(t,o,i++)}),r}function KS(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ar={current:null},Qc={transition:null},$S={ReactCurrentDispatcher:ar,ReactCurrentBatchConfig:Qc,ReactCurrentOwner:Rg};function Db(){throw Error("act(...) is not supported in production builds of React.")}st.Children={map:gc,forEach:function(n,e,t){gc(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return gc(n,function(){e++}),e},toArray:function(n){return gc(n,function(e){return e})||[]},only:function(n){if(!Lg(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};st.Component=tl;st.Fragment=IS;st.Profiler=LS;st.PureComponent=Mg;st.StrictMode=RS;st.Suspense=HS;st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$S;st.act=Db;st.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=Sb({},n.props),i=n.key,o=n.ref,s=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Rg.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)Fb.call(e,l)&&!kb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Bu,type:n.type,key:i,ref:o,props:r,_owner:s}};st.createContext=function(n){return n={$$typeof:BS,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:NS,_context:n},n.Consumer=n};st.createElement=Tb;st.createFactory=function(n){var e=Tb.bind(null,n);return e.type=n,e};st.createRef=function(){return{current:null}};st.forwardRef=function(n){return{$$typeof:OS,render:n}};st.isValidElement=Lg;st.lazy=function(n){return{$$typeof:jS,_payload:{_status:-1,_result:n},_init:KS}};st.memo=function(n,e){return{$$typeof:zS,type:n,compare:e===void 0?null:e}};st.startTransition=function(n){var e=Qc.transition;Qc.transition={};try{n()}finally{Qc.transition=e}};st.unstable_act=Db;st.useCallback=function(n,e){return ar.current.useCallback(n,e)};st.useContext=function(n){return ar.current.useContext(n)};st.useDebugValue=function(){};st.useDeferredValue=function(n){return ar.current.useDeferredValue(n)};st.useEffect=function(n,e){return ar.current.useEffect(n,e)};st.useId=function(){return ar.current.useId()};st.useImperativeHandle=function(n,e,t){return ar.current.useImperativeHandle(n,e,t)};st.useInsertionEffect=function(n,e){return ar.current.useInsertionEffect(n,e)};st.useLayoutEffect=function(n,e){return ar.current.useLayoutEffect(n,e)};st.useMemo=function(n,e){return ar.current.useMemo(n,e)};st.useReducer=function(n,e,t){return ar.current.useReducer(n,e,t)};st.useRef=function(n){return ar.current.useRef(n)};st.useState=function(n){return ar.current.useState(n)};st.useSyncExternalStore=function(n,e,t){return ar.current.useSyncExternalStore(n,e,t)};st.useTransition=function(){return ar.current.useTransition()};st.version="18.3.1";wb.exports=st;var A=wb.exports;const Ts=Zd(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GS=A,qS=Symbol.for("react.element"),XS=Symbol.for("react.fragment"),YS=Object.prototype.hasOwnProperty,QS=GS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZS={key:!0,ref:!0,__self:!0,__source:!0};function Pb(n,e,t){var r,i={},o=null,s=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)YS.call(e,r)&&!ZS.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:qS,type:n,key:o,ref:s,props:i,_owner:QS.current}}Jd.Fragment=XS;Jd.jsx=Pb;Jd.jsxs=Pb;_b.exports=Jd;var $=_b.exports;const Mb=({onSubmit:n,placeHolder:e})=>{const[t,r]=A.useState("");return $.jsxs("form",{className:"Tip__card",onSubmit:i=>{i.preventDefault(),n(t)},children:[$.jsx("div",{children:$.jsx("textarea",{placeholder:e,autoFocus:!0,onChange:i=>{r(i.target.value)}})}),$.jsx("div",{children:$.jsx("input",{type:"submit",value:"Save"})})]})},JS=({xPos:n,yPos:e,editComment:t,deleteHighlight:r})=>$.jsxs("div",{className:"context-menu",style:{top:e+2,left:n+2},children:[$.jsx("button",{onClick:t,children:"Edit Comment"}),$.jsx("button",{onClick:r,children:"Delete"})]}),ex="modulepreload",tx=function(n){return"/react-pdf-highlighter-extended/app/"+n},Wv={},nx=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");i=Promise.allSettled(t.map(l=>{if(l=tx(l),l in Wv)return;Wv[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":ex,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})};var rx="Expected a function",Uv=NaN,ix="[object Symbol]",ox=/^\s+|\s+$/g,sx=/^[-+]0x[0-9a-f]+$/i,ax=/^0b[01]+$/i,lx=/^0o[0-7]+$/i,ux=parseInt,cx=typeof ha=="object"&&ha&&ha.Object===Object&&ha,dx=typeof self=="object"&&self&&self.Object===Object&&self,hx=cx||dx||Function("return this")(),fx=Object.prototype,px=fx.toString,gx=Math.max,mx=Math.min,uf=function(){return hx.Date.now()};function vx(n,e,t){var r,i,o,s,a,l,u=0,c=!1,d=!1,f=!0;if(typeof n!="function")throw new TypeError(rx);e=Vv(e)||0,gp(t)&&(c=!!t.leading,d="maxWait"in t,o=d?gx(Vv(t.maxWait)||0,e):o,f="trailing"in t?!!t.trailing:f);function g(D){var k=r,M=i;return r=i=void 0,u=D,s=n.apply(M,k),s}function m(D){return u=D,a=setTimeout(b,e),c?g(D):s}function y(D){var k=D-l,M=D-u,N=e-k;return d?mx(N,o-M):N}function S(D){var k=D-l,M=D-u;return l===void 0||k>=e||k<0||d&&M>=o}function b(){var D=uf();if(S(D))return E(D);a=setTimeout(b,y(D))}function E(D){return a=void 0,f&&r?g(D):(r=i=void 0,s)}function w(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function C(){return a===void 0?s:E(uf())}function T(){var D=uf(),k=S(D);if(r=arguments,i=this,l=D,k){if(a===void 0)return m(l);if(d)return a=setTimeout(b,e),g(l)}return a===void 0&&(a=setTimeout(b,e)),s}return T.cancel=w,T.flush=C,T}function gp(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function yx(n){return!!n&&typeof n=="object"}function bx(n){return typeof n=="symbol"||yx(n)&&px.call(n)==ix}function Vv(n){if(typeof n=="number")return n;if(bx(n))return Uv;if(gp(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=gp(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(ox,"");var t=ax.test(n);return t||lx.test(n)?ux(n.slice(2),t?2:8):sx.test(n)?Uv:+n}var Ex=vx;const _x=Zd(Ex);var mp={},Ib={exports:{}},jr={},Rb={exports:{}},Lb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(G,re){var ie=G.length;G.push(re);e:for(;0<ie;){var Ce=ie-1>>>1,Te=G[Ce];if(0<i(Te,re))G[Ce]=re,G[ie]=Te,ie=Ce;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var re=G[0],ie=G.pop();if(ie!==re){G[0]=ie;e:for(var Ce=0,Te=G.length,Oe=Te>>>1;Ce<Oe;){var De=2*(Ce+1)-1,pt=G[De],He=De+1,fe=G[He];if(0>i(pt,ie))He<Te&&0>i(fe,pt)?(G[Ce]=fe,G[He]=ie,Ce=He):(G[Ce]=pt,G[De]=ie,Ce=De);else if(He<Te&&0>i(fe,ie))G[Ce]=fe,G[He]=ie,Ce=He;else break e}}return re}function i(G,re){var ie=G.sortIndex-re.sortIndex;return ie!==0?ie:G.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,d=null,f=3,g=!1,m=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(G){for(var re=t(u);re!==null;){if(re.callback===null)r(u);else if(re.startTime<=G)r(u),re.sortIndex=re.expirationTime,e(l,re);else break;re=t(u)}}function C(G){if(y=!1,w(G),!m)if(t(l)!==null)m=!0,J(T);else{var re=t(u);re!==null&&Q(C,re.startTime-G)}}function T(G,re){m=!1,y&&(y=!1,b(M),M=-1),g=!0;var ie=f;try{for(w(re),d=t(l);d!==null&&(!(d.expirationTime>re)||G&&!ne());){var Ce=d.callback;if(typeof Ce=="function"){d.callback=null,f=d.priorityLevel;var Te=Ce(d.expirationTime<=re);re=n.unstable_now(),typeof Te=="function"?d.callback=Te:d===t(l)&&r(l),w(re)}else r(l);d=t(l)}if(d!==null)var Oe=!0;else{var De=t(u);De!==null&&Q(C,De.startTime-re),Oe=!1}return Oe}finally{d=null,f=ie,g=!1}}var D=!1,k=null,M=-1,N=5,U=-1;function ne(){return!(n.unstable_now()-U<N)}function oe(){if(k!==null){var G=n.unstable_now();U=G;var re=!0;try{re=k(!0,G)}finally{re?ae():(D=!1,k=null)}}else D=!1}var ae;if(typeof E=="function")ae=function(){E(oe)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,we=te.port2;te.port1.onmessage=oe,ae=function(){we.postMessage(null)}}else ae=function(){S(oe,0)};function J(G){k=G,D||(D=!0,ae())}function Q(G,re){M=S(function(){G(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){m||g||(m=!0,J(T))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(f){case 1:case 2:case 3:var re=3;break;default:re=f}var ie=f;f=re;try{return G()}finally{f=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,re){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ie=f;f=G;try{return re()}finally{f=ie}},n.unstable_scheduleCallback=function(G,re,ie){var Ce=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Ce+ie:Ce):ie=Ce,G){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ie+Te,G={id:c++,callback:re,priorityLevel:G,startTime:ie,expirationTime:Te,sortIndex:-1},ie>Ce?(G.sortIndex=ie,e(u,G),t(l)===null&&G===t(u)&&(y?(b(M),M=-1):y=!0,Q(C,ie-Ce))):(G.sortIndex=Te,e(l,G),m||g||(m=!0,J(T))),G},n.unstable_shouldYield=ne,n.unstable_wrapCallback=function(G){var re=f;return function(){var ie=f;f=re;try{return G.apply(this,arguments)}finally{f=ie}}}})(Lb);Rb.exports=Lb;var wx=Rb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cx=A,zr=wx;function ce(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nb=new Set,au={};function Xs(n,e){za(n,e),za(n+"Capture",e)}function za(n,e){for(au[n]=e,n=0;n<e.length;n++)Nb.add(e[n])}var Eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vp=Object.prototype.hasOwnProperty,Sx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kv={},$v={};function xx(n){return vp.call($v,n)?!0:vp.call(Kv,n)?!1:Sx.test(n)?$v[n]=!0:(Kv[n]=!0,!1)}function Ax(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Fx(n,e,t,r){if(e===null||typeof e>"u"||Ax(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lr(n,e,t,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Fn[n]=new lr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Fn[e]=new lr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Fn[n]=new lr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Fn[n]=new lr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Fn[n]=new lr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Fn[n]=new lr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Fn[n]=new lr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Fn[n]=new lr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Fn[n]=new lr(n,5,!1,n.toLowerCase(),null,!1,!1)});var Ng=/[\-:]([a-z])/g;function Bg(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Ng,Bg);Fn[e]=new lr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Ng,Bg);Fn[e]=new lr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Ng,Bg);Fn[e]=new lr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Fn[n]=new lr(n,1,!1,n.toLowerCase(),null,!1,!1)});Fn.xlinkHref=new lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Fn[n]=new lr(n,1,!1,n.toLowerCase(),null,!0,!0)});function Og(n,e,t,r){var i=Fn.hasOwnProperty(e)?Fn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Fx(e,t,i,r)&&(t=null),r||i===null?xx(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Ao=Cx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mc=Symbol.for("react.element"),fa=Symbol.for("react.portal"),pa=Symbol.for("react.fragment"),Hg=Symbol.for("react.strict_mode"),yp=Symbol.for("react.profiler"),Bb=Symbol.for("react.provider"),Ob=Symbol.for("react.context"),zg=Symbol.for("react.forward_ref"),bp=Symbol.for("react.suspense"),Ep=Symbol.for("react.suspense_list"),jg=Symbol.for("react.memo"),zo=Symbol.for("react.lazy"),Hb=Symbol.for("react.offscreen"),Gv=Symbol.iterator;function bl(n){return n===null||typeof n!="object"?null:(n=Gv&&n[Gv]||n["@@iterator"],typeof n=="function"?n:null)}var Ht=Object.assign,cf;function Ol(n){if(cf===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);cf=e&&e[1]||""}return`
`+cf+n}var df=!1;function hf(n,e){if(!n||df)return"";df=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=s&&0<=a);break}}}finally{df=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Ol(n):""}function kx(n){switch(n.tag){case 5:return Ol(n.type);case 16:return Ol("Lazy");case 13:return Ol("Suspense");case 19:return Ol("SuspenseList");case 0:case 2:case 15:return n=hf(n.type,!1),n;case 11:return n=hf(n.type.render,!1),n;case 1:return n=hf(n.type,!0),n;default:return""}}function _p(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case pa:return"Fragment";case fa:return"Portal";case yp:return"Profiler";case Hg:return"StrictMode";case bp:return"Suspense";case Ep:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ob:return(n.displayName||"Context")+".Consumer";case Bb:return(n._context.displayName||"Context")+".Provider";case zg:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case jg:return e=n.displayName||null,e!==null?e:_p(n.type)||"Memo";case zo:e=n._payload,n=n._init;try{return _p(n(e))}catch{}}return null}function Tx(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _p(e);case 8:return e===Hg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function as(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function zb(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Dx(n){var e=zb(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function vc(n){n._valueTracker||(n._valueTracker=Dx(n))}function jb(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=zb(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function hd(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function wp(n,e){var t=e.checked;return Ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function qv(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=as(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Wb(n,e){e=e.checked,e!=null&&Og(n,"checked",e,!1)}function Cp(n,e){Wb(n,e);var t=as(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Sp(n,e.type,t):e.hasOwnProperty("defaultValue")&&Sp(n,e.type,as(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Xv(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Sp(n,e,t){(e!=="number"||hd(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Hl=Array.isArray;function Pa(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+as(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function xp(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return Ht({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Yv(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ce(92));if(Hl(t)){if(1<t.length)throw Error(ce(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:as(t)}}function Ub(n,e){var t=as(e.value),r=as(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Qv(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Vb(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ap(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Vb(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var yc,Kb=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(yc=yc||document.createElement("div"),yc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yc.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function lu(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Kl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Px=["Webkit","ms","Moz","O"];Object.keys(Kl).forEach(function(n){Px.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Kl[e]=Kl[n]})});function $b(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Kl.hasOwnProperty(n)&&Kl[n]?(""+e).trim():e+"px"}function Gb(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=$b(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var Mx=Ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fp(n,e){if(e){if(Mx[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function kp(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tp=null;function Wg(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Dp=null,Ma=null,Ia=null;function Zv(n){if(n=zu(n)){if(typeof Dp!="function")throw Error(ce(280));var e=n.stateNode;e&&(e=ih(e),Dp(n.stateNode,n.type,e))}}function qb(n){Ma?Ia?Ia.push(n):Ia=[n]:Ma=n}function Xb(){if(Ma){var n=Ma,e=Ia;if(Ia=Ma=null,Zv(n),e)for(n=0;n<e.length;n++)Zv(e[n])}}function Yb(n,e){return n(e)}function Qb(){}var ff=!1;function Zb(n,e,t){if(ff)return n(e,t);ff=!0;try{return Yb(n,e,t)}finally{ff=!1,(Ma!==null||Ia!==null)&&(Qb(),Xb())}}function uu(n,e){var t=n.stateNode;if(t===null)return null;var r=ih(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ce(231,e,typeof t));return t}var Pp=!1;if(Eo)try{var El={};Object.defineProperty(El,"passive",{get:function(){Pp=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{Pp=!1}function Ix(n,e,t,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var $l=!1,fd=null,pd=!1,Mp=null,Rx={onError:function(n){$l=!0,fd=n}};function Lx(n,e,t,r,i,o,s,a,l){$l=!1,fd=null,Ix.apply(Rx,arguments)}function Nx(n,e,t,r,i,o,s,a,l){if(Lx.apply(this,arguments),$l){if($l){var u=fd;$l=!1,fd=null}else throw Error(ce(198));pd||(pd=!0,Mp=u)}}function Ys(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Jb(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Jv(n){if(Ys(n)!==n)throw Error(ce(188))}function Bx(n){var e=n.alternate;if(!e){if(e=Ys(n),e===null)throw Error(ce(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===t)return Jv(i),n;if(o===r)return Jv(i),e;o=o.sibling}throw Error(ce(188))}if(t.return!==r.return)t=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===t){s=!0,t=i,r=o;break}if(a===r){s=!0,r=i,t=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===t){s=!0,t=o,r=i;break}if(a===r){s=!0,r=o,t=i;break}a=a.sibling}if(!s)throw Error(ce(189))}}if(t.alternate!==r)throw Error(ce(190))}if(t.tag!==3)throw Error(ce(188));return t.stateNode.current===t?n:e}function eE(n){return n=Bx(n),n!==null?tE(n):null}function tE(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=tE(n);if(e!==null)return e;n=n.sibling}return null}var nE=zr.unstable_scheduleCallback,ey=zr.unstable_cancelCallback,Ox=zr.unstable_shouldYield,Hx=zr.unstable_requestPaint,Zt=zr.unstable_now,zx=zr.unstable_getCurrentPriorityLevel,Ug=zr.unstable_ImmediatePriority,rE=zr.unstable_UserBlockingPriority,gd=zr.unstable_NormalPriority,jx=zr.unstable_LowPriority,iE=zr.unstable_IdlePriority,eh=null,Zi=null;function Wx(n){if(Zi&&typeof Zi.onCommitFiberRoot=="function")try{Zi.onCommitFiberRoot(eh,n,void 0,(n.current.flags&128)===128)}catch{}}var Ci=Math.clz32?Math.clz32:Kx,Ux=Math.log,Vx=Math.LN2;function Kx(n){return n>>>=0,n===0?32:31-(Ux(n)/Vx|0)|0}var bc=64,Ec=4194304;function zl(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function md(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,o=n.pingedLanes,s=t&268435455;if(s!==0){var a=s&~i;a!==0?r=zl(a):(o&=s,o!==0&&(r=zl(o)))}else s=t&~i,s!==0?r=zl(s):o!==0&&(r=zl(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ci(e),i=1<<t,r|=n[t],e&=~i;return r}function $x(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gx(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,o=n.pendingLanes;0<o;){var s=31-Ci(o),a=1<<s,l=i[s];l===-1?(!(a&t)||a&r)&&(i[s]=$x(a,e)):l<=e&&(n.expiredLanes|=a),o&=~a}}function Ip(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function oE(){var n=bc;return bc<<=1,!(bc&4194240)&&(bc=64),n}function pf(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Ou(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ci(e),n[e]=t}function qx(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Ci(t),o=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~o}}function Vg(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Ci(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var yt=0;function sE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var aE,Kg,lE,uE,cE,Rp=!1,_c=[],Zo=null,Jo=null,es=null,cu=new Map,du=new Map,$o=[],Xx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ty(n,e){switch(n){case"focusin":case"focusout":Zo=null;break;case"dragenter":case"dragleave":Jo=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":cu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":du.delete(e.pointerId)}}function _l(n,e,t,r,i,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=zu(e),e!==null&&Kg(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Yx(n,e,t,r,i){switch(e){case"focusin":return Zo=_l(Zo,n,e,t,r,i),!0;case"dragenter":return Jo=_l(Jo,n,e,t,r,i),!0;case"mouseover":return es=_l(es,n,e,t,r,i),!0;case"pointerover":var o=i.pointerId;return cu.set(o,_l(cu.get(o)||null,n,e,t,r,i)),!0;case"gotpointercapture":return o=i.pointerId,du.set(o,_l(du.get(o)||null,n,e,t,r,i)),!0}return!1}function dE(n){var e=Ds(n.target);if(e!==null){var t=Ys(e);if(t!==null){if(e=t.tag,e===13){if(e=Jb(t),e!==null){n.blockedOn=e,cE(n.priority,function(){lE(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Zc(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Lp(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Tp=r,t.target.dispatchEvent(r),Tp=null}else return e=zu(t),e!==null&&Kg(e),n.blockedOn=t,!1;e.shift()}return!0}function ny(n,e,t){Zc(n)&&t.delete(e)}function Qx(){Rp=!1,Zo!==null&&Zc(Zo)&&(Zo=null),Jo!==null&&Zc(Jo)&&(Jo=null),es!==null&&Zc(es)&&(es=null),cu.forEach(ny),du.forEach(ny)}function wl(n,e){n.blockedOn===e&&(n.blockedOn=null,Rp||(Rp=!0,zr.unstable_scheduleCallback(zr.unstable_NormalPriority,Qx)))}function hu(n){function e(i){return wl(i,n)}if(0<_c.length){wl(_c[0],n);for(var t=1;t<_c.length;t++){var r=_c[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Zo!==null&&wl(Zo,n),Jo!==null&&wl(Jo,n),es!==null&&wl(es,n),cu.forEach(e),du.forEach(e),t=0;t<$o.length;t++)r=$o[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<$o.length&&(t=$o[0],t.blockedOn===null);)dE(t),t.blockedOn===null&&$o.shift()}var Ra=Ao.ReactCurrentBatchConfig,vd=!0;function Zx(n,e,t,r){var i=yt,o=Ra.transition;Ra.transition=null;try{yt=1,$g(n,e,t,r)}finally{yt=i,Ra.transition=o}}function Jx(n,e,t,r){var i=yt,o=Ra.transition;Ra.transition=null;try{yt=4,$g(n,e,t,r)}finally{yt=i,Ra.transition=o}}function $g(n,e,t,r){if(vd){var i=Lp(n,e,t,r);if(i===null)Sf(n,e,r,yd,t),ty(n,r);else if(Yx(i,n,e,t,r))r.stopPropagation();else if(ty(n,r),e&4&&-1<Xx.indexOf(n)){for(;i!==null;){var o=zu(i);if(o!==null&&aE(o),o=Lp(n,e,t,r),o===null&&Sf(n,e,r,yd,t),o===i)break;i=o}i!==null&&r.stopPropagation()}else Sf(n,e,r,null,t)}}var yd=null;function Lp(n,e,t,r){if(yd=null,n=Wg(r),n=Ds(n),n!==null)if(e=Ys(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Jb(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return yd=n,null}function hE(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zx()){case Ug:return 1;case rE:return 4;case gd:case jx:return 16;case iE:return 536870912;default:return 16}default:return 16}}var Yo=null,Gg=null,Jc=null;function fE(){if(Jc)return Jc;var n,e=Gg,t=e.length,r,i="value"in Yo?Yo.value:Yo.textContent,o=i.length;for(n=0;n<t&&e[n]===i[n];n++);var s=t-n;for(r=1;r<=s&&e[t-r]===i[o-r];r++);return Jc=i.slice(n,1<r?1-r:void 0)}function ed(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function wc(){return!0}function ry(){return!1}function Wr(n){function e(t,r,i,o,s){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?wc:ry,this.isPropagationStopped=ry,this}return Ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=wc)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=wc)},persist:function(){},isPersistent:wc}),e}var nl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qg=Wr(nl),Hu=Ht({},nl,{view:0,detail:0}),eA=Wr(Hu),gf,mf,Cl,th=Ht({},Hu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xg,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Cl&&(Cl&&n.type==="mousemove"?(gf=n.screenX-Cl.screenX,mf=n.screenY-Cl.screenY):mf=gf=0,Cl=n),gf)},movementY:function(n){return"movementY"in n?n.movementY:mf}}),iy=Wr(th),tA=Ht({},th,{dataTransfer:0}),nA=Wr(tA),rA=Ht({},Hu,{relatedTarget:0}),vf=Wr(rA),iA=Ht({},nl,{animationName:0,elapsedTime:0,pseudoElement:0}),oA=Wr(iA),sA=Ht({},nl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),aA=Wr(sA),lA=Ht({},nl,{data:0}),oy=Wr(lA),uA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hA(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=dA[n])?!!e[n]:!1}function Xg(){return hA}var fA=Ht({},Hu,{key:function(n){if(n.key){var e=uA[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ed(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?cA[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xg,charCode:function(n){return n.type==="keypress"?ed(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ed(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),pA=Wr(fA),gA=Ht({},th,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sy=Wr(gA),mA=Ht({},Hu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xg}),vA=Wr(mA),yA=Ht({},nl,{propertyName:0,elapsedTime:0,pseudoElement:0}),bA=Wr(yA),EA=Ht({},th,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),_A=Wr(EA),wA=[9,13,27,32],Yg=Eo&&"CompositionEvent"in window,Gl=null;Eo&&"documentMode"in document&&(Gl=document.documentMode);var CA=Eo&&"TextEvent"in window&&!Gl,pE=Eo&&(!Yg||Gl&&8<Gl&&11>=Gl),ay=" ",ly=!1;function gE(n,e){switch(n){case"keyup":return wA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mE(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ga=!1;function SA(n,e){switch(n){case"compositionend":return mE(e);case"keypress":return e.which!==32?null:(ly=!0,ay);case"textInput":return n=e.data,n===ay&&ly?null:n;default:return null}}function xA(n,e){if(ga)return n==="compositionend"||!Yg&&gE(n,e)?(n=fE(),Jc=Gg=Yo=null,ga=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pE&&e.locale!=="ko"?null:e.data;default:return null}}var AA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uy(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!AA[n.type]:e==="textarea"}function vE(n,e,t,r){qb(r),e=bd(e,"onChange"),0<e.length&&(t=new qg("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var ql=null,fu=null;function FA(n){kE(n,0)}function nh(n){var e=ya(n);if(jb(e))return n}function kA(n,e){if(n==="change")return e}var yE=!1;if(Eo){var yf;if(Eo){var bf="oninput"in document;if(!bf){var cy=document.createElement("div");cy.setAttribute("oninput","return;"),bf=typeof cy.oninput=="function"}yf=bf}else yf=!1;yE=yf&&(!document.documentMode||9<document.documentMode)}function dy(){ql&&(ql.detachEvent("onpropertychange",bE),fu=ql=null)}function bE(n){if(n.propertyName==="value"&&nh(fu)){var e=[];vE(e,fu,n,Wg(n)),Zb(FA,e)}}function TA(n,e,t){n==="focusin"?(dy(),ql=e,fu=t,ql.attachEvent("onpropertychange",bE)):n==="focusout"&&dy()}function DA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return nh(fu)}function PA(n,e){if(n==="click")return nh(e)}function MA(n,e){if(n==="input"||n==="change")return nh(e)}function IA(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Fi=typeof Object.is=="function"?Object.is:IA;function pu(n,e){if(Fi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!vp.call(e,i)||!Fi(n[i],e[i]))return!1}return!0}function hy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function fy(n,e){var t=hy(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=hy(t)}}function EE(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?EE(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function _E(){for(var n=window,e=hd();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=hd(n.document)}return e}function Qg(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function RA(n){var e=_E(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&EE(t.ownerDocument.documentElement,t)){if(r!==null&&Qg(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!n.extend&&o>r&&(i=r,r=o,o=i),i=fy(t,o);var s=fy(t,r);i&&s&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),o>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var LA=Eo&&"documentMode"in document&&11>=document.documentMode,ma=null,Np=null,Xl=null,Bp=!1;function py(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Bp||ma==null||ma!==hd(r)||(r=ma,"selectionStart"in r&&Qg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xl&&pu(Xl,r)||(Xl=r,r=bd(Np,"onSelect"),0<r.length&&(e=new qg("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ma)))}function Cc(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var va={animationend:Cc("Animation","AnimationEnd"),animationiteration:Cc("Animation","AnimationIteration"),animationstart:Cc("Animation","AnimationStart"),transitionend:Cc("Transition","TransitionEnd")},Ef={},wE={};Eo&&(wE=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function rh(n){if(Ef[n])return Ef[n];if(!va[n])return n;var e=va[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in wE)return Ef[n]=e[t];return n}var CE=rh("animationend"),SE=rh("animationiteration"),xE=rh("animationstart"),AE=rh("transitionend"),FE=new Map,gy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(n,e){FE.set(n,e),Xs(e,[n])}for(var _f=0;_f<gy.length;_f++){var wf=gy[_f],NA=wf.toLowerCase(),BA=wf[0].toUpperCase()+wf.slice(1);hs(NA,"on"+BA)}hs(CE,"onAnimationEnd");hs(SE,"onAnimationIteration");hs(xE,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(AE,"onTransitionEnd");za("onMouseEnter",["mouseout","mouseover"]);za("onMouseLeave",["mouseout","mouseover"]);za("onPointerEnter",["pointerout","pointerover"]);za("onPointerLeave",["pointerout","pointerover"]);Xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OA=new Set("cancel close invalid load scroll toggle".split(" ").concat(jl));function my(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Nx(r,e,void 0,n),n.currentTarget=null}function kE(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;my(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;my(i,a,u),o=l}}}if(pd)throw n=Mp,pd=!1,Mp=null,n}function kt(n,e){var t=e[Wp];t===void 0&&(t=e[Wp]=new Set);var r=n+"__bubble";t.has(r)||(TE(e,n,2,!1),t.add(r))}function Cf(n,e,t){var r=0;e&&(r|=4),TE(t,n,r,e)}var Sc="_reactListening"+Math.random().toString(36).slice(2);function gu(n){if(!n[Sc]){n[Sc]=!0,Nb.forEach(function(t){t!=="selectionchange"&&(OA.has(t)||Cf(t,!1,n),Cf(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Sc]||(e[Sc]=!0,Cf("selectionchange",!1,e))}}function TE(n,e,t,r){switch(hE(e)){case 1:var i=Zx;break;case 4:i=Jx;break;default:i=$g}t=i.bind(null,e,t,n),i=void 0,!Pp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Sf(n,e,t,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Ds(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}Zb(function(){var u=o,c=Wg(t),d=[];e:{var f=FE.get(n);if(f!==void 0){var g=qg,m=n;switch(n){case"keypress":if(ed(t)===0)break e;case"keydown":case"keyup":g=pA;break;case"focusin":m="focus",g=vf;break;case"focusout":m="blur",g=vf;break;case"beforeblur":case"afterblur":g=vf;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=iy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=nA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=vA;break;case CE:case SE:case xE:g=oA;break;case AE:g=bA;break;case"scroll":g=eA;break;case"wheel":g=_A;break;case"copy":case"cut":case"paste":g=aA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=sy}var y=(e&4)!==0,S=!y&&n==="scroll",b=y?f!==null?f+"Capture":null:f;y=[];for(var E=u,w;E!==null;){w=E;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,b!==null&&(C=uu(E,b),C!=null&&y.push(mu(E,C,w)))),S)break;E=E.return}0<y.length&&(f=new g(f,m,null,t,c),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",f&&t!==Tp&&(m=t.relatedTarget||t.fromElement)&&(Ds(m)||m[_o]))break e;if((g||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,g?(m=t.relatedTarget||t.toElement,g=u,m=m?Ds(m):null,m!==null&&(S=Ys(m),m!==S||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=u),g!==m)){if(y=iy,C="onMouseLeave",b="onMouseEnter",E="mouse",(n==="pointerout"||n==="pointerover")&&(y=sy,C="onPointerLeave",b="onPointerEnter",E="pointer"),S=g==null?f:ya(g),w=m==null?f:ya(m),f=new y(C,E+"leave",g,t,c),f.target=S,f.relatedTarget=w,C=null,Ds(c)===u&&(y=new y(b,E+"enter",m,t,c),y.target=w,y.relatedTarget=S,C=y),S=C,g&&m)t:{for(y=g,b=m,E=0,w=y;w;w=ia(w))E++;for(w=0,C=b;C;C=ia(C))w++;for(;0<E-w;)y=ia(y),E--;for(;0<w-E;)b=ia(b),w--;for(;E--;){if(y===b||b!==null&&y===b.alternate)break t;y=ia(y),b=ia(b)}y=null}else y=null;g!==null&&vy(d,f,g,y,!1),m!==null&&S!==null&&vy(d,S,m,y,!0)}}e:{if(f=u?ya(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var T=kA;else if(uy(f))if(yE)T=MA;else{T=DA;var D=TA}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=PA);if(T&&(T=T(n,u))){vE(d,T,t,c);break e}D&&D(n,f,u),n==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&Sp(f,"number",f.value)}switch(D=u?ya(u):window,n){case"focusin":(uy(D)||D.contentEditable==="true")&&(ma=D,Np=u,Xl=null);break;case"focusout":Xl=Np=ma=null;break;case"mousedown":Bp=!0;break;case"contextmenu":case"mouseup":case"dragend":Bp=!1,py(d,t,c);break;case"selectionchange":if(LA)break;case"keydown":case"keyup":py(d,t,c)}var k;if(Yg)e:{switch(n){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else ga?gE(n,t)&&(M="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(pE&&t.locale!=="ko"&&(ga||M!=="onCompositionStart"?M==="onCompositionEnd"&&ga&&(k=fE()):(Yo=c,Gg="value"in Yo?Yo.value:Yo.textContent,ga=!0)),D=bd(u,M),0<D.length&&(M=new oy(M,n,null,t,c),d.push({event:M,listeners:D}),k?M.data=k:(k=mE(t),k!==null&&(M.data=k)))),(k=CA?SA(n,t):xA(n,t))&&(u=bd(u,"onBeforeInput"),0<u.length&&(c=new oy("onBeforeInput","beforeinput",null,t,c),d.push({event:c,listeners:u}),c.data=k))}kE(d,e)})}function mu(n,e,t){return{instance:n,listener:e,currentTarget:t}}function bd(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=uu(n,t),o!=null&&r.unshift(mu(n,o,i)),o=uu(n,e),o!=null&&r.push(mu(n,o,i))),n=n.return}return r}function ia(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function vy(n,e,t,r,i){for(var o=e._reactName,s=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=uu(t,o),l!=null&&s.unshift(mu(t,l,a))):i||(l=uu(t,o),l!=null&&s.push(mu(t,l,a)))),t=t.return}s.length!==0&&n.push({event:e,listeners:s})}var HA=/\r\n?/g,zA=/\u0000|\uFFFD/g;function yy(n){return(typeof n=="string"?n:""+n).replace(HA,`
`).replace(zA,"")}function xc(n,e,t){if(e=yy(e),yy(n)!==e&&t)throw Error(ce(425))}function Ed(){}var Op=null,Hp=null;function zp(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jp=typeof setTimeout=="function"?setTimeout:void 0,jA=typeof clearTimeout=="function"?clearTimeout:void 0,by=typeof Promise=="function"?Promise:void 0,WA=typeof queueMicrotask=="function"?queueMicrotask:typeof by<"u"?function(n){return by.resolve(null).then(n).catch(UA)}:jp;function UA(n){setTimeout(function(){throw n})}function xf(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),hu(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);hu(e)}function ts(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Ey(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var rl=Math.random().toString(36).slice(2),Ki="__reactFiber$"+rl,vu="__reactProps$"+rl,_o="__reactContainer$"+rl,Wp="__reactEvents$"+rl,VA="__reactListeners$"+rl,KA="__reactHandles$"+rl;function Ds(n){var e=n[Ki];if(e)return e;for(var t=n.parentNode;t;){if(e=t[_o]||t[Ki]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Ey(n);n!==null;){if(t=n[Ki])return t;n=Ey(n)}return e}n=t,t=n.parentNode}return null}function zu(n){return n=n[Ki]||n[_o],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ya(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ce(33))}function ih(n){return n[vu]||null}var Up=[],ba=-1;function fs(n){return{current:n}}function Dt(n){0>ba||(n.current=Up[ba],Up[ba]=null,ba--)}function At(n,e){ba++,Up[ba]=n.current,n.current=e}var ls={},zn=fs(ls),Cr=fs(!1),zs=ls;function ja(n,e){var t=n.type.contextTypes;if(!t)return ls;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in t)i[o]=e[o];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Sr(n){return n=n.childContextTypes,n!=null}function _d(){Dt(Cr),Dt(zn)}function _y(n,e,t){if(zn.current!==ls)throw Error(ce(168));At(zn,e),At(Cr,t)}function DE(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ce(108,Tx(n)||"Unknown",i));return Ht({},t,r)}function wd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ls,zs=zn.current,At(zn,n),At(Cr,Cr.current),!0}function wy(n,e,t){var r=n.stateNode;if(!r)throw Error(ce(169));t?(n=DE(n,e,zs),r.__reactInternalMemoizedMergedChildContext=n,Dt(Cr),Dt(zn),At(zn,n)):Dt(Cr),At(Cr,t)}var go=null,oh=!1,Af=!1;function PE(n){go===null?go=[n]:go.push(n)}function $A(n){oh=!0,PE(n)}function ps(){if(!Af&&go!==null){Af=!0;var n=0,e=yt;try{var t=go;for(yt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}go=null,oh=!1}catch(i){throw go!==null&&(go=go.slice(n+1)),nE(Ug,ps),i}finally{yt=e,Af=!1}}return null}var Ea=[],_a=0,Cd=null,Sd=0,Yr=[],Qr=0,js=null,vo=1,yo="";function As(n,e){Ea[_a++]=Sd,Ea[_a++]=Cd,Cd=n,Sd=e}function ME(n,e,t){Yr[Qr++]=vo,Yr[Qr++]=yo,Yr[Qr++]=js,js=n;var r=vo;n=yo;var i=32-Ci(r)-1;r&=~(1<<i),t+=1;var o=32-Ci(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,vo=1<<32-Ci(e)+i|t<<i|r,yo=o+n}else vo=1<<o|t<<i|r,yo=n}function Zg(n){n.return!==null&&(As(n,1),ME(n,1,0))}function Jg(n){for(;n===Cd;)Cd=Ea[--_a],Ea[_a]=null,Sd=Ea[--_a],Ea[_a]=null;for(;n===js;)js=Yr[--Qr],Yr[Qr]=null,yo=Yr[--Qr],Yr[Qr]=null,vo=Yr[--Qr],Yr[Qr]=null}var Or=null,Lr=null,Rt=!1,Ei=null;function IE(n,e){var t=Jr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Cy(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Or=n,Lr=ts(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Or=n,Lr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=js!==null?{id:vo,overflow:yo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Jr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Or=n,Lr=null,!0):!1;default:return!1}}function Vp(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Kp(n){if(Rt){var e=Lr;if(e){var t=e;if(!Cy(n,e)){if(Vp(n))throw Error(ce(418));e=ts(t.nextSibling);var r=Or;e&&Cy(n,e)?IE(r,t):(n.flags=n.flags&-4097|2,Rt=!1,Or=n)}}else{if(Vp(n))throw Error(ce(418));n.flags=n.flags&-4097|2,Rt=!1,Or=n}}}function Sy(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Or=n}function Ac(n){if(n!==Or)return!1;if(!Rt)return Sy(n),Rt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!zp(n.type,n.memoizedProps)),e&&(e=Lr)){if(Vp(n))throw RE(),Error(ce(418));for(;e;)IE(n,e),e=ts(e.nextSibling)}if(Sy(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ce(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Lr=ts(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Lr=null}}else Lr=Or?ts(n.stateNode.nextSibling):null;return!0}function RE(){for(var n=Lr;n;)n=ts(n.nextSibling)}function Wa(){Lr=Or=null,Rt=!1}function em(n){Ei===null?Ei=[n]:Ei.push(n)}var GA=Ao.ReactCurrentBatchConfig;function Sl(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ce(309));var r=t.stateNode}if(!r)throw Error(ce(147,n));var i=r,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof n!="string")throw Error(ce(284));if(!t._owner)throw Error(ce(290,n))}return n}function Fc(n,e){throw n=Object.prototype.toString.call(e),Error(ce(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function xy(n){var e=n._init;return e(n._payload)}function LE(n){function e(b,E){if(n){var w=b.deletions;w===null?(b.deletions=[E],b.flags|=16):w.push(E)}}function t(b,E){if(!n)return null;for(;E!==null;)e(b,E),E=E.sibling;return null}function r(b,E){for(b=new Map;E!==null;)E.key!==null?b.set(E.key,E):b.set(E.index,E),E=E.sibling;return b}function i(b,E){return b=os(b,E),b.index=0,b.sibling=null,b}function o(b,E,w){return b.index=w,n?(w=b.alternate,w!==null?(w=w.index,w<E?(b.flags|=2,E):w):(b.flags|=2,E)):(b.flags|=1048576,E)}function s(b){return n&&b.alternate===null&&(b.flags|=2),b}function a(b,E,w,C){return E===null||E.tag!==6?(E=If(w,b.mode,C),E.return=b,E):(E=i(E,w),E.return=b,E)}function l(b,E,w,C){var T=w.type;return T===pa?c(b,E,w.props.children,C,w.key):E!==null&&(E.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===zo&&xy(T)===E.type)?(C=i(E,w.props),C.ref=Sl(b,E,w),C.return=b,C):(C=ad(w.type,w.key,w.props,null,b.mode,C),C.ref=Sl(b,E,w),C.return=b,C)}function u(b,E,w,C){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=Rf(w,b.mode,C),E.return=b,E):(E=i(E,w.children||[]),E.return=b,E)}function c(b,E,w,C,T){return E===null||E.tag!==7?(E=Bs(w,b.mode,C,T),E.return=b,E):(E=i(E,w),E.return=b,E)}function d(b,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return E=If(""+E,b.mode,w),E.return=b,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case mc:return w=ad(E.type,E.key,E.props,null,b.mode,w),w.ref=Sl(b,null,E),w.return=b,w;case fa:return E=Rf(E,b.mode,w),E.return=b,E;case zo:var C=E._init;return d(b,C(E._payload),w)}if(Hl(E)||bl(E))return E=Bs(E,b.mode,w,null),E.return=b,E;Fc(b,E)}return null}function f(b,E,w,C){var T=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return T!==null?null:a(b,E,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case mc:return w.key===T?l(b,E,w,C):null;case fa:return w.key===T?u(b,E,w,C):null;case zo:return T=w._init,f(b,E,T(w._payload),C)}if(Hl(w)||bl(w))return T!==null?null:c(b,E,w,C,null);Fc(b,w)}return null}function g(b,E,w,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(w)||null,a(E,b,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case mc:return b=b.get(C.key===null?w:C.key)||null,l(E,b,C,T);case fa:return b=b.get(C.key===null?w:C.key)||null,u(E,b,C,T);case zo:var D=C._init;return g(b,E,w,D(C._payload),T)}if(Hl(C)||bl(C))return b=b.get(w)||null,c(E,b,C,T,null);Fc(E,C)}return null}function m(b,E,w,C){for(var T=null,D=null,k=E,M=E=0,N=null;k!==null&&M<w.length;M++){k.index>M?(N=k,k=null):N=k.sibling;var U=f(b,k,w[M],C);if(U===null){k===null&&(k=N);break}n&&k&&U.alternate===null&&e(b,k),E=o(U,E,M),D===null?T=U:D.sibling=U,D=U,k=N}if(M===w.length)return t(b,k),Rt&&As(b,M),T;if(k===null){for(;M<w.length;M++)k=d(b,w[M],C),k!==null&&(E=o(k,E,M),D===null?T=k:D.sibling=k,D=k);return Rt&&As(b,M),T}for(k=r(b,k);M<w.length;M++)N=g(k,b,M,w[M],C),N!==null&&(n&&N.alternate!==null&&k.delete(N.key===null?M:N.key),E=o(N,E,M),D===null?T=N:D.sibling=N,D=N);return n&&k.forEach(function(ne){return e(b,ne)}),Rt&&As(b,M),T}function y(b,E,w,C){var T=bl(w);if(typeof T!="function")throw Error(ce(150));if(w=T.call(w),w==null)throw Error(ce(151));for(var D=T=null,k=E,M=E=0,N=null,U=w.next();k!==null&&!U.done;M++,U=w.next()){k.index>M?(N=k,k=null):N=k.sibling;var ne=f(b,k,U.value,C);if(ne===null){k===null&&(k=N);break}n&&k&&ne.alternate===null&&e(b,k),E=o(ne,E,M),D===null?T=ne:D.sibling=ne,D=ne,k=N}if(U.done)return t(b,k),Rt&&As(b,M),T;if(k===null){for(;!U.done;M++,U=w.next())U=d(b,U.value,C),U!==null&&(E=o(U,E,M),D===null?T=U:D.sibling=U,D=U);return Rt&&As(b,M),T}for(k=r(b,k);!U.done;M++,U=w.next())U=g(k,b,M,U.value,C),U!==null&&(n&&U.alternate!==null&&k.delete(U.key===null?M:U.key),E=o(U,E,M),D===null?T=U:D.sibling=U,D=U);return n&&k.forEach(function(oe){return e(b,oe)}),Rt&&As(b,M),T}function S(b,E,w,C){if(typeof w=="object"&&w!==null&&w.type===pa&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case mc:e:{for(var T=w.key,D=E;D!==null;){if(D.key===T){if(T=w.type,T===pa){if(D.tag===7){t(b,D.sibling),E=i(D,w.props.children),E.return=b,b=E;break e}}else if(D.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===zo&&xy(T)===D.type){t(b,D.sibling),E=i(D,w.props),E.ref=Sl(b,D,w),E.return=b,b=E;break e}t(b,D);break}else e(b,D);D=D.sibling}w.type===pa?(E=Bs(w.props.children,b.mode,C,w.key),E.return=b,b=E):(C=ad(w.type,w.key,w.props,null,b.mode,C),C.ref=Sl(b,E,w),C.return=b,b=C)}return s(b);case fa:e:{for(D=w.key;E!==null;){if(E.key===D)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){t(b,E.sibling),E=i(E,w.children||[]),E.return=b,b=E;break e}else{t(b,E);break}else e(b,E);E=E.sibling}E=Rf(w,b.mode,C),E.return=b,b=E}return s(b);case zo:return D=w._init,S(b,E,D(w._payload),C)}if(Hl(w))return m(b,E,w,C);if(bl(w))return y(b,E,w,C);Fc(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,E!==null&&E.tag===6?(t(b,E.sibling),E=i(E,w),E.return=b,b=E):(t(b,E),E=If(w,b.mode,C),E.return=b,b=E),s(b)):t(b,E)}return S}var Ua=LE(!0),NE=LE(!1),xd=fs(null),Ad=null,wa=null,tm=null;function nm(){tm=wa=Ad=null}function rm(n){var e=xd.current;Dt(xd),n._currentValue=e}function $p(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function La(n,e){Ad=n,tm=wa=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(wr=!0),n.firstContext=null)}function ii(n){var e=n._currentValue;if(tm!==n)if(n={context:n,memoizedValue:e,next:null},wa===null){if(Ad===null)throw Error(ce(308));wa=n,Ad.dependencies={lanes:0,firstContext:n}}else wa=wa.next=n;return e}var Ps=null;function im(n){Ps===null?Ps=[n]:Ps.push(n)}function BE(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,im(e)):(t.next=i.next,i.next=t),e.interleaved=t,wo(n,r)}function wo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var jo=!1;function om(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OE(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function bo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ns(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,dt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,wo(n,t)}return i=r.interleaved,i===null?(e.next=e,im(r)):(e.next=i.next,i.next=e),r.interleaved=e,wo(n,t)}function td(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Vg(n,t)}}function Ay(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?i=o=s:o=o.next=s,t=t.next}while(t!==null);o===null?i=o=e:o=o.next=e}else i=o=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Fd(n,e,t,r){var i=n.updateQueue;jo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,c=u=l=null,a=o;do{var f=a.lane,g=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,y=a;switch(f=e,g=t,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(g,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(g,d,f):m,f==null)break e;d=Ht({},d,f);break e;case 2:jo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=g,l=d):c=c.next=g,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Us|=s,n.lanes=s,n.memoizedState=d}}function Fy(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(ce(191,i));i.call(r)}}}var ju={},Ji=fs(ju),yu=fs(ju),bu=fs(ju);function Ms(n){if(n===ju)throw Error(ce(174));return n}function sm(n,e){switch(At(bu,e),At(yu,n),At(Ji,ju),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ap(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Ap(e,n)}Dt(Ji),At(Ji,e)}function Va(){Dt(Ji),Dt(yu),Dt(bu)}function HE(n){Ms(bu.current);var e=Ms(Ji.current),t=Ap(e,n.type);e!==t&&(At(yu,n),At(Ji,t))}function am(n){yu.current===n&&(Dt(Ji),Dt(yu))}var Bt=fs(0);function kd(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ff=[];function lm(){for(var n=0;n<Ff.length;n++)Ff[n]._workInProgressVersionPrimary=null;Ff.length=0}var nd=Ao.ReactCurrentDispatcher,kf=Ao.ReactCurrentBatchConfig,Ws=0,Ot=null,fn=null,_n=null,Td=!1,Yl=!1,Eu=0,qA=0;function Pn(){throw Error(ce(321))}function um(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Fi(n[t],e[t]))return!1;return!0}function cm(n,e,t,r,i,o){if(Ws=o,Ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nd.current=n===null||n.memoizedState===null?ZA:JA,n=t(r,i),Yl){o=0;do{if(Yl=!1,Eu=0,25<=o)throw Error(ce(301));o+=1,_n=fn=null,e.updateQueue=null,nd.current=e1,n=t(r,i)}while(Yl)}if(nd.current=Dd,e=fn!==null&&fn.next!==null,Ws=0,_n=fn=Ot=null,Td=!1,e)throw Error(ce(300));return n}function dm(){var n=Eu!==0;return Eu=0,n}function Hi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Ot.memoizedState=_n=n:_n=_n.next=n,_n}function oi(){if(fn===null){var n=Ot.alternate;n=n!==null?n.memoizedState:null}else n=fn.next;var e=_n===null?Ot.memoizedState:_n.next;if(e!==null)_n=e,fn=n;else{if(n===null)throw Error(ce(310));fn=n,n={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},_n===null?Ot.memoizedState=_n=n:_n=_n.next=n}return _n}function _u(n,e){return typeof e=="function"?e(n):e}function Tf(n){var e=oi(),t=e.queue;if(t===null)throw Error(ce(311));t.lastRenderedReducer=n;var r=fn,i=r.baseQueue,o=t.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,t.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((Ws&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,Ot.lanes|=c,Us|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,Fi(r,e.memoizedState)||(wr=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do o=i.lane,Ot.lanes|=o,Us|=o,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Df(n){var e=oi(),t=e.queue;if(t===null)throw Error(ce(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,o=e.memoizedState;if(i!==null){t.pending=null;var s=i=i.next;do o=n(o,s.action),s=s.next;while(s!==i);Fi(o,e.memoizedState)||(wr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,r]}function zE(){}function jE(n,e){var t=Ot,r=oi(),i=e(),o=!Fi(r.memoizedState,i);if(o&&(r.memoizedState=i,wr=!0),r=r.queue,hm(VE.bind(null,t,r,n),[n]),r.getSnapshot!==e||o||_n!==null&&_n.memoizedState.tag&1){if(t.flags|=2048,wu(9,UE.bind(null,t,r,i,e),void 0,null),wn===null)throw Error(ce(349));Ws&30||WE(t,e,i)}return i}function WE(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function UE(n,e,t,r){e.value=t,e.getSnapshot=r,KE(e)&&$E(n)}function VE(n,e,t){return t(function(){KE(e)&&$E(n)})}function KE(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Fi(n,t)}catch{return!0}}function $E(n){var e=wo(n,1);e!==null&&Si(e,n,1,-1)}function ky(n){var e=Hi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_u,lastRenderedState:n},e.queue=n,n=n.dispatch=QA.bind(null,Ot,n),[e.memoizedState,n]}function wu(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function GE(){return oi().memoizedState}function rd(n,e,t,r){var i=Hi();Ot.flags|=n,i.memoizedState=wu(1|e,t,void 0,r===void 0?null:r)}function sh(n,e,t,r){var i=oi();r=r===void 0?null:r;var o=void 0;if(fn!==null){var s=fn.memoizedState;if(o=s.destroy,r!==null&&um(r,s.deps)){i.memoizedState=wu(e,t,o,r);return}}Ot.flags|=n,i.memoizedState=wu(1|e,t,o,r)}function Ty(n,e){return rd(8390656,8,n,e)}function hm(n,e){return sh(2048,8,n,e)}function qE(n,e){return sh(4,2,n,e)}function XE(n,e){return sh(4,4,n,e)}function YE(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function QE(n,e,t){return t=t!=null?t.concat([n]):null,sh(4,4,YE.bind(null,e,n),t)}function fm(){}function ZE(n,e){var t=oi();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&um(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function JE(n,e){var t=oi();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&um(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function e_(n,e,t){return Ws&21?(Fi(t,e)||(t=oE(),Ot.lanes|=t,Us|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,wr=!0),n.memoizedState=t)}function XA(n,e){var t=yt;yt=t!==0&&4>t?t:4,n(!0);var r=kf.transition;kf.transition={};try{n(!1),e()}finally{yt=t,kf.transition=r}}function t_(){return oi().memoizedState}function YA(n,e,t){var r=is(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},n_(n))r_(e,t);else if(t=BE(n,e,t,r),t!==null){var i=or();Si(t,n,r,i),i_(t,e,r)}}function QA(n,e,t){var r=is(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(n_(n))r_(e,i);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,t);if(i.hasEagerState=!0,i.eagerState=a,Fi(a,s)){var l=e.interleaved;l===null?(i.next=i,im(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=BE(n,e,i,r),t!==null&&(i=or(),Si(t,n,r,i),i_(t,e,r))}}function n_(n){var e=n.alternate;return n===Ot||e!==null&&e===Ot}function r_(n,e){Yl=Td=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function i_(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Vg(n,t)}}var Dd={readContext:ii,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},ZA={readContext:ii,useCallback:function(n,e){return Hi().memoizedState=[n,e===void 0?null:e],n},useContext:ii,useEffect:Ty,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,rd(4194308,4,YE.bind(null,e,n),t)},useLayoutEffect:function(n,e){return rd(4194308,4,n,e)},useInsertionEffect:function(n,e){return rd(4,2,n,e)},useMemo:function(n,e){var t=Hi();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Hi();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=YA.bind(null,Ot,n),[r.memoizedState,n]},useRef:function(n){var e=Hi();return n={current:n},e.memoizedState=n},useState:ky,useDebugValue:fm,useDeferredValue:function(n){return Hi().memoizedState=n},useTransition:function(){var n=ky(!1),e=n[0];return n=XA.bind(null,n[1]),Hi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Ot,i=Hi();if(Rt){if(t===void 0)throw Error(ce(407));t=t()}else{if(t=e(),wn===null)throw Error(ce(349));Ws&30||WE(r,e,t)}i.memoizedState=t;var o={value:t,getSnapshot:e};return i.queue=o,Ty(VE.bind(null,r,o,n),[n]),r.flags|=2048,wu(9,UE.bind(null,r,o,t,e),void 0,null),t},useId:function(){var n=Hi(),e=wn.identifierPrefix;if(Rt){var t=yo,r=vo;t=(r&~(1<<32-Ci(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Eu++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=qA++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},JA={readContext:ii,useCallback:ZE,useContext:ii,useEffect:hm,useImperativeHandle:QE,useInsertionEffect:qE,useLayoutEffect:XE,useMemo:JE,useReducer:Tf,useRef:GE,useState:function(){return Tf(_u)},useDebugValue:fm,useDeferredValue:function(n){var e=oi();return e_(e,fn.memoizedState,n)},useTransition:function(){var n=Tf(_u)[0],e=oi().memoizedState;return[n,e]},useMutableSource:zE,useSyncExternalStore:jE,useId:t_,unstable_isNewReconciler:!1},e1={readContext:ii,useCallback:ZE,useContext:ii,useEffect:hm,useImperativeHandle:QE,useInsertionEffect:qE,useLayoutEffect:XE,useMemo:JE,useReducer:Df,useRef:GE,useState:function(){return Df(_u)},useDebugValue:fm,useDeferredValue:function(n){var e=oi();return fn===null?e.memoizedState=n:e_(e,fn.memoizedState,n)},useTransition:function(){var n=Df(_u)[0],e=oi().memoizedState;return[n,e]},useMutableSource:zE,useSyncExternalStore:jE,useId:t_,unstable_isNewReconciler:!1};function mi(n,e){if(n&&n.defaultProps){e=Ht({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Gp(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Ht({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var ah={isMounted:function(n){return(n=n._reactInternals)?Ys(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=or(),i=is(n),o=bo(r,i);o.payload=e,t!=null&&(o.callback=t),e=ns(n,o,i),e!==null&&(Si(e,n,i,r),td(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=or(),i=is(n),o=bo(r,i);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=ns(n,o,i),e!==null&&(Si(e,n,i,r),td(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=or(),r=is(n),i=bo(t,r);i.tag=2,e!=null&&(i.callback=e),e=ns(n,i,r),e!==null&&(Si(e,n,r,t),td(e,n,r))}};function Dy(n,e,t,r,i,o,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!pu(t,r)||!pu(i,o):!0}function o_(n,e,t){var r=!1,i=ls,o=e.contextType;return typeof o=="object"&&o!==null?o=ii(o):(i=Sr(e)?zs:zn.current,r=e.contextTypes,o=(r=r!=null)?ja(n,i):ls),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ah,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=o),e}function Py(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&ah.enqueueReplaceState(e,e.state,null)}function qp(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},om(n);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ii(o):(o=Sr(e)?zs:zn.current,i.context=ja(n,o)),i.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Gp(n,e,o,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ah.enqueueReplaceState(i,i.state,null),Fd(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Ka(n,e){try{var t="",r=e;do t+=kx(r),r=r.return;while(r);var i=t}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:i,digest:null}}function Pf(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Xp(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var t1=typeof WeakMap=="function"?WeakMap:Map;function s_(n,e,t){t=bo(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Md||(Md=!0,og=r),Xp(n,e)},t}function a_(n,e,t){t=bo(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Xp(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){Xp(n,e),typeof r!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function My(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new t1;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=g1.bind(null,n,e,t),e.then(n,n))}function Iy(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Ry(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=bo(-1,1),e.tag=2,ns(t,e,1))),t.lanes|=1),n)}var n1=Ao.ReactCurrentOwner,wr=!1;function tr(n,e,t,r){e.child=n===null?NE(e,null,t,r):Ua(e,n.child,t,r)}function Ly(n,e,t,r,i){t=t.render;var o=e.ref;return La(e,i),r=cm(n,e,t,r,o,i),t=dm(),n!==null&&!wr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Co(n,e,i)):(Rt&&t&&Zg(e),e.flags|=1,tr(n,e,r,i),e.child)}function Ny(n,e,t,r,i){if(n===null){var o=t.type;return typeof o=="function"&&!_m(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,l_(n,e,o,r,i)):(n=ad(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&i)){var s=o.memoizedProps;if(t=t.compare,t=t!==null?t:pu,t(s,r)&&n.ref===e.ref)return Co(n,e,i)}return e.flags|=1,n=os(o,r),n.ref=e.ref,n.return=e,e.child=n}function l_(n,e,t,r,i){if(n!==null){var o=n.memoizedProps;if(pu(o,r)&&n.ref===e.ref)if(wr=!1,e.pendingProps=r=o,(n.lanes&i)!==0)n.flags&131072&&(wr=!0);else return e.lanes=n.lanes,Co(n,e,i)}return Yp(n,e,t,r,i)}function u_(n,e,t){var r=e.pendingProps,i=r.children,o=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(Sa,Ir),Ir|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,At(Sa,Ir),Ir|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:t,At(Sa,Ir),Ir|=r}else o!==null?(r=o.baseLanes|t,e.memoizedState=null):r=t,At(Sa,Ir),Ir|=r;return tr(n,e,i,t),e.child}function c_(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Yp(n,e,t,r,i){var o=Sr(t)?zs:zn.current;return o=ja(e,o),La(e,i),t=cm(n,e,t,r,o,i),r=dm(),n!==null&&!wr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Co(n,e,i)):(Rt&&r&&Zg(e),e.flags|=1,tr(n,e,t,i),e.child)}function By(n,e,t,r,i){if(Sr(t)){var o=!0;wd(e)}else o=!1;if(La(e,i),e.stateNode===null)id(n,e),o_(e,t,r),qp(e,t,r,i),r=!0;else if(n===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=t.contextType;typeof u=="object"&&u!==null?u=ii(u):(u=Sr(t)?zs:zn.current,u=ja(e,u));var c=t.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Py(e,s,r,u),jo=!1;var f=e.memoizedState;s.state=f,Fd(e,r,s,i),l=e.memoizedState,a!==r||f!==l||Cr.current||jo?(typeof c=="function"&&(Gp(e,t,c,r),l=e.memoizedState),(a=jo||Dy(e,t,a,r,f,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,OE(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:mi(e.type,a),s.props=u,d=e.pendingProps,f=s.context,l=t.contextType,typeof l=="object"&&l!==null?l=ii(l):(l=Sr(t)?zs:zn.current,l=ja(e,l));var g=t.getDerivedStateFromProps;(c=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Py(e,s,r,l),jo=!1,f=e.memoizedState,s.state=f,Fd(e,r,s,i);var m=e.memoizedState;a!==d||f!==m||Cr.current||jo?(typeof g=="function"&&(Gp(e,t,g,r),m=e.memoizedState),(u=jo||Dy(e,t,u,r,f,m,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return Qp(n,e,t,r,o,i)}function Qp(n,e,t,r,i,o){c_(n,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&wy(e,t,!1),Co(n,e,o);r=e.stateNode,n1.current=e;var a=s&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&s?(e.child=Ua(e,n.child,null,o),e.child=Ua(e,null,a,o)):tr(n,e,a,o),e.memoizedState=r.state,i&&wy(e,t,!0),e.child}function d_(n){var e=n.stateNode;e.pendingContext?_y(n,e.pendingContext,e.pendingContext!==e.context):e.context&&_y(n,e.context,!1),sm(n,e.containerInfo)}function Oy(n,e,t,r,i){return Wa(),em(i),e.flags|=256,tr(n,e,t,r),e.child}var Zp={dehydrated:null,treeContext:null,retryLane:0};function Jp(n){return{baseLanes:n,cachePool:null,transitions:null}}function h_(n,e,t){var r=e.pendingProps,i=Bt.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),At(Bt,i&1),n===null)return Kp(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,n=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=ch(s,r,0,null),n=Bs(n,r,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=Jp(t),e.memoizedState=Zp,n):pm(e,s));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return r1(n,e,s,r,a,i,t);if(o){o=r.fallback,s=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=os(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=os(a,o):(o=Bs(o,s,t,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=n.child.memoizedState,s=s===null?Jp(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=n.childLanes&~t,e.memoizedState=Zp,r}return o=n.child,n=o.sibling,r=os(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function pm(n,e){return e=ch({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function kc(n,e,t,r){return r!==null&&em(r),Ua(e,n.child,null,t),n=pm(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function r1(n,e,t,r,i,o,s){if(t)return e.flags&256?(e.flags&=-257,r=Pf(Error(ce(422))),kc(n,e,s,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=ch({mode:"visible",children:r.children},i,0,null),o=Bs(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ua(e,n.child,null,s),e.child.memoizedState=Jp(s),e.memoizedState=Zp,o);if(!(e.mode&1))return kc(n,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ce(419)),r=Pf(o,r,void 0),kc(n,e,s,r)}if(a=(s&n.childLanes)!==0,wr||a){if(r=wn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,wo(n,i),Si(r,n,i,-1))}return Em(),r=Pf(Error(ce(421))),kc(n,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=m1.bind(null,n),i._reactRetry=e,null):(n=o.treeContext,Lr=ts(i.nextSibling),Or=e,Rt=!0,Ei=null,n!==null&&(Yr[Qr++]=vo,Yr[Qr++]=yo,Yr[Qr++]=js,vo=n.id,yo=n.overflow,js=e),e=pm(e,r.children),e.flags|=4096,e)}function Hy(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),$p(n.return,e,t)}function Mf(n,e,t,r,i){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=i)}function f_(n,e,t){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(tr(n,e,r.children,t),r=Bt.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Hy(n,t,e);else if(n.tag===19)Hy(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(At(Bt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&kd(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Mf(e,!1,i,t,o);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&kd(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Mf(e,!0,t,null,o);break;case"together":Mf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function id(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Co(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Us|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ce(153));if(e.child!==null){for(n=e.child,t=os(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=os(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function i1(n,e,t){switch(e.tag){case 3:d_(e),Wa();break;case 5:HE(e);break;case 1:Sr(e.type)&&wd(e);break;case 4:sm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;At(xd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(At(Bt,Bt.current&1),e.flags|=128,null):t&e.child.childLanes?h_(n,e,t):(At(Bt,Bt.current&1),n=Co(n,e,t),n!==null?n.sibling:null);At(Bt,Bt.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return f_(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),At(Bt,Bt.current),r)break;return null;case 22:case 23:return e.lanes=0,u_(n,e,t)}return Co(n,e,t)}var p_,eg,g_,m_;p_=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};eg=function(){};g_=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Ms(Ji.current);var o=null;switch(t){case"input":i=wp(n,i),r=wp(n,r),o=[];break;case"select":i=Ht({},i,{value:void 0}),r=Ht({},r,{value:void 0}),o=[];break;case"textarea":i=xp(n,i),r=xp(n,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Ed)}Fp(t,r);var s;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(au.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i?.[u],r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(t||(t={}),t[s]=l[s])}else t||(o||(o=[]),o.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(au.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&kt("scroll",n),o||a===l||(o=[])):(o=o||[]).push(u,l))}t&&(o=o||[]).push("style",t);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};m_=function(n,e,t,r){t!==r&&(e.flags|=4)};function xl(n,e){if(!Rt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Mn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function o1(n,e,t){var r=e.pendingProps;switch(Jg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(e),null;case 1:return Sr(e.type)&&_d(),Mn(e),null;case 3:return r=e.stateNode,Va(),Dt(Cr),Dt(zn),lm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Ac(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ei!==null&&(lg(Ei),Ei=null))),eg(n,e),Mn(e),null;case 5:am(e);var i=Ms(bu.current);if(t=e.type,n!==null&&e.stateNode!=null)g_(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ce(166));return Mn(e),null}if(n=Ms(Ji.current),Ac(e)){r=e.stateNode,t=e.type;var o=e.memoizedProps;switch(r[Ki]=e,r[vu]=o,n=(e.mode&1)!==0,t){case"dialog":kt("cancel",r),kt("close",r);break;case"iframe":case"object":case"embed":kt("load",r);break;case"video":case"audio":for(i=0;i<jl.length;i++)kt(jl[i],r);break;case"source":kt("error",r);break;case"img":case"image":case"link":kt("error",r),kt("load",r);break;case"details":kt("toggle",r);break;case"input":qv(r,o),kt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},kt("invalid",r);break;case"textarea":Yv(r,o),kt("invalid",r)}Fp(t,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&xc(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&xc(r.textContent,a,n),i=["children",""+a]):au.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&kt("scroll",r)}switch(t){case"input":vc(r),Xv(r,o,!0);break;case"textarea":vc(r),Qv(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ed)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Vb(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=s.createElement(t,{is:r.is}):(n=s.createElement(t),t==="select"&&(s=n,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):n=s.createElementNS(n,t),n[Ki]=e,n[vu]=r,p_(n,e,!1,!1),e.stateNode=n;e:{switch(s=kp(t,r),t){case"dialog":kt("cancel",n),kt("close",n),i=r;break;case"iframe":case"object":case"embed":kt("load",n),i=r;break;case"video":case"audio":for(i=0;i<jl.length;i++)kt(jl[i],n);i=r;break;case"source":kt("error",n),i=r;break;case"img":case"image":case"link":kt("error",n),kt("load",n),i=r;break;case"details":kt("toggle",n),i=r;break;case"input":qv(n,r),i=wp(n,r),kt("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Ht({},r,{value:void 0}),kt("invalid",n);break;case"textarea":Yv(n,r),i=xp(n,r),kt("invalid",n);break;default:i=r}Fp(t,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?Gb(n,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Kb(n,l)):o==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&lu(n,l):typeof l=="number"&&lu(n,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(au.hasOwnProperty(o)?l!=null&&o==="onScroll"&&kt("scroll",n):l!=null&&Og(n,o,l,s))}switch(t){case"input":vc(n),Xv(n,r,!1);break;case"textarea":vc(n),Qv(n);break;case"option":r.value!=null&&n.setAttribute("value",""+as(r.value));break;case"select":n.multiple=!!r.multiple,o=r.value,o!=null?Pa(n,!!r.multiple,o,!1):r.defaultValue!=null&&Pa(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Ed)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mn(e),null;case 6:if(n&&e.stateNode!=null)m_(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ce(166));if(t=Ms(bu.current),Ms(Ji.current),Ac(e)){if(r=e.stateNode,t=e.memoizedProps,r[Ki]=e,(o=r.nodeValue!==t)&&(n=Or,n!==null))switch(n.tag){case 3:xc(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&xc(r.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Ki]=e,e.stateNode=r}return Mn(e),null;case 13:if(Dt(Bt),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Rt&&Lr!==null&&e.mode&1&&!(e.flags&128))RE(),Wa(),e.flags|=98560,o=!1;else if(o=Ac(e),r!==null&&r.dehydrated!==null){if(n===null){if(!o)throw Error(ce(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ce(317));o[Ki]=e}else Wa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mn(e),o=!1}else Ei!==null&&(lg(Ei),Ei=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Bt.current&1?pn===0&&(pn=3):Em())),e.updateQueue!==null&&(e.flags|=4),Mn(e),null);case 4:return Va(),eg(n,e),n===null&&gu(e.stateNode.containerInfo),Mn(e),null;case 10:return rm(e.type._context),Mn(e),null;case 17:return Sr(e.type)&&_d(),Mn(e),null;case 19:if(Dt(Bt),o=e.memoizedState,o===null)return Mn(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)xl(o,!1);else{if(pn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=kd(n),s!==null){for(e.flags|=128,xl(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)o=t,n=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,n=s.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return At(Bt,Bt.current&1|2),e.child}n=n.sibling}o.tail!==null&&Zt()>$a&&(e.flags|=128,r=!0,xl(o,!1),e.lanes=4194304)}else{if(!r)if(n=kd(s),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),xl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Rt)return Mn(e),null}else 2*Zt()-o.renderingStartTime>$a&&t!==1073741824&&(e.flags|=128,r=!0,xl(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(t=o.last,t!==null?t.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Zt(),e.sibling=null,t=Bt.current,At(Bt,r?t&1|2:t&1),e):(Mn(e),null);case 22:case 23:return bm(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ir&1073741824&&(Mn(e),e.subtreeFlags&6&&(e.flags|=8192)):Mn(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function s1(n,e){switch(Jg(e),e.tag){case 1:return Sr(e.type)&&_d(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Va(),Dt(Cr),Dt(zn),lm(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return am(e),null;case 13:if(Dt(Bt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));Wa()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Dt(Bt),null;case 4:return Va(),null;case 10:return rm(e.type._context),null;case 22:case 23:return bm(),null;case 24:return null;default:return null}}var Tc=!1,On=!1,a1=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function Ca(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Vt(n,e,r)}else t.current=null}function tg(n,e,t){try{t()}catch(r){Vt(n,e,r)}}var zy=!1;function l1(n,e){if(Op=vd,n=_E(),Qg(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var s=0,a=-1,l=-1,u=0,c=0,d=n,f=null;t:for(;;){for(var g;d!==t||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===n)break t;if(f===t&&++u===i&&(a=s),f===o&&++c===r&&(l=s),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Hp={focusedElem:n,selectionRange:t},vd=!1,Ae=e;Ae!==null;)if(e=Ae,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ae=n;else for(;Ae!==null;){e=Ae;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,S=m.memoizedState,b=e.stateNode,E=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:mi(e.type,y),S);b.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(C){Vt(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,Ae=n;break}Ae=e.return}return m=zy,zy=!1,m}function Ql(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var o=i.destroy;i.destroy=void 0,o!==void 0&&tg(e,t,o)}i=i.next}while(i!==r)}}function lh(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function ng(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function v_(n){var e=n.alternate;e!==null&&(n.alternate=null,v_(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ki],delete e[vu],delete e[Wp],delete e[VA],delete e[KA])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function y_(n){return n.tag===5||n.tag===3||n.tag===4}function jy(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||y_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rg(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ed));else if(r!==4&&(n=n.child,n!==null))for(rg(n,e,t),n=n.sibling;n!==null;)rg(n,e,t),n=n.sibling}function ig(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(ig(n,e,t),n=n.sibling;n!==null;)ig(n,e,t),n=n.sibling}var xn=null,bi=!1;function Lo(n,e,t){for(t=t.child;t!==null;)b_(n,e,t),t=t.sibling}function b_(n,e,t){if(Zi&&typeof Zi.onCommitFiberUnmount=="function")try{Zi.onCommitFiberUnmount(eh,t)}catch{}switch(t.tag){case 5:On||Ca(t,e);case 6:var r=xn,i=bi;xn=null,Lo(n,e,t),xn=r,bi=i,xn!==null&&(bi?(n=xn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):xn.removeChild(t.stateNode));break;case 18:xn!==null&&(bi?(n=xn,t=t.stateNode,n.nodeType===8?xf(n.parentNode,t):n.nodeType===1&&xf(n,t),hu(n)):xf(xn,t.stateNode));break;case 4:r=xn,i=bi,xn=t.stateNode.containerInfo,bi=!0,Lo(n,e,t),xn=r,bi=i;break;case 0:case 11:case 14:case 15:if(!On&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&tg(t,e,s),i=i.next}while(i!==r)}Lo(n,e,t);break;case 1:if(!On&&(Ca(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Vt(t,e,a)}Lo(n,e,t);break;case 21:Lo(n,e,t);break;case 22:t.mode&1?(On=(r=On)||t.memoizedState!==null,Lo(n,e,t),On=r):Lo(n,e,t);break;default:Lo(n,e,t)}}function Wy(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new a1),e.forEach(function(r){var i=v1.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function di(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var o=n,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:xn=a.stateNode,bi=!1;break e;case 3:xn=a.stateNode.containerInfo,bi=!0;break e;case 4:xn=a.stateNode.containerInfo,bi=!0;break e}a=a.return}if(xn===null)throw Error(ce(160));b_(o,s,i),xn=null,bi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Vt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)E_(e,n),e=e.sibling}function E_(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(di(e,n),Li(n),r&4){try{Ql(3,n,n.return),lh(3,n)}catch(y){Vt(n,n.return,y)}try{Ql(5,n,n.return)}catch(y){Vt(n,n.return,y)}}break;case 1:di(e,n),Li(n),r&512&&t!==null&&Ca(t,t.return);break;case 5:if(di(e,n),Li(n),r&512&&t!==null&&Ca(t,t.return),n.flags&32){var i=n.stateNode;try{lu(i,"")}catch(y){Vt(n,n.return,y)}}if(r&4&&(i=n.stateNode,i!=null)){var o=n.memoizedProps,s=t!==null?t.memoizedProps:o,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Wb(i,o),kp(a,s);var u=kp(a,o);for(s=0;s<l.length;s+=2){var c=l[s],d=l[s+1];c==="style"?Gb(i,d):c==="dangerouslySetInnerHTML"?Kb(i,d):c==="children"?lu(i,d):Og(i,c,d,u)}switch(a){case"input":Cp(i,o);break;case"textarea":Ub(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Pa(i,!!o.multiple,g,!1):f!==!!o.multiple&&(o.defaultValue!=null?Pa(i,!!o.multiple,o.defaultValue,!0):Pa(i,!!o.multiple,o.multiple?[]:"",!1))}i[vu]=o}catch(y){Vt(n,n.return,y)}}break;case 6:if(di(e,n),Li(n),r&4){if(n.stateNode===null)throw Error(ce(162));i=n.stateNode,o=n.memoizedProps;try{i.nodeValue=o}catch(y){Vt(n,n.return,y)}}break;case 3:if(di(e,n),Li(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{hu(e.containerInfo)}catch(y){Vt(n,n.return,y)}break;case 4:di(e,n),Li(n);break;case 13:di(e,n),Li(n),i=n.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(vm=Zt())),r&4&&Wy(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(On=(u=On)||c,di(e,n),On=u):di(e,n),Li(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(Ae=n,c=n.child;c!==null;){for(d=Ae=c;Ae!==null;){switch(f=Ae,g=f.child,f.tag){case 0:case 11:case 14:case 15:Ql(4,f,f.return);break;case 1:Ca(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Vt(r,t,y)}}break;case 5:Ca(f,f.return);break;case 22:if(f.memoizedState!==null){Vy(d);continue}}g!==null?(g.return=f,Ae=g):Vy(d)}c=c.sibling}e:for(c=null,d=n;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$b("display",s))}catch(y){Vt(n,n.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){Vt(n,n.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:di(e,n),Li(n),r&4&&Wy(n);break;case 21:break;default:di(e,n),Li(n)}}function Li(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(y_(t)){var r=t;break e}t=t.return}throw Error(ce(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(lu(i,""),r.flags&=-33);var o=jy(n);ig(n,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=jy(n);rg(n,a,s);break;default:throw Error(ce(161))}}catch(l){Vt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function u1(n,e,t){Ae=n,__(n)}function __(n,e,t){for(var r=(n.mode&1)!==0;Ae!==null;){var i=Ae,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Tc;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||On;a=Tc;var u=On;if(Tc=s,(On=l)&&!u)for(Ae=i;Ae!==null;)s=Ae,l=s.child,s.tag===22&&s.memoizedState!==null?Ky(i):l!==null?(l.return=s,Ae=l):Ky(i);for(;o!==null;)Ae=o,__(o),o=o.sibling;Ae=i,Tc=a,On=u}Uy(n)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Ae=o):Uy(n)}}function Uy(n){for(;Ae!==null;){var e=Ae;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:On||lh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!On)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:mi(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Fy(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Fy(e,s,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&hu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}On||e.flags&512&&ng(e)}catch(f){Vt(e,e.return,f)}}if(e===n){Ae=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ae=t;break}Ae=e.return}}function Vy(n){for(;Ae!==null;){var e=Ae;if(e===n){Ae=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ae=t;break}Ae=e.return}}function Ky(n){for(;Ae!==null;){var e=Ae;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{lh(4,e)}catch(l){Vt(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Vt(e,i,l)}}var o=e.return;try{ng(e)}catch(l){Vt(e,o,l)}break;case 5:var s=e.return;try{ng(e)}catch(l){Vt(e,s,l)}}}catch(l){Vt(e,e.return,l)}if(e===n){Ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ae=a;break}Ae=e.return}}var c1=Math.ceil,Pd=Ao.ReactCurrentDispatcher,gm=Ao.ReactCurrentOwner,ei=Ao.ReactCurrentBatchConfig,dt=0,wn=null,on=null,An=0,Ir=0,Sa=fs(0),pn=0,Cu=null,Us=0,uh=0,mm=0,Zl=null,yr=null,vm=0,$a=1/0,co=null,Md=!1,og=null,rs=null,Dc=!1,Qo=null,Id=0,Jl=0,sg=null,od=-1,sd=0;function or(){return dt&6?Zt():od!==-1?od:od=Zt()}function is(n){return n.mode&1?dt&2&&An!==0?An&-An:GA.transition!==null?(sd===0&&(sd=oE()),sd):(n=yt,n!==0||(n=window.event,n=n===void 0?16:hE(n.type)),n):1}function Si(n,e,t,r){if(50<Jl)throw Jl=0,sg=null,Error(ce(185));Ou(n,t,r),(!(dt&2)||n!==wn)&&(n===wn&&(!(dt&2)&&(uh|=t),pn===4&&Go(n,An)),xr(n,r),t===1&&dt===0&&!(e.mode&1)&&($a=Zt()+500,oh&&ps()))}function xr(n,e){var t=n.callbackNode;Gx(n,e);var r=md(n,n===wn?An:0);if(r===0)t!==null&&ey(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&ey(t),e===1)n.tag===0?$A($y.bind(null,n)):PE($y.bind(null,n)),WA(function(){!(dt&6)&&ps()}),t=null;else{switch(sE(r)){case 1:t=Ug;break;case 4:t=rE;break;case 16:t=gd;break;case 536870912:t=iE;break;default:t=gd}t=T_(t,w_.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function w_(n,e){if(od=-1,sd=0,dt&6)throw Error(ce(327));var t=n.callbackNode;if(Na()&&n.callbackNode!==t)return null;var r=md(n,n===wn?An:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Rd(n,r);else{e=r;var i=dt;dt|=2;var o=S_();(wn!==n||An!==e)&&(co=null,$a=Zt()+500,Ns(n,e));do try{f1();break}catch(a){C_(n,a)}while(!0);nm(),Pd.current=o,dt=i,on!==null?e=0:(wn=null,An=0,e=pn)}if(e!==0){if(e===2&&(i=Ip(n),i!==0&&(r=i,e=ag(n,i))),e===1)throw t=Cu,Ns(n,0),Go(n,r),xr(n,Zt()),t;if(e===6)Go(n,r);else{if(i=n.current.alternate,!(r&30)&&!d1(i)&&(e=Rd(n,r),e===2&&(o=Ip(n),o!==0&&(r=o,e=ag(n,o))),e===1))throw t=Cu,Ns(n,0),Go(n,r),xr(n,Zt()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(ce(345));case 2:Fs(n,yr,co);break;case 3:if(Go(n,r),(r&130023424)===r&&(e=vm+500-Zt(),10<e)){if(md(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){or(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=jp(Fs.bind(null,n,yr,co),e);break}Fs(n,yr,co);break;case 4:if(Go(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var s=31-Ci(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Zt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*c1(r/1960))-r,10<r){n.timeoutHandle=jp(Fs.bind(null,n,yr,co),r);break}Fs(n,yr,co);break;case 5:Fs(n,yr,co);break;default:throw Error(ce(329))}}}return xr(n,Zt()),n.callbackNode===t?w_.bind(null,n):null}function ag(n,e){var t=Zl;return n.current.memoizedState.isDehydrated&&(Ns(n,e).flags|=256),n=Rd(n,e),n!==2&&(e=yr,yr=t,e!==null&&lg(e)),n}function lg(n){yr===null?yr=n:yr.push.apply(yr,n)}function d1(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],o=i.getSnapshot;i=i.value;try{if(!Fi(o(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Go(n,e){for(e&=~mm,e&=~uh,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ci(e),r=1<<t;n[t]=-1,e&=~r}}function $y(n){if(dt&6)throw Error(ce(327));Na();var e=md(n,0);if(!(e&1))return xr(n,Zt()),null;var t=Rd(n,e);if(n.tag!==0&&t===2){var r=Ip(n);r!==0&&(e=r,t=ag(n,r))}if(t===1)throw t=Cu,Ns(n,0),Go(n,e),xr(n,Zt()),t;if(t===6)throw Error(ce(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Fs(n,yr,co),xr(n,Zt()),null}function ym(n,e){var t=dt;dt|=1;try{return n(e)}finally{dt=t,dt===0&&($a=Zt()+500,oh&&ps())}}function Vs(n){Qo!==null&&Qo.tag===0&&!(dt&6)&&Na();var e=dt;dt|=1;var t=ei.transition,r=yt;try{if(ei.transition=null,yt=1,n)return n()}finally{yt=r,ei.transition=t,dt=e,!(dt&6)&&ps()}}function bm(){Ir=Sa.current,Dt(Sa)}function Ns(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,jA(t)),on!==null)for(t=on.return;t!==null;){var r=t;switch(Jg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_d();break;case 3:Va(),Dt(Cr),Dt(zn),lm();break;case 5:am(r);break;case 4:Va();break;case 13:Dt(Bt);break;case 19:Dt(Bt);break;case 10:rm(r.type._context);break;case 22:case 23:bm()}t=t.return}if(wn=n,on=n=os(n.current,null),An=Ir=e,pn=0,Cu=null,mm=uh=Us=0,yr=Zl=null,Ps!==null){for(e=0;e<Ps.length;e++)if(t=Ps[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,o=t.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}t.pending=r}Ps=null}return n}function C_(n,e){do{var t=on;try{if(nm(),nd.current=Dd,Td){for(var r=Ot.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Td=!1}if(Ws=0,_n=fn=Ot=null,Yl=!1,Eu=0,gm.current=null,t===null||t.return===null){pn=1,Cu=e,on=null;break}e:{var o=n,s=t.return,a=t,l=e;if(e=An,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Iy(s);if(g!==null){g.flags&=-257,Ry(g,s,a,o,e),g.mode&1&&My(o,u,e),e=g,l=u;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){My(o,u,e),Em();break e}l=Error(ce(426))}}else if(Rt&&a.mode&1){var S=Iy(s);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Ry(S,s,a,o,e),em(Ka(l,a));break e}}o=l=Ka(l,a),pn!==4&&(pn=2),Zl===null?Zl=[o]:Zl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=s_(o,l,e);Ay(o,b);break e;case 1:a=l;var E=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(rs===null||!rs.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var C=a_(o,a,e);Ay(o,C);break e}}o=o.return}while(o!==null)}A_(t)}catch(T){e=T,on===t&&t!==null&&(on=t=t.return);continue}break}while(!0)}function S_(){var n=Pd.current;return Pd.current=Dd,n===null?Dd:n}function Em(){(pn===0||pn===3||pn===2)&&(pn=4),wn===null||!(Us&268435455)&&!(uh&268435455)||Go(wn,An)}function Rd(n,e){var t=dt;dt|=2;var r=S_();(wn!==n||An!==e)&&(co=null,Ns(n,e));do try{h1();break}catch(i){C_(n,i)}while(!0);if(nm(),dt=t,Pd.current=r,on!==null)throw Error(ce(261));return wn=null,An=0,pn}function h1(){for(;on!==null;)x_(on)}function f1(){for(;on!==null&&!Ox();)x_(on)}function x_(n){var e=k_(n.alternate,n,Ir);n.memoizedProps=n.pendingProps,e===null?A_(n):on=e,gm.current=null}function A_(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=s1(t,e),t!==null){t.flags&=32767,on=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{pn=6,on=null;return}}else if(t=o1(t,e,Ir),t!==null){on=t;return}if(e=e.sibling,e!==null){on=e;return}on=e=n}while(e!==null);pn===0&&(pn=5)}function Fs(n,e,t){var r=yt,i=ei.transition;try{ei.transition=null,yt=1,p1(n,e,t,r)}finally{ei.transition=i,yt=r}return null}function p1(n,e,t,r){do Na();while(Qo!==null);if(dt&6)throw Error(ce(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ce(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(qx(n,o),n===wn&&(on=wn=null,An=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Dc||(Dc=!0,T_(gd,function(){return Na(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=ei.transition,ei.transition=null;var s=yt;yt=1;var a=dt;dt|=4,gm.current=null,l1(n,t),E_(t,n),RA(Hp),vd=!!Op,Hp=Op=null,n.current=t,u1(t),Hx(),dt=a,yt=s,ei.transition=o}else n.current=t;if(Dc&&(Dc=!1,Qo=n,Id=i),o=n.pendingLanes,o===0&&(rs=null),Wx(t.stateNode),xr(n,Zt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Md)throw Md=!1,n=og,og=null,n;return Id&1&&n.tag!==0&&Na(),o=n.pendingLanes,o&1?n===sg?Jl++:(Jl=0,sg=n):Jl=0,ps(),null}function Na(){if(Qo!==null){var n=sE(Id),e=ei.transition,t=yt;try{if(ei.transition=null,yt=16>n?16:n,Qo===null)var r=!1;else{if(n=Qo,Qo=null,Id=0,dt&6)throw Error(ce(331));var i=dt;for(dt|=4,Ae=n.current;Ae!==null;){var o=Ae,s=o.child;if(Ae.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Ae=u;Ae!==null;){var c=Ae;switch(c.tag){case 0:case 11:case 15:Ql(8,c,o)}var d=c.child;if(d!==null)d.return=c,Ae=d;else for(;Ae!==null;){c=Ae;var f=c.sibling,g=c.return;if(v_(c),c===u){Ae=null;break}if(f!==null){f.return=g,Ae=f;break}Ae=g}}}var m=o.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}Ae=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Ae=s;else e:for(;Ae!==null;){if(o=Ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ql(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,Ae=b;break e}Ae=o.return}}var E=n.current;for(Ae=E;Ae!==null;){s=Ae;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,Ae=w;else e:for(s=E;Ae!==null;){if(a=Ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lh(9,a)}}catch(T){Vt(a,a.return,T)}if(a===s){Ae=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Ae=C;break e}Ae=a.return}}if(dt=i,ps(),Zi&&typeof Zi.onPostCommitFiberRoot=="function")try{Zi.onPostCommitFiberRoot(eh,n)}catch{}r=!0}return r}finally{yt=t,ei.transition=e}}return!1}function Gy(n,e,t){e=Ka(t,e),e=s_(n,e,1),n=ns(n,e,1),e=or(),n!==null&&(Ou(n,1,e),xr(n,e))}function Vt(n,e,t){if(n.tag===3)Gy(n,n,t);else for(;e!==null;){if(e.tag===3){Gy(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rs===null||!rs.has(r))){n=Ka(t,n),n=a_(e,n,1),e=ns(e,n,1),n=or(),e!==null&&(Ou(e,1,n),xr(e,n));break}}e=e.return}}function g1(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=or(),n.pingedLanes|=n.suspendedLanes&t,wn===n&&(An&t)===t&&(pn===4||pn===3&&(An&130023424)===An&&500>Zt()-vm?Ns(n,0):mm|=t),xr(n,e)}function F_(n,e){e===0&&(n.mode&1?(e=Ec,Ec<<=1,!(Ec&130023424)&&(Ec=4194304)):e=1);var t=or();n=wo(n,e),n!==null&&(Ou(n,e,t),xr(n,t))}function m1(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),F_(n,t)}function v1(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(e),F_(n,t)}var k_;k_=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Cr.current)wr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return wr=!1,i1(n,e,t);wr=!!(n.flags&131072)}else wr=!1,Rt&&e.flags&1048576&&ME(e,Sd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;id(n,e),n=e.pendingProps;var i=ja(e,zn.current);La(e,t),i=cm(null,e,r,n,i,t);var o=dm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sr(r)?(o=!0,wd(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,om(e),i.updater=ah,e.stateNode=i,i._reactInternals=e,qp(e,r,n,t),e=Qp(null,e,r,!0,o,t)):(e.tag=0,Rt&&o&&Zg(e),tr(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(id(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=b1(r),n=mi(r,n),i){case 0:e=Yp(null,e,r,n,t);break e;case 1:e=By(null,e,r,n,t);break e;case 11:e=Ly(null,e,r,n,t);break e;case 14:e=Ny(null,e,r,mi(r.type,n),t);break e}throw Error(ce(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mi(r,i),Yp(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mi(r,i),By(n,e,r,i,t);case 3:e:{if(d_(e),n===null)throw Error(ce(387));r=e.pendingProps,o=e.memoizedState,i=o.element,OE(n,e),Fd(e,r,null,t);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Ka(Error(ce(423)),e),e=Oy(n,e,r,t,i);break e}else if(r!==i){i=Ka(Error(ce(424)),e),e=Oy(n,e,r,t,i);break e}else for(Lr=ts(e.stateNode.containerInfo.firstChild),Or=e,Rt=!0,Ei=null,t=NE(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Wa(),r===i){e=Co(n,e,t);break e}tr(n,e,r,t)}e=e.child}return e;case 5:return HE(e),n===null&&Kp(e),r=e.type,i=e.pendingProps,o=n!==null?n.memoizedProps:null,s=i.children,zp(r,i)?s=null:o!==null&&zp(r,o)&&(e.flags|=32),c_(n,e),tr(n,e,s,t),e.child;case 6:return n===null&&Kp(e),null;case 13:return h_(n,e,t);case 4:return sm(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Ua(e,null,r,t):tr(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mi(r,i),Ly(n,e,r,i,t);case 7:return tr(n,e,e.pendingProps,t),e.child;case 8:return tr(n,e,e.pendingProps.children,t),e.child;case 12:return tr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,At(xd,r._currentValue),r._currentValue=s,o!==null)if(Fi(o.value,s)){if(o.children===i.children&&!Cr.current){e=Co(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=bo(-1,t&-t),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),$p(o.return,t,e),a.lanes|=t;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ce(341));s.lanes|=t,a=s.alternate,a!==null&&(a.lanes|=t),$p(s,t,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}tr(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,La(e,t),i=ii(i),r=r(i),e.flags|=1,tr(n,e,r,t),e.child;case 14:return r=e.type,i=mi(r,e.pendingProps),i=mi(r.type,i),Ny(n,e,r,i,t);case 15:return l_(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mi(r,i),id(n,e),e.tag=1,Sr(r)?(n=!0,wd(e)):n=!1,La(e,t),o_(e,r,i),qp(e,r,i,t),Qp(null,e,r,!0,n,t);case 19:return f_(n,e,t);case 22:return u_(n,e,t)}throw Error(ce(156,e.tag))};function T_(n,e){return nE(n,e)}function y1(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(n,e,t,r){return new y1(n,e,t,r)}function _m(n){return n=n.prototype,!(!n||!n.isReactComponent)}function b1(n){if(typeof n=="function")return _m(n)?1:0;if(n!=null){if(n=n.$$typeof,n===zg)return 11;if(n===jg)return 14}return 2}function os(n,e){var t=n.alternate;return t===null?(t=Jr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function ad(n,e,t,r,i,o){var s=2;if(r=n,typeof n=="function")_m(n)&&(s=1);else if(typeof n=="string")s=5;else e:switch(n){case pa:return Bs(t.children,i,o,e);case Hg:s=8,i|=8;break;case yp:return n=Jr(12,t,e,i|2),n.elementType=yp,n.lanes=o,n;case bp:return n=Jr(13,t,e,i),n.elementType=bp,n.lanes=o,n;case Ep:return n=Jr(19,t,e,i),n.elementType=Ep,n.lanes=o,n;case Hb:return ch(t,i,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Bb:s=10;break e;case Ob:s=9;break e;case zg:s=11;break e;case jg:s=14;break e;case zo:s=16,r=null;break e}throw Error(ce(130,n==null?n:typeof n,""))}return e=Jr(s,t,e,i),e.elementType=n,e.type=r,e.lanes=o,e}function Bs(n,e,t,r){return n=Jr(7,n,r,e),n.lanes=t,n}function ch(n,e,t,r){return n=Jr(22,n,r,e),n.elementType=Hb,n.lanes=t,n.stateNode={isHidden:!1},n}function If(n,e,t){return n=Jr(6,n,null,e),n.lanes=t,n}function Rf(n,e,t){return e=Jr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function E1(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pf(0),this.expirationTimes=pf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function wm(n,e,t,r,i,o,s,a,l){return n=new E1(n,e,t,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Jr(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},om(o),n}function _1(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fa,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function D_(n){if(!n)return ls;n=n._reactInternals;e:{if(Ys(n)!==n||n.tag!==1)throw Error(ce(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(n.tag===1){var t=n.type;if(Sr(t))return DE(n,t,e)}return e}function P_(n,e,t,r,i,o,s,a,l){return n=wm(t,r,!0,n,i,o,s,a,l),n.context=D_(null),t=n.current,r=or(),i=is(t),o=bo(r,i),o.callback=e??null,ns(t,o,i),n.current.lanes=i,Ou(n,i,r),xr(n,r),n}function dh(n,e,t,r){var i=e.current,o=or(),s=is(i);return t=D_(t),e.context===null?e.context=t:e.pendingContext=t,e=bo(o,s),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=ns(i,e,s),n!==null&&(Si(n,i,s,o),td(n,i,s)),s}function Ld(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function qy(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Cm(n,e){qy(n,e),(n=n.alternate)&&qy(n,e)}function w1(){return null}var M_=typeof reportError=="function"?reportError:function(n){console.error(n)};function Sm(n){this._internalRoot=n}hh.prototype.render=Sm.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ce(409));dh(n,e,null,null)};hh.prototype.unmount=Sm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Vs(function(){dh(null,n,null,null)}),e[_o]=null}};function hh(n){this._internalRoot=n}hh.prototype.unstable_scheduleHydration=function(n){if(n){var e=uE();n={blockedOn:null,target:n,priority:e};for(var t=0;t<$o.length&&e!==0&&e<$o[t].priority;t++);$o.splice(t,0,n),t===0&&dE(n)}};function xm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function fh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Xy(){}function C1(n,e,t,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Ld(s);o.call(u)}}var s=P_(e,r,n,0,null,!1,!1,"",Xy);return n._reactRootContainer=s,n[_o]=s.current,gu(n.nodeType===8?n.parentNode:n),Vs(),s}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Ld(l);a.call(u)}}var l=wm(n,0,!1,null,null,!1,!1,"",Xy);return n._reactRootContainer=l,n[_o]=l.current,gu(n.nodeType===8?n.parentNode:n),Vs(function(){dh(e,l,t,r)}),l}function ph(n,e,t,r,i){var o=t._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Ld(s);a.call(l)}}dh(e,s,n,i)}else s=C1(t,e,n,i,r);return Ld(s)}aE=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=zl(e.pendingLanes);t!==0&&(Vg(e,t|1),xr(e,Zt()),!(dt&6)&&($a=Zt()+500,ps()))}break;case 13:Vs(function(){var r=wo(n,1);if(r!==null){var i=or();Si(r,n,1,i)}}),Cm(n,1)}};Kg=function(n){if(n.tag===13){var e=wo(n,134217728);if(e!==null){var t=or();Si(e,n,134217728,t)}Cm(n,134217728)}};lE=function(n){if(n.tag===13){var e=is(n),t=wo(n,e);if(t!==null){var r=or();Si(t,n,e,r)}Cm(n,e)}};uE=function(){return yt};cE=function(n,e){var t=yt;try{return yt=n,e()}finally{yt=t}};Dp=function(n,e,t){switch(e){case"input":if(Cp(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=ih(r);if(!i)throw Error(ce(90));jb(r),Cp(r,i)}}}break;case"textarea":Ub(n,t);break;case"select":e=t.value,e!=null&&Pa(n,!!t.multiple,e,!1)}};Yb=ym;Qb=Vs;var S1={usingClientEntryPoint:!1,Events:[zu,ya,ih,qb,Xb,ym]},Al={findFiberByHostInstance:Ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x1={bundleType:Al.bundleType,version:Al.version,rendererPackageName:Al.rendererPackageName,rendererConfig:Al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ao.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=eE(n),n===null?null:n.stateNode},findFiberByHostInstance:Al.findFiberByHostInstance||w1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pc.isDisabled&&Pc.supportsFiber)try{eh=Pc.inject(x1),Zi=Pc}catch{}}jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S1;jr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xm(e))throw Error(ce(200));return _1(n,e,null,t)};jr.createRoot=function(n,e){if(!xm(n))throw Error(ce(299));var t=!1,r="",i=M_;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=wm(n,1,!1,null,null,t,!1,r,i),n[_o]=e.current,gu(n.nodeType===8?n.parentNode:n),new Sm(e)};jr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ce(188)):(n=Object.keys(n).join(","),Error(ce(268,n)));return n=eE(e),n=n===null?null:n.stateNode,n};jr.flushSync=function(n){return Vs(n)};jr.hydrate=function(n,e,t){if(!fh(e))throw Error(ce(200));return ph(null,n,e,!0,t)};jr.hydrateRoot=function(n,e,t){if(!xm(n))throw Error(ce(405));var r=t!=null&&t.hydratedSources||null,i=!1,o="",s=M_;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=P_(e,null,n,1,t??null,i,!1,o,s),n[_o]=e.current,gu(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new hh(e)};jr.render=function(n,e,t){if(!fh(e))throw Error(ce(200));return ph(null,n,e,!1,t)};jr.unmountComponentAtNode=function(n){if(!fh(n))throw Error(ce(40));return n._reactRootContainer?(Vs(function(){ph(null,null,n,!1,function(){n._reactRootContainer=null,n[_o]=null})}),!0):!1};jr.unstable_batchedUpdates=ym;jr.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!fh(t))throw Error(ce(200));if(n==null||n._reactInternals===void 0)throw Error(ce(38));return ph(n,e,t,!1,r)};jr.version="18.3.1-next-f1338f8080-20240426";function I_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I_)}catch(n){console.error(n)}}I_(),Ib.exports=jr;var il=Ib.exports,R_,Yy=il;R_=mp.createRoot=Yy.createRoot,mp.hydrateRoot=Yy.hydrateRoot;const ug=A.createContext(void 0),gh=()=>{const n=A.useContext(ug);if(n===void 0)throw new Error("usePdfHighlighterContext must be used within PdfHighlighter!");return n},L_=(n,{width:e,height:t})=>({x1:n.left,y1:n.top,x2:n.left+n.width,y2:n.top+n.height,width:e,height:t,pageNumber:n.pageNumber}),N_=({boundingRect:n,rects:e},t)=>{const r=n.pageNumber,i=t.getPageView(r-1).viewport,o=s=>L_(s,i);return{boundingRect:o(n),rects:(e||[]).map(o)}},A1=(n,e)=>{const[t,r,i,o]=e.convertToViewportRectangle([n.x1,n.y1,n.x2,n.y2]);return{left:Math.min(t,i),top:Math.min(r,o),width:Math.abs(i-t),height:Math.abs(r-o),pageNumber:n.pageNumber}},B_=(n,e,t=!1)=>{const{width:r,height:i}=e;if(t)return A1(n,e);if(n.x1===void 0)throw new Error("You are using old position format, please update");const o=r*n.x1/n.width,s=i*n.y1/n.height,a=r*n.x2/n.width,l=i*n.y2/n.height;return{left:o,top:s,width:a-o,height:l-s,pageNumber:n.pageNumber}},F1=({boundingRect:n,rects:e,usePdfCoordinates:t},r)=>{const i=n.pageNumber,o=r.getPageView(i-1).viewport,s=a=>B_(a,o,t);return{boundingRect:s(n),rects:(e||[]).map(s)}},k1=n=>{const e=Array.from(n).map(c=>{const{left:d,top:f,width:g,height:m,pageNumber:y}=c,S=d,b=d+g,E=f,w=f+m;return{X0:S,X1:b,Y0:E,Y1:w,pageNumber:y}});let t=Number.MAX_SAFE_INTEGER;e.forEach(c=>{t=Math.min(t,c.pageNumber??t)});const r=e.filter(c=>(c.X0>0||c.X1>0||c.Y0>0||c.Y1>0)&&c.pageNumber===t),i=r.reduce((c,d)=>({X0:Math.min(c.X0,d.X0),X1:Math.max(c.X1,d.X1),Y0:Math.min(c.Y0,d.Y0),Y1:Math.max(c.Y1,d.Y1),pageNumber:t}),r[0]),{X0:o,X1:s,Y0:a,Y1:l,pageNumber:u}=i;return{left:o,top:a,width:s-o,height:l-a,pageNumber:u}},T1=n=>n.sort((e,t)=>{const r=(e.pageNumber||0)*e.top-(t.pageNumber||0)*t.top;return r===0?e.left-t.left:r}),D1=(n,e)=>n.pageNumber===e.pageNumber&&n.left<=e.left&&e.left<=n.left+n.width,P1=(n,e,t=5)=>n.pageNumber===e.pageNumber&&Math.abs(n.top-e.top)<t&&Math.abs(n.height-e.height)<t,M1=(n,e)=>n.pageNumber===e.pageNumber&&n.top>e.top&&n.left>e.left&&n.top+n.height<e.top+e.height&&n.left+n.width<e.left+e.width,I1=(n,e,t=10)=>{const r=n.left+n.width,i=e.left+e.width;return n.pageNumber===e.pageNumber&&n.left<=e.left&&r<=i&&e.left-r<=t},Qy=(n,e)=>{n.width=Math.max(e.width-n.left+e.left,n.width)},R1=n=>{const e=T1(n),t=new Set,r=e.filter(o=>e.every(s=>!M1(o,s)));let i=0;for(;i<=2;)r.forEach(o=>{r.forEach(s=>{o===s||t.has(o)||t.has(s)||P1(o,s)&&(D1(o,s)&&(Qy(o,s),o.height=Math.max(o.height,s.height),t.add(s)),I1(o,s)&&(Qy(o,s),t.add(s)))})}),i+=1;return r.filter(o=>!t.has(o))},L1=(n,e)=>!(n.top<e.top||n.bottom>e.bottom||n.right>e.right||n.left<e.left),N1=(n,e,t=!0)=>{const r=Array.from(n.getClientRects()),i=[];for(const o of r)for(const s of e){const a=s.node.getBoundingClientRect();if(L1(o,a)&&o.width>0&&o.height>0&&o.width<a.width&&o.left>a.left&&o.height<a.height){const l={top:o.top+s.node.scrollTop-a.top,left:o.left+s.node.scrollLeft-a.left,width:o.width,height:o.height,pageNumber:s.number};i.push(l)}}return t?R1(i):i},B1=n=>n.reduce((e,t)=>(t&&[t.position.boundingRect.pageNumber,...t.position.rects.map(i=>i.pageNumber||0)].forEach(i=>{e[i]||=[];const o={...t,position:{...t.position,rects:t.position.rects.filter(s=>i===s.pageNumber)}};e[i].push(o)}),e),{}),O_=n=>(n||{}).ownerDocument||document,Nd=n=>(O_(n)||{}).defaultView||window,Su=n=>n instanceof HTMLElement||n instanceof Nd(n).HTMLElement,O1=n=>n instanceof HTMLCanvasElement||n instanceof Nd(n).HTMLCanvasElement,$i=n=>n,eu=n=>{const e=$i(n.closest(".page"));if(!e||!Su(e))return null;const t=Number($i(e).dataset.pageNumber);return{node:e,number:t}},H1=n=>{const e=n.startContainer.parentElement,t=n.endContainer.parentElement;if(!Su(e)||!Su(t))return[];const r=eu($i(e)),i=eu($i(t));if(!r?.number||!i?.number)return[];if(r.number===i.number)return[r];if(r.number===i.number-1)return[r,i];const o=[];let s=r.number;const a=r.node.ownerDocument;for(;s<=i.number;){const l=eu(a.querySelector(`[data-page-number='${s}'`));l&&o.push(l),s++}return o},z1=(n,e)=>{const t=O_(n);let r=n.querySelector(`.${e}`);return!r&&n.children.length&&(r=t.createElement("div"),r.className=e,n.appendChild(r)),r},H_=A.createContext(void 0),j1=()=>{const n=A.useContext(H_);if(n===void 0)throw new Error("useHighlightContainerContext must be used within a child of PdfHighlighter!");return n},W1=(n,e)=>{const{left:t,top:r,width:i,height:o}=e,s=n?n.ownerDocument:null,a=s&&s.createElement("canvas");if(!a||!O1(a))return"";a.width=i,a.height=o;const l=a.getContext("2d");if(!l||!n)return"";const u=window.devicePixelRatio;return l.drawImage(n,t*u,r*u,i*u,o*u,0,0,i,o),a.toDataURL("image/png")},z_=(n,e,t)=>W1(t.getPageView(e-1).canvas,n),U1="empty-id",V1=({highlightsByPage:n,pageNumber:e,scrolledToHighlightId:t,viewer:r,highlightBindings:i,children:o})=>{const s=n[e]||[];return $.jsx("div",{children:s.map((a,l)=>{const u={...a,id:"id"in a?a.id:U1,position:F1(a.position,r)},c=t===u.id,d={highlight:u,viewportToScaled:f=>{const g=r.getPageView((f.pageNumber||e)-1).viewport;return L_(f,g)},screenshot:f=>z_(f,e,r),isScrolledTo:c,highlightBindings:i};return $.jsx(H_.Provider,{value:d,children:o},l)})})},Zy=(n,e)=>({left:Math.min(e.x,n.x),top:Math.min(e.y,n.y),width:Math.abs(e.x-n.x),height:Math.abs(e.y-n.y)}),Jy=(n,e,t)=>{const r=n.getBoundingClientRect();return{x:e-r.left+n.scrollLeft,y:t-r.top+n.scrollTop-window.scrollY}},K1=({viewer:n,onSelection:e,onReset:t,onDragStart:r,enableAreaSelection:i,onChange:o,style:s})=>{const[a,l]=A.useState(null),[u,c]=A.useState(null),[d,f]=A.useState(!1),g=A.useRef(null),m=A.useRef(null),y=()=>{t&&t(),l(null),c(null),f(!1)};return A.useEffect(()=>{if(o&&o(!!(a&&u)),!g.current)return;const S=$i(g.current.parentElement),b=C=>{if(!a||!u||!m.current)return;const T=Zy(a,u),D=T.width>=1&&T.height>=1;if(!S.contains($i(C.target))||!D){y();return}f(!0);const k=eu(m.current);if(!k)return;const M={...T,top:T.top-k.node.offsetTop,left:T.left-k.node.offsetLeft,pageNumber:k.number},N={boundingRect:M,rects:[]},U=N_(N,n),ne=z_(M,M.pageNumber,n);e&&e(N,U,ne,y,C)},E=C=>{!g.current||!a||d||c(Jy(S,C.pageX,C.pageY))},w=C=>{const T=k=>i(k)&&Su(k.target)&&!!$i(k.target).closest(".page"),D=k=>a&&!$i(k.target).closest(".PdfHighlighter__tip-container");if(!T(C)){D(C)&&y();return}m.current=$i(C.target),r&&r(C),l(Jy(S,C.pageX,C.pageY)),c(null),f(!1)};return S.addEventListener("mousemove",E),S.addEventListener("mousedown",w),document.addEventListener("mouseup",b),()=>{S.removeEventListener("mousemove",E),S.removeEventListener("mousedown",w),document.removeEventListener("mouseup",b)}},[a,u]),$.jsx("div",{className:"MouseSelection-container",ref:g,children:a&&u&&$.jsx("div",{className:"MouseSelection",style:{...Zy(a,u),...s}})})},$1=(n,e,t)=>Math.min(Math.max(n,e),t),Lf=5,G1=({viewer:n,updateTipPositionRef:e})=>{const[t,r]=A.useState(0),[i,o]=A.useState(0),s=A.useRef(null),a=()=>{if(!s.current)return;const{offsetHeight:N,offsetWidth:U}=s.current;r(N),o(U)};e.current=a,A.useLayoutEffect(()=>{a()},[a]);const{getTip:l}=gh(),u=l();if(!u)return null;const{position:c,content:d}=u,{boundingRect:f}=c,g=f.pageNumber,m=n.getPageView(g-1).div,y=m.getBoundingClientRect(),{left:S,width:b}=y,E=n.container.scrollTop,w=m.offsetLeft+f.left+f.width/2,C=f.top+m.offsetTop,T=C+f.height,k=C-t-Lf<E?T+Lf:C-t-Lf,M=$1(w-i/2,0,S+b-i);return $.jsx("div",{className:"PdfHighlighter__tip-container",style:{top:k,left:M,height:"max-content",width:"max-content"},ref:s,children:d})};let j_,W_,U_;(async()=>{const n=await nx(()=>import("./pdf_viewer-BCv0lRkq.js"),[]);j_=n.EventBus,W_=n.PDFLinkService,U_=n.PDFViewer})();const q1=10,X1="auto",Y1="rgba(153,193,218,255)",Q1=n=>z1(n,"PdfHighlighter__highlight-layer"),e0=(n,e)=>{n.viewer?.classList.toggle("PdfHighlighter--disable-selection",e)},Z1=({highlights:n,onScrollAway:e,pdfScaleValue:t=X1,onSelection:r,onCreateGhostHighlight:i,onRemoveGhostHighlight:o,selectionTip:s,enableAreaSelection:a,mouseSelectionStyle:l,pdfDocument:u,children:c,textSelectionColor:d=Y1,utilsRef:f,style:g})=>{const[m,y]=A.useState(null),[S,b]=A.useState(!1),E=A.useRef(null),w=A.useRef({}),C=A.useRef(null),T=A.useRef(null),D=A.useRef(null),k=A.useRef(!1),M=A.useRef(!1),N=A.useRef(()=>{}),U=A.useRef(new j_),ne=A.useRef(new W_({eventBus:U.current,externalLinkTarget:2})),oe=A.useRef(null),ae=A.useRef(null);A.useLayoutEffect(()=>{if(!E.current)return;const fe=_x(()=>{ae.current=ae.current||new U_({container:E.current,eventBus:U.current,textLayerMode:2,removePageBorders:!0,linkService:ne.current}),ae.current.setDocument(u),ne.current.setDocument(u),ne.current.setViewer(ae.current),b(!0)},100);return fe(),()=>{fe.cancel()}},[document]),A.useLayoutEffect(()=>{if(!E.current)return;oe.current=new ResizeObserver(G),oe.current.observe(E.current);const fe=E.current.ownerDocument;return U.current.on("textlayerrendered",ie),U.current.on("pagesinit",G),fe.addEventListener("keydown",Q),ie(),()=>{U.current.off("pagesinit",G),U.current.off("textlayerrendered",ie),fe.removeEventListener("keydown",Q),oe.current?.disconnect()}},[s,n,r]);const te=()=>{e&&e(),D.current=null,ie()},we=()=>{const fe=E.current,nt=Nd(fe).getSelection();if(!fe||!nt||nt.isCollapsed||!ae.current)return;const me=nt.rangeCount>0?nt.getRangeAt(0):null;if(!me||!fe.contains(me.commonAncestorContainer))return;const Qe=H1(me);if(!Qe||Qe.length===0)return;const wt=N1(me,Qe);if(wt.length===0)return;const ze={boundingRect:k1(wt),rects:wt},bt=N_(ze,ae.current),je={text:nt.toString().split(`
`).join(" ")};T.current={content:je,type:"text",position:bt,makeGhostHighlight:()=>(C.current={content:je,type:"text",position:bt},i&&i(C.current),De(),ie(),C.current)},r&&r(T.current),s&&y({position:ze,content:s})},J=fe=>{!Su(fe.target)||$i(fe.target).closest(".PdfHighlighter__tip-container")||(y(null),De(),Oe(),Te(!1))},Q=fe=>{fe.code==="Escape"&&(De(),Oe(),y(null))},G=()=>{ae.current&&(ae.current.currentScaleValue=t.toString())},re=(fe,nt)=>{ae.current&&fe.reactRoot.render($.jsx(ug.Provider,{value:He,children:$.jsx(V1,{highlightsByPage:B1([...n,C.current]),pageNumber:nt,scrolledToHighlightId:D.current,viewer:ae.current,highlightBindings:fe,children:c})}))},ie=()=>{if(ae.current)for(let fe=1;fe<=u.numPages;fe++){const nt=w.current[fe];if(nt?.container?.isConnected)re(nt,fe);else{const{textLayer:me}=ae.current.getPageView(fe-1)||{};if(!me)continue;const Qe=Q1(me.div);if(Qe){const wt=R_(Qe);w.current[fe]={reactRoot:wt,container:Qe,textLayer:me.div},re(w.current[fe],fe)}}}},Ce=()=>!!T.current||!!C.current||k.current||M.current,Te=fe=>{fe!==void 0?M.current=fe:M.current=!M.current,ae.current&&ae.current.viewer?.classList.toggle("PdfHighlighter--disable-selection",M.current)},Oe=()=>{o&&C.current&&o(C.current),C.current=null,ie()},De=()=>{T.current=null;const fe=E.current,nt=Nd(fe).getSelection();!fe||!nt||nt.removeAllRanges()},He={isEditingOrHighlighting:Ce,getCurrentSelection:()=>T.current,getGhostHighlight:()=>C.current,removeGhostHighlight:Oe,toggleEditInProgress:Te,isEditInProgress:()=>M.current,isSelectionInProgress:()=>!!T.current||k.current,scrollToHighlight:fe=>{const{boundingRect:nt,usePdfCoordinates:me}=fe.position,Qe=nt.pageNumber;ae.current.container.removeEventListener("scroll",te);const wt=ae.current.getPageView(Qe-1).viewport;ae.current.scrollPageIntoView({pageNumber:Qe,destArray:[null,{name:"XYZ"},...wt.convertToPdfPoint(0,B_(nt,wt,me).top-q1),0]}),D.current=fe.id,ie(),setTimeout(()=>{ae.current.container.addEventListener("scroll",te,{once:!0})},100)},getViewer:()=>ae.current,getTip:()=>m,setTip:y,updateTipPosition:N.current};return f(He),$.jsx(ug.Provider,{value:He,children:$.jsxs("div",{ref:E,className:"PdfHighlighter",onPointerDown:J,onPointerUp:we,style:g,children:[$.jsx("div",{className:"pdfViewer"}),$.jsx("style",{children:`
          .textLayer ::selection {
            background: ${d};
          }
        `}),S&&$.jsx(G1,{viewer:ae.current,updateTipPositionRef:N}),S&&a&&$.jsx(K1,{viewer:ae.current,onChange:fe=>k.current=fe,enableAreaSelection:a,style:l,onDragStart:()=>e0(ae.current,!0),onReset:()=>{T.current=null,e0(ae.current,!1)},onSelection:(fe,nt,me,Qe)=>{T.current={content:{image:me},type:"area",position:nt,makeGhostHighlight:()=>(C.current={position:nt,type:"area",content:{image:me}},i&&i(C.current),Qe(),ie(),C.current)},r&&r(T.current),s&&y({position:fe,content:s})}})]})})},J1=({highlight:n,onClick:e,onMouseOver:t,onMouseOut:r,isScrolledTo:i,onContextMenu:o,style:s})=>{const a=i?"TextHighlight--scrolledTo":"",{rects:l}=n.position;return $.jsx("div",{className:`TextHighlight ${a}`,onContextMenu:o,children:$.jsx("div",{className:"TextHighlight__parts",children:l.map((u,c)=>$.jsx("div",{onMouseOver:t,onMouseOut:r,onClick:e,style:{...u,...s},className:"TextHighlight__part"},c))})})},eF=({onMoveAway:n,paddingX:e,paddingY:t,children:r})=>{const i=A.useRef(null),o=s=>{if(!i.current)return;const{clientX:a,clientY:l}=s,{left:u,top:c,width:d,height:f}=i.current.getBoundingClientRect(),g=a>u-e&&a<u+d+e,m=l>c-t&&l<c+f+t;g&&m||n()};return A.useEffect(()=>(document.addEventListener("mousemove",o),()=>{document.removeEventListener("mousemove",o)}),[]),$.jsx("div",{ref:i,children:r})},tF=({onMouseEnter:n,highlightTip:e,onMouseLeave:t,children:r})=>{const i=A.useRef(!1),{setTip:o,isEditingOrHighlighting:s}=gh();return $.jsx("div",{onMouseEnter:()=>{if(i.current=!0,n&&n(),!s()&&e){const a=$.jsx(eF,{onMoveAway:()=>{i.current||(o(null),t&&t())},paddingX:60,paddingY:30,children:e.content});o({position:e.position,content:a})}},onMouseLeave:()=>{i.current=!1,!e&&t&&t()},children:r})};var mh={exports:{}},V_={},K_={exports:{}},nF="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rF=nF,iF=rF;function $_(){}function G_(){}G_.resetWarningCache=$_;var oF=function(){function n(r,i,o,s,a,l){if(l!==iF){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:G_,resetWarningCache:$_};return t.PropTypes=t,t};K_.exports=oF();var q_=K_.exports;function X_(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=X_(n[e]))&&(r&&(r+=" "),r+=t);else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function t0(){for(var n,e,t=0,r="";t<arguments.length;)(n=arguments[t++])&&(e=X_(n))&&(r&&(r+=" "),r+=e);return r}const sF=Object.freeze(Object.defineProperty({__proto__:null,clsx:t0,default:t0},Symbol.toStringTag,{value:"Module"})),aF=PS(sF);var Kt={},eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.dontSetMe=hF;eo.findInArray=lF;eo.int=dF;eo.isFunction=uF;eo.isNum=cF;function lF(n,e){for(let t=0,r=n.length;t<r;t++)if(e.apply(e,[n[t],t,n]))return n[t]}function uF(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Function]"}function cF(n){return typeof n=="number"&&!isNaN(n)}function dF(n){return parseInt(n,10)}function hF(n,e,t){if(n[e])return new Error("Invalid prop ".concat(e," passed to ").concat(t," - do not set this, set it on the child."))}var Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.browserPrefixToKey=Q_;Qs.browserPrefixToStyle=fF;Qs.default=void 0;Qs.getPrefix=Y_;const Nf=["Moz","Webkit","O","ms"];function Y_(){var n;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(n=window.document)===null||n===void 0||(n=n.documentElement)===null||n===void 0?void 0:n.style;if(!t||e in t)return"";for(let r=0;r<Nf.length;r++)if(Q_(e,Nf[r])in t)return Nf[r];return""}function Q_(n,e){return e?"".concat(e).concat(pF(n)):n}function fF(n,e){return e?"-".concat(e.toLowerCase(),"-").concat(n):n}function pF(n){let e="",t=!0;for(let r=0;r<n.length;r++)t?(e+=n[r].toUpperCase(),t=!1):n[r]==="-"?t=!0:e+=n[r];return e}Qs.default=Y_();Object.defineProperty(Kt,"__esModule",{value:!0});Kt.addClassName=ew;Kt.addEvent=vF;Kt.addUserSelectStyles=kF;Kt.createCSSTransform=SF;Kt.createSVGTransform=xF;Kt.getTouch=AF;Kt.getTouchIdentifier=FF;Kt.getTranslation=Am;Kt.innerHeight=_F;Kt.innerWidth=wF;Kt.matchesSelector=J_;Kt.matchesSelectorAndParentsTo=mF;Kt.offsetXYFromParent=CF;Kt.outerHeight=bF;Kt.outerWidth=EF;Kt.removeClassName=tw;Kt.removeEvent=yF;Kt.removeUserSelectStyles=TF;var Hr=eo,n0=gF(Qs);function Z_(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Z_=function(r){return r?t:e})(n)}function gF(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=Z_(e);if(t&&t.has(n))return t.get(n);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)){var s=i?Object.getOwnPropertyDescriptor(n,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=n[o]}return r.default=n,t&&t.set(n,r),r}let Mc="";function J_(n,e){return Mc||(Mc=(0,Hr.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,Hr.isFunction)(n[t])})),(0,Hr.isFunction)(n[Mc])?n[Mc](e):!1}function mF(n,e,t){let r=n;do{if(J_(r,e))return!0;if(r===t)return!1;r=r.parentNode}while(r);return!1}function vF(n,e,t,r){if(!n)return;const i={capture:!0,...r};n.addEventListener?n.addEventListener(e,t,i):n.attachEvent?n.attachEvent("on"+e,t):n["on"+e]=t}function yF(n,e,t,r){if(!n)return;const i={capture:!0,...r};n.removeEventListener?n.removeEventListener(e,t,i):n.detachEvent?n.detachEvent("on"+e,t):n["on"+e]=null}function bF(n){let e=n.clientHeight;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,Hr.int)(t.borderTopWidth),e+=(0,Hr.int)(t.borderBottomWidth),e}function EF(n){let e=n.clientWidth;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e+=(0,Hr.int)(t.borderLeftWidth),e+=(0,Hr.int)(t.borderRightWidth),e}function _F(n){let e=n.clientHeight;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,Hr.int)(t.paddingTop),e-=(0,Hr.int)(t.paddingBottom),e}function wF(n){let e=n.clientWidth;const t=n.ownerDocument.defaultView.getComputedStyle(n);return e-=(0,Hr.int)(t.paddingLeft),e-=(0,Hr.int)(t.paddingRight),e}function CF(n,e,t){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),o=(n.clientX+e.scrollLeft-i.left)/t,s=(n.clientY+e.scrollTop-i.top)/t;return{x:o,y:s}}function SF(n,e){const t=Am(n,e,"px");return{[(0,n0.browserPrefixToKey)("transform",n0.default)]:t}}function xF(n,e){return Am(n,e,"")}function Am(n,e,t){let{x:r,y:i}=n,o="translate(".concat(r).concat(t,",").concat(i).concat(t,")");if(e){const s="".concat(typeof e.x=="string"?e.x:e.x+t),a="".concat(typeof e.y=="string"?e.y:e.y+t);o="translate(".concat(s,", ").concat(a,")")+o}return o}function AF(n,e){return n.targetTouches&&(0,Hr.findInArray)(n.targetTouches,t=>e===t.identifier)||n.changedTouches&&(0,Hr.findInArray)(n.changedTouches,t=>e===t.identifier)}function FF(n){if(n.targetTouches&&n.targetTouches[0])return n.targetTouches[0].identifier;if(n.changedTouches&&n.changedTouches[0])return n.changedTouches[0].identifier}function kF(n){if(!n)return;let e=n.getElementById("react-draggable-style-el");e||(e=n.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,n.getElementsByTagName("head")[0].appendChild(e)),n.body&&ew(n.body,"react-draggable-transparent-selection")}function TF(n){if(n)try{if(n.body&&tw(n.body,"react-draggable-transparent-selection"),n.selection)n.selection.empty();else{const e=(n.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function ew(n,e){n.classList?n.classList.add(e):n.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(n.className+=" ".concat(e))}function tw(n,e){n.classList?n.classList.remove(e):n.className=n.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var to={};Object.defineProperty(to,"__esModule",{value:!0});to.canDragX=MF;to.canDragY=IF;to.createCoreData=LF;to.createDraggableData=NF;to.getBoundPosition=DF;to.getControlPosition=RF;to.snapToGrid=PF;var Pr=eo,xa=Kt;function DF(n,e,t){if(!n.props.bounds)return[e,t];let{bounds:r}=n.props;r=typeof r=="string"?r:BF(r);const i=Fm(n);if(typeof r=="string"){const{ownerDocument:o}=i,s=o.defaultView;let a;if(r==="parent"?a=i.parentNode:a=o.querySelector(r),!(a instanceof s.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const l=a,u=s.getComputedStyle(i),c=s.getComputedStyle(l);r={left:-i.offsetLeft+(0,Pr.int)(c.paddingLeft)+(0,Pr.int)(u.marginLeft),top:-i.offsetTop+(0,Pr.int)(c.paddingTop)+(0,Pr.int)(u.marginTop),right:(0,xa.innerWidth)(l)-(0,xa.outerWidth)(i)-i.offsetLeft+(0,Pr.int)(c.paddingRight)-(0,Pr.int)(u.marginRight),bottom:(0,xa.innerHeight)(l)-(0,xa.outerHeight)(i)-i.offsetTop+(0,Pr.int)(c.paddingBottom)-(0,Pr.int)(u.marginBottom)}}return(0,Pr.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Pr.isNum)(r.bottom)&&(t=Math.min(t,r.bottom)),(0,Pr.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Pr.isNum)(r.top)&&(t=Math.max(t,r.top)),[e,t]}function PF(n,e,t){const r=Math.round(e/n[0])*n[0],i=Math.round(t/n[1])*n[1];return[r,i]}function MF(n){return n.props.axis==="both"||n.props.axis==="x"}function IF(n){return n.props.axis==="both"||n.props.axis==="y"}function RF(n,e,t){const r=typeof e=="number"?(0,xa.getTouch)(n,e):null;if(typeof e=="number"&&!r)return null;const i=Fm(t),o=t.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,xa.offsetXYFromParent)(r||n,o,t.props.scale)}function LF(n,e,t){const r=!(0,Pr.isNum)(n.lastX),i=Fm(n);return r?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:t,x:e,y:t}:{node:i,deltaX:e-n.lastX,deltaY:t-n.lastY,lastX:n.lastX,lastY:n.lastY,x:e,y:t}}function NF(n,e){const t=n.props.scale;return{node:e.node,x:n.state.x+e.deltaX/t,y:n.state.y+e.deltaY/t,deltaX:e.deltaX/t,deltaY:e.deltaY/t,lastX:n.state.x,lastY:n.state.y}}function BF(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}}function Fm(n){const e=n.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var vh={},yh={};Object.defineProperty(yh,"__esModule",{value:!0});yh.default=OF;function OF(){}Object.defineProperty(vh,"__esModule",{value:!0});vh.default=void 0;var Bf=zF(A),fr=km(q_),HF=km(il),In=Kt,No=to,Of=eo,Fl=km(yh);function km(n){return n&&n.__esModule?n:{default:n}}function nw(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(nw=function(r){return r?t:e})(n)}function zF(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=nw(e);if(t&&t.has(n))return t.get(n);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)){var s=i?Object.getOwnPropertyDescriptor(n,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=n[o]}return r.default=n,t&&t.set(n,r),r}function Zn(n,e,t){return e=jF(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jF(n){var e=WF(n,"string");return typeof e=="symbol"?e:String(e)}function WF(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const gi={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Bo=gi.mouse,bh=class extends Bf.Component{constructor(){super(...arguments),Zn(this,"dragging",!1),Zn(this,"lastX",NaN),Zn(this,"lastY",NaN),Zn(this,"touchIdentifier",null),Zn(this,"mounted",!1),Zn(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=t;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,In.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,In.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;e.type==="touchstart"&&e.preventDefault();const i=(0,In.getTouchIdentifier)(e);this.touchIdentifier=i;const o=(0,No.getControlPosition)(e,i,this);if(o==null)return;const{x:s,y:a}=o,l=(0,No.createCoreData)(this,s,a);(0,Fl.default)("DraggableCore: handleDragStart: %j",l),(0,Fl.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,In.addUserSelectStyles)(r),this.dragging=!0,this.lastX=s,this.lastY=a,(0,In.addEvent)(r,Bo.move,this.handleDrag),(0,In.addEvent)(r,Bo.stop,this.handleDragStop))}),Zn(this,"handleDrag",e=>{const t=(0,No.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:r,y:i}=t;if(Array.isArray(this.props.grid)){let a=r-this.lastX,l=i-this.lastY;if([a,l]=(0,No.snapToGrid)(this.props.grid,a,l),!a&&!l)return;r=this.lastX+a,i=this.lastY+l}const o=(0,No.createCoreData)(this,r,i);if((0,Fl.default)("DraggableCore: handleDrag: %j",o),this.props.onDrag(e,o)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=r,this.lastY=i}),Zn(this,"handleDragStop",e=>{if(!this.dragging)return;const t=(0,No.getControlPosition)(e,this.touchIdentifier,this);if(t==null)return;let{x:r,y:i}=t;if(Array.isArray(this.props.grid)){let l=r-this.lastX||0,u=i-this.lastY||0;[l,u]=(0,No.snapToGrid)(this.props.grid,l,u),r=this.lastX+l,i=this.lastY+u}const o=(0,No.createCoreData)(this,r,i);if(this.props.onStop(e,o)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,In.removeUserSelectStyles)(a.ownerDocument),(0,Fl.default)("DraggableCore: handleDragStop: %j",o),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Fl.default)("DraggableCore: Removing handlers"),(0,In.removeEvent)(a.ownerDocument,Bo.move,this.handleDrag),(0,In.removeEvent)(a.ownerDocument,Bo.stop,this.handleDragStop))}),Zn(this,"onMouseDown",e=>(Bo=gi.mouse,this.handleDragStart(e))),Zn(this,"onMouseUp",e=>(Bo=gi.mouse,this.handleDragStop(e))),Zn(this,"onTouchStart",e=>(Bo=gi.touch,this.handleDragStart(e))),Zn(this,"onTouchEnd",e=>(Bo=gi.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,In.addEvent)(e,gi.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,In.removeEvent)(t,gi.mouse.move,this.handleDrag),(0,In.removeEvent)(t,gi.touch.move,this.handleDrag),(0,In.removeEvent)(t,gi.mouse.stop,this.handleDragStop),(0,In.removeEvent)(t,gi.touch.stop,this.handleDragStop),(0,In.removeEvent)(e,gi.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,In.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(t=this.props)===null||t===void 0||(t=t.nodeRef)===null||t===void 0?void 0:t.current:HF.default.findDOMNode(this)}render(){return Bf.cloneElement(Bf.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};vh.default=bh;Zn(bh,"displayName","DraggableCore");Zn(bh,"propTypes",{allowAnyClick:fr.default.bool,children:fr.default.node.isRequired,disabled:fr.default.bool,enableUserSelectHack:fr.default.bool,offsetParent:function(n,e){if(n[e]&&n[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:fr.default.arrayOf(fr.default.number),handle:fr.default.string,cancel:fr.default.string,nodeRef:fr.default.object,onStart:fr.default.func,onDrag:fr.default.func,onStop:fr.default.func,onMouseDown:fr.default.func,scale:fr.default.number,className:Of.dontSetMe,style:Of.dontSetMe,transform:Of.dontSetMe});Zn(bh,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),n.default=void 0;var e=f(A),t=c(q_),r=c(il),i=c(aF),o=Kt,s=to,a=eo,l=c(vh),u=c(yh);function c(E){return E&&E.__esModule?E:{default:E}}function d(E){if(typeof WeakMap!="function")return null;var w=new WeakMap,C=new WeakMap;return(d=function(T){return T?C:w})(E)}function f(E,w){if(E&&E.__esModule)return E;if(E===null||typeof E!="object"&&typeof E!="function")return{default:E};var C=d(w);if(C&&C.has(E))return C.get(E);var T={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in E)if(k!=="default"&&Object.prototype.hasOwnProperty.call(E,k)){var M=D?Object.getOwnPropertyDescriptor(E,k):null;M&&(M.get||M.set)?Object.defineProperty(T,k,M):T[k]=E[k]}return T.default=E,C&&C.set(E,T),T}function g(){return g=Object.assign?Object.assign.bind():function(E){for(var w=1;w<arguments.length;w++){var C=arguments[w];for(var T in C)Object.prototype.hasOwnProperty.call(C,T)&&(E[T]=C[T])}return E},g.apply(this,arguments)}function m(E,w,C){return w=y(w),w in E?Object.defineProperty(E,w,{value:C,enumerable:!0,configurable:!0,writable:!0}):E[w]=C,E}function y(E){var w=S(E,"string");return typeof w=="symbol"?w:String(w)}function S(E,w){if(typeof E!="object"||E===null)return E;var C=E[Symbol.toPrimitive];if(C!==void 0){var T=C.call(E,w);if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(E)}class b extends e.Component{static getDerivedStateFromProps(w,C){let{position:T}=w,{prevPropsPosition:D}=C;return T&&(!D||T.x!==D.x||T.y!==D.y)?((0,u.default)("Draggable: getDerivedStateFromProps %j",{position:T,prevPropsPosition:D}),{x:T.x,y:T.y,prevPropsPosition:{...T}}):null}constructor(w){super(w),m(this,"onDragStart",(C,T)=>{if((0,u.default)("Draggable: onDragStart: %j",T),this.props.onStart(C,(0,s.createDraggableData)(this,T))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),m(this,"onDrag",(C,T)=>{if(!this.state.dragging)return!1;(0,u.default)("Draggable: onDrag: %j",T);const D=(0,s.createDraggableData)(this,T),k={x:D.x,y:D.y,slackX:0,slackY:0};if(this.props.bounds){const{x:N,y:U}=k;k.x+=this.state.slackX,k.y+=this.state.slackY;const[ne,oe]=(0,s.getBoundPosition)(this,k.x,k.y);k.x=ne,k.y=oe,k.slackX=this.state.slackX+(N-k.x),k.slackY=this.state.slackY+(U-k.y),D.x=k.x,D.y=k.y,D.deltaX=k.x-this.state.x,D.deltaY=k.y-this.state.y}if(this.props.onDrag(C,D)===!1)return!1;this.setState(k)}),m(this,"onDragStop",(C,T)=>{if(!this.state.dragging||this.props.onStop(C,(0,s.createDraggableData)(this,T))===!1)return!1;(0,u.default)("Draggable: onDragStop: %j",T);const k={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:N,y:U}=this.props.position;k.x=N,k.y=U}this.setState(k)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var w,C;return(w=(C=this.props)===null||C===void 0||(C=C.nodeRef)===null||C===void 0?void 0:C.current)!==null&&w!==void 0?w:r.default.findDOMNode(this)}render(){const{axis:w,bounds:C,children:T,defaultPosition:D,defaultClassName:k,defaultClassNameDragging:M,defaultClassNameDragged:N,position:U,positionOffset:ne,scale:oe,...ae}=this.props;let te={},we=null;const Q=!!!U||this.state.dragging,G=U||D,re={x:(0,s.canDragX)(this)&&Q?this.state.x:G.x,y:(0,s.canDragY)(this)&&Q?this.state.y:G.y};this.state.isElementSVG?we=(0,o.createSVGTransform)(re,ne):te=(0,o.createCSSTransform)(re,ne);const ie=(0,i.default)(T.props.className||"",k,{[M]:this.state.dragging,[N]:this.state.dragged});return e.createElement(l.default,g({},ae,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(T),{className:ie,style:{...T.props.style,...te},transform:we}))}}n.default=b,m(b,"displayName","Draggable"),m(b,"propTypes",{...l.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),m(b,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(V_);const{default:rw,DraggableCore:UF}=V_;mh.exports=rw;mh.exports.default=rw;mh.exports.DraggableCore=UF;var VF=mh.exports;const KF=Zd(VF);var rn=function(){return rn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},rn.apply(this,arguments)},r0={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},i0={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Ic={width:"20px",height:"20px",position:"absolute",zIndex:1},$F={top:rn(rn({},r0),{top:"-5px"}),right:rn(rn({},i0),{left:void 0,right:"-5px"}),bottom:rn(rn({},r0),{top:void 0,bottom:"-5px"}),left:rn(rn({},i0),{left:"-5px"}),topRight:rn(rn({},Ic),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:rn(rn({},Ic),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:rn(rn({},Ic),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:rn(rn({},Ic),{left:"-10px",top:"-10px",cursor:"nw-resize"})},GF=A.memo(function(n){var e=n.onResizeStart,t=n.direction,r=n.children,i=n.replaceStyles,o=n.className,s=A.useCallback(function(u){e(u,t)},[e,t]),a=A.useCallback(function(u){e(u,t)},[e,t]),l=A.useMemo(function(){return rn(rn({position:"absolute",userSelect:"none"},$F[t]),i??{})},[i,t]);return $.jsx("div",{className:o||void 0,style:l,onMouseDown:s,onTouchStart:a,children:r})}),qF=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zi=function(){return zi=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},zi.apply(this,arguments)},XF={width:"auto",height:"auto"},Rc=function(n,e,t){return Math.max(Math.min(n,t),e)},o0=function(n,e,t){var r=Math.round(n/e);return r*e+t*(r-1)},oa=function(n,e){return new RegExp(n,"i").test(e)},Lc=function(n){return!!(n.touches&&n.touches.length)},YF=function(n){return!!((n.clientX||n.clientX===0)&&(n.clientY||n.clientY===0))},s0=function(n,e,t){t===void 0&&(t=0);var r=e.reduce(function(o,s,a){return Math.abs(s-n)<Math.abs(e[o]-n)?a:o},0),i=Math.abs(e[r]-n);return t===0||i<t?e[r]:n},Hf=function(n){return n=n.toString(),n==="auto"||n.endsWith("px")||n.endsWith("%")||n.endsWith("vh")||n.endsWith("vw")||n.endsWith("vmax")||n.endsWith("vmin")?n:"".concat(n,"px")},Nc=function(n,e,t,r){if(n&&typeof n=="string"){if(n.endsWith("px"))return Number(n.replace("px",""));if(n.endsWith("%")){var i=Number(n.replace("%",""))/100;return e*i}if(n.endsWith("vw")){var i=Number(n.replace("vw",""))/100;return t*i}if(n.endsWith("vh")){var i=Number(n.replace("vh",""))/100;return r*i}}return n},QF=function(n,e,t,r,i,o,s){return r=Nc(r,n.width,e,t),i=Nc(i,n.height,e,t),o=Nc(o,n.width,e,t),s=Nc(s,n.height,e,t),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof i>"u"?void 0:Number(i),minWidth:typeof o>"u"?void 0:Number(o),minHeight:typeof s>"u"?void 0:Number(s)}},ZF=function(n){return Array.isArray(n)?n:[n,n]},JF=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],a0="__resizable_base__",ek=function(n){qF(e,n);function e(t){var r,i,o,s,a=n.call(this,t)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.delta={width:0,height:0},a.appendBase=function(){if(!a.resizable||!a.window)return null;var l=a.parentNode;if(!l)return null;var u=a.window.document.createElement("div");return u.style.width="100%",u.style.height="100%",u.style.position="absolute",u.style.transform="scale(0, 0)",u.style.left="0",u.style.flex="0 0 100%",u.classList?u.classList.add(a0):u.className+=a0,l.appendChild(u),u},a.removeBase=function(l){var u=a.parentNode;u&&u.removeChild(l)},a.state={isResizing:!1,width:(i=(r=a.propsSize)===null||r===void 0?void 0:r.width)!==null&&i!==void 0?i:"auto",height:(s=(o=a.propsSize)===null||o===void 0?void 0:o.height)!==null&&s!==void 0?s:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||XF},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var t=0,r=0;if(this.resizable&&this.window){var i=this.resizable.offsetWidth,o=this.resizable.offsetHeight,s=this.resizable.style.position;s!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:i,r=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:o,this.resizable.style.position=s}return{width:t,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var t=this,r=this.props.size,i=function(a){var l;if(typeof t.state[a]>"u"||t.state[a]==="auto")return"auto";if(t.propsSize&&t.propsSize[a]&&(!((l=t.propsSize[a])===null||l===void 0)&&l.toString().endsWith("%"))){if(t.state[a].toString().endsWith("%"))return t.state[a].toString();var u=t.getParentSize(),c=Number(t.state[a].toString().replace("px","")),d=c/u[a]*100;return"".concat(d,"%")}return Hf(t.state[a])},o=r&&typeof r.width<"u"&&!this.state.isResizing?Hf(r.width):i("width"),s=r&&typeof r.height<"u"&&!this.state.isResizing?Hf(r.height):i("height");return{width:o,height:s}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var r=!1,i=this.parentNode.style.flexWrap;i!=="wrap"&&(r=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var o={width:t.offsetWidth,height:t.offsetHeight};return r&&(this.parentNode.style.flexWrap=i),this.removeBase(t),o},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,r){var i=this.propsSize&&this.propsSize[r];return this.state[r]==="auto"&&this.state.original[r]===t&&(typeof i>"u"||i==="auto")?"auto":t},e.prototype.calculateNewMaxFromBoundary=function(t,r){var i=this.props.boundsByDirection,o=this.state.direction,s=i&&oa("left",o),a=i&&oa("top",o),l,u;if(this.props.bounds==="parent"){var c=this.parentNode;c&&(l=s?this.resizableRight-this.parentLeft:c.offsetWidth+(this.parentLeft-this.resizableLeft),u=a?this.resizableBottom-this.parentTop:c.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(l=s?this.resizableRight:this.window.innerWidth-this.resizableLeft,u=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(l=s?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),u=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return l&&Number.isFinite(l)&&(t=t&&t<l?t:l),u&&Number.isFinite(u)&&(r=r&&r<u?r:u),{maxWidth:t,maxHeight:r}},e.prototype.calculateNewSizeFromDirection=function(t,r){var i=this.props.scale||1,o=ZF(this.props.resizeRatio||1),s=o[0],a=o[1],l=this.state,u=l.direction,c=l.original,d=this.props,f=d.lockAspectRatio,g=d.lockAspectRatioExtraHeight,m=d.lockAspectRatioExtraWidth,y=c.width,S=c.height,b=g||0,E=m||0;return oa("right",u)&&(y=c.width+(t-c.x)*s/i,f&&(S=(y-E)/this.ratio+b)),oa("left",u)&&(y=c.width-(t-c.x)*s/i,f&&(S=(y-E)/this.ratio+b)),oa("bottom",u)&&(S=c.height+(r-c.y)*a/i,f&&(y=(S-b)*this.ratio+E)),oa("top",u)&&(S=c.height-(r-c.y)*a/i,f&&(y=(S-b)*this.ratio+E)),{newWidth:y,newHeight:S}},e.prototype.calculateNewSizeFromAspectRatio=function(t,r,i,o){var s=this.props,a=s.lockAspectRatio,l=s.lockAspectRatioExtraHeight,u=s.lockAspectRatioExtraWidth,c=typeof o.width>"u"?10:o.width,d=typeof i.width>"u"||i.width<0?t:i.width,f=typeof o.height>"u"?10:o.height,g=typeof i.height>"u"||i.height<0?r:i.height,m=l||0,y=u||0;if(a){var S=(f-m)*this.ratio+y,b=(g-m)*this.ratio+y,E=(c-y)/this.ratio+m,w=(d-y)/this.ratio+m,C=Math.max(c,S),T=Math.min(d,b),D=Math.max(f,E),k=Math.min(g,w);t=Rc(t,C,T),r=Rc(r,D,k)}else t=Rc(t,c,d),r=Rc(r,f,g);return{newWidth:t,newHeight:r}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var r=this.parentNode;if(r){var i=r.getBoundingClientRect();this.parentLeft=i.left*t,this.parentTop=i.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var o=this.props.bounds.getBoundingClientRect();this.targetLeft=o.left*t,this.targetTop=o.top*t}if(this.resizable){var s=this.resizable.getBoundingClientRect(),a=s.left,l=s.top,u=s.right,c=s.bottom;this.resizableLeft=a*t,this.resizableRight=u*t,this.resizableTop=l*t,this.resizableBottom=c*t}},e.prototype.onResizeStart=function(t,r){if(!(!this.resizable||!this.window)){var i=0,o=0;if(t.nativeEvent&&YF(t.nativeEvent)?(i=t.nativeEvent.clientX,o=t.nativeEvent.clientY):t.nativeEvent&&Lc(t.nativeEvent)&&(i=t.nativeEvent.touches[0].clientX,o=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var s=this.props.onResizeStart(t,r,this.resizable);if(s===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var a,l=this.window.getComputedStyle(this.resizable);if(l.flexBasis!=="auto"){var u=this.parentNode;if(u){var c=this.window.getComputedStyle(u).flexDirection;this.flexDir=c.startsWith("row")?"row":"column",a=l.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var d={original:{x:i,y:o,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:zi(zi({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:r,flexBasis:a};this.setState(d)}},e.prototype.onMouseMove=function(t){var r=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Lc(t))try{t.preventDefault(),t.stopPropagation()}catch{}var i=this.props,o=i.maxWidth,s=i.maxHeight,a=i.minWidth,l=i.minHeight,u=Lc(t)?t.touches[0].clientX:t.clientX,c=Lc(t)?t.touches[0].clientY:t.clientY,d=this.state,f=d.direction,g=d.original,m=d.width,y=d.height,S=this.getParentSize(),b=QF(S,this.window.innerWidth,this.window.innerHeight,o,s,a,l);o=b.maxWidth,s=b.maxHeight,a=b.minWidth,l=b.minHeight;var E=this.calculateNewSizeFromDirection(u,c),w=E.newHeight,C=E.newWidth,T=this.calculateNewMaxFromBoundary(o,s);this.props.snap&&this.props.snap.x&&(C=s0(C,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(w=s0(w,this.props.snap.y,this.props.snapGap));var D=this.calculateNewSizeFromAspectRatio(C,w,{width:T.maxWidth,height:T.maxHeight},{width:a,height:l});if(C=D.newWidth,w=D.newHeight,this.props.grid){var k=o0(C,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),M=o0(w,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),N=this.props.snapGap||0,U=N===0||Math.abs(k-C)<=N?k:C,ne=N===0||Math.abs(M-w)<=N?M:w;C=U,w=ne}var oe={width:C-g.width,height:w-g.height};if(this.delta=oe,m&&typeof m=="string"){if(m.endsWith("%")){var ae=C/S.width*100;C="".concat(ae,"%")}else if(m.endsWith("vw")){var te=C/this.window.innerWidth*100;C="".concat(te,"vw")}else if(m.endsWith("vh")){var we=C/this.window.innerHeight*100;C="".concat(we,"vh")}}if(y&&typeof y=="string"){if(y.endsWith("%")){var ae=w/S.height*100;w="".concat(ae,"%")}else if(y.endsWith("vw")){var te=w/this.window.innerWidth*100;w="".concat(te,"vw")}else if(y.endsWith("vh")){var we=w/this.window.innerHeight*100;w="".concat(we,"vh")}}var J={width:this.createSizeForCssProperty(C,"width"),height:this.createSizeForCssProperty(w,"height")};this.flexDir==="row"?J.flexBasis=J.width:this.flexDir==="column"&&(J.flexBasis=J.height);var Q=this.state.width!==J.width,G=this.state.height!==J.height,re=this.state.flexBasis!==J.flexBasis,ie=Q||G||re;ie&&il.flushSync(function(){r.setState(J)}),this.props.onResize&&ie&&this.props.onResize(t,f,this.resizable,oe)}},e.prototype.onMouseUp=function(t){var r,i,o=this.state,s=o.isResizing,a=o.direction;o.original,!(!s||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(t,a,this.resizable,this.delta),this.props.size&&this.setState({width:(r=this.props.size.width)!==null&&r!==void 0?r:"auto",height:(i=this.props.size.height)!==null&&i!==void 0?i:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:zi(zi({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(t){var r,i;this.setState({width:(r=t.width)!==null&&r!==void 0?r:"auto",height:(i=t.height)!==null&&i!==void 0?i:"auto"})},e.prototype.renderResizer=function(){var t=this,r=this.props,i=r.enable,o=r.handleStyles,s=r.handleClasses,a=r.handleWrapperStyle,l=r.handleWrapperClass,u=r.handleComponent;if(!i)return null;var c=Object.keys(i).map(function(d){return i[d]!==!1?$.jsx(GF,{direction:d,onResizeStart:t.onResizeStart,replaceStyles:o&&o[d],className:s&&s[d],children:u&&u[d]?u[d]:null},d):null});return $.jsx("div",{className:l,style:a,children:c})},e.prototype.render=function(){var t=this,r=Object.keys(this.props).reduce(function(s,a){return JF.indexOf(a)!==-1||(s[a]=t.props[a]),s},{}),i=zi(zi(zi({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(i.flexBasis=this.state.flexBasis);var o=this.props.as||"div";return $.jsxs(o,zi({style:i,className:this.props.className},r,{ref:function(s){s&&(t.resizable=s)},children:[this.state.isResizing&&$.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(A.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var cg=function(n,e){return cg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},cg(n,e)};function tk(n,e){cg(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var dn=function(){return dn=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},dn.apply(this,arguments)};function nk(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}var rk={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},ik=function(n){return{bottom:n,bottomLeft:n,bottomRight:n,left:n,right:n,top:n,topLeft:n,topRight:n}},ok=function(n){tk(e,n);function e(t){var r=n.call(this,t)||this;return r.resizingPosition={x:0,y:0},r.offsetFromParent={left:0,top:0},r.resizableElement={current:null},r.originalPosition={x:0,y:0},r.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},r.onResizeStart=r.onResizeStart.bind(r),r.onResize=r.onResize.bind(r),r.onResizeStop=r.onResizeStop.bind(r),r.onDragStart=r.onDragStart.bind(r),r.onDrag=r.onDrag.bind(r),r.onDragStop=r.onDragStop.bind(r),r.getMaxSizesFromProps=r.getMaxSizesFromProps.bind(r),r}return e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,r=t.left,i=t.top,o=this.getDraggablePosition(),s=o.x,a=o.y;this.draggable.setState({x:s-r,y:a-i}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var t=this.draggable.state,r=t.x,i=t.y;return{x:r,y:i}},e.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,r=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:r}},e.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},e.prototype.getOffsetHeight=function(t){var r=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/r;case"body":return document.body.offsetHeight/r;default:return t.offsetHeight}},e.prototype.getOffsetWidth=function(t){var r=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/r;case"body":return document.body.offsetWidth/r;default:return t.offsetWidth}},e.prototype.onDragStart=function(t,r){this.props.onDragStart&&this.props.onDragStart(t,r);var i=this.getDraggablePosition();if(this.originalPosition=i,!!this.props.bounds){var o=this.getParent(),s=this.props.scale,a;if(this.props.bounds==="parent")a=o;else if(this.props.bounds==="body"){var l=o.getBoundingClientRect(),u=l.left,c=l.top,d=document.body.getBoundingClientRect(),f=-(u-o.offsetLeft*s-d.left)/s,g=-(c-o.offsetTop*s-d.top)/s,m=(document.body.offsetWidth-this.resizable.size.width*s)/s+f,y=(document.body.offsetHeight-this.resizable.size.height*s)/s+g;return this.setState({bounds:{top:g,right:m,bottom:y,left:f}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var S=o.getBoundingClientRect(),b=S.left,E=S.top,w=-(b-o.offsetLeft*s)/s,C=-(E-o.offsetTop*s)/s,m=(window.innerWidth-this.resizable.size.width*s)/s+w,y=(window.innerHeight-this.resizable.size.height*s)/s+C;return this.setState({bounds:{top:C,right:m,bottom:y,left:w}})}else typeof this.props.bounds=="string"?a=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(a=this.props.bounds);if(!(!(a instanceof HTMLElement)||!(o instanceof HTMLElement))){var T=a.getBoundingClientRect(),D=T.left,k=T.top,M=o.getBoundingClientRect(),N=M.left,U=M.top,ne=(D-N)/s,oe=k-U;if(this.resizable){this.updateOffsetFromParent();var ae=this.offsetFromParent;this.setState({bounds:{top:oe-ae.top,right:ne+(a.offsetWidth-this.resizable.size.width)-ae.left/s,bottom:oe+(a.offsetHeight-this.resizable.size.height)-ae.top,left:ne-ae.left/s}})}}}},e.prototype.onDrag=function(t,r){if(this.props.onDrag){var i=this.offsetFromParent,o=i.left,s=i.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(t,dn(dn({},r),{x:r.x+o,y:r.y+s}));if(this.props.dragAxis==="x")return this.props.onDrag(t,dn(dn({},r),{x:r.x+o,y:this.originalPosition.y+s,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(t,dn(dn({},r),{x:this.originalPosition.x+o,y:r.y+s,deltaX:0}))}},e.prototype.onDragStop=function(t,r){if(this.props.onDragStop){var i=this.offsetFromParent,o=i.left,s=i.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(t,dn(dn({},r),{x:r.x+o,y:r.y+s}));if(this.props.dragAxis==="x")return this.props.onDragStop(t,dn(dn({},r),{x:r.x+o,y:this.originalPosition.y+s,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(t,dn(dn({},r),{x:this.originalPosition.x+o,y:r.y+s,deltaX:0}))}},e.prototype.onResizeStart=function(t,r,i){t.stopPropagation(),this.setState({resizing:!0});var o=this.props.scale,s=this.offsetFromParent,a=this.getDraggablePosition();if(this.resizingPosition={x:a.x+s.left,y:a.y+s.top},this.originalPosition=a,this.props.bounds){var l=this.getParent(),u=void 0;this.props.bounds==="parent"?u=l:this.props.bounds==="body"?u=document.body:this.props.bounds==="window"?u=window:typeof this.props.bounds=="string"?u=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(u=this.props.bounds);var c=this.getSelfElement();if(c instanceof Element&&(u instanceof HTMLElement||u===window)&&l instanceof HTMLElement){var d=this.getMaxSizesFromProps(),f=d.maxWidth,g=d.maxHeight,m=this.getParentSize();if(f&&typeof f=="string")if(f.endsWith("%")){var y=Number(f.replace("%",""))/100;f=m.width*y}else f.endsWith("px")&&(f=Number(f.replace("px","")));if(g&&typeof g=="string")if(g.endsWith("%")){var y=Number(g.replace("%",""))/100;g=m.height*y}else g.endsWith("px")&&(g=Number(g.replace("px","")));var S=c.getBoundingClientRect(),b=S.left,E=S.top,w=this.props.bounds==="window"?{left:0,top:0}:u.getBoundingClientRect(),C=w.left,T=w.top,D=this.getOffsetWidth(u),k=this.getOffsetHeight(u),M=r.toLowerCase().endsWith("left"),N=r.toLowerCase().endsWith("right"),U=r.startsWith("top"),ne=r.startsWith("bottom");if((M||U)&&this.resizable){var oe=(b-C)/o+this.resizable.size.width;this.setState({maxWidth:oe>Number(f)?f:oe})}if(N||this.props.lockAspectRatio&&!M&&!U){var oe=D+(C-b)/o;this.setState({maxWidth:oe>Number(f)?f:oe})}if((U||M)&&this.resizable){var oe=(E-T)/o+this.resizable.size.height;this.setState({maxHeight:oe>Number(g)?g:oe})}if(ne||this.props.lockAspectRatio&&!U&&!M){var oe=k+(T-E)/o;this.setState({maxHeight:oe>Number(g)?g:oe})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(t,r,i)},e.prototype.onResize=function(t,r,i,o){var s=this,a={x:this.originalPosition.x,y:this.originalPosition.y},l=-o.width,u=-o.height,c=["top","left","topLeft","bottomLeft","topRight"];c.includes(r)&&(r==="bottomLeft"?a.x+=l:(r==="topRight"||(a.x+=l),a.y+=u));var d=this.draggable.state;(a.x!==d.x||a.y!==d.y)&&il.flushSync(function(){s.draggable.setState(a)}),this.updateOffsetFromParent();var f=this.offsetFromParent,g=this.getDraggablePosition().x+f.left,m=this.getDraggablePosition().y+f.top;this.resizingPosition={x:g,y:m},this.props.onResize&&this.props.onResize(t,r,i,o,{x:g,y:m})},e.prototype.onResizeStop=function(t,r,i,o){this.setState({resizing:!1});var s=this.getMaxSizesFromProps(),a=s.maxWidth,l=s.maxHeight;this.setState({maxWidth:a,maxHeight:l}),this.props.onResizeStop&&this.props.onResizeStop(t,r,i,o,this.resizingPosition)},e.prototype.updateSize=function(t){this.resizable&&this.resizable.updateSize({width:t.width,height:t.height})},e.prototype.updatePosition=function(t){this.draggable.setState(t)},e.prototype.updateOffsetFromParent=function(){var t=this.props.scale,r=this.getParent(),i=this.getSelfElement();if(!r||i===null)return{top:0,left:0};var o=r.getBoundingClientRect(),s=o.left,a=o.top,l=i.getBoundingClientRect(),u=this.getDraggablePosition(),c=r.scrollLeft,d=r.scrollTop;this.offsetFromParent={left:l.left-s+c-u.x*t,top:l.top-a+d-u.y*t}},e.prototype.render=function(){var t=this,r=this.props,i=r.disableDragging,o=r.style,s=r.dragHandleClassName,a=r.position,l=r.onMouseDown,u=r.onMouseUp,c=r.dragAxis,d=r.dragGrid,f=r.bounds,g=r.enableUserSelectHack,m=r.cancel,y=r.children;r.onResizeStart,r.onResize,r.onResizeStop,r.onDragStart,r.onDrag,r.onDragStop;var S=r.resizeHandleStyles,b=r.resizeHandleClasses,E=r.resizeHandleComponent,w=r.enableResizing,C=r.resizeGrid,T=r.resizeHandleWrapperClass,D=r.resizeHandleWrapperStyle,k=r.scale,M=r.allowAnyClick,N=r.dragPositionOffset,U=nk(r,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),ne=this.props.default?dn({},this.props.default):void 0;delete U.default;var oe=i||s?{cursor:"auto"}:{cursor:"move"},ae=dn(dn(dn({},rk),oe),o),te=this.offsetFromParent,we=te.left,J=te.top,Q;a&&(Q={x:a.x-we,y:a.y-J});var G=this.state.resizing?void 0:Q,re=this.state.resizing?"both":c;return A.createElement(KF,{ref:function(ie){ie&&(t.draggable=ie)},handle:s?".".concat(s):void 0,defaultPosition:ne,onMouseDown:l,onMouseUp:u,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:re,disabled:i,grid:d,bounds:f?this.state.bounds:void 0,position:G,enableUserSelectHack:g,cancel:m,scale:k,allowAnyClick:M,nodeRef:this.resizableElement,positionOffset:N},A.createElement(ek,dn({},U,{ref:function(ie){ie&&(t.resizable=ie,t.resizableElement.current=ie.resizable)},defaultSize:ne,size:this.props.size,enable:typeof w=="boolean"?ik(w):w,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:ae,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:C,handleWrapperClass:T,handleWrapperStyle:D,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:S,handleClasses:b,handleComponent:E,scale:this.props.scale}),y))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e}(A.PureComponent);const sk=({highlight:n,onChange:e,isScrolledTo:t,bounds:r,onContextMenu:i,onEditStart:o,style:s})=>{const a=t?"AreaHighlight--scrolledTo":"",l=`${n.position.boundingRect.width}${n.position.boundingRect.height}${n.position.boundingRect.left}${n.position.boundingRect.top}`;return $.jsx("div",{className:`AreaHighlight ${a}`,onContextMenu:i,children:$.jsx(ok,{className:"AreaHighlight__part",onDragStop:(u,c)=>{const d={...n.position.boundingRect,top:c.y,left:c.x};e&&e(d)},onResizeStop:(u,c,d,f,g)=>{const m={top:g.y,left:g.x,width:d.offsetWidth,height:d.offsetHeight,pageNumber:eu(d)?.number||-1};e&&e(m)},onDragStart:o,onResizeStart:o,default:{x:n.position.boundingRect.left,y:n.position.boundingRect.top,width:n.position.boundingRect.width,height:n.position.boundingRect.height},bounds:r,onClick:u=>{u.stopPropagation(),u.preventDefault()},style:s},l)})};var tu={};tu.d=(n,e)=>{for(var t in e)tu.o(e,t)&&!tu.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};tu.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var Ge=globalThis.pdfjsLib={};tu.d(Ge,{AbortException:()=>us,AnnotationEditorLayer:()=>ho,AnnotationEditorParamsType:()=>lt,AnnotationEditorType:()=>Ze,AnnotationEditorUIManager:()=>cs,AnnotationLayer:()=>tD,AnnotationMode:()=>qo,ColorPicker:()=>qr,DOMSVGFactory:()=>zm,DrawLayer:()=>Yn,FeatureTest:()=>sr,GlobalWorkerOptions:()=>ru,ImageKind:()=>ld,InvalidPDFException:()=>hg,MissingPDFException:()=>xu,OPS:()=>vi,OutputScale:()=>fg,PDFDataRangeTransport:()=>ww,PDFDateString:()=>sw,PDFWorker:()=>En,PasswordResponses:()=>ck,PermissionFlag:()=>uk,PixelsPerInch:()=>Ga,RenderingCancelledException:()=>Pm,TextLayer:()=>Jn,TouchManager:()=>Ah,UnexpectedResponseException:()=>Bd,Util:()=>Ne,VerbosityLevel:()=>Eh,XfaLayer:()=>Sw,build:()=>LT,createValidAbsoluteUrl:()=>pk,fetchData:()=>Sh,getDocument:()=>AT,getFilenameFromUrl:()=>Ck,getPdfFilenameFromUrl:()=>Sk,getXfaPageViewport:()=>xk,isDataScheme:()=>xh,isPdfFile:()=>Mm,noContextMenu:()=>ki,normalizeUnicode:()=>Ek,setLayerDimensions:()=>Ks,shadow:()=>ot,stopEvent:()=>Rr,version:()=>RT});const Hn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),iw=[1,0,0,1,0,0],dg=[.001,0,0,.001,0,0],ak=1e7,zf=1.35,Mr={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},qo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},lk="pdfjs_internal_editor_",Ze={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},lt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},uk={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ln={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ld={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},cn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},kl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Eh={ERRORS:0,WARNINGS:1,INFOS:5},vi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},ck={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let _h=Eh.WARNINGS;function dk(n){Number.isInteger(n)&&(_h=n)}function hk(){return _h}function wh(n){_h>=Eh.INFOS&&console.log(`Info: ${n}`)}function Je(n){_h>=Eh.WARNINGS&&console.log(`Warning: ${n}`)}function _t(n){throw new Error(n)}function sn(n,e){n||_t(e)}function fk(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function pk(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=bk(n)}catch{}const r=e?new URL(n,e):new URL(n);if(fk(r))return r}catch{}return null}function ot(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const gs=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class l0 extends gs{constructor(e,t){super(e,"PasswordException"),this.code=t}}class jf extends gs{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class hg extends gs{constructor(e){super(e,"InvalidPDFException")}}class xu extends gs{constructor(e){super(e,"MissingPDFException")}}class Bd extends gs{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class gk extends gs{constructor(e){super(e,"FormatError")}}class us extends gs{constructor(e){super(e,"AbortException")}}function ow(n){(typeof n!="object"||n?.length===void 0)&&_t("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const o=Math.min(i+t,e),s=n.subarray(i,o);r.push(String.fromCharCode.apply(null,s))}return r.join("")}function Ch(n){typeof n!="string"&&_t("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function mk(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function Tm(n){const e=Object.create(null);for(const[t,r]of n)e[t]=r;return e}function vk(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function yk(){try{return new Function(""),!0}catch{return!1}}class sr{static get isLittleEndian(){return ot(this,"isLittleEndian",vk())}static get isEvalSupported(){return ot(this,"isEvalSupported",yk())}static get isOffscreenCanvasSupported(){return ot(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ot(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?ot(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):ot(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return ot(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Wf=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class Ne{static makeHexColor(e,t,r){return`#${Wf[e]}${Wf[t]}${Wf[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const r=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[r,i]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,o=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[i,o]}static getAxialAlignedBoundingBox(e,t){const r=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),o=this.applyTransform([e[0],e[3]],t),s=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],i[0],o[0],s[0]),Math.min(r[1],i[1],o[1],s[1]),Math.max(r[0],i[0],o[0],s[0]),Math.max(r[1],i[1],o[1],s[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],o=e[2]*t[0]+e[3]*t[2],s=e[2]*t[1]+e[3]*t[3],a=(r+s)/2,l=Math.sqrt((r+s)**2-4*(r*s-o*i))/2,u=a+l||1,c=a-l||1;return[Math.sqrt(u),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>s?null:[r,o,i,s]}static#e(e,t,r,i,o,s,a,l,u,c){if(u<=0||u>=1)return;const d=1-u,f=u*u,g=f*u,m=d*(d*(d*e+3*u*t)+3*f*r)+g*i,y=d*(d*(d*o+3*u*s)+3*f*a)+g*l;c[0]=Math.min(c[0],m),c[1]=Math.min(c[1],y),c[2]=Math.max(c[2],m),c[3]=Math.max(c[3],y)}static#t(e,t,r,i,o,s,a,l,u,c,d,f){if(Math.abs(u)<1e-12){Math.abs(c)>=1e-12&&this.#e(e,t,r,i,o,s,a,l,-d/c,f);return}const g=c**2-4*d*u;if(g<0)return;const m=Math.sqrt(g),y=2*u;this.#e(e,t,r,i,o,s,a,l,(-c+m)/y,f),this.#e(e,t,r,i,o,s,a,l,(-c-m)/y,f)}static bezierBoundingBox(e,t,r,i,o,s,a,l,u){return u?(u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,l)):u=[Math.min(e,a),Math.min(t,l),Math.max(e,a),Math.max(t,l)],this.#t(e,r,o,a,t,i,s,l,3*(-e+3*(r-o)+a),6*(e-2*r+o),3*(r-e),u),this.#t(e,r,o,a,t,i,s,l,3*(-t+3*(i-s)+l),6*(t-2*i+s),3*(i-t),u),u}}function bk(n){return decodeURIComponent(escape(n))}let Uf=null,u0=null;function Ek(n){return Uf||(Uf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,u0=new Map([["","t"]])),n.replaceAll(Uf,(e,t,r)=>t?t.normalize("NFKC"):u0.get(r))}function _k(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),ow(n)}const Dm="pdfjs_internal_id_";function wk(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(ow(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});const uo="http://www.w3.org/2000/svg";class Ga{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Sh(n,e="text"){if(Wl(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class Wu{constructor({viewBox:e,userUnit:t,scale:r,rotation:i,offsetX:o=0,offsetY:s=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=i,this.offsetX=o,this.offsetY=s,r*=t;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let c,d,f,g;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,d=0,f=0,g=1;break;case 90:c=0,d=1,f=1,g=0;break;case 270:c=0,d=-1,f=-1,g=0;break;case 0:c=1,d=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,g=-g);let m,y,S,b;c===0?(m=Math.abs(u-e[1])*r+o,y=Math.abs(l-e[0])*r+s,S=(e[3]-e[1])*r,b=(e[2]-e[0])*r):(m=Math.abs(l-e[0])*r+o,y=Math.abs(u-e[1])*r+s,S=(e[2]-e[0])*r,b=(e[3]-e[1])*r),this.transform=[c*r,d*r,f*r,g*r,m-c*r*l-f*r*u,y-d*r*l-g*r*u],this.width=S,this.height=b}get rawDims(){const{userUnit:e,viewBox:t}=this,r=t.map(i=>i*e);return ot(this,"rawDims",{pageWidth:r[2]-r[0],pageHeight:r[3]-r[1],pageX:r[0],pageY:r[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:o=!1}={}){return new Wu({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:o})}convertToViewportPoint(e,t){return Ne.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Ne.applyTransform([e[0],e[1]],this.transform),r=Ne.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return Ne.applyInverseTransform([e,t],this.transform)}}class Pm extends gs{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function xh(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Mm(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Ck(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function Sk(n,e="document.pdf"){if(typeof n!="string")return e;if(xh(n))return Je('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(n);let o=r.exec(i[1])||r.exec(i[2])||r.exec(i[3]);if(o&&(o=o[0],o.includes("%")))try{o=r.exec(decodeURIComponent(o))[0]}catch{}return o||e}class c0{started=Object.create(null);times=[];time(e){e in this.started&&Je(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Je(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:o}of this.times)e.push(`${r.padEnd(t)} ${o-i}ms
`);return e.join("")}}function Wl(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function ki(n){n.preventDefault()}function Rr(n){n.preventDefault(),n.stopPropagation()}class sw{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(s+=c,a+=d):u==="+"&&(s-=c,a-=d),new Date(Date.UTC(r,i,o,s,a,l))}}function xk(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,o=[0,0,parseInt(r),parseInt(i)];return new Wu({viewBox:o,userUnit:1,scale:e,rotation:t})}function Im(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Je(`Not a valid color format: "${n}"`),[0,0,0])}function Ak(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,Im(r))}e.remove()}function It(n){const{a:e,b:t,c:r,d:i,e:o,f:s}=n.getTransform();return[e,t,r,i,o,s]}function Ni(n){const{a:e,b:t,c:r,d:i,e:o,f:s}=n.getTransform().invertSelf();return[e,t,r,i,o,s]}function Ks(n,e,t=!1,r=!0){if(e instanceof Wu){const{pageWidth:i,pageHeight:o}=e.rawDims,{style:s}=n,a=sr.isCSSRoundSupported,l=`var(--scale-factor) * ${i}px`,u=`var(--scale-factor) * ${o}px`,c=a?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,d=a?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(s.width=c,s.height=d):(s.width=d,s.height=c)}r&&n.setAttribute("data-main-rotation",e.rotation)}class fg{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class nu{#e=null;#t=null;#n;#r=null;#o=null;static#i=null;constructor(e){this.#n=e,nu.#i||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;e.addEventListener("contextmenu",ki,{signal:t}),e.addEventListener("pointerdown",nu.#l,{signal:t});const r=this.#r=document.createElement("div");r.className="buttons",e.append(r);const i=this.#n.toolbarPosition;if(i){const{style:o}=e,s=this.#n._uiManager.direction==="ltr"?1-i[0]:i[0];o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return this.#h(),e}get div(){return this.#e}static#l(e){e.stopPropagation()}#a(e){this.#n._focusEventsAllowed=!1,Rr(e)}#c(e){this.#n._focusEventsAllowed=!0,Rr(e)}#u(e){const t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#a.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ki,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#o?.shown()}#h(){const{editorType:e,_uiManager:t}=this.#n,r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",nu.#i[e]),this.#u(r),r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#r.append(r)}get#d(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#u(t),this.#r.prepend(t,this.#d),this.#o=e}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#u(t),this.#r.prepend(t,this.#d)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class Fk{#e=null;#t=null;#n;constructor(e){this.#n=e}#r(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ki,{signal:this.#n._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#i(),e}#o(e,t){let r=0,i=0;for(const o of e){const s=o.y+o.height;if(s<r)continue;const a=o.x+(t?o.width:0);if(s>r){i=a,r=s;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,r]}show(e,t,r){const[i,o]=this.#o(t,r),{style:s}=this.#t||=this.#r();e.append(this.#t),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=this.#n._signal;e.addEventListener("contextmenu",ki,{signal:r}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:r}),this.#e.append(e)}}function Od(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}class kk{#e=0;get id(){return`${lk}${this.#e++}`}}class Rm{#e=_k();#t=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const o=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return ot(this,"_isSVGFittingCanvas",o)}async#r(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(r.url=t,i=await Sh(t,"blob")):t instanceof File?i=r.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const o=Rm._isSVGFittingCanvas,s=new FileReader,a=new Image,l=new Promise((u,c)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,u()},s.onload=async()=>{const d=r.svgUrl=s.result;a.src=await o?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=s.onerror=c});s.readAsDataURL(i),await l}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){Je(i),r=null}return this.#n.set(e,r),r&&this.#n.set(r.id,r),r}async getFromFile(e){const{lastModified:t,name:r,size:i,type:o}=e;return this.#r(`${t}_${r}_${i}_${o}`,e)}async getFromUrl(e){return this.#r(e,e)}async getFromBlob(e,t){const r=await t;return this.#r(e,r)}async getFromId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r?.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,r),this.#n.set(r.id,r),r}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}r.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class Tk{#e=[];#t=!1;#n;#r=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:r,mustExec:i,type:o=NaN,overwriteIfSameType:s=!1,keepUndo:a=!1}){if(i&&e(),this.#t)return;const l={cmd:e,undo:t,post:r,type:o};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(l);return}if(s&&this.#e[this.#r].type===o){a&&(l.undo=this.#e[this.#r].undo),this.#e[this.#r]=l;return}const u=this.#r+1;u===this.#n?this.#e.splice(0,1):(this.#r=u,u<this.#e.length&&this.#e.splice(u)),this.#e.push(l)}undo(){if(this.#r===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#r];e(),t?.(),this.#t=!1,this.#r-=1}redo(){if(this.#r<this.#e.length-1){this.#r+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#r];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}cleanType(e){if(this.#r!==-1){for(let t=this.#r;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#r-t),this.#r=t;return}this.#e.length=0,this.#r=-1}}destroy(){this.#e=null}}class Uu{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=sr.platform;for(const[r,i,o={}]of e)for(const s of r){const a=s.startsWith("mac+");t&&a?(this.callbacks.set(s.slice(4),{callback:i,options:o}),this.allKeys.add(s.split("+").at(-1))):!t&&!a&&(this.callbacks.set(s,{callback:i,options:o}),this.allKeys.add(s.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(this.#e(t));if(!r)return;const{callback:i,options:{bubbles:o=!1,args:s=[],checker:a=null}}=r;a&&!a(e,t)||(i.bind(e,...s,t)(),o||Rr(t))}}class Lm{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Ak(e),ot(this,"_colors",e)}convert(e){const t=Im(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((o,s)=>o===t[s]))return Lm._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?Ne.makeHexColor(...t):e}}class cs{#e=new AbortController;#t=null;#n=new Map;#r=new Map;#o=null;#i=null;#l=null;#a=new Tk;#c=null;#u=null;#h=0;#d=new Set;#f=null;#s=null;#p=new Set;_editorUndoBar=null;#m=!1;#g=!1;#v=!1;#E=null;#y=null;#_=null;#C=null;#x=!1;#F=null;#T=new kk;#w=!1;#k=!1;#A=null;#P=null;#R=null;#N=null;#S=Ze.NONE;#b=new Set;#I=null;#j=null;#W=null;#U={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#B=[0,0];#L=null;#O=null;#V=null;#M=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=cs.prototype,t=s=>s.#O.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),r=(s,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return ot(this,"_keyboardManager",new Uu([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:a})=>!(a instanceof HTMLButtonElement)&&s.#O.contains(a)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:a})=>!(a instanceof HTMLButtonElement)&&s.#O.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}constructor(e,t,r,i,o,s,a,l,u,c,d,f,g){const m=this._signal=this.#e.signal;this.#O=e,this.#V=t,this.#o=r,this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:m}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),i._on("setpreference",this.onSetPreference.bind(this),{signal:m}),i._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:m}),this.#te(),this.#oe(),this.#q(),this.#i=o.annotationStorage,this.#E=o.filterFactory,this.#j=s,this.#C=a||null,this.#m=l,this.#g=u,this.#v=c,this.#N=d||null,this.viewParameters={realScale:Ga.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=g!==!1}destroy(){this.#M?.resolve(),this.#M=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#r.values())e.destroy();this.#r.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#b.clear(),this.#a.destroy(),this.#o?.destroy(),this.#F?.hide(),this.#F=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#N}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return ot(this,"hcmFilter",this.#j?this.#E.addHCMFilter(this.#j.foreground,this.#j.background):"none")}get direction(){return ot(this,"direction",getComputedStyle(this.#O).direction)}get highlightColors(){return ot(this,"highlightColors",this.#C?new Map(this.#C.split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ot(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=e}setMainHighlightColorPicker(e){this.#R=e}editAltText(e,t=!1){this.#o?.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#v=t;break}}onPageChanging({pageNumber:e}){this.#h=e-1}focusMainContainer(){this.#O.focus()}findParent(e,t){for(const r of this.#r.values()){const{x:i,y:o,width:s,height:a}=r.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=o&&t<=o+a)return r}return null}disableUserSelect(e=!1){this.#V.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Ga.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#H({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#G(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of this.#r.values())if(r.hasTextLayer(e))return r;return null}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}=t,a=t.toString(),u=this.#H(t).closest(".textLayer"),c=this.getSelectionBoxes(u);if(!c)return;t.empty();const d=this.#G(u),f=this.#S===Ze.NONE,g=()=>{d?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s,text:a}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(Ze.HIGHLIGHT,g);return}g()}#J(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=this.#H(e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(this.#F||=new Fk(this),this.#F.show(r,i,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#i&&!this.#i.has(e.id)&&this.#i.setValue(e.id,e)}#ee(){const e=document.getSelection();if(!e||e.isCollapsed){this.#I&&(this.#F?.hide(),this.#I=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#I)return;const i=this.#H(e).closest(".textLayer");if(!i){this.#I&&(this.#F?.hide(),this.#I=null,this.#D({hasSelectedText:!1}));return}if(this.#F?.hide(),this.#I=t,this.#D({hasSelectedText:!0}),!(this.#S!==Ze.HIGHLIGHT&&this.#S!==Ze.NONE)&&(this.#S===Ze.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#x=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#S===Ze.HIGHLIGHT?this.#G(i):null;o?.toggleDrawing();const s=new AbortController,a=this.combinedSignal(s),l=u=>{u.type==="pointerup"&&u.button!==0||(s.abort(),o?.toggleDrawing(!0),u.type==="pointerup"&&this.#$("main_toolbar"))};window.addEventListener("pointerup",l,{signal:a}),window.addEventListener("blur",l,{signal:a})}}#$(e=""){this.#S===Ze.HIGHLIGHT?this.highlightSelection(e):this.#m&&this.#J()}#te(){document.addEventListener("selectionchange",this.#ee.bind(this),{signal:this._signal})}#ne(){if(this.#_)return;this.#_=new AbortController;const e=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#re(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#$("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#b)if(t.div.contains(e)){this.#P=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[e,t]=this.#P;this.#P=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#q(){if(this.#A)return;this.#A=new AbortController;const e=this.combinedSignal(this.#A);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ie(){this.#A?.abort(),this.#A=null}#X(){if(this.#c)return;this.#c=new AbortController;const e=this.combinedSignal(this.#c);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#Y(){this.#c?.abort(),this.#c=null}#oe(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#q(),this.#X()}removeEditListeners(){this.#ie(),this.#Y()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of this.#s)if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of this.#s)if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of this.#b){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const s of this.#s)if(s.isHandlingMimeForPasting(o.type)){s.paste(o,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(o){Je(`paste: "${o.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const o=[];for(const l of r){const u=await i.deserialize(l);if(!u)return;o.push(u)}const s=()=>{for(const l of o)this.#Q(l);this.#Z(o)},a=()=>{for(const l of o)l.remove()};this.addCommands({cmd:s,undo:a,mustExec:!0})}catch(o){Je(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#S!==Ze.NONE&&!this.isEditorHandlingKeyboard&&cs._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#$("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#D(e){Object.entries(e).some(([r,i])=>this.#U[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#U,e)}),this.#S===Ze.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#z([[lt.HIGHLIGHT_FREE,!0]]))}#z(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ne(),this.#X(),this.#D({isEditing:this.#S!==Ze.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#re(),this.#Y(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#s){this.#s=e;for(const t of this.#s)this.#z(t.defaultPropertiesToUpdate)}}getId(){return this.#T.id}get currentLayer(){return this.#r.get(this.#h)}getLayer(e){return this.#r.get(e)}get currentPageIndex(){return this.#h}addLayer(e){this.#r.set(e.pageIndex,e),this.#w?e.enable():e.disable()}removeLayer(e){this.#r.delete(e.pageIndex)}async updateMode(e,t=null,r=!1){if(this.#S!==e&&!(this.#M&&(await this.#M.promise,!this.#M))){if(this.#M=Promise.withResolvers(),this.#S=e,e===Ze.NONE){this.setEditingState(!1),this.#ae(),this._editorUndoBar?.hide(),this.#M.resolve();return}this.setEditingState(!0),await this.#se(),this.unselectAll();for(const i of this.#r.values())i.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),this.#M.resolve();return}for(const i of this.#n.values())i.annotationElementId===t?(this.setSelected(i),i.enterInEditMode()):i.unselect();this.#M.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#S&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#s){switch(e){case lt.CREATE:this.currentLayer.addNewEditor();return;case lt.HIGHLIGHT_DEFAULT_COLOR:this.#R?.updateColor(t);break;case lt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#W||=new Map).set(e,t),this.showAllEditors("highlight",t);break}for(const r of this.#b)r.updateParams(e,t);for(const r of this.#s)r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){for(const o of this.#n.values())o.editorType===e&&o.show(t);(this.#W?.get(lt.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#z([[lt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#k!==e){this.#k=e;for(const t of this.#r.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#se(){if(!this.#w){this.#w=!0;const e=[];for(const t of this.#r.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#ae(){if(this.unselectAll(),this.#w){this.#w=!1;for(const e of this.#r.values())e.disable();for(const e of this.#n.values())e.disable()}}getEditors(e){const t=[];for(const r of this.#n.values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#n.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#d.has(e.annotationElementId))&&this.#i?.remove(e.id)}addDeletedAnnotationElement(e){this.#d.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#d.has(e)}removeDeletedAnnotationElement(e){this.#d.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#Q(e){const t=this.#r.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#z(e.propertiesToUpdate))}get#le(){let e=null;for(e of this.#b);return e}updateUI(e){this.#le===e&&this.#z(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#z(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#b.has(e)){this.#b.delete(e),e.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#b.add(e),e.select(),this.#z(e.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(e){this.#u?.commitOrRemove();for(const t of this.#b)t!==e&&t.unselect();this.#b.clear(),this.#b.add(e),e.select(),this.#z(e.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(e){return this.#b.has(e)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(e){e.unselect(),this.#b.delete(e),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#b.size!==0}get isEnterHandled(){return this.#b.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#a.undo(),this.#D({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#a.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#a.add(e),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#a.cleanType(e)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#b],r=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},i=()=>{for(const o of t)this.#Q(o)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Z(e){for(const t of this.#b)t.unselect();this.#b.clear();for(const t of e)t.isEmpty()||(this.#b.add(t),t.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#b)e.commit();this.#Z(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#S!==Ze.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const e of this.#b)e.unselect();this.#b.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#B[0]+=e,this.#B[1]+=t;const[i,o]=this.#B,s=[...this.#b],a=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#B[0]=this.#B[1]=0,this.addCommands({cmd:()=>{for(const l of s)this.#n.has(l.id)&&l.translateInPage(i,o)},undo:()=>{for(const l of s)this.#n.has(l.id)&&l.translateInPage(-i,-o)},mustExec:!1})},a);for(const l of s)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const e of this.#b)this.#f.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const e=this.#f;this.#f=null;let t=!1;for(const[{x:i,y:o,pageIndex:s},a]of e)a.newX=i,a.newY=o,a.newPageIndex=s,t||=i!==a.savedX||o!==a.savedY||s!==a.savedPageIndex;if(!t)return!1;const r=(i,o,s,a)=>{if(this.#n.has(i.id)){const l=this.#r.get(a);l?i._setParentAndPosition(l,o,s):(i.pageIndex=a,i.x=o,i.y=s)}};return this.addCommands({cmd:()=>{for(const[i,{newX:o,newY:s,newPageIndex:a}]of e)r(i,o,s,a)},undo:()=>{for(const[i,{savedX:o,savedY:s,savedPageIndex:a}]of e)r(i,o,s,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#f)for(const r of this.#f.keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#b.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#S}get imageManager(){return ot(this,"imageManager",new Rm)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,c=t.rangeCount;u<c;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:r,y:i,width:o,height:s}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,c,d,f)=>({x:(c-i)/s,y:1-(u+d-r)/o,width:f/s,height:d/o});break;case"180":a=(u,c,d,f)=>({x:1-(u+d-r)/o,y:1-(c+f-i)/s,width:d/o,height:f/s});break;case"270":a=(u,c,d,f)=>({x:1-(c+f-i)/s,y:(u-r)/o,width:f/s,height:d/o});break;default:a=(u,c,d,f)=>({x:(u-r)/o,y:(c-i)/s,width:d/o,height:f/s});break}const l=[];for(let u=0,c=t.rangeCount;u<c;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:g,width:m,height:y}of d.getClientRects())m===0||y===0||l.push(a(f,g,m,y))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#l||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){const t=this.#l?.get(e.data.id);if(!t)return;const r=this.#i.getRawValue(t);r&&(this.#S===Ze.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}}class Wi{#e=null;#t=!1;#n=null;#r=null;#o=null;#i=null;#l=!1;#a=null;#c=null;#u=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#d=e._uiManager.useNewAltTextFlow,Wi.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Wi._l10n??=e}async render(){const e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#r=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",Wi.#f.missing),t.setAttribute("data-l10n-id",Wi.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=this.#c._uiManager._signal;e.addEventListener("contextmenu",ki,{signal:r}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:r});const i=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#s}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#l=!0,i(o))},{signal:r}),await this.#p(),e}get#s(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#u:this.isEmpty()}get guessedText(){return this.#u}async setGuessedText(e){this.#e===null&&(this.#u=e,this.#h=await Wi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#a?.remove(),this.#a=null;return}if(!this.#a){const t=this.#a=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#a.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#u===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#u,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:i,cancel:o=!1}){r&&(this.#u=r,this.#h=i),!(this.#e===e&&this.#t===t)&&(o||(this.#e=e,this.#t=t),this.#p())}toggle(e=!1){this.#n&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#n.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#s}})}destroy(){this.#n?.remove(),this.#n=null,this.#r=null,this.#o=null,this.#a?.remove(),this.#a=null}async#p(){const e=this.#n;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Wi.#f[this.#s]),this.#r?.setAttribute("data-l10n-id",Wi.#f[`${this.#s}-label`]),!this.#e){this.#o?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#o?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#o;if(!t){this.#o=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const i=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#o.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:o}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#o?.classList.remove("show")},{signal:o})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getImageForAltText()?.setAttribute("aria-describedby",t.id)}}class Ah{#e;#t=!1;#n=null;#r;#o;#i;#l;#a;#c=null;#u;#h=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:o=null,onPinchEnd:s=null,signal:a}){this.#e=e,this.#n=r,this.#r=t,this.#o=i,this.#i=o,this.#l=s,this.#u=new AbortController,this.#a=AbortSignal.any([a,this.#u.signal]),e.addEventListener("touchstart",this.#d.bind(this),{passive:!1,signal:this.#a})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return ot(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}#d(e){if(this.#r?.()||e.touches.length<2)return;if(!this.#h){this.#h=new AbortController;const i=AbortSignal.any([this.#a,this.#h.signal]),o=this.#e,s={signal:i,passive:!1};o.addEventListener("touchmove",this.#f.bind(this),s),o.addEventListener("touchend",this.#s.bind(this),s),o.addEventListener("touchcancel",this.#s.bind(this),s),this.#o?.()}if(Rr(e),e.touches.length!==2||this.#n?.()){this.#c=null;return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),this.#c={touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY}}#f(e){if(!this.#c||e.touches.length!==2)return;let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:i,screenY:o}=t,{screenX:s,screenY:a}=r,l=this.#c,{touch0X:u,touch0Y:c,touch1X:d,touch1Y:f}=l,g=d-u,m=f-c,y=s-i,S=a-o,b=Math.hypot(y,S)||1,E=Math.hypot(g,m)||1;if(!this.#t&&Math.abs(E-b)<=Ah.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=o,l.touch1X=s,l.touch1Y=a,e.preventDefault(),!this.#t){this.#t=!0;return}const w=[(i+s)/2,(o+a)/2];this.#i?.(w,E,b)}#s(e){this.#h.abort(),this.#h=null,this.#l?.(),this.#c&&(e.preventDefault(),this.#c=null,this.#t=!1)}destroy(){this.#u?.abort(),this.#u=null}}class Ue{#e=null;#t=null;#n=null;#r=!1;#o=null;#i="";#l=!1;#a=null;#c=null;#u=null;#h=null;#d="";#f=!1;#s=null;#p=!1;#m=!1;#g=!1;#v=null;#E=0;#y=0;#_=null;#C=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#x=!1;#F=Ue._zIndex++;static _borderLineWidth=-1;static _colorManager=new Lm;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Ue.prototype._resizeWithKeyboard,t=cs.TRANSLATE_SMALL,r=cs.TRANSLATE_BIG;return ot(this,"_resizerKeyboardManager",new Uu([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],Ue.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:o,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[o,s];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return ot(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Dk({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ue._l10n??=e,Ue._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Ue._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);Ue._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){_t("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#x}set _isDraggable(e){this.#x=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#F}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#H(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[o,s]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/o,this.y=(t+i)/s,this.fixAndSetPosition()}#T([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#T(this.parentDimensions,e,t)}translateInPage(e,t){this.#s||=[this.x,this.y,this.width,this.height],this.#T(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#s||=[this.x,this.y,this.width,this.height];const{div:r,parentDimensions:[i,o]}=this;if(this.x+=e/i,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this;const[l,u]=this.getBaseTranslation();s+=l,a+=u;const{style:c}=r;c.left=`${(100*s).toFixed(2)}%`,c.top=`${(100*a).toFixed(2)}%`,this._onTranslating(s,a),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#s&&(this.#s[0]!==this.x||this.#s[1]!==this.y)}get _hasBeenResized(){return!!this.#s&&(this.#s[2]!==this.width||this.#s[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=Ue,i=r/e,o=r/t;switch(this.rotation){case 90:return[-i,o];case 180:return[i,o];case 270:return[i,-o];default:return[-i,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,i]}=this;let{x:o,y:s,width:a,height:l}=this;if(a*=r,l*=i,o*=r,s*=i,this._mustFixPosition)switch(e){case 0:o=Math.max(0,Math.min(r-a,o)),s=Math.max(0,Math.min(i-l,s));break;case 90:o=Math.max(0,Math.min(r-l,o)),s=Math.min(i,Math.max(a,s));break;case 180:o=Math.min(r,Math.max(a,o)),s=Math.min(i,Math.max(l,s));break;case 270:o=Math.min(r,Math.max(l,o)),s=Math.max(0,Math.min(i-a,s));break}this.x=o/=r,this.y=s/=i;const[u,c]=this.getBaseTranslation();o+=u,s+=c,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#w(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return Ue.#w(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Ue.#w(e,t,360-this.parentRotation)}#k(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,i]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*e/r).toFixed(2)}%`,this.#l||(o.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,i=r.endsWith("%"),o=!this.#l&&t.endsWith("%");if(i&&o)return;const[s,a]=this.parentDimensions;i||(e.width=`${(100*parseFloat(r)/s).toFixed(2)}%`),!this.#l&&!o&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#A(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");this.#a.append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",this.#P.bind(this,r),{signal:t}),i.addEventListener("contextmenu",ki,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#a)}#P(e,t){t.preventDefault();const{isMac:r}=sr.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#n?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#c=[t.screenX,t.screenY];const o=new AbortController,s=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#S.bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Rr,{passive:!1,signal:s}),window.addEventListener("contextmenu",ki,{signal:s}),this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=l,this.#N()};window.addEventListener("pointerup",u,{signal:s}),window.addEventListener("blur",u,{signal:s})}#R(e,t,r,i){this.width=r,this.height=i,this.x=e,this.y=t;const[o,s]=this.parentDimensions;this.setDims(o*r,s*i),this.fixAndSetPosition(),this._onResized()}_onResized(){}#N(){if(!this.#u)return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=this.#u;this.#u=null;const o=this.x,s=this.y,a=this.width,l=this.height;o===e&&s===t&&a===r&&l===i||this.addCommands({cmd:this.#R.bind(this,o,s,a,l),undo:this.#R.bind(this,e,t,r,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#S(e,t){const[r,i]=this.parentDimensions,o=this.x,s=this.y,a=this.width,l=this.height,u=Ue.MIN_SIZE/r,c=Ue.MIN_SIZE/i,d=this.#k(this.rotation),f=(J,Q)=>[d[0]*J+d[2]*Q,d[1]*J+d[3]*Q],g=this.#k(360-this.rotation),m=(J,Q)=>[g[0]*J+g[2]*Q,g[1]*J+g[3]*Q];let y,S,b=!1,E=!1;switch(e){case"topLeft":b=!0,y=(J,Q)=>[0,0],S=(J,Q)=>[J,Q];break;case"topMiddle":y=(J,Q)=>[J/2,0],S=(J,Q)=>[J/2,Q];break;case"topRight":b=!0,y=(J,Q)=>[J,0],S=(J,Q)=>[0,Q];break;case"middleRight":E=!0,y=(J,Q)=>[J,Q/2],S=(J,Q)=>[0,Q/2];break;case"bottomRight":b=!0,y=(J,Q)=>[J,Q],S=(J,Q)=>[0,0];break;case"bottomMiddle":y=(J,Q)=>[J/2,Q],S=(J,Q)=>[J/2,0];break;case"bottomLeft":b=!0,y=(J,Q)=>[0,Q],S=(J,Q)=>[J,0];break;case"middleLeft":E=!0,y=(J,Q)=>[0,Q/2],S=(J,Q)=>[J,Q/2];break}const w=y(a,l),C=S(a,l);let T=f(...C);const D=Ue._round(o+T[0]),k=Ue._round(s+T[1]);let M=1,N=1,U,ne;if(t.fromKeyboard)({deltaX:U,deltaY:ne}=t);else{const{screenX:J,screenY:Q}=t,[G,re]=this.#c;[U,ne]=this.screenToPageTranslation(J-G,Q-re),this.#c[0]=J,this.#c[1]=Q}if([U,ne]=m(U/r,ne/i),b){const J=Math.hypot(a,l);M=N=Math.max(Math.min(Math.hypot(C[0]-w[0]-U,C[1]-w[1]-ne)/J,1/a,1/l),u/a,c/l)}else E?M=Math.max(u,Math.min(1,Math.abs(C[0]-w[0]-U)))/a:N=Math.max(c,Math.min(1,Math.abs(C[1]-w[1]-ne)))/l;const oe=Ue._round(a*M),ae=Ue._round(l*N);T=f(...S(oe,ae));const te=D-T[0],we=k-T[1];this.#s||=[this.x,this.y,this.width,this.height],this.width=oe,this.height=ae,this.x=te,this.y=we,this.setDims(r*oe,i*ae),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}async addEditToolbar(){return this._editToolbar||this.#m?this._editToolbar:(this._editToolbar=new nu(this),this.div.append(this._editToolbar.render()),this.#n&&await this._editToolbar.addAltText(this.#n),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#n||(Wi.initialize(Ue._l10n),this.#n=new Wi(this),this.#e&&(this.#n.data=this.#e,this.#e=null),await this.addEditToolbar())}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(e){await this.#n?.setGuessedText(e)}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#r?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#B();const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),Od(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new Ah({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#b.bind(this),onPinching:this.#I.bind(this),onPinchEnd:this.#j.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),this.div}#b(){this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#I(e,t,r){let o=.7*(r/t)+1-.7;if(o===1)return;const s=this.#k(this.rotation),a=(D,k)=>[s[0]*D+s[2]*k,s[1]*D+s[3]*k],[l,u]=this.parentDimensions,c=this.x,d=this.y,f=this.width,g=this.height,m=Ue.MIN_SIZE/l,y=Ue.MIN_SIZE/u;o=Math.max(Math.min(o,1/f,1/g),m/f,y/g);const S=Ue._round(f*o),b=Ue._round(g*o);if(S===f&&b===g)return;this.#s||=[c,d,f,g];const E=a(f/2,g/2),w=Ue._round(c+E[0]),C=Ue._round(d+E[1]),T=a(S/2,b/2);this.x=w-T[0],this.y=C-T[1],this.width=S,this.height=b,this.setDims(l*S,u*b),this.fixAndSetPosition(),this._onResizing()}#j(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#N()}pointerdown(e){const{isMac:t}=sr.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#U(e);return}this.#W(e)}get isSelected(){return this._uiManager.isSelected(this)}#W(e){const{isMac:t}=sr.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,o=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:o},a=u=>{i.abort(),this.#o=null,this.#f=!1,this._uiManager.endDragSession()||this.#W(u),r&&this._onStopDragging()};t&&(this.#E=e.clientX,this.#y=e.clientY,this.#o=e.pointerId,this.#i=e.pointerType,window.addEventListener("pointermove",u=>{r||(r=!0,this._onStartDragging());const{clientX:c,clientY:d,pointerId:f}=u;if(f!==this.#o){Rr(u);return}const[g,m]=this.screenToPageTranslation(c-this.#E,d-this.#y);this.#E=c,this.#y=d,this._uiManager.dragSelectedEditors(g,m)},s),window.addEventListener("touchmove",Rr,s),window.addEventListener("pointerdown",u=>{u.pointerType===this.#i&&(this.#C||u.isPrimary)&&a(u),Rr(u)},s));const l=u=>{if(!this.#o||this.#o===u.pointerId){a(u);return}Rr(u)};window.addEventListener("pointerup",l,{signal:o}),window.addEventListener("blur",l,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const i=this.parentScale,[o,s]=this.pageDimensions,[a,l]=this.pageTranslation,u=e/i,c=t/i,d=this.x*o,f=this.y*s,g=this.width*o,m=this.height*s;switch(r){case 0:return[d+u+a,s-f-c-m+l,d+u+g+a,s-f-c+l];case 90:return[d+c+a,s-f+u+l,d+c+m+a,s-f+u+g+l];case 180:return[d-u-g+a,s-f+c+l,d-u+a,s-f+c+m+l];case 270:return[d-c-m+a,s-f-u-g+l,d-c+a,s-f-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,o,s]=e,a=o-r,l=s-i;switch(this.rotation){case 0:return[r,t-s,a,l];case 90:return[r,t-i,l,a];case 180:return[o,t-i,a,l];case 270:return[o,t-s,l,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){this.#m=!0}disableEditMode(){this.#m=!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:o,innerWidth:s}=window;return t<s&&i>0&&e<o&&r>0}#B(){if(this.#h||!this.div)return;this.#h=new AbortController;const e=this._uiManager.combinedSignal(this.#h);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#B()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){_t("An editor must be serializable")}static async deserialize(e,t,r){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});i.rotation=e.rotation,i.#e=e.accessibilityData;const[o,s]=i.pageDimensions,[a,l,u,c]=i.getRectInCurrentCoords(e.rect,s);return i.x=a/o,i.y=l/s,i.width=u/o,i.height=c/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#h?.abort(),this.#h=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#H(),this.removeEditToolbar(),this.#_){for(const e of this.#_.values())clearTimeout(e);this.#_=null}this.parent=null,this.#C?.destroy(),this.#C=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#A(),this.#a.classList.remove("hidden"),Od(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#a.children;if(!this.#t){this.#t=Array.from(t);const s=this.#L.bind(this),a=this.#O.bind(this),l=this._uiManager._signal;for(const u of this.#t){const c=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",s,{signal:l}),u.addEventListener("blur",a,{signal:l}),u.addEventListener("focus",this.#V.bind(this,c),{signal:l}),u.setAttribute("data-l10n-id",Ue._l10nResizer[c])}}const r=this.#t[0];let i=0;for(const s of t){if(s===r)break;i++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(o!==i){if(o<i)for(let a=0;a<i-o;a++)this.#a.append(this.#a.firstChild);else if(o>i)for(let a=0;a<o-i;a++)this.#a.firstChild.before(this.#a.lastChild);let s=0;for(const a of t){const u=this.#t[s++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",Ue._l10nResizer[u])}}this.#M(0),this.#g=!0,this.#a.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#L(e){Ue._resizerKeyboardManager.exec(this,e)}#O(e){this.#g&&e.relatedTarget?.parentNode!==this.#a&&this.#H()}#V(e){this.#d=this.#g?e:""}#M(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#g&&this.#S(this.#d,{deltaX:e,deltaY:t,fromKeyboard:!0})}#H(){this.#g=!1,this.#M(-1),this.#N()}_stopResizingWithKeyboard(){this.#H(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#l=!0;const r=e/t,{style:i}=this.div;i.aspectRatio=r,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#_||=new Map;const{action:r}=e;let i=this.#_.get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#_.delete(r),this.#_.size===0&&(this.#_=null)},Ue._telemetryTimeout),this.#_.set(r,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class Dk extends Ue{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const d0=3285377520,$r=4294901760,Bi=65535;class aw{constructor(e){this.h1=e?e&4294967295:d0,this.h2=e?e&4294967295:d0}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let y=0,S=e.length;y<S;y++){const b=e.charCodeAt(y);b<=255?t[r++]=b:(t[r++]=b>>>8,t[r++]=b&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,o=r-i*4,s=new Uint32Array(t.buffer,0,i);let a=0,l=0,u=this.h1,c=this.h2;const d=3432918353,f=461845907,g=d&Bi,m=f&Bi;for(let y=0;y<i;y++)y&1?(a=s[y],a=a*d&$r|a*g&Bi,a=a<<15|a>>>17,a=a*f&$r|a*m&Bi,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(l=s[y],l=l*d&$r|l*g&Bi,l=l<<15|l>>>17,l=l*f&$r|l*m&Bi,c^=l,c=c<<13|c>>>19,c=c*5+3864292196);switch(a=0,o){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*d&$r|a*g&Bi,a=a<<15|a>>>17,a=a*f&$r|a*m&Bi,i&1?u^=a:c^=a}this.h1=u,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&$r|e*36045&Bi,t=t*4283543511&$r|((t<<16|e>>>16)*2950163797&$r)>>>16,e^=t>>>1,e=e*444984403&$r|e*60499&Bi,t=t*3301882366&$r|((t<<16|e>>>16)*3120437893&$r)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const pg=Object.freeze({map:null,hash:"",transfer:void 0});class Nm{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=this.#n.get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of this.#n.values())if(t instanceof Ue)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=this.#n.get(e);let i=!1;if(r!==void 0)for(const[o,s]of Object.entries(t))r[o]!==s&&(i=!0,r[o]=s);else i=!0,this.#n.set(e,t);i&&this.#r(),t instanceof Ue&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?Tm(this.#n):null}setAll(e){for(const[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return this.#n.size}#r(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new lw(this)}get serializable(){if(this.#n.size===0)return pg;const e=new Map,t=new aw,r=[],i=Object.create(null);let o=!1;for(const[s,a]of this.#n){const l=a instanceof Ue?a.serialize(!1,i):a;l&&(e.set(s,l),t.update(`${s}:${JSON.stringify(l)}`),o||=!!l.bitmap)}if(o)for(const s of e.values())s.bitmap&&r.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:pg}get editorStats(){let e=null;const t=new Map;for(const r of this.#n.values()){if(!(r instanceof Ue))continue;const i=r.telemetryFinalData;if(!i)continue;const{type:o}=i;t.has(o)||t.set(o,Object.getPrototypeOf(r).constructor),e||=Object.create(null);const s=e[o]||=new Map;for(const[a,l]of Object.entries(i)){if(a==="type")continue;let u=s.get(a);u||(u=new Map,s.set(a,u));const c=u.get(l)??0;u.set(l,c+1)}}for(const[r,i]of t)e[r]=i.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#n.values())!(t instanceof Ue)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class lw extends Nm{#e;constructor(e){super();const{map:t,hash:r,transfer:i}=e.serializable,o=structuredClone(t,i?{transfer:i}:null);this.#e={map:o,hash:r,transfer:i}}get print(){_t("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return ot(this,"modifiedIds",{ids:new Set,hash:""})}}class Pk{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#e.has(e.loadedName))){if(sn(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:o}=e,s=new FontFace(r,i,o);this.addNativeFontFace(s);try{await s.load(),this.#e.add(r),t?.(e)}catch{Je(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(s)}return}_t("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw Je(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return ot(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Hn||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ot(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(sn(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const o=r.shift();setTimeout(o.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ot(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(C,T){return C.charCodeAt(T)<<24|C.charCodeAt(T+1)<<16|C.charCodeAt(T+2)<<8|C.charCodeAt(T+3)&255}function i(C,T,D,k){const M=C.substring(0,T),N=C.substring(T+D);return M+k+N}let o,s;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let u=0;function c(C,T){if(++u>30){Je("Load test font never loaded."),T();return}if(l.font="30px "+C,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(c.bind(null,C,T))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const m=16,y=1482184792;let S=r(f,m);for(o=0,s=d.length-3;o<s;o+=4)S=S-y+r(d,o)|0;o<d.length&&(S=S-y+r(d+"XXX",o)|0),f=i(f,m,4,mk(S));const b=`url(data:font/opentype;base64,${btoa(f)});`,E=`@font-face {font-family:"${d}";src:${b}}`;this.insertRule(E);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const C of[e.loadedName,d]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=C,w.append(T)}this._document.body.append(w),c(d,()=>{w.remove(),t.complete()})}}class Mk{constructor(e,{disableFontFace:t=!1,fontExtraProperties:r=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const o in e)this[o]=e[o];this.disableFontFace=t===!0,this.fontExtraProperties=r===!0,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${wk(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let i;try{i=e.get(r)}catch(s){Je(`getPathGenerator - ignoring character: "${s}".`)}const o=new Path2D(i||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=o}}const Bc={DATA:1,ERROR:2},nn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function h0(){}function mr(n){if(n instanceof us||n instanceof hg||n instanceof xu||n instanceof l0||n instanceof Bd||n instanceof jf)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||_t('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new us(n.message);case"InvalidPDFException":return new hg(n.message);case"MissingPDFException":return new xu(n.message);case"PasswordException":return new l0(n.message,n.code);case"UnexpectedResponseException":return new Bd(n.message,n.status);case"UnknownErrorException":return new jf(n.message,n.details)}return new jf(n.message,n.toString())}class Ul{#e=new AbortController;constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#r(e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===Bc.DATA)i.resolve(e.data);else if(e.callback===Bc.ERROR)i.reject(mr(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(s){o.postMessage({sourceName:r,targetName:i,callback:Bc.DATA,callbackId:e.callbackId,data:s})},function(s){o.postMessage({sourceName:r,targetName:i,callback:Bc.ERROR,callbackId:e.callbackId,reason:mr(s)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[i]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(s){o.reject(s)}return o.promise}sendWithStream(e,t,r,i){const o=this.streamId++,s=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const c=Promise.withResolvers();return this.streamControllers[o]={controller:u,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:s,targetName:a,action:e,streamId:o,data:t,desiredSize:u.desiredSize},i),c.promise},pull:u=>{const c=Promise.withResolvers();return this.streamControllers[o].pullCall=c,l.postMessage({sourceName:s,targetName:a,stream:nn.PULL,streamId:o,desiredSize:u.desiredSize}),c.promise},cancel:u=>{sn(u instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[o].cancelCall=c,this.streamControllers[o].isClosed=!0,l.postMessage({sourceName:s,targetName:a,stream:nn.CANCEL,streamId:o,reason:mr(u)}),c.promise}},r)}#n(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,o=this.comObj,s=this,a=this.actionHandler[e.action],l={enqueue(u,c=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=c,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:r,targetName:i,stream:nn.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:r,targetName:i,stream:nn.CLOSE,streamId:t}),delete s.streamSinks[t])},error(u){sn(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:r,targetName:i,stream:nn.ERROR,streamId:t,reason:mr(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){o.postMessage({sourceName:r,targetName:i,stream:nn.START_COMPLETE,streamId:t,success:!0})},function(u){o.postMessage({sourceName:r,targetName:i,stream:nn.START_COMPLETE,streamId:t,reason:mr(u)})})}#r(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,o=this.comObj,s=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case nn.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(mr(e.reason));break;case nn.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(mr(e.reason));break;case nn.PULL:if(!a){o.postMessage({sourceName:r,targetName:i,stream:nn.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||h0).then(function(){o.postMessage({sourceName:r,targetName:i,stream:nn.PULL_COMPLETE,streamId:t,success:!0})},function(u){o.postMessage({sourceName:r,targetName:i,stream:nn.PULL_COMPLETE,streamId:t,reason:mr(u)})});break;case nn.ENQUEUE:if(sn(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case nn.CLOSE:if(sn(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),this.#o(s,t);break;case nn.ERROR:sn(s,"error should have stream controller"),s.controller.error(mr(e.reason)),this.#o(s,t);break;case nn.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(mr(e.reason)),this.#o(s,t);break;case nn.CANCEL:if(!a)break;const l=mr(e.reason);Promise.try(a.onCancel||h0,l).then(function(){o.postMessage({sourceName:r,targetName:i,stream:nn.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){o.postMessage({sourceName:r,targetName:i,stream:nn.CANCEL_COMPLETE,streamId:t,reason:mr(u)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#o(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class uw{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){_t("Abstract method `_createCanvas` called.")}}class Ik extends uw{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class cw{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){_t("Abstract method `_fetch` called.")}}class dw extends cw{async _fetch(e){const t=await Sh(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Ch(t)}}class hw{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,o){return"none"}destroy(e=!1){}}class Rk extends hw{#e;#t;#n;#r;#o;#i;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#r=e,this.#o=t}get#a(){return this.#t||=new Map}get#c(){return this.#i||=new Map}get#u(){if(!this.#n){const e=this.#o.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const r=this.#o.createElementNS(uo,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#n=this.#o.createElementNS(uo,"defs"),e.append(r),r.append(this.#n),this.#o.body.append(e)}return this.#n}#h(e){if(e.length===1){const l=e[0],u=new Array(256);for(let d=0;d<256;d++)u[d]=l[d]/255;const c=u.join(",");return[c,c,c]}const[t,r,i]=e,o=new Array(256),s=new Array(256),a=new Array(256);for(let l=0;l<256;l++)o[l]=t[l]/255,s[l]=r[l]/255,a[l]=i[l]/255;return[o.join(","),s.join(","),a.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#o.URL;t!==this.#o.baseURI&&(xh(t)?Je('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#a.get(e);if(t)return t;const[r,i,o]=this.#h(e),s=e.length===1?r:`${r}${i}${o}`;if(t=this.#a.get(s),t)return this.#a.set(e,t),t;const a=`g_${this.#r}_transfer_map_${this.#l++}`,l=this.#d(a);this.#a.set(e,l),this.#a.set(s,l);const u=this.#p(a);return this.#g(r,i,o,u),l}addHCMFilter(e,t){const r=`${e}-${t}`,i="base";let o=this.#c.get(i);if(o?.key===r||(o?(o.filter?.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},this.#c.set(i,o)),!e||!t))return o.url;const s=this.#E(e);e=Ne.makeHexColor(...s);const a=this.#E(t);if(t=Ne.makeHexColor(...a),this.#u.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return o.url;const l=new Array(256);for(let g=0;g<=255;g++){const m=g/255;l[g]=m<=.03928?m/12.92:((m+.055)/1.055)**2.4}const u=l.join(","),c=`g_${this.#r}_hcm_filter`,d=o.filter=this.#p(c);this.#g(u,u,u,d),this.#s(d);const f=(g,m)=>{const y=s[g]/255,S=a[g]/255,b=new Array(m+1);for(let E=0;E<=m;E++)b[E]=y+E/m*(S-y);return b.join(",")};return this.#g(f(0,5),f(1,5),f(2,5),d),o.url=this.#d(c),o.url}addAlphaFilter(e){let t=this.#a.get(e);if(t)return t;const[r]=this.#h([e]),i=`alpha_${r}`;if(t=this.#a.get(i),t)return this.#a.set(e,t),t;const o=`g_${this.#r}_alpha_map_${this.#l++}`,s=this.#d(o);this.#a.set(e,s),this.#a.set(i,s);const a=this.#p(o);return this.#v(r,a),s}addLuminosityFilter(e){let t=this.#a.get(e||"luminosity");if(t)return t;let r,i;if(e?([r]=this.#h([e]),i=`luminosity_${r}`):i="luminosity",t=this.#a.get(i),t)return this.#a.set(e,t),t;const o=`g_${this.#r}_luminosity_map_${this.#l++}`,s=this.#d(o);this.#a.set(e,s),this.#a.set(i,s);const a=this.#p(o);return this.#f(a),e&&this.#v(r,a),s}addHighlightHCMFilter(e,t,r,i,o){const s=`${t}-${r}-${i}-${o}`;let a=this.#c.get(e);if(a?.key===s||(a?(a.filter?.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},this.#c.set(e,a)),!t||!r))return a.url;const[l,u]=[t,r].map(this.#E.bind(this));let c=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[f,g]=[i,o].map(this.#E.bind(this));d<c&&([c,d,f,g]=[d,c,g,f]),this.#u.style.color="";const m=(b,E,w)=>{const C=new Array(256),T=(d-c)/w,D=b/255,k=(E-b)/(255*w);let M=0;for(let N=0;N<=w;N++){const U=Math.round(c+N*T),ne=D+N*k;for(let oe=M;oe<=U;oe++)C[oe]=ne;M=U+1}for(let N=M;N<256;N++)C[N]=C[M-1];return C.join(",")},y=`g_${this.#r}_hcm_${e}_filter`,S=a.filter=this.#p(y);return this.#s(S),this.#g(m(f[0],g[0],5),m(f[1],g[1],5),m(f[2],g[2],5),S),a.url=this.#d(y),a.url}destroy(e=!1){e&&this.#i?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#l=0)}#f(e){const t=this.#o.createElementNS(uo,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#s(e){const t=this.#o.createElementNS(uo,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){const t=this.#o.createElementNS(uo,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#u.append(t),t}#m(e,t,r){const i=this.#o.createElementNS(uo,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),e.append(i)}#g(e,t,r,i){const o=this.#o.createElementNS(uo,"feComponentTransfer");i.append(o),this.#m(o,"feFuncR",e),this.#m(o,"feFuncG",t),this.#m(o,"feFuncB",r)}#v(e,t){const r=this.#o.createElementNS(uo,"feComponentTransfer");t.append(r),this.#m(r,"feFuncA",e)}#E(e){return this.#u.style.color=e,Im(getComputedStyle(this.#u).getPropertyValue("color"))}}class fw{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){_t("Abstract method `_fetch` called.")}}class pw extends fw{async _fetch(e){const t=await Sh(e,"arraybuffer");return new Uint8Array(t)}}Hn&&Je("Please use the `legacy` build in Node.js environments.");async function gw(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class Lk extends hw{}class Nk extends uw{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Bk extends cw{async _fetch(e){return gw(e)}}class Ok extends fw{async _fetch(e){return gw(e)}}const Bn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function gg(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class Bm{getPattern(){_t("Abstract method `getPattern` called.")}}class Hk extends Bm{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let o;if(i===Bn.STROKE||i===Bn.FILL){const s=t.current.getClippedPathBoundingBox(i,It(e))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,l=Math.ceil(s[3]-s[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,l),c=u.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-s[0],-s[1]),r=Ne.transform(r,[1,0,0,1,s[0],s[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),gg(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),o=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(r);o.setTransform(d)}else gg(e,this._bbox),o=this._createGradient(e);return o}}function Vf(n,e,t,r,i,o,s,a){const l=e.coords,u=e.colors,c=n.data,d=n.width*4;let f;l[t+1]>l[r+1]&&(f=t,t=r,r=f,f=o,o=s,s=f),l[r+1]>l[i+1]&&(f=r,r=i,i=f,f=s,s=a,a=f),l[t+1]>l[r+1]&&(f=t,t=r,r=f,f=o,o=s,s=f);const g=(l[t]+e.offsetX)*e.scaleX,m=(l[t+1]+e.offsetY)*e.scaleY,y=(l[r]+e.offsetX)*e.scaleX,S=(l[r+1]+e.offsetY)*e.scaleY,b=(l[i]+e.offsetX)*e.scaleX,E=(l[i+1]+e.offsetY)*e.scaleY;if(m>=E)return;const w=u[o],C=u[o+1],T=u[o+2],D=u[s],k=u[s+1],M=u[s+2],N=u[a],U=u[a+1],ne=u[a+2],oe=Math.round(m),ae=Math.round(E);let te,we,J,Q,G,re,ie,Ce;for(let Te=oe;Te<=ae;Te++){if(Te<S){const fe=Te<m?0:(m-Te)/(m-S);te=g-(g-y)*fe,we=w-(w-D)*fe,J=C-(C-k)*fe,Q=T-(T-M)*fe}else{let fe;Te>E?fe=1:S===E?fe=0:fe=(S-Te)/(S-E),te=y-(y-b)*fe,we=D-(D-N)*fe,J=k-(k-U)*fe,Q=M-(M-ne)*fe}let Oe;Te<m?Oe=0:Te>E?Oe=1:Oe=(m-Te)/(m-E),G=g-(g-b)*Oe,re=w-(w-N)*Oe,ie=C-(C-U)*Oe,Ce=T-(T-ne)*Oe;const De=Math.round(Math.min(te,G)),pt=Math.round(Math.max(te,G));let He=d*Te+De*4;for(let fe=De;fe<=pt;fe++)Oe=(te-fe)/(te-G),Oe<0?Oe=0:Oe>1&&(Oe=1),c[He++]=we-(we-re)*Oe|0,c[He++]=J-(J-ie)*Oe|0,c[He++]=Q-(Q-Ce)*Oe|0,c[He++]=255}}function zk(n,e,t){const r=e.coords,i=e.colors;let o,s;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(r.length/a)-1,u=a-1;for(o=0;o<l;o++){let c=o*a;for(let d=0;d<u;d++,c++)Vf(n,t,r[c],r[c+1],r[c+a],i[c],i[c+1],i[c+a]),Vf(n,t,r[c+a+1],r[c+1],r[c+a],i[c+a+1],i[c+1],i[c+a])}break;case"triangles":for(o=0,s=r.length;o<s;o+=3)Vf(n,t,r[o],r[o+1],r[o+2],i[o],i[o+1],i[o+2]);break;default:throw new Error("illegal figure")}}class jk extends Bm{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,c=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(c*e[1]*1.1)),3e3),g=u/d,m=c/f,y={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/g,scaleY:1/m},S=d+2*2,b=f+2*2,E=r.getCanvas("mesh",S,b),w=E.context,C=w.createImageData(d,f);if(t){const D=C.data;for(let k=0,M=D.length;k<M;k+=4)D[k]=t[0],D[k+1]=t[1],D[k+2]=t[2],D[k+3]=255}for(const D of this._figures)zk(C,D,y);return w.putImageData(C,2,2),{canvas:E.canvas,offsetX:a-2*g,offsetY:l-2*m,scaleX:g,scaleY:m}}getPattern(e,t,r,i){gg(e,this._bbox);let o;if(i===Bn.SHADING)o=Ne.singularValueDecompose2dScale(It(e));else if(o=Ne.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=Ne.singularValueDecompose2dScale(this.matrix);o=[o[0]*a[0],o[1]*a[1]]}const s=this._createMeshCanvas(o,i===Bn.SHADING?null:this._background,t.cachedCanvases);return i!==Bn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class Wk extends Bm{getPattern(){return"hotpink"}}function Uk(n){switch(n[0]){case"RadialAxial":return new Hk(n);case"Mesh":return new jk(n);case"Dummy":return new Wk}throw new Error(`Unknown IR type: ${n[0]}`)}const f0={COLORED:1,UNCOLORED:2};class Om{static MAX_PATTERN_SIZE=3e3;constructor(e,t,r,i,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=i,this.baseTransform=o}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:i,tilingType:o,color:s,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),wh("TilingType: "+o);const c=t[0],d=t[1],f=t[2],g=t[3],m=f-c,y=g-d,S=Ne.singularValueDecompose2dScale(this.matrix),b=Ne.singularValueDecompose2dScale(this.baseTransform),E=S[0]*b[0],w=S[1]*b[1];let C=m,T=y,D=!1,k=!1;const M=Math.ceil(l*E),N=Math.ceil(u*w),U=Math.ceil(m*E),ne=Math.ceil(y*w);M>=U?C=l:D=!0,N>=ne?T=u:k=!0;const oe=this.getSizeAndScale(C,this.ctx.canvas.width,E),ae=this.getSizeAndScale(T,this.ctx.canvas.height,w),te=e.cachedCanvases.getCanvas("pattern",oe.size,ae.size),we=te.context,J=a.createCanvasGraphics(we);if(J.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(J,i,s),we.translate(-oe.scale*c,-ae.scale*d),J.transform(oe.scale,0,0,ae.scale,0,0),we.save(),this.clipBbox(J,c,d,f,g),J.baseTransform=It(J.ctx),J.executeOperatorList(r),J.endDrawing(),we.restore(),D||k){const Q=te.canvas;D&&(C=l),k&&(T=u);const G=this.getSizeAndScale(C,this.ctx.canvas.width,E),re=this.getSizeAndScale(T,this.ctx.canvas.height,w),ie=G.size,Ce=re.size,Te=e.cachedCanvases.getCanvas("pattern-workaround",ie,Ce),Oe=Te.context,De=D?Math.floor(m/l):0,pt=k?Math.floor(y/u):0;for(let He=0;He<=De;He++)for(let fe=0;fe<=pt;fe++)Oe.drawImage(Q,ie*He,Ce*fe,ie,Ce,0,0,ie,Ce);return{canvas:Te.canvas,scaleX:G.scale,scaleY:re.scale,offsetX:c,offsetY:d}}return{canvas:te.canvas,scaleX:oe.scale,scaleY:ae.scale,offsetX:c,offsetY:d}}getSizeAndScale(e,t,r){const i=Math.max(Om.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*r);return o>=i?o=i:r=o/e,{scale:r,size:o}}clipBbox(e,t,r,i,o){const s=i-t,a=o-r;e.ctx.rect(t,r,s,a),e.current.updateRectMinMax(It(e.ctx),[t,r,i,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,o=e.current;switch(t){case f0.COLORED:const s=this.ctx;i.fillStyle=s.fillStyle,i.strokeStyle=s.strokeStyle,o.fillColor=s.fillStyle,o.strokeColor=s.strokeStyle;break;case f0.UNCOLORED:const a=Ne.makeHexColor(r[0],r[1],r[2]);i.fillStyle=a,i.strokeStyle=a,o.fillColor=a,o.strokeColor=a;break;default:throw new gk(`Unsupported paint type: ${t}`)}}getPattern(e,t,r,i){let o=r;i!==Bn.SHADING&&(o=Ne.transform(o,t.baseTransform),this.matrix&&(o=Ne.transform(o,this.matrix)));const s=this.createPatternCanvas(t);let a=new DOMMatrix(o);a=a.translate(s.offsetX,s.offsetY),a=a.scale(1/s.scaleX,1/s.scaleY);const l=e.createPattern(s.canvas,"repeat");return l.setTransform(a),l}}function Vk({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:o=4294967295,inverseDecode:s=!1}){const a=sr.isLittleEndian?4278190080:255,[l,u]=s?[o,a]:[a,o],c=r>>3,d=r&7,f=n.length;t=new Uint32Array(t.buffer);let g=0;for(let m=0;m<i;m++){for(const S=e+c;e<S;e++){const b=e<f?n[e]:255;t[g++]=b&128?u:l,t[g++]=b&64?u:l,t[g++]=b&32?u:l,t[g++]=b&16?u:l,t[g++]=b&8?u:l,t[g++]=b&4?u:l,t[g++]=b&2?u:l,t[g++]=b&1?u:l}if(d===0)continue;const y=e<f?n[e++]:255;for(let S=0;S<d;S++)t[g++]=y&1<<7-S?u:l}return{srcPos:e,destPos:g}}const p0=16,g0=100,Kk=15,m0=10,v0=1e3,vr=16;function $k(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(r,i){e.translate(r,i),this.__originalTranslate(r,i)},n.scale=function(r,i){e.scale(r,i),this.__originalScale(r,i)},n.transform=function(r,i,o,s,a,l){e.transform(r,i,o,s,a,l),this.__originalTransform(r,i,o,s,a,l)},n.setTransform=function(r,i,o,s,a,l){e.setTransform(r,i,o,s,a,l),this.__originalSetTransform(r,i,o,s,a,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(r){e.rotate(r),this.__originalRotate(r)},n.clip=function(r){e.clip(r),this.__originalClip(r)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,o,s,a){e.bezierCurveTo(t,r,i,o,s,a),this.__originalBezierCurveTo(t,r,i,o,s,a)},n.rect=function(t,r,i,o){e.rect(t,r,i,o),this.__originalRect(t,r,i,o)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Gk{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Oc(n,e,t,r,i,o,s,a,l,u){const[c,d,f,g,m,y]=It(n);if(d===0&&f===0){const E=s*c+m,w=Math.round(E),C=a*g+y,T=Math.round(C),D=(s+l)*c+m,k=Math.abs(Math.round(D)-w)||1,M=(a+u)*g+y,N=Math.abs(Math.round(M)-T)||1;return n.setTransform(Math.sign(c),0,0,Math.sign(g),w,T),n.drawImage(e,t,r,i,o,0,0,k,N),n.setTransform(c,d,f,g,m,y),[k,N]}if(c===0&&g===0){const E=a*f+m,w=Math.round(E),C=s*d+y,T=Math.round(C),D=(a+u)*f+m,k=Math.abs(Math.round(D)-w)||1,M=(s+l)*d+y,N=Math.abs(Math.round(M)-T)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,w,T),n.drawImage(e,t,r,i,o,0,0,N,k),n.setTransform(c,d,f,g,m,y),[N,k]}n.drawImage(e,t,r,i,o,s,a,l,u);const S=Math.hypot(c,d),b=Math.hypot(f,g);return[S*l,b*u]}function qk(n){const{width:e,height:t}=n;if(e>v0||t>v0)return null;const r=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e+1;let s=new Uint8Array(o*(t+1)),a,l,u;const c=e+7&-8;let d=new Uint8Array(c*t),f=0;for(const b of n.data){let E=128;for(;E>0;)d[f++]=b&E?0:255,E>>=1}let g=0;for(f=0,d[f]!==0&&(s[0]=1,++g),l=1;l<e;l++)d[f]!==d[f+1]&&(s[l]=d[f]?2:1,++g),f++;for(d[f]!==0&&(s[l]=2,++g),a=1;a<t;a++){f=a*c,u=a*o,d[f-c]!==d[f]&&(s[u]=d[f]?1:8,++g);let b=(d[f]?4:0)+(d[f-c]?8:0);for(l=1;l<e;l++)b=(b>>2)+(d[f+1]?4:0)+(d[f-c+1]?8:0),i[b]&&(s[u+l]=i[b],++g),f++;if(d[f-c]!==d[f]&&(s[u+l]=d[f]?2:4,++g),g>r)return null}for(f=c*(t-1),u=a*o,d[f]!==0&&(s[u]=8,++g),l=1;l<e;l++)d[f]!==d[f+1]&&(s[u+l]=d[f]?4:8,++g),f++;if(d[f]!==0&&(s[u+l]=4,++g),g>r)return null;const m=new Int32Array([0,o,-1,0,-o,0,0,0,1]),y=new Path2D;for(a=0;g&&a<=t;a++){let b=a*o;const E=b+e;for(;b<E&&!s[b];)b++;if(b===E)continue;y.moveTo(b%o,a);const w=b;let C=s[b];do{const T=m[C];do b+=T;while(!s[b]);const D=s[b];D!==5&&D!==10?(C=D,s[b]=0):(C=D&51*C>>4,s[b]&=C>>2|C<<2),y.lineTo(b%o,b/o|0),s[b]||--g}while(w!==b);--a}return d=null,s=null,function(b){b.save(),b.scale(1/e,-1/t),b.translate(0,-t),b.fill(y),b.beginPath(),b.restore()}}class y0{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=iw,this.textMatrixScale=1,this.fontMatrix=dg,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Ln.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=Ne.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=Ne.applyTransform(t,e),i=Ne.applyTransform(t.slice(2),e),o=Ne.applyTransform([t[0],t[3]],e),s=Ne.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],i[0],o[0],s[0]),this.minY=Math.min(this.minY,r[1],i[1],o[1],s[1]),this.maxX=Math.max(this.maxX,r[0],i[0],o[0],s[0]),this.maxY=Math.max(this.maxY,r[1],i[1],o[1],s[1])}updateScalingPathMinMax(e,t){Ne.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,i,o,s,a,l,u,c){const d=Ne.bezierBoundingBox(t,r,i,o,s,a,l,u,c);c||this.updateRectMinMax(e,d)}getPathBoundingBox(e=Bn.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===Bn.STROKE){t||_t("Stroke bounding box must include transform.");const i=Ne.singularValueDecompose2dScale(t),o=i[0]*this.lineWidth/2,s=i[1]*this.lineWidth/2;r[0]-=o,r[1]-=s,r[2]+=o,r[3]+=s}return r}updateClipFromPath(){const e=Ne.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Bn.FILL,t=null){return Ne.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function b0(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,i=t%vr,o=(t-i)/vr,s=i===0?o:o+1,a=n.createImageData(r,vr);let l=0,u;const c=e.data,d=a.data;let f,g,m,y;if(e.kind===ld.GRAYSCALE_1BPP){const S=c.byteLength,b=new Uint32Array(d.buffer,0,d.byteLength>>2),E=b.length,w=r+7>>3,C=4294967295,T=sr.isLittleEndian?4278190080:255;for(f=0;f<s;f++){for(m=f<o?vr:i,u=0,g=0;g<m;g++){const D=S-l;let k=0;const M=D>w?r:D*8-7,N=M&-8;let U=0,ne=0;for(;k<N;k+=8)ne=c[l++],b[u++]=ne&128?C:T,b[u++]=ne&64?C:T,b[u++]=ne&32?C:T,b[u++]=ne&16?C:T,b[u++]=ne&8?C:T,b[u++]=ne&4?C:T,b[u++]=ne&2?C:T,b[u++]=ne&1?C:T;for(;k<M;k++)U===0&&(ne=c[l++],U=128),b[u++]=ne&U?C:T,U>>=1}for(;u<E;)b[u++]=0;n.putImageData(a,0,f*vr)}}else if(e.kind===ld.RGBA_32BPP){for(g=0,y=r*vr*4,f=0;f<o;f++)d.set(c.subarray(l,l+y)),l+=y,n.putImageData(a,0,g),g+=vr;f<s&&(y=r*i*4,d.set(c.subarray(l,l+y)),n.putImageData(a,0,g))}else if(e.kind===ld.RGB_24BPP)for(m=vr,y=r*m,f=0;f<s;f++){for(f>=o&&(m=i,y=r*m),u=0,g=y;g--;)d[u++]=c[l++],d[u++]=c[l++],d[u++]=c[l++],d[u++]=255;n.putImageData(a,0,f*vr)}else throw new Error(`bad image kind: ${e.kind}`)}function E0(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,i=t%vr,o=(t-i)/vr,s=i===0?o:o+1,a=n.createImageData(r,vr);let l=0;const u=e.data,c=a.data;for(let d=0;d<s;d++){const f=d<o?vr:i;({srcPos:l}=Vk({src:u,srcPos:l,dest:c,width:r,height:f,nonBlackColor:0})),n.putImageData(a,0,d*vr)}}function Tl(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Hc(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Hn){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function _0(n,e){if(e)return!0;const t=Ne.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*Ga.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}const Xk=["butt","round","square"],Yk=["miter","round","bevel"],Qk={},w0={};class Ba{constructor(e,t,r,i,o,{optionalContentConfig:s,markedContentStack:a=null},l,u){this.ctx=e,this.current=new y0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=s,this.cachedCanvases=new Gk(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const o=this.ctx.canvas.width,s=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,o,s),this.ctx.fillStyle=a,r){const l=this.cachedCanvases.getCanvas("transparent",o,s);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...It(this.compositeCtx))}this.ctx.save(),Hc(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=It(this.ctx)}executeOperatorList(e,t,r,i){const o=e.argsArray,s=e.fnArray;let a=t||0;const l=o.length;if(l===a)return a;const u=l-a>m0&&typeof r=="function",c=u?Date.now()+Kk:0;let d=0;const f=this.commonObjs,g=this.objs;let m;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,r),a;if(m=s[a],m!==vi.dependency)this[m].apply(this,o[a]);else for(const y of o[a]){const S=y.startsWith("g_")?f:g;if(!S.has(y))return S.get(y,r),a}if(a++,a===l)return a;if(u&&++d>m0){if(Date.now()>c)return r(),a;d=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),a=r,l=i,u="prescale1",c,d;for(;o>2&&a>1||s>2&&l>1;){let f=a,g=l;o>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),o/=a/f),s>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,s/=l/g),c=this.cachedCanvases.getCanvas(u,f,g),d=c.context,d.clearRect(0,0,f,g),d.drawImage(e,0,0,a,l,0,0,f,g),e=c.canvas,a=f,l=g,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:i}=e,o=this.current.fillColor,s=this.current.patternFill,a=It(t);let l,u,c,d;if((e.bitmap||e.data)&&e.count>1){const M=e.bitmap||e.data.buffer;u=JSON.stringify(s?a:[a.slice(0,4),o]),l=this._cachedBitmapsMap.get(M),l||(l=new Map,this._cachedBitmapsMap.set(M,l));const N=l.get(u);if(N&&!s){const U=Math.round(Math.min(a[0],a[2])+a[4]),ne=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:N,offsetX:U,offsetY:ne}}c=N}c||(d=this.cachedCanvases.getCanvas("maskCanvas",r,i),E0(d.context,e));let f=Ne.transform(a,[1/r,0,0,-1/i,0,0]);f=Ne.transform(f,[1,0,0,1,0,-i]);const[g,m,y,S]=Ne.getAxialAlignedBoundingBox([0,0,r,i],f),b=Math.round(y-g)||1,E=Math.round(S-m)||1,w=this.cachedCanvases.getCanvas("fillCanvas",b,E),C=w.context,T=g,D=m;C.translate(-T,-D),C.transform(...f),c||(c=this._scaleImage(d.canvas,Ni(C)),c=c.img,l&&s&&l.set(u,c)),C.imageSmoothingEnabled=_0(It(C),e.interpolate),Oc(C,c,0,0,c.width,c.height,0,0,r,i),C.globalCompositeOperation="source-in";const k=Ne.transform(Ni(C),[1,0,0,1,-T,-D]);return C.fillStyle=s?o.getPattern(t,this,k,Bn.FILL):o,C.fillRect(0,0,r,i),l&&!s&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,w.canvas)),{canvas:w.canvas,offsetX:Math.round(T),offsetY:Math.round(D)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=Xk[e]}setLineJoin(e){this.ctx.lineJoin=Yk[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const o=this.ctx;o.setTransform(...It(this.suspendedCtx)),Tl(this.suspendedCtx,o),$k(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Tl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){const o=i[0],s=i[1],a=i[2]-o,l=i[3]-s;a===0||l===0||(this.genericComposeSMask(t.context,r,a,l,t.subtype,t.backdrop,t.transferMap,o,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,o,s,a,l,u,c,d){let f=e.canvas,g=l-c,m=u-d;if(s){const S=Ne.makeHexColor(...s);if(g<0||m<0||g+r>f.width||m+i>f.height){const b=this.cachedCanvases.getCanvas("maskExtension",r,i),E=b.context;E.drawImage(f,-g,-m),E.globalCompositeOperation="destination-atop",E.fillStyle=S,E.fillRect(0,0,r,i),E.globalCompositeOperation="source-over",f=b.canvas,g=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(g,m,r,i),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=S,e.fillRect(g,m,r,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const y=new Path2D;y.rect(l,u,r,i),t.clip(y),t.globalCompositeOperation="destination-in",t.drawImage(f,g,m,r,i,l,u,r,i),t.restore()}save(){this.inSMaskMode?(Tl(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Tl(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,i,o,s){this.ctx.transform(e,t,r,i,o,s),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const i=this.ctx,o=this.current;let s=o.x,a=o.y,l,u;const c=It(i),d=c[0]===0&&c[3]===0||c[1]===0&&c[2]===0,f=d?r.slice(0):null;for(let g=0,m=0,y=e.length;g<y;g++)switch(e[g]|0){case vi.rectangle:s=t[m++],a=t[m++];const S=t[m++],b=t[m++],E=s+S,w=a+b;i.moveTo(s,a),S===0||b===0?i.lineTo(E,w):(i.lineTo(E,a),i.lineTo(E,w),i.lineTo(s,w)),d||o.updateRectMinMax(c,[s,a,E,w]),i.closePath();break;case vi.moveTo:s=t[m++],a=t[m++],i.moveTo(s,a),d||o.updatePathMinMax(c,s,a);break;case vi.lineTo:s=t[m++],a=t[m++],i.lineTo(s,a),d||o.updatePathMinMax(c,s,a);break;case vi.curveTo:l=s,u=a,s=t[m+4],a=t[m+5],i.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],s,a),o.updateCurvePathMinMax(c,l,u,t[m],t[m+1],t[m+2],t[m+3],s,a,f),m+=6;break;case vi.curveTo2:l=s,u=a,i.bezierCurveTo(s,a,t[m],t[m+1],t[m+2],t[m+3]),o.updateCurvePathMinMax(c,l,u,s,a,t[m],t[m+1],t[m+2],t[m+3],f),s=t[m+2],a=t[m+3],m+=4;break;case vi.curveTo3:l=s,u=a,s=t[m+2],a=t[m+3],i.bezierCurveTo(t[m],t[m+1],s,a,s,a),o.updateCurvePathMinMax(c,l,u,t[m],t[m+1],s,a,s,a,f),m+=4;break;case vi.closePath:i.closePath();break}d&&o.updateScalingPathMinMax(c,f),o.setCurrentPoint(s,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&r?.getPattern?(t.save(),t.strokeStyle=r.getPattern(t,this,Ni(t),Bn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;let o=!1;i&&(t.save(),t.fillStyle=r.getPattern(t,this,Ni(t),Bn.FILL),o=!0);const s=this.current.getClippedPathBoundingBox();this.contentVisible&&s!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),o&&t.restore(),e&&this.consumePath(s)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Qk}eoClip(){this.pendingClip=w0}beginText(){this.current.textMatrix=iw,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const r=new Path2D,i=t.getTransform().invertSelf();for(const{transform:o,x:s,y:a,fontSize:l,path:u}of e)r.addPath(u,new DOMMatrix(o).preMultiplySelf(i).translate(s,a).scale(l,-l));t.clip(r),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const r=this.commonObjs.get(e),i=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=r.fontMatrix||dg,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Je("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const o=r.loadedName||"sans-serif",s=r.systemFontInfo?.css||`"${o}", ${r.fallbackName}`;let a="normal";r.black?a="900":r.bold&&(a="bold");const l=r.italic?"italic":"normal";let u=t;t<p0?u=p0:t>g0&&(u=g0),this.current.fontSizeScale=t/u,this.ctx.font=`${l} ${a} ${u}px ${s}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,i,o,s){this.current.textMatrix=[e,t,r,i,o,s],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(e,t,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),i}paintChar(e,t,r,i,o){const s=this.ctx,a=this.current,l=a.font,u=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,d=u&Ln.FILL_STROKE_MASK,f=!!(u&Ln.ADD_TO_PATH_FLAG),g=a.patternFill&&!l.missingFile,m=a.patternStroke&&!l.missingFile;let y;if((l.disableFontFace||f||g||m)&&(y=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||g||m){if(s.save(),s.translate(t,r),s.scale(c,-c),d===Ln.FILL||d===Ln.FILL_STROKE)if(i){const S=s.getTransform();s.setTransform(...i),s.fill(this.#n(y,S,i))}else s.fill(y);if(d===Ln.STROKE||d===Ln.FILL_STROKE)if(o){const S=s.getTransform();s.setTransform(...o),s.stroke(this.#n(y,S,o))}else s.lineWidth/=c,s.stroke(y);s.restore()}else(d===Ln.FILL||d===Ln.FILL_STROKE)&&s.fillText(e,t,r),(d===Ln.STROKE||d===Ln.FILL_STROKE)&&s.strokeText(e,t,r);f&&(this.pendingTextPaths||=[]).push({transform:It(s),x:t,y:r,fontSize:c,path:y})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return ot(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const o=this.ctx,s=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,u=t.fontDirection,c=t.textHScale*u,d=e.length,f=r.vertical,g=f?1:-1,m=r.defaultVMetrics,y=i*t.fontMatrix[0],S=t.textRenderingMode===Ln.FILL&&!r.disableFontFace&&!t.patternFill;o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),u>0?o.scale(c,-1):o.scale(c,1);let b,E;if(t.patternFill){o.save();const k=t.fillColor.getPattern(o,this,Ni(o),Bn.FILL);b=It(o),o.restore(),o.fillStyle=k}if(t.patternStroke){o.save();const k=t.strokeColor.getPattern(o,this,Ni(o),Bn.STROKE);E=It(o),o.restore(),o.strokeStyle=k}let w=t.lineWidth;const C=t.textMatrixScale;if(C===0||w===0){const k=t.textRenderingMode&Ln.FILL_STROKE_MASK;(k===Ln.STROKE||k===Ln.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=C;if(s!==1&&(o.scale(s,s),w/=s),o.lineWidth=w,r.isInvalidPDFjsFont){const k=[];let M=0;for(const N of e)k.push(N.unicode),M+=N.width;o.fillText(k.join(""),0,0),t.x+=M*y*c,o.restore(),this.compose();return}let T=0,D;for(D=0;D<d;++D){const k=e[D];if(typeof k=="number"){T+=g*k*i/1e3;continue}let M=!1;const N=(k.isSpace?l:0)+a,U=k.fontChar,ne=k.accent;let oe,ae,te=k.width;if(f){const J=k.vmetric||m,Q=-(k.vmetric?J[1]:te*.5)*y,G=J[2]*y;te=J?-J[0]:te,oe=Q/s,ae=(T+G)/s}else oe=T/s,ae=0;if(r.remeasure&&te>0){const J=o.measureText(U).width*1e3/i*s;if(te<J&&this.isFontSubpixelAAEnabled){const Q=te/J;M=!0,o.save(),o.scale(Q,1),oe/=Q}else te!==J&&(oe+=(te-J)/2e3*i/s)}if(this.contentVisible&&(k.isInFont||r.missingFile)){if(S&&!ne)o.fillText(U,oe,ae);else if(this.paintChar(U,oe,ae,b,E),ne){const J=oe+i*ne.offset.x/s,Q=ae-i*ne.offset.y/s;this.paintChar(ne.fontChar,J,Q,b,E)}}const we=f?te*y-N*u:te*y+N*u;T+=we,M&&o.restore()}f?t.y-=T:t.x+=T*c,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,i=r.font,o=r.fontSize,s=r.fontDirection,a=i.vertical?1:-1,l=r.charSpacing,u=r.wordSpacing,c=r.textHScale*s,d=r.fontMatrix||dg,f=e.length,g=r.textRenderingMode===Ln.INVISIBLE;let m,y,S,b;if(!(g||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y),t.scale(c,s),m=0;m<f;++m){if(y=e[m],typeof y=="number"){b=a*y*o/1e3,this.ctx.translate(b,0),r.x+=b*c;continue}const E=(y.isSpace?u:0)+l,w=i.charProcOperatorList[y.operatorListId];if(!w){Je(`Type3 character "${y.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=y,this.save(),t.scale(o,o),t.transform(...d),this.executeOperatorList(w),this.restore()),S=Ne.applyTransform([y.width,0],d)[0]*o+E,t.translate(S,0),r.x+=S*c}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,i,o,s){this.ctx.rect(r,i,o-r,s-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=e[1],i=this.baseTransform||It(this.ctx),o={createCanvasGraphics:s=>new Ba(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Om(e,r,this.ctx,o,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){this.ctx.strokeStyle=this.current.strokeColor=Ne.makeHexColor(e,t,r),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,r){this.ctx.fillStyle=this.current.fillColor=Ne.makeHexColor(e,t,r),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=Uk(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,Ni(t),Bn.SHADING);const i=Ni(t);if(i){const{width:o,height:s}=t.canvas,[a,l,u,c]=Ne.getAxialAlignedBoundingBox([0,0,o,s],i);this.ctx.fillRect(a,l,u-a,c-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){_t("Should not call beginInlineImage")}beginImageData(){_t("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=It(this.ctx),t)){const r=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],r,i),this.current.updateRectMinMax(It(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||wh("TODO: Support non-isolated groups."),e.knockout&&Je("Knockout groups not supported.");const r=It(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=Ne.getAxialAlignedBoundingBox(e.bbox,It(t));const o=[0,0,t.canvas.width,t.canvas.height];i=Ne.intersect(i,o)||[0,0,0,0];const s=Math.floor(i[0]),a=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-s,1),u=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,u]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(c,l,u),f=d.context;f.translate(-s,-a),f.transform(...r),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:s,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(s,a),t.save()),Tl(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=It(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const o=Ne.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,r,i,o){if(this.#e(),Hc(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const s=t[2]-t[0],a=t[3]-t[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=s,t[3]=a;const[l,u]=Ne.singularValueDecompose2dScale(It(this.ctx)),{viewportScale:c}=this,d=Math.ceil(s*this.outputScaleX*c),f=Math.ceil(a*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:g,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(l,0,0,-u,0,a*u),Hc(this.ctx)}else Hc(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],s,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new y0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=qk(e)),i.compiled)){i.compiled(r);return}const o=this._createMaskCanvas(e),s=o.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(s,o.offsetX,o.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,i=0,o,s){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=It(a);a.transform(t,r,i,o,0,0);const u=this._createMaskCanvas(e);a.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let c=0,d=s.length;c<d;c+=2){const f=Ne.transform(l,[t,r,i,o,s[c],s[c+1]]),[g,m]=Ne.applyTransform([0,0],f);a.drawImage(u.canvas,g,m)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;for(const o of e){const{data:s,width:a,height:l,transform:u}=o,c=this.cachedCanvases.getCanvas("maskCanvas",a,l),d=c.context;d.save();const f=this.getObject(s,o);E0(d,f),d.globalCompositeOperation="source-in",d.fillStyle=i?r.getPattern(d,this,Ni(t),Bn.FILL):r,d.fillRect(0,0,a,l),d.restore(),t.save(),t.transform(...u),t.scale(1,-1),Oc(t,c.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Je("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,i){if(!this.contentVisible)return;const o=this.getObject(e);if(!o){Je("Dependent image isn't ready yet");return}const s=o.width,a=o.height,l=[];for(let u=0,c=i.length;u<c;u+=2)l.push({transform:[t,0,0,r,i[u],i[u+1]],x:0,y:0,w:s,h:a});this.paintInlineImageXObjectGroup(o,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:i}=e,o=this.cachedCanvases.getCanvas("inlineImage",r,i),s=o.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",o.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,i=this.ctx;if(this.save(),!Hn){const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none")}i.scale(1/t,-1/r);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,r).context;b0(l,e),o=this.applyTransferMapsToCanvas(l)}const s=this._scaleImage(o,Ni(i));i.imageSmoothingEnabled=_0(It(i),e.interpolate),Oc(i,s.img,0,0,s.paintWidth,s.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const o=e.width,s=e.height,l=this.cachedCanvases.getCanvas("inlineImage",o,s).context;b0(l,e),i=this.applyTransferMapsToCanvas(l)}for(const o of t)r.save(),r.transform(...o.transform),r.scale(1,-1),Oc(r,i,o.x,o.y,o.w,o.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===w0?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=It(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:o}=this.ctx.getTransform();let s,a;if(r===0&&i===0){const l=Math.abs(t),u=Math.abs(o);if(l===u)if(e===0)s=a=1/l;else{const c=l*e;s=a=c<1?1/c:1}else if(e===0)s=1/l,a=1/u;else{const c=l*e,d=u*e;s=c<1?1/c:1,a=d<1?1/d:1}}else{const l=Math.abs(t*o-r*i),u=Math.hypot(t,r),c=Math.hypot(i,o);if(e===0)s=c/l,a=u/l;else{const d=e*l;s=c>d?c/d:1,a=u>d?u/d:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[i,o]=this.getScaleForStroking();if(t.lineWidth=r||1,i===1&&o===1){t.stroke();return}const s=t.getLineDash();if(e&&t.save(),t.scale(i,o),s.length>0){const a=Math.max(i,o);t.setLineDash(s.map(l=>l/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in vi)Ba.prototype[n]!==void 0&&(Ba.prototype[vi[n]]=Ba.prototype[n]);class ru{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class Zk{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return Tm(this.#e)}has(e){return this.#e.has(e)}}const da=Symbol("INTERNAL");class Jk{#e=!1;#t=!1;#n=!1;#r=!0;constructor(e,{name:t,intent:r,usage:i,rbGroups:o}){this.#e=!!(e&Mr.DISPLAY),this.#t=!!(e&Mr.PRINT),this.name=t,this.intent=r,this.usage=i,this.rbGroups=o}get visible(){if(this.#n)return this.#r;if(!this.#r)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,r=!1){e!==da&&_t("Internal method `_setVisible` called."),this.#n=r,this.#r=t}}class eT{#e=null;#t=new Map;#n=null;#r=null;constructor(e,t=Mr.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#r=e.order;for(const r of e.groups)this.#t.set(r.id,new Jk(t,r));if(e.baseState==="OFF")for(const r of this.#t.values())r._setVisible(da,!1);for(const r of e.on)this.#t.get(r)._setVisible(da,!0);for(const r of e.off)this.#t.get(r)._setVisible(da,!1);this.#n=this.getHash()}}#o(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const o=e[i];let s;if(Array.isArray(o))s=this.#o(o);else if(this.#t.has(o))s=this.#t.get(o).visible;else return Je(`Optional content group not found: ${o}`),!0;switch(r){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return r==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return wh("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Je(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#o(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Je(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Je(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Je(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Je(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Je(`Unknown optional content policy ${e.policy}.`),!0}return Je(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){const i=this.#t.get(e);if(!i){Je(`Optional content group not found: ${e}`);return}if(r&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const s of o)s!==e&&this.#t.get(s)?._setVisible(da,!1,!0);i._setVisible(da,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const o=this.#t.get(i);if(o)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!o.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?Tm(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new aw;for(const[t,r]of this.#t)e.update(`${t}:${r.visible}`);return this.#e=e.hexdigest()}}class tT{constructor(e,{disableRange:t=!1,disableStream:r=!1}){sn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:o,progressiveDone:s,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=a,o?.length>0){const l=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(r),!0)});sn(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){sn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new nT(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new rT(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class nT{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=Mm(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class rT{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function iT(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let c=a(t);return c=unescape(c),c=l(c),c=u(c),o(c)}if(t=s(n),t){const c=u(t);return o(c)}if(t=r("filename","i").exec(n),t){t=t[1];let c=a(t);return c=u(c),o(c)}function r(c,d){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(c,d){if(c){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(c,{fatal:!0}),g=Ch(d);d=f.decode(g),e=!1}catch{}}return d}function o(c){return e&&/[\x80-\xff]/.test(c)&&(c=i("utf-8",c),e&&(c=i("iso-8859-1",c))),c}function s(c){const d=[];let f;const g=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=g.exec(c))!==null;){let[,y,S,b]=f;if(y=parseInt(y,10),y in d){if(y===0)break;continue}d[y]=[S,b]}const m=[];for(let y=0;y<d.length&&y in d;++y){let[S,b]=d[y];b=a(b),S&&(b=unescape(b),y===0&&(b=l(b))),m.push(b)}return m.join("")}function a(c){if(c.startsWith('"')){const d=c.slice(1).split('\\"');for(let f=0;f<d.length;++f){const g=d[f].indexOf('"');g!==-1&&(d[f]=d[f].slice(0,g),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}c=d.join('"')}return c}function l(c){const d=c.indexOf("'");if(d===-1)return c;const f=c.slice(0,d),m=c.slice(d+1).replace(/^[^']*'/,"");return i(f,m)}function u(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,g,m){if(g==="q"||g==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,S){return String.fromCharCode(parseInt(S,16))}),i(f,m);try{m=atob(m)}catch{}return i(f,m)})}return""}function mw(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const i=e[r];i!==void 0&&t.append(r,i)}return t}function Fh(n){try{return new URL(n).origin}catch{}return null}function vw({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(n.get("Content-Length"),10);return!Number.isInteger(o)||(i.suggestedLength=o,o<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function yw(n){const e=n.get("Content-Disposition");if(e){let t=iT(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Mm(t))return t}return null}function kh(n,e){return n===404||n===0&&e.startsWith("file:")?new xu('Missing PDF "'+e+'".'):new Bd(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function bw(n){return n===200||n===206}function Ew(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function _w(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Je(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class C0{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=mw(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return sn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new oT(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new sT(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class oT{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),i=t.url;fetch(i,Ew(r,this._withCredentials,this._abortController)).then(o=>{if(e._responseOrigin=Fh(o.url),!bw(o.status))throw kh(o.status,i);this._reader=o.body.getReader(),this._headersCapability.resolve();const s=o.headers,{allowRangeRequests:a,suggestedLength:l}=vw({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=yw(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new us("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:_w(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class sT{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${r-1}`);const s=i.url;fetch(s,Ew(o,this._withCredentials,this._abortController)).then(a=>{const l=Fh(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!bw(a.status))throw kh(a.status,s);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:_w(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Kf=200,$f=206;function aT(n){const e=n.response;return typeof e!="string"?e:Ch(e).buffer}class lT{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=mw(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,s]of this.headers)t.setRequestHeader(o,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=$f):i.expectedStatus=Kf,t.responseType="arraybuffer",sn(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){const r=this.pendingRequests[e];r&&r.onProgress?.(t)}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const o=i.status||Kf;if(!(o===Kf&&r.expectedStatus===$f)&&o!==r.expectedStatus){r.onError(i.status);return}const a=aT(i);if(o===$f){const l=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?r.onDone({begin:parseInt(u[1],10),chunk:a}):(Je('Missing or invalid "Content-Range" header.'),r.onError(0))}else a?r.onDone({begin:0,chunk:a}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class uT{constructor(e){this._source=e,this._manager=new lT(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return sn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new cT(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new dT(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class cT{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Fh(t.responseURL);const r=t.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...u]=a.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:s}=vw({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=yw(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=kh(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class dT{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=Fh(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=kh(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const hT=/^[a-z][a-z0-9\-+.]+:/i;function fT(n){if(hT.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class pT{constructor(e){this.source=e,this.url=fT(e.url),sn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return sn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new gT(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new mT(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class gT{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new xu(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new us("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class mT{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const vT=1e5,pr=30,yT=.8;class Jn{#e=Promise.withResolvers();#t=null;#n=!1;#r=!!globalThis.FontInspector?.enabled;#o=null;#i=null;#l=0;#a=0;#c=null;#u=null;#h=0;#d=0;#f=Object.create(null);#s=[];#p=null;#m=[];#g=new WeakMap;#v=null;static#E=new Map;static#y=new Map;static#_=new WeakMap;static#C=null;static#x=new Set;constructor({textContentSource:e,container:t,viewport:r}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(l){l.enqueue(e),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#u=t,this.#d=r.scale*(globalThis.devicePixelRatio||1),this.#h=r.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:o,pageX:s,pageY:a}=r.rawDims;this.#v=[1,0,0,-1,-s,a+o],this.#a=i,this.#l=o,Jn.#P(),Ks(t,r),this.#e.promise.finally(()=>{Jn.#x.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=sr.platform;return ot(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:r})=>{if(r){this.#e.resolve();return}this.#o??=t.lang,Object.assign(this.#f,t.styles),this.#F(t.items),e()},this.#e.reject)};return this.#c=this.#p.getReader(),Jn.#x.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const r=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,Ks(this.#u,{rotation:i})),r!==this.#d){t?.(),this.#d=r;const o={div:null,properties:null,ctx:Jn.#k(this.#o)};for(const s of this.#m)o.properties=this.#g.get(s),o.div=s,this.#w(o)}}cancel(){const e=new us("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#m}get textContentItemsStr(){return this.#s}#F(e){if(this.#n)return;this.#i.ctx??=Jn.#k(this.#o);const t=this.#m,r=this.#s;for(const i of e){if(t.length>vT){Je("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const o=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id!==null&&this.#t.setAttribute("id",`${i.id}`),o.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}r.push(i.str),this.#T(i)}}#T(e){const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#m.push(t);const i=Ne.transform(this.#v,e.transform);let o=Math.atan2(i[1],i[0]);const s=this.#f[e.fontName];s.vertical&&(o+=Math.PI/2);let a=this.#r&&s.fontSubstitution||s.fontFamily;a=Jn.fontFamilyMap.get(a)||a;const l=Math.hypot(i[2],i[3]),u=l*Jn.#R(a,this.#o);let c,d;o===0?(c=i[4],d=i[5]-u):(c=i[4]+u*Math.sin(o),d=i[5]-u*Math.cos(o));const f="calc(var(--scale-factor)*",g=t.style;this.#t===this.#u?(g.left=`${(100*c/this.#a).toFixed(2)}%`,g.top=`${(100*d/this.#l).toFixed(2)}%`):(g.left=`${f}${c.toFixed(2)}px)`,g.top=`${f}${d.toFixed(2)}px)`),g.fontSize=`${f}${(Jn.#C*l).toFixed(2)}px)`,g.fontFamily=a,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#r&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),o!==0&&(r.angle=o*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const y=Math.abs(e.transform[0]),S=Math.abs(e.transform[3]);y!==S&&Math.max(y,S)/Math.min(y,S)>1.5&&(m=!0)}if(m&&(r.canvasWidth=s.vertical?e.height:e.width),this.#g.set(t,r),this.#i.div=t,this.#i.properties=r,this.#w(this.#i),r.hasText&&this.#t.append(t),r.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),this.#t.append(y)}}#w(e){const{div:t,properties:r,ctx:i}=e,{style:o}=t;let s="";if(Jn.#C>1&&(s=`scale(${1/Jn.#C})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:a}=o,{canvasWidth:l,fontSize:u}=r;Jn.#A(i,u*this.#d,a);const{width:c}=i.measureText(t.textContent);c>0&&(s=`scaleX(${l*this.#d/c}) ${s}`)}r.angle!==0&&(s=`rotate(${r.angle}deg) ${s}`),s.length>0&&(o.transform=s)}static cleanup(){if(!(this.#x.size>0)){this.#E.clear();for(const{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#k(e=null){let t=this.#y.get(e||="");if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(e,t),this.#_.set(t,{size:0,family:""})}return t}static#A(e,t,r){const i=this.#_.get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)}static#P(){if(this.#C!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#C=e.getBoundingClientRect().height,e.remove()}static#R(e,t){const r=this.#E.get(e);if(r)return r;const i=this.#k(t);i.canvas.width=i.canvas.height=pr,this.#A(i,pr,e);const o=i.measureText("");let s=o.fontBoundingBoxAscent,a=Math.abs(o.fontBoundingBoxDescent);if(s){const c=s/(s+a);return this.#E.set(e,c),i.canvas.width=i.canvas.height=0,c}i.strokeStyle="red",i.clearRect(0,0,pr,pr),i.strokeText("g",0,0);let l=i.getImageData(0,0,pr,pr).data;a=0;for(let c=l.length-1-3;c>=0;c-=4)if(l[c]>0){a=Math.ceil(c/4/pr);break}i.clearRect(0,0,pr,pr),i.strokeText("A",0,pr),l=i.getImageData(0,0,pr,pr).data,s=0;for(let c=0,d=l.length;c<d;c+=4)if(l[c]>0){s=pr-Math.floor(c/4/pr);break}i.canvas.width=i.canvas.height=0;const u=s?s/(s+a):yT;return this.#E.set(e,u),u}}class Au{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function i(o){if(!o)return;let s=null;const a=o.name;if(a==="#text")s=o.value;else if(Au.shouldBuildText(a))o?.attributes?.textContent?s=o.attributes.textContent:o.value&&(s=o.value);else return;if(s!==null&&t.push({str:s}),!!o.children)for(const l of o.children)i(l)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const bT=65536,ET=100,_T=5e3,wT=Hn?Nk:Ik,CT=Hn?Bk:dw,ST=Hn?Lk:Rk,xT=Hn?Ok:pw;function AT(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Hm,{docId:t}=e,r=n.url?FT(n.url):null,i=n.data?kT(n.data):null,o=n.httpHeaders||null,s=n.withCredentials===!0,a=n.password??null,l=n.range instanceof ww?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:bT;let c=n.worker instanceof En?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!xh(n.docBaseUrl)?n.docBaseUrl:null,g=typeof n.cMapUrl=="string"?n.cMapUrl:null,m=n.cMapPacked!==!1,y=n.CMapReaderFactory||CT,S=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,b=n.StandardFontDataFactory||xT,E=n.stopAtErrors!==!0,w=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,C=n.isEvalSupported!==!1,T=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Hn,D=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Hn&&(sr.platform.isFirefox||!globalThis.chrome),k=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,M=typeof n.disableFontFace=="boolean"?n.disableFontFace:Hn,N=n.fontExtraProperties===!0,U=n.enableXfa===!0,ne=n.ownerDocument||globalThis.document,oe=n.disableRange===!0,ae=n.disableStream===!0,te=n.disableAutoFetch===!0,we=n.pdfBug===!0,J=n.CanvasFactory||wT,Q=n.FilterFactory||ST,G=n.enableHWA===!0,re=l?l.length:n.length??NaN,ie=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Hn&&!M,Ce=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:y===dw&&b===pw&&g&&S&&Wl(g,document.baseURI)&&Wl(S,document.baseURI),Te=null;dk(d);const Oe={canvasFactory:new J({ownerDocument:ne,enableHWA:G}),filterFactory:new Q({docId:t,ownerDocument:ne}),cMapReaderFactory:Ce?null:new y({baseUrl:g,isCompressed:m}),standardFontDataFactory:Ce?null:new b({baseUrl:S})};if(!c){const He={verbosity:d,port:ru.workerPort};c=He.port?En.fromPort(He):new En(He),e._worker=c}const De={docId:t,apiVersion:"4.10.38",data:i,password:a,disableAutoFetch:te,rangeChunkSize:u,length:re,docBaseUrl:f,enableXfa:U,evaluatorOptions:{maxImageSize:w,disableFontFace:M,ignoreErrors:E,isEvalSupported:C,isOffscreenCanvasSupported:T,isImageDecoderSupported:D,canvasMaxAreaInBytes:k,fontExtraProperties:N,useSystemFonts:ie,cMapUrl:Ce?g:null,standardFontDataUrl:Ce?S:null}},pt={disableFontFace:M,fontExtraProperties:N,ownerDocument:ne,pdfBug:we,styleElement:Te,loadingParams:{disableAutoFetch:te,enableXfa:U}};return c.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const He=c.messageHandler.sendWithPromise("GetDocRequest",De,i?[i.buffer]:null);let fe;if(l)fe=new tT(l,{disableRange:oe,disableStream:ae});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");let nt;if(Hn)if(Wl(r)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");nt=C0}else nt=pT;else nt=Wl(r)?C0:uT;fe=new nt({url:r,length:re,httpHeaders:o,withCredentials:s,rangeChunkSize:u,disableRange:oe,disableStream:ae})}return He.then(nt=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const me=new Ul(t,nt,c.port),Qe=new MT(me,e,fe,pt,Oe);e._transport=Qe,me.send("Ready",null)})}).catch(e._capability.reject),e}function FT(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Hn&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function kT(n){if(Hn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Ch(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function S0(n){return typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}class Hm{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Hm.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}}class ww{constructor(e,t,r=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){_t("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class TT{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ot(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class DT{#e=null;#t=!1;constructor(e,t,r,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new c0:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new Cw,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:o=!1}={}){return new Wu({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ot(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:i=qo.ENABLE,transform:o=null,background:s=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:c=null,isEditing:d=!1}){this._stats?.time("Overall");const f=this._transport.getRenderingIntent(r,i,c,d),{renderingIntent:g,cacheKey:m}=f;this.#t=!1,this.#r(),a||=this._transport.getOptionalContentConfig(g);let y=this._intentStates.get(m);y||(y=Object.create(null),this._intentStates.set(m,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const S=!!(g&Mr.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(f));const b=C=>{y.renderTasks.delete(E),(this._maybeCleanupAfterRender||S)&&(this.#t=!0),this.#n(!S),C?(E.capability.reject(C),this._abortOperatorList({intentState:y,reason:C instanceof Error?C:new Error(C)})):E.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},E=new Aa({callback:b,params:{canvasContext:e,viewport:t,transform:o,background:s},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:u});(y.renderTasks||=new Set).add(E);const w=E.task;return Promise.all([y.displayReadyCapability.promise,a]).then(([C,T])=>{if(this.destroyed){b();return}if(this._stats?.time("Rendering"),!(T.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");E.initializeGraphics({transparency:C,optionalContentConfig:T}),E.operatorListChanged()}).catch(b),w}getOperatorList({intent:e="display",annotationMode:t=qo.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){function o(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const s=this._transport.getRenderingIntent(e,t,r,i,!0);let a=this._intentStates.get(s.cacheKey);a||(a=Object.create(null),this._intentStates.set(s.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=o,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>Au.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){function o(){s.read().then(function({value:l,done:u}){if(u){r(a);return}a.lang??=l.lang,Object.assign(a.styles,l.styles),a.items.push(...l.items),o()},i)}const s=t.getReader(),a={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,this.#r(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const t=this.#n(!1);return e&&t&&(this._stats&&=new c0),t}#n(e=!1){if(this.#r(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},_T),!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#r(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){const r=this._intentStates.get(t);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){const{map:o,transfer:s}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:i},s).getReader(),u=this._intentStates.get(t);u.streamReader=l;const c=()=>{l.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),c())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();this.#n(!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};c()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof Pm){let i=ET;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new us(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,o]of this._intentStates)if(o===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}class PT{#e=new Map;#t=Promise.resolve();postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if(r?.signal instanceof AbortSignal){const{signal:o}=r;if(o.aborted){Je("LoopbackPort - cannot use an `aborted` signal.");return}const s=()=>this.removeEventListener(e,t);i=()=>o.removeEventListener("abort",s),o.addEventListener("abort",s)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}class En{static#e=0;static#t=!1;static#n;static{Hn&&(this.#t=!0,ru.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,t)=>{let r;try{if(r=new URL(e),!r.origin||r.origin==="null")return!1}catch{return!1}const i=new URL(t,r);return r.origin===i.origin},this._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}}constructor({name:e=null,port:t=null,verbosity:r=hk()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(En.#n?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(En.#n||=new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}#r(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Ul("main","worker",e),this._messageHandler.on("ready",function(){}),this.#r()}_initialize(){if(En.#t||En.#o){this._setupFakeWorker();return}let{workerSrc:e}=En;try{En._isSameOrigin(window.location.href,e)||(e=En._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Ul("main","worker",t),i=()=>{o.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:o.signal}),r.on("test",a=>{if(o.abort(),this.destroyed||!a){i();return}this._messageHandler=r,this._port=t,this._webWorker=t,this.#r()}),r.on("ready",a=>{if(o.abort(),this.destroyed){i();return}try{s()}catch{this._setupFakeWorker()}});const s=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};s();return}catch{wh("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){En.#t||(Je("Setting up fake worker."),En.#t=!0),En._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new PT;this._port=t;const r=`fake${En.#e++}`,i=new Ul(r+"_worker",r,t);e.setup(i,t),this._messageHandler=new Ul(r,r+"_worker",t),this.#r()}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,En.#n?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=this.#n?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new En(e)}static get workerSrc(){if(ru.workerSrc)return ru.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#o(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return ot(this,"_setupFakeWorkerGlobal",(async()=>this.#o?this.#o:(await import(this.workerSrc)).WorkerMessageHandler)())}}class MT{#e=new Map;#t=new Map;#n=new Map;#r=new Map;#o=null;constructor(e,t,r,i,o){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Cw,this.fontLoader=new Pk({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#i(e,t=null){const r=this.#e.get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return ot(this,"annotationStorage",new Nm)}getRenderingIntent(e,t=qo.ENABLE,r=null,i=!1,o=!1){let s=Mr.DISPLAY,a=pg;switch(e){case"any":s=Mr.ANY;break;case"display":break;case"print":s=Mr.PRINT;break;default:Je(`getRenderingIntent - invalid intent: ${e}`)}const l=s&Mr.PRINT&&r instanceof lw?r:this.annotationStorage;switch(t){case qo.DISABLE:s+=Mr.ANNOTATIONS_DISABLE;break;case qo.ENABLE:break;case qo.ENABLE_FORMS:s+=Mr.ANNOTATIONS_FORMS;break;case qo.ENABLE_STORAGE:s+=Mr.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Je(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(s+=Mr.IS_EDITING),o&&(s+=Mr.OPLIST);const{ids:u,hash:c}=l.modifiedIds,d=[s,a.hash,c];return{renderingIntent:s,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#o?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#n.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Jn.cleanup(),this._networkStream?.cancelAllRequests(new us("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{sn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},i.onPull=()=>{this._fullReader.read().then(function({value:o,done:s}){if(s){i.close();return}sn(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{this._fullReader.cancel(o),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async r=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:o,contentLength:s}=this._fullReader;return(!i||!o)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{t.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:i,isRangeSupported:o,contentLength:s}}),e.on("GetRangeReader",(r,i)=>{sn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(r.begin,r.end);if(!o){i.close();return}i.onPull=()=>{o.read().then(function({value:s,done:a}){if(a){i.close();return}sn(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{o.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new TT(r,this))}),e.on("DocException",r=>{t._capability.reject(mr(r))}),e.on("PasswordRequest",r=>{this.#o=Promise.withResolvers();try{if(!t.onPassword)throw mr(r);const i=o=>{o instanceof Error?this.#o.reject(o):this.#o.resolve({password:o})};t.onPassword(i,r.code)}catch(i){this.#o.reject(i)}return this.#o.promise}),e.on("DataLoaded",r=>{t.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,o])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":const{disableFontFace:s,fontExtraProperties:a,pdfBug:l}=this._params;if("error"in o){const f=o.error;Je(`Error during font loading: ${f}`),this.commonObjs.resolve(r,f);break}const u=l&&globalThis.FontInspector?.enabled?(f,g)=>globalThis.FontInspector.fontAdded(f,g):null,c=new Mk(o,{disableFontFace:s,fontExtraProperties:a,inspectFont:u});this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!a&&c.data&&(c.data=null),this.commonObjs.resolve(r,c)});break;case"CopyLocalImage":const{imageRef:d}=o;sn(d,"The imageRef must be defined.");for(const f of this.#t.values())for(const[,g]of f.objs)if(g?.ref===d)return g.dataLen?(this.commonObjs.resolve(r,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,o);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,o,s])=>{if(this.destroyed)return;const a=this.#t.get(i);if(!a.objs.has(r)){if(a._intentStates.size===0){s?.bitmap?.close();return}switch(o){case"Image":a.objs.resolve(r,s),s?.dataLen>ak&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(r,s);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",r=>{this.destroyed||t.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(r)}),e.on("FetchStandardFontData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Je("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=this.#n.get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#r.set(o.refStr,e);const s=new DT(t,o,this,this._params.pdfBug);return this.#t.set(t,s),s});return this.#n.set(t,i),i}getPageIndex(e){return S0(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#i("GetOptionalContentConfig").then(t=>new eT(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new Zk(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Jn.cleanup()}}cachedPageNumber(e){if(!S0(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#r.get(t)??null}}const Dl=Symbol("INITIAL_DATA");class Cw{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Dl}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const r=this.#e[e];if(!r||r.data===Dl)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=this.#e[e];return!!t&&t.data!==Dl}delete(e){const t=this.#e[e];return!t||t.data===Dl?!1:(delete this.#e[e],!0)}resolve(e,t=null){const r=this.#t(e);r.data=t,r.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Dl&&(yield[e,t])}}}class IT{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class Aa{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:o,operatorList:s,pageIndex:a,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:c=!1,pdfBug:d=!1,pageColors:f=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new IT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(Aa.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Aa.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:i,transform:o,background:s}=this.params;this.gfx=new Ba(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:i,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Aa.#t.delete(this._canvas),this.callback(e||new Pm(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Aa.#t.delete(this._canvas),this.callback())))}}const RT="4.10.38",LT="f9bea397f";function x0(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Pl(n){return Math.max(0,Math.min(255,255*n))}class A0{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Pl(e),[e,e,e]}static G_HTML([e]){const t=x0(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(Pl)}static RGB_HTML(e){return`#${e.map(x0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[Pl(1-Math.min(1,e+i)),Pl(1-Math.min(1,r+i)),Pl(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,o=1-t,s=1-r,a=Math.min(i,o,s);return["CMYK",i,o,s,a]}}class NT{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){_t("Abstract method `_createSVG` called.")}}class zm extends NT{_createSVG(e){return document.createElementNS(uo,e)}}class Sw{static setupStorage(e,t,r,i,o){const s=i.getValue(t,{value:null});switch(r.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),o==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(s.value===r.attributes.xfaOn?e.setAttribute("checked",!0):s.value===r.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),o==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(const a of r.children)a.attributes.value===s.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:o}){const{attributes:s}=t,a=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(const[l,u]of Object.entries(s))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}a&&o.addLinkAttributes(e,s.href,s.newWindow),r&&s.dataId&&this.setupStorage(e,s.dataId,t,r)}static render(e){const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,o=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:o,linkService:r});const a=o!=="richText",l=e.div;if(l.append(s),e.viewport){const d=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=d}a&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const d=document.createTextNode(i.value);s.append(d),a&&Au.shouldBuildText(i.name)&&u.push(d)}return{textDivs:u}}const c=[[i,-1,s]];for(;c.length>0;){const[d,f,g]=c.at(-1);if(f+1===d.children.length){c.pop();continue}const m=d.children[++c.at(-1)[1]];if(m===null)continue;const{name:y}=m;if(y==="#text"){const b=document.createTextNode(m.value);u.push(b),g.append(b);continue}const S=m?.attributes?.xmlns?document.createElementNS(m.attributes.xmlns,y):document.createElement(y);if(g.append(S),m.attributes&&this.setAttributes({html:S,element:m,storage:t,intent:o,linkService:r}),m.children?.length>0)c.push([m,-1,S]);else if(m.value){const b=document.createTextNode(m.value);a&&Au.shouldBuildText(y)&&u.push(b),S.append(b)}}for(const d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Vu=1e3,BT=9,$s=new WeakSet;function ss(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class OT{static create(e){switch(e.data.annotationType){case cn.LINK:return new xw(e);case cn.TEXT:return new HT(e);case cn.WIDGET:switch(e.data.fieldType){case"Tx":return new zT(e);case"Btn":return e.data.radioButton?new Aw(e):e.data.checkBox?new WT(e):new UT(e);case"Ch":return new VT(e);case"Sig":return new jT(e)}return new Zs(e);case cn.POPUP:return new mg(e);case cn.FREETEXT:return new Fw(e);case cn.LINE:return new $T(e);case cn.SQUARE:return new GT(e);case cn.CIRCLE:return new qT(e);case cn.POLYLINE:return new kw(e);case cn.CARET:return new YT(e);case cn.INK:return new jm(e);case cn.POLYGON:return new XT(e);case cn.HIGHLIGHT:return new Tw(e);case cn.UNDERLINE:return new QT(e);case cn.SQUIGGLY:return new ZT(e);case cn.STRIKEOUT:return new JT(e);case cn.STAMP:return new Dw(e);case cn.FILEATTACHMENT:return new eD(e);default:return new Jt(e)}}}class Jt{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e?.str||t?.str||r?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Jt._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#r(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#r(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#r(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:s,pageX:a,pageY:l}}}}=this;r?.splice(0,4,...e);const{width:u,height:c}=ss(e);t.left=`${100*(e[0]-a)/o}%`,t.top=`${100*(s-e[3]+l)/s}%`,i===0?(t.width=`${100*u/o}%`,t.height=`${100*c/s}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),this instanceof Zs||(o.tabIndex=Vu);const{style:s}=o;if(s.zIndex=this.parent.zIndex++,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof mg){const{rotation:y}=t;return!t.hasOwnCanvas&&y!==0&&this.setRotation(y,o),o}const{width:a,height:l}=ss(t.rect);if(!e&&t.borderStyle.width>0){s.borderWidth=`${t.borderStyle.width}px`;const y=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(y>0||S>0){const E=`calc(${y}px * var(--scale-factor)) / calc(${S}px * var(--scale-factor))`;s.borderRadius=E}else if(this instanceof Aw){const E=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;s.borderRadius=E}switch(t.borderStyle.style){case kl.SOLID:s.borderStyle="solid";break;case kl.DASHED:s.borderStyle="dashed";break;case kl.BEVELED:Je("Unimplemented border style: beveled");break;case kl.INSET:Je("Unimplemented border style: inset");break;case kl.UNDERLINE:s.borderBottomStyle="solid";break}const b=t.borderColor||null;b?(this.#t=!0,s.borderColor=Ne.makeHexColor(b[0]|0,b[1]|0,b[2]|0)):s.borderWidth=0}const u=Ne.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:c,pageHeight:d,pageX:f,pageY:g}=i.rawDims;s.left=`${100*(u[0]-f)/c}%`,s.top=`${100*(u[1]-g)/d}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(s.width=`${100*a/c}%`,s.height=`${100*l/d}%`):this.setRotation(m,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims,{width:o,height:s}=ss(this.data.rect);let a,l;e%180===0?(a=100*o/r,l=100*s/i):(a=100*s/r,l=100*o/i),t.style.width=`${a}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const o=i.detail[t],s=o[0],a=o.slice(1);i.target.style[r]=A0[`${s}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:A0[`${s}_rgb`](a)})};return ot(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||r[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,o]of Object.entries(t)){const s=r[i];if(s){const a={detail:{[i]:o},target:e};s(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,o]=this.data.rect.map(y=>Math.fround(y));if(e.length===8){const[y,S,b,E]=e.subarray(2,6);if(i===y&&o===S&&t===b&&r===E)return}const{style:s}=this.container;let a;if(this.#t){const{borderColor:y,borderWidth:S}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const l=i-t,u=o-r,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=c.createElement("defs");d.append(f);const g=c.createElement("clipPath"),m=`clippath_${this.data.id}`;g.setAttribute("id",m),g.setAttribute("clipPathUnits","objectBoundingBox"),f.append(g);for(let y=2,S=e.length;y<S;y+=8){const b=e[y],E=e[y+1],w=e[y+2],C=e[y+3],T=c.createElement("rect"),D=(w-t)/l,k=(o-E)/u,M=(b-w)/l,N=(E-C)/u;T.setAttribute("x",D),T.setAttribute("y",k),T.setAttribute("width",M),T.setAttribute("height",N),g.append(T),a?.push(`<rect vector-effect="non-scaling-stroke" x="${D}" y="${k}" width="${M}" height="${N}"/>`)}this.#t&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{data:e}=this,t=this.#n=new mg({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){_t("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:o,id:s,exportValues:a}of i){if(o===-1||s===t)continue;const l=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${s}"]`);if(u&&!$s.has(u)){Je(`_getElementsByName - element not allowed: ${s}`);continue}r.push({id:s,exportValue:l,domElement:u})}return r}for(const i of document.getElementsByName(e)){const{exportValue:o}=i,s=i.getAttribute("data-element-id");s!==t&&$s.has(i)&&r.push({id:s,exportValue:o,domElement:i})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class xw extends Jt{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(r,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(r,e.action),i=!0):e.attachment?(this.#t(r,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(this.#n(r,e.setOCGState),i=!0):e.dest?(this._bindLink(r,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),i=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,r=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,r),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const o=r.get(i);o&&(e[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Je('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{r?.();const{fields:i,refs:o,include:s}=t,a=[];if(i.length!==0||o.length!==0){const c=new Set(o);for(const d of i){const f=this._fieldObjects[d]||[];for(const{id:g}of f)c.add(g)}for(const d of Object.values(this._fieldObjects))for(const f of d)c.has(f.id)===s&&a.push(f)}else for(const c of Object.values(this._fieldObjects))a.push(...c);const l=this.annotationStorage,u=[];for(const c of a){const{id:d}=c;switch(u.push(d),c.type){case"text":{const g=c.defaultValue||"";l.setValue(d,{value:g});break}case"checkbox":case"radiobutton":{const g=c.defaultValue===c.exportValues;l.setValue(d,{value:g});break}case"combobox":case"listbox":{const g=c.defaultValue||"";l.setValue(d,{value:g});break}default:continue}const f=document.querySelector(`[data-element-id="${d}"]`);if(f){if(!$s.has(f)){Je(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;f.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}}),!1}}}class HT extends Jt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Zs extends Jt{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return sr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,o){r.includes("mouse")?e.addEventListener(r,s=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(r,s=>{if(r==="blur"){if(!t.focused||!s.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(s)}})})}_setEventListeners(e,t,r,i){for(const[o,s]of r)(s==="Action"||this.data.actions?.[s])&&((s==="Focus"||s==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,o,s,i),s==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):s==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ne.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||BT,o=e.style;let s;const a=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),c=Math.round(u/(zf*i))||1,d=u/c;s=Math.min(i,l(d/zf))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);s=Math.min(i,l(u/zf))}o.fontSize=`calc(${s}px * var(--scale-factor))`,o.color=Ne.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class zT extends Zs{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){const o=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=r),o.setValue(s.id,{[i]:r})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let o=i.value||"";const s=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;s&&o.length>s&&(o=o.slice(0,s));let a=i.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));const l={userValue:o,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=a??o,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",a??o),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),$s.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=Vu,this._setRequired(r,this.data.required),s&&(r.maxLength=s),r.addEventListener("input",c=>{e.setValue(t,{value:c.target.value}),this.setPropertyOnSiblings(r,"value",c.target.value,"value"),l.formattedValue=null}),r.addEventListener("resetform",c=>{const d=this.data.defaultFieldValue??"";r.value=l.userValue=d,l.formattedValue=null});let u=c=>{const{formattedValue:d}=l;d!=null&&(c.target.value=d),c.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",d=>{if(l.focused)return;const{target:f}=d;l.userValue&&(f.value=l.userValue),l.lastCommittedValue=f.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),r.addEventListener("updatefromsandbox",d=>{this.showElementAndHideCanvas(d.target);const f={value(g){l.userValue=g.detail.value??"",e.setValue(t,{value:l.userValue.toString()}),g.target.value=l.userValue},formattedValue(g){const{formattedValue:m}=g.detail;l.formattedValue=m,m!=null&&g.target!==document.activeElement&&(g.target.value=m),e.setValue(t,{formattedValue:m})},selRange(g){g.target.setSelectionRange(...g.detail.selRange)},charLimit:g=>{const{charLimit:m}=g.detail,{target:y}=g;if(m===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",m);let S=l.userValue;!S||S.length<=m||(S=S.slice(0,m),y.value=l.userValue=S,e.setValue(t,{value:S}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(f,d)}),r.addEventListener("keydown",d=>{l.commitKey=1;let f=-1;if(d.key==="Escape"?f=0:d.key==="Enter"&&!this.data.multiLine?f=2:d.key==="Tab"&&(l.commitKey=3),f===-1)return;const{value:g}=d.target;l.lastCommittedValue!==g&&(l.lastCommittedValue=g,l.userValue=g,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:f,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}))});const c=u;u=null,r.addEventListener("blur",d=>{if(!l.focused||!d.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{value:f}=d.target;l.userValue=f,l.lastCommittedValue!==f&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:f,willCommit:!0,commitKey:l.commitKey,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}),c(d)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",d=>{l.lastCommittedValue=null;const{data:f,target:g}=d,{value:m,selectionStart:y,selectionEnd:S}=g;let b=y,E=S;switch(d.inputType){case"deleteWordBackward":{const w=m.substring(0,y).match(/\w*[^\w]*$/);w&&(b-=w[0].length);break}case"deleteWordForward":{const w=m.substring(y).match(/^[^\w]*\w*/);w&&(E+=w[0].length);break}case"deleteContentBackward":y===S&&(b-=1);break;case"deleteContentForward":y===S&&(E+=1);break}d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,change:f||"",willCommit:!1,selStart:b,selEnd:E}})}),this._setEventListeners(r,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.value)}if(u&&r.addEventListener("blur",u),this.data.comb){const d=(this.data.rect[2]-this.data.rect[0])/s;r.classList.add("comb"),r.style.letterSpacing=`calc(${d}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class jT extends Zs{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class WT extends Zs{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return $s.add(o),o.setAttribute("data-element-id",r),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,i&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=Vu,o.addEventListener("change",s=>{const{name:a,checked:l}=s.target;for(const u of this._getElementsByName(a,r)){const c=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=c),e.setValue(u.id,{value:c})}e.setValue(r,{value:l})}),o.addEventListener("resetform",s=>{const a=t.defaultFieldValue||"Off";s.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",s=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,s)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Aw extends Zs{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const s of this._getElementsByName(t.fieldName,r))e.setValue(s.id,{value:!1});const o=document.createElement("input");if($s.add(o),o.setAttribute("data-element-id",r),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,i&&o.setAttribute("checked",!0),o.tabIndex=Vu,o.addEventListener("change",s=>{const{name:a,checked:l}=s.target;for(const u of this._getElementsByName(a,r))e.setValue(u.id,{value:!1});e.setValue(r,{value:l})}),o.addEventListener("resetform",s=>{const a=t.defaultFieldValue;s.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const s=t.buttonValue;o.addEventListener("updatefromsandbox",a=>{const l={value:u=>{const c=s===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=c&&d.id===r;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class UT extends xw{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class VT extends Zs{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");$s.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=Vu;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",c=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const c of this.data.options){const d=document.createElement("option");d.textContent=c.displayValue,d.value=c.exportValue,r.value.includes(c.exportValue)&&(d.setAttribute("selected",!0),o=!1),i.append(d)}let s=null;if(o){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),i.prepend(c),s=()=>{c.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const a=c=>{const d=c?"value":"textContent",{options:f,multiple:g}=i;return g?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=a(!1);const u=c=>{const d=c.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",c=>{const d={value(f){s?.();const g=f.detail.value,m=new Set(Array.isArray(g)?g:[g]);for(const y of i.options)y.selected=m.has(y.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(f){i.multiple=!0},remove(f){const g=i.options,m=f.detail.remove;g[m].selected=!1,i.remove(m),g.length>0&&Array.prototype.findIndex.call(g,S=>S.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(f){const{index:g,displayValue:m,exportValue:y}=f.detail.insert,S=i.children[g],b=document.createElement("option");b.textContent=m,b.value=y,S?S.before(b):i.append(b),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},items(f){const{items:g}=f.detail;for(;i.length!==0;)i.remove(0);for(const m of g){const{displayValue:y,exportValue:S}=m,b=document.createElement("option");b.textContent=y,b.value=S,i.append(b)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},indices(f){const g=new Set(f.detail.indices);for(const m of f.target.options)m.selected=g.has(m.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,c)}),i.addEventListener("input",c=>{const d=a(!0),f=a(!1);e.setValue(t,{value:d}),c.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):i.addEventListener("input",function(c){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class mg extends Jt{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:Jt._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new KT({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${Dm}${r}`).join(",")),this.container}}class KT{#e=this.#F.bind(this);#t=this.#A.bind(this);#n=this.#k.bind(this);#r=this.#w.bind(this);#o=null;#i=null;#l=null;#a=null;#c=null;#u=null;#h=null;#d=!1;#f=null;#s=null;#p=null;#m=null;#g=null;#v=null;#E=!1;constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:o,contentsObj:s,richText:a,parent:l,rect:u,parentRect:c,open:d}){this.#i=e,this.#g=i,this.#l=s,this.#m=a,this.#u=l,this.#o=t,this.#p=u,this.#h=c,this.#c=r,this.#a=sw.toDateObject(o),this.trigger=r.flatMap(f=>f.getElementsToTriggerPopup());for(const f of this.trigger)f.addEventListener("click",this.#r),f.addEventListener("mouseenter",this.#n),f.addEventListener("mouseleave",this.#t),f.classList.add("popupTriggerArea");for(const f of r)f.container?.addEventListener("keydown",this.#e);this.#i.hidden=!0,d&&this.#w()}render(){if(this.#f)return;const e=this.#f=document.createElement("div");if(e.className="popup",this.#o){const o=e.style.outlineColor=Ne.makeHexColor(...this.#o);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:e.style.backgroundColor=Ne.makeHexColor(...this.#o.map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=this.#g,e.append(t),this.#a){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#a.valueOf()})),t.append(o)}const i=this.#y;if(i)Sw.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(this.#l);e.append(o)}this.#i.append(e)}get#y(){const e=this.#m,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#m.html||null}get#_(){return this.#y?.attributes?.style?.fontSize||0}get#C(){return this.#y?.attributes?.style?.color||null}#x(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#C,fontSize:this.#_?`calc(${this.#_}px * var(--scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:i});return r}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let o=0,s=i.length;o<s;++o){const a=i[o];r.append(document.createTextNode(a)),o<s-1&&r.append(document.createElement("br"))}return r}#F(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#d)&&this.#w()}updateEdited({rect:e,popupContent:t}){this.#v||={contentsObj:this.#l,richText:this.#m},e&&(this.#s=null),t&&(this.#m=this.#x(t),this.#l=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#v&&({contentsObj:this.#l,richText:this.#m}=this.#v,this.#v=null,this.#f?.remove(),this.#f=null,this.#s=null)}#T(){if(this.#s!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:o}}}=this.#u;let s=!!this.#h,a=s?this.#h:this.#p;for(const m of this.#c)if(!a||Ne.intersect(m.data.rect,a)!==null){a=m.data.rect,s=!0;break}const l=Ne.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),c=s?a[2]-a[0]+5:0,d=l[0]+c,f=l[1];this.#s=[100*(d-i)/t,100*(f-o)/r];const{style:g}=this.#i;g.left=`${this.#s[0]}%`,g.top=`${this.#s[1]}%`}#w(){this.#d=!this.#d,this.#d?(this.#k(),this.#i.addEventListener("click",this.#r),this.#i.addEventListener("keydown",this.#e)):(this.#A(),this.#i.removeEventListener("click",this.#r),this.#i.removeEventListener("keydown",this.#e))}#k(){this.#f||this.render(),this.isVisible?this.#d&&this.#i.classList.add("focused"):(this.#T(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#A(){this.#i.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#E=this.isVisible,this.#E&&(this.#i.hidden=!0)}maybeShow(){this.#E&&(this.#f||this.#k(),this.#E=!1,this.#i.hidden=!1)}get isVisible(){return this.#i.hidden===!1}}class Fw extends Jt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ze.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class $T extends Jt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:r}=ss(e.rect),i=this.svgFactory.create(t,r,!0),o=this.#e=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class GT extends Jt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:r}=ss(e.rect),i=this.svgFactory.create(t,r,!0),o=e.borderStyle.width,s=this.#e=this.svgFactory.createElement("svg:rect");return s.setAttribute("x",o/2),s.setAttribute("y",o/2),s.setAttribute("width",t-o),s.setAttribute("height",r-o),s.setAttribute("stroke-width",o||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class qT extends Jt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:r}=ss(e.rect),i=this.svgFactory.create(t,r,!0),o=e.borderStyle.width,s=this.#e=this.svgFactory.createElement("svg:ellipse");return s.setAttribute("cx",t/2),s.setAttribute("cy",r/2),s.setAttribute("rx",t/2-o/2),s.setAttribute("ry",r/2-o/2),s.setAttribute("stroke-width",o||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class kw extends Jt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:r,popupRef:i}}=this;if(!t)return this.container;const{width:o,height:s}=ss(e),a=this.svgFactory.create(o,s,!0);let l=[];for(let c=0,d=t.length;c<d;c+=2){const f=t[c]-e[0],g=e[3]-t[c+1];l.push(`${f},${g}`)}l=l.join(" ");const u=this.#e=this.svgFactory.createElement(this.svgElementName);return u.setAttribute("points",l),u.setAttribute("stroke-width",r.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class XT extends kw{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class YT extends Jt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class jm extends Jt{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ze.HIGHLIGHT:Ze.INK}#n(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:r,borderStyle:i,popupRef:o}}=this,{transform:s,width:a,height:l}=this.#n(t,e),u=this.svgFactory.create(a,l,!0),c=this.#e=this.svgFactory.createElement("svg:g");u.append(c),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",s);for(let d=0,f=r.length;d<f;d++){const g=this.svgFactory.createElement(this.svgElementName);this.#t.push(g),g.setAttribute("points",r[d].join(",")),c.append(g)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:r,rect:i}=e,o=this.#e;if(t>=0&&o.setAttribute("stroke-width",t||1),r)for(let s=0,a=this.#t.length;s<a;s++)this.#t[s].setAttribute("points",r[s].join(","));if(i){const{transform:s,width:a,height:l}=this.#n(this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${a} ${l}`),o.setAttribute("transform",s)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Tw extends Jt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ze.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class QT extends Jt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ZT extends Jt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class JT extends Jt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Dw extends Jt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ze.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class eD extends Jt{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let r;t.hasAppearance||t.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;const{isMac:i}=sr.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class tD{#e=null;#t=null;#n=new Map;#r=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:o,viewport:s,structTreeLayer:a}){this.div=e,this.#e=t,this.#t=r,this.#r=a||null,this.page=o,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return this.#n.size>0}async#o(e,t){const r=e.firstChild||e,i=r.id=`${Dm}${t}`,o=await this.#r?.getAriaAttributes(i);if(o)for(const[s,a]of o)r.setAttribute(s,a);this.div.append(e),this.#e?.moveElementInDOM(this.div,e,r,!1)}async render(e){const{annotations:t}=e,r=this.div;Ks(r,this.viewport);const i=new Map,o={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new zm,annotationStorage:e.annotationStorage||new Nm,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const s of t){if(s.noHTML)continue;const a=s.annotationType===cn.POPUP;if(a){const c=i.get(s.id);if(!c)continue;o.elements=c}else{const{width:c,height:d}=ss(s.rect);if(c<=0||d<=0)continue}o.data=s;const l=OT.create(o);if(!l.isRenderable)continue;if(!a&&s.popupRef){const c=i.get(s.popupRef);c?c.push(l):i.set(s.popupRef,[l])}const u=l.render();s.hidden&&(u.style.visibility="hidden"),await this.#o(u,s.id),l._isEditable&&(this.#n.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#i()}update({viewport:e}){const t=this.div;this.viewport=e,Ks(t,{rotation:e.rotation}),this.#i(),t.hidden=!1}#i(){if(!this.#t)return;const e=this.div;for(const[t,r]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}}const zc=/\r\n?|\n/g;class hn extends Ue{#e;#t="";#n=`${this.id}-editor`;#r=null;#o;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=hn.prototype,t=o=>o.isEmpty(),r=cs.TRANSLATE_SMALL,i=cs.TRANSLATE_BIG;return ot(this,"_keyboardManager",new Uu([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=Ze.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||hn._defaultColor||Ue._defaultLineColor,this.#o=e.fontSize||hn._defaultFontSize}static initialize(e,t){Ue.initialize(e,t);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case lt.FREETEXT_SIZE:hn._defaultFontSize=t;break;case lt.FREETEXT_COLOR:hn._defaultColor=t;break}}updateParams(e,t){switch(e){case lt.FREETEXT_SIZE:this.#i(t);break;case lt.FREETEXT_COLOR:this.#l(t);break}}static get defaultPropertiesToUpdate(){return[[lt.FREETEXT_SIZE,hn._defaultFontSize],[lt.FREETEXT_COLOR,hn._defaultColor||Ue._defaultLineColor]]}get propertiesToUpdate(){return[[lt.FREETEXT_SIZE,this.#o],[lt.FREETEXT_COLOR,this.#e]]}#i(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-this.#o)*this.parentScale),this.#o=i,this.#c()},r=this.#o;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=i=>{this.#e=this.editorDiv.style.color=i},r=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-hn._internalPadding*e,-(hn._internalPadding+this.#o)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Ze.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;const e=this._uiManager.combinedSignal(this.#r);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const e=[];this.editorDiv.normalize();let t=null;for(const r of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(hn.#u(r)),t=r);return e.join(`
`)}#c(){const[e,t]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,s=o.style.display,a=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=s,o.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/t):(this.width=r.height/e,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#a().trimEnd();if(e===t)return;const r=i=>{if(this.#t=i,!i){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#c()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(e)},mustExec:!1}),this.#c()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){hn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#o}px * var(--scale-factor))`,r.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Od(this,this.div,["dblclick","keydown"]),this.width){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this._initialData;let[a,l]=this.getInitialTranslation();[a,l]=this.pageTranslationToScreen(a,l);const[u,c]=this.pageDimensions,[d,f]=this.pageTranslation;let g,m;switch(this.rotation){case 0:g=e+(s[0]-d)/u,m=t+this.height-(s[1]-f)/c;break;case 90:g=e+(s[0]-d)/u,m=t-(s[1]-f)/c,[a,l]=[l,-a];break;case 180:g=e-this.width+(s[0]-d)/u,m=t-(s[1]-f)/c,[a,l]=[-a,-l];break;case 270:g=e+(s[0]-d-this.height*c)/u,m=t+(s[1]-f-this.width*u)/c,[a,l]=[-l,a];break}this.setAt(g*i,m*o,a,l)}else this.setAt(e*i,t*o,this.width*i,this.height*o);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#u(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(zc,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:r}=t;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const i=hn.#f(t.getData("text")||"").replaceAll(zc,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const s=o.getRangeAt(0);if(!i.includes(`
`)){s.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:a,startOffset:l}=s,u=[],c=[];if(a.nodeType===Node.TEXT_NODE){const g=a.parentElement;if(c.push(a.nodeValue.slice(l).replaceAll(zc,"")),g!==this.editorDiv){let m=u;for(const y of this.editorDiv.childNodes){if(y===g){m=c;continue}m.push(hn.#u(y))}}u.push(a.nodeValue.slice(0,l).replaceAll(zc,""))}else if(a===this.editorDiv){let g=u,m=0;for(const y of this.editorDiv.childNodes)m++===l&&(g=c),g.push(hn.#u(y))}this.#t=`${u.join(`
`)}${i}${c.join(`
`)}`,this.#h();const d=new Range;let f=u.reduce((g,m)=>g+m.length,0);for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const m=g.nodeValue.length;if(f<=m){d.setStart(g,f),d.setEnd(g,f);break}f-=m}o.removeAllRanges(),o.addRange(d)}#h(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#d(){return this.#t.replaceAll(""," ")}static#f(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(e,t,r){let i=null;if(e instanceof Fw){const{data:{defaultAppearanceData:{fontSize:s,fontColor:a},rect:l,rotation:u,id:c,popupRef:d},textContent:f,textPosition:g,parent:{page:{pageNumber:m}}}=e;if(!f||f.length===0)return null;i=e={annotationType:Ze.FREETEXT,color:Array.from(a),fontSize:s,value:f.join(`
`),position:g,pageIndex:m-1,rect:l.slice(0),rotation:u,id:c,deleted:!1,popupRef:d}}const o=await super.deserialize(e,t,r);return o.#o=e.fontSize,o.#e=Ne.makeHexColor(...e.color),o.#t=hn.#f(e.value),o.annotationElementId=e.id||null,o._initialData=i,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=hn._internalPadding*this.parentScale,r=this.getRect(t,t),i=Ue._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),o={annotationType:Ze.FREETEXT,color:i,fontSize:this.#o,value:this.#d(),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?o:this.annotationElementId&&!this.#s(o)?null:(o.id=this.annotationElementId,o)}#s(e){const{value:t,fontSize:r,color:i,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==r||e.color.some((s,a)=>s!==i[a])||e.pageIndex!==o}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:r}=t;r.fontSize=`calc(${this.#o}px * var(--scale-factor))`,r.color=this.#e,t.replaceChildren();for(const o of this.#t.split(`
`)){const s=document.createElement("div");s.append(o?document.createTextNode(o):document.createElement("br")),t.append(s)}const i=hn._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class ke{static PRECISION=1e-4;toSVGPath(){_t("Abstract method `toSVGPath` must be implemented.")}get box(){_t("Abstract getter `box` must be implemented.")}serialize(e,t){_t("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,i,o,s){s||=new Float32Array(e.length);for(let a=0,l=e.length;a<l;a+=2)s[a]=t+e[a]*i,s[a+1]=r+e[a+1]*o;return s}static _rescaleAndSwap(e,t,r,i,o,s){s||=new Float32Array(e.length);for(let a=0,l=e.length;a<l;a+=2)s[a]=t+e[a+1]*i,s[a+1]=r+e[a]*o;return s}static _translate(e,t,r,i){i||=new Float32Array(e.length);for(let o=0,s=e.length;o<s;o+=2)i[o]=t+e[o],i[o+1]=r+e[o+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,i,o){switch(o){case 90:return[1-t/r,e/i];case 180:return[1-e/r,1-t/i];case 270:return[t/r,1-e/i];default:return[e/r,t/i]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,i,o,s){return[(e+5*r)/6,(t+5*i)/6,(5*r+o)/6,(5*i+s)/6,(r+o)/2,(i+s)/2]}}class Is{#e;#t=[];#n;#r;#o=[];#i=new Float32Array(18);#l;#a;#c;#u;#h;#d;#f=[];static#s=8;static#p=2;static#m=Is.#s+Is.#p;constructor({x:e,y:t},r,i,o,s,a=0){this.#e=r,this.#d=o*i,this.#r=s,this.#i.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=a,this.#u=Is.#s*i,this.#c=Is.#m*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#i[8])}#g(){const e=this.#i.subarray(4,6),t=this.#i.subarray(16,18),[r,i,o,s]=this.#e;return[(this.#l+(e[0]-t[0])/2-r)/o,(this.#a+(e[1]-t[1])/2-i)/s,(this.#l+(t[0]-e[0])/2-r)/o,(this.#a+(t[1]-e[1])/2-i)/s]}add({x:e,y:t}){this.#l=e,this.#a=t;const[r,i,o,s]=this.#e;let[a,l,u,c]=this.#i.subarray(8,12);const d=e-u,f=t-c,g=Math.hypot(d,f);if(g<this.#c)return!1;const m=g-this.#u,y=m/g,S=y*d,b=y*f;let E=a,w=l;a=u,l=c,u+=S,c+=b,this.#f?.push(e,t);const C=-b/m,T=S/m,D=C*this.#d,k=T*this.#d;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([u+D,c+k],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([u-D,c-k],16),isNaN(this.#i[6])?(this.#o.length===0&&(this.#i.set([a+D,l+k],2),this.#o.push(NaN,NaN,NaN,NaN,(a+D-r)/o,(l+k-i)/s),this.#i.set([a-D,l-k],14),this.#t.push(NaN,NaN,NaN,NaN,(a-D-r)/o,(l-k-i)/s)),this.#i.set([E,w,a,l,u,c],6),!this.isEmpty()):(this.#i.set([E,w,a,l,u,c],6),Math.abs(Math.atan2(w-l,E-a)-Math.atan2(b,S))<Math.PI/2?([a,l,u,c]=this.#i.subarray(2,6),this.#o.push(NaN,NaN,NaN,NaN,((a+u)/2-r)/o,((l+c)/2-i)/s),[a,l,E,w]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((E+a)/2-r)/o,((w+l)/2-i)/s),!0):([E,w,a,l,u,c]=this.#i.subarray(0,6),this.#o.push(((E+5*a)/6-r)/o,((w+5*l)/6-i)/s,((5*a+u)/6-r)/o,((5*l+c)/6-i)/s,((a+u)/2-r)/o,((l+c)/2-i)/s),[u,c,a,l,E,w]=this.#i.subarray(12,18),this.#t.push(((E+5*a)/6-r)/o,((w+5*l)/6-i)/s,((5*a+u)/6-r)/o,((5*l+c)/6-i)/s,((a+u)/2-r)/o,((l+c)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#o,t=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#v();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#y(r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#E(r),r.join(" ")}#v(){const[e,t,r,i]=this.#e,[o,s,a,l]=this.#g();return`M${(this.#i[2]-e)/r} ${(this.#i[3]-t)/i} L${(this.#i[4]-e)/r} ${(this.#i[5]-t)/i} L${o} ${s} L${a} ${l} L${(this.#i[16]-e)/r} ${(this.#i[17]-t)/i} L${(this.#i[14]-e)/r} ${(this.#i[15]-t)/i} Z`}#E(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#y(e){const[t,r,i,o]=this.#e,s=this.#i.subarray(4,6),a=this.#i.subarray(16,18),[l,u,c,d]=this.#g();e.push(`L${(s[0]-t)/i} ${(s[1]-r)/o} L${l} ${u} L${c} ${d} L${(a[0]-t)/i} ${(a[1]-r)/o}`)}newFreeDrawOutline(e,t,r,i,o,s){return new Pw(e,t,r,i,o,s)}getOutlines(){const e=this.#o,t=this.#t,r=this.#i,[i,o,s,a]=this.#e,l=new Float32Array((this.#f?.length??0)+2);for(let d=0,f=l.length-2;d<f;d+=2)l[d]=(this.#f[d]-i)/s,l[d+1]=(this.#f[d+1]-o)/a;if(l[l.length-2]=(this.#l-i)/s,l[l.length-1]=(this.#a-o)/a,isNaN(r[6])&&!this.isEmpty())return this.#_(l);const u=new Float32Array(this.#o.length+24+this.#t.length);let c=e.length;for(let d=0;d<c;d+=2){if(isNaN(e[d])){u[d]=u[d+1]=NaN;continue}u[d]=e[d],u[d+1]=e[d+1]}c=this.#x(u,c);for(let d=t.length-6;d>=6;d-=6)for(let f=0;f<6;f+=2){if(isNaN(t[d+f])){u[c]=u[c+1]=NaN,c+=2;continue}u[c]=t[d+f],u[c+1]=t[d+f+1],c+=2}return this.#C(u,c),this.newFreeDrawOutline(u,l,this.#e,this.#h,this.#n,this.#r)}#_(e){const t=this.#i,[r,i,o,s]=this.#e,[a,l,u,c]=this.#g(),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-r)/o,(t[3]-i)/s,NaN,NaN,NaN,NaN,(t[4]-r)/o,(t[5]-i)/s,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,(t[16]-r)/o,(t[17]-i)/s,NaN,NaN,NaN,NaN,(t[14]-r)/o,(t[15]-i)/s],0),this.newFreeDrawOutline(d,e,this.#e,this.#h,this.#n,this.#r)}#C(e,t){const r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6}#x(e,t){const r=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[o,s,a,l]=this.#e,[u,c,d,f]=this.#g();return e.set([NaN,NaN,NaN,NaN,(r[0]-o)/a,(r[1]-s)/l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-o)/a,(i[1]-s)/l],t),t+=24}}class Pw extends ke{#e;#t=new Float32Array(4);#n;#r;#o;#i;#l;constructor(e,t,r,i,o,s){super(),this.#l=e,this.#o=t,this.#e=r,this.#i=i,this.#n=o,this.#r=s,this.lastPoint=[NaN,NaN],this.#a(s);const[a,l,u,c]=this.#t;for(let d=0,f=e.length;d<f;d+=2)e[d]=(e[d]-a)/u,e[d+1]=(e[d+1]-l)/c;for(let d=0,f=t.length;d<f;d+=2)t[d]=(t[d]-a)/u,t[d+1]=(t[d+1]-l)/c}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,r=this.#l.length;t<r;t+=6){if(isNaN(this.#l[t])){e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`);continue}e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,r,i],o){const s=r-e,a=i-t;let l,u;switch(o){case 0:l=ke._rescale(this.#l,e,i,s,-a),u=ke._rescale(this.#o,e,i,s,-a);break;case 90:l=ke._rescaleAndSwap(this.#l,e,t,s,a),u=ke._rescaleAndSwap(this.#o,e,t,s,a);break;case 180:l=ke._rescale(this.#l,r,t,-s,a),u=ke._rescale(this.#o,r,t,-s,a);break;case 270:l=ke._rescaleAndSwap(this.#l,r,i,-s,-a),u=ke._rescaleAndSwap(this.#o,r,i,-s,-a);break}return{outline:Array.from(l),points:[Array.from(u)]}}#a(e){const t=this.#l;let r=t[4],i=t[5],o=r,s=i,a=r,l=i,u=r,c=i;const d=e?Math.max:Math.min;for(let g=6,m=t.length;g<m;g+=6){if(isNaN(t[g]))o=Math.min(o,t[g+4]),s=Math.min(s,t[g+5]),a=Math.max(a,t[g+4]),l=Math.max(l,t[g+5]),c<t[g+5]?(u=t[g+4],c=t[g+5]):c===t[g+5]&&(u=d(u,t[g+4]));else{const y=Ne.bezierBoundingBox(r,i,...t.slice(g,g+6));o=Math.min(o,y[0]),s=Math.min(s,y[1]),a=Math.max(a,y[2]),l=Math.max(l,y[3]),c<y[3]?(u=y[2],c=y[3]):c===y[3]&&(u=d(u,y[2]))}r=t[g+4],i=t[g+5]}const f=this.#t;f[0]=o-this.#n,f[1]=s-this.#n,f[2]=a-o+2*this.#n,f[3]=l-s+2*this.#n,this.lastPoint=[u,c]}get box(){return this.#t}newOutliner(e,t,r,i,o,s=0){return new Is(e,t,r,i,o,s)}getNewOutline(e,t){const[r,i,o,s]=this.#t,[a,l,u,c]=this.#e,d=o*u,f=s*c,g=r*u+a,m=i*c+l,y=this.newOutliner({x:this.#o[0]*d+g,y:this.#o[1]*f+m},this.#e,this.#i,e,this.#r,t??this.#n);for(let S=2;S<this.#o.length;S+=2)y.add({x:this.#o[S]*d+g,y:this.#o[S+1]*f+m});return y.getOutlines()}}class vg{#e;#t;#n=[];#r=[];constructor(e,t=0,r=0,i=!0){let o=1/0,s=-1/0,a=1/0,l=-1/0;const u=10**-4;for(const{x:S,y:b,width:E,height:w}of e){const C=Math.floor((S-t)/u)*u,T=Math.ceil((S+E+t)/u)*u,D=Math.floor((b-t)/u)*u,k=Math.ceil((b+w+t)/u)*u,M=[C,D,k,!0],N=[T,D,k,!1];this.#n.push(M,N),o=Math.min(o,C),s=Math.max(s,T),a=Math.min(a,D),l=Math.max(l,k)}const c=s-o+2*r,d=l-a+2*r,f=o-r,g=a-r,m=this.#n.at(i?-1:-2),y=[m[0],m[2]];for(const S of this.#n){const[b,E,w]=S;S[0]=(b-f)/c,S[1]=(E-g)/d,S[2]=(w-g)/d}this.#e=new Float32Array([f,g,c,d]),this.#t=y}getOutlines(){this.#n.sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#c(t)),this.#l(t)):(this.#a(t),e.push(...this.#c(t)));return this.#o(e)}#o(e){const t=[],r=new Set;for(const s of e){const[a,l,u]=s;t.push([a,l,s],[a,u,s])}t.sort((s,a)=>s[1]-a[1]||s[0]-a[0]);for(let s=0,a=t.length;s<a;s+=2){const l=t[s][2],u=t[s+1][2];l.push(u),u.push(l),r.add(l),r.add(u)}const i=[];let o;for(;r.size>0;){const s=r.values().next().value;let[a,l,u,c,d]=s;r.delete(s);let f=a,g=l;for(o=[a,u],i.push(o);;){let m;if(r.has(c))m=c;else if(r.has(d))m=d;else break;r.delete(m),[a,l,u,c,d]=m,f!==a&&(o.push(f,g,a,g===l?l:u),f=a),g=g===l?u:l}o.push(f,g)}return new nD(i,this.#e,this.#t)}#i(e){const t=this.#r;let r=0,i=t.length-1;for(;r<=i;){const o=r+i>>1,s=t[o][0];if(s===e)return o;s<e?r=o+1:i=o-1}return i+1}#l([,e,t]){const r=this.#i(e);this.#r.splice(r,0,[e,t])}#a([,e,t]){const r=this.#i(e);for(let i=r;i<this.#r.length;i++){const[o,s]=this.#r[i];if(o!==e)break;if(o===e&&s===t){this.#r.splice(i,1);return}}for(let i=r-1;i>=0;i--){const[o,s]=this.#r[i];if(o!==e)break;if(o===e&&s===t){this.#r.splice(i,1);return}}}#c(e){const[t,r,i]=e,o=[[t,r,i]],s=this.#i(i);for(let a=0;a<s;a++){const[l,u]=this.#r[a];for(let c=0,d=o.length;c<d;c++){const[,f,g]=o[c];if(!(u<=f||g<=l)){if(f>=l){if(g>u)o[c][1]=u;else{if(d===1)return[];o.splice(c,1),c--,d--}continue}o[c][2]=l,g>u&&o.push([t,u,g])}}}return o}}class nD extends ke{#e;#t;constructor(e,t,r){super(),this.#t=e,this.#e=t,this.lastPoint=r}toSVGPath(){const e=[];for(const t of this.#t){let[r,i]=t;e.push(`M${r} ${i}`);for(let o=2;o<t.length;o+=2){const s=t[o],a=t[o+1];s===r?(e.push(`V${a}`),i=a):a===i&&(e.push(`H${s}`),r=s)}e.push("Z")}return e.join(" ")}serialize([e,t,r,i],o){const s=[],a=r-e,l=i-t;for(const u of this.#t){const c=new Array(u.length);for(let d=0;d<u.length;d+=2)c[d]=e+u[d]*a,c[d+1]=i-u[d+1]*l;s.push(c)}return s}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class yg extends Is{newFreeDrawOutline(e,t,r,i,o,s){return new rD(e,t,r,i,o,s)}}class rD extends Pw{newOutliner(e,t,r,i,o,s=0){return new yg(e,t,r,i,o,s)}}class qr{#e=null;#t=null;#n;#r=null;#o=!1;#i=!1;#l=null;#a;#c=null;#u=null;#h;static#d=null;static get _keyboardManager(){return ot(this,"_keyboardManager",new Uu([[["Escape","mac+Escape"],qr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],qr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],qr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],qr.prototype._moveToPrevious],[["Home","mac+Home"],qr.prototype._moveToBeginning],[["End","mac+End"],qr.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#i=!1,this.#h=lt.HIGHLIGHT_COLOR,this.#l=e):(this.#i=!0,this.#h=lt.HIGHLIGHT_DEFAULT_COLOR),this.#u=e?._uiManager||t,this.#a=this.#u._eventBus,this.#n=e?.color||this.#u?.highlightColors.values().next().value||"#FFFF98",qr.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#u._signal;e.addEventListener("click",this.#m.bind(this),{signal:t}),e.addEventListener("keydown",this.#p.bind(this),{signal:t});const r=this.#t=document.createElement("span");return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=this.#n,e.append(r),e}renderMainDropdown(){const e=this.#r=this.#f();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#f(){const e=document.createElement("div"),t=this.#u._signal;e.addEventListener("contextmenu",ki,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,i]of this.#u.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",i),o.title=r,o.setAttribute("data-l10n-id",qr.#d[r]);const s=document.createElement("span");o.append(s),s.className="swatch",s.style.backgroundColor=i,o.setAttribute("aria-selected",i===this.#n),o.addEventListener("click",this.#s.bind(this,i),{signal:t}),e.append(o)}return e.addEventListener("keydown",this.#p.bind(this),{signal:t}),e}#s(e,t){t.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const t=e.target.getAttribute("data-color");t&&this.#s(t,e)}_moveToNext(e){if(!this.#v){this.#m(e);return}if(e.target===this.#e){this.#r.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#r?.firstChild||e.target===this.#e){this.#v&&this._hideDropdownFromKeyboard();return}this.#v||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#v){this.#m(e);return}this.#r.firstChild?.focus()}_moveToEnd(e){if(!this.#v){this.#m(e);return}this.#r.lastChild?.focus()}#p(e){qr._keyboardManager.exec(this,e)}#m(e){if(this.#v){this.hideDropdown();return}if(this.#o=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#u.combinedSignal(this.#c)})),this.#r){this.#r.classList.remove("hidden");return}const t=this.#r=this.#f();this.#e.append(t)}#g(e){this.#r?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#r?.classList.add("hidden"),this.#c?.abort(),this.#c=null}get#v(){return this.#r&&!this.#r.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#v){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#o})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#r)return;const t=this.#u.highlightColors.values();for(const r of this.#r.children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#r?.remove(),this.#r=null}}class Qt extends Ue{#e=null;#t=0;#n;#r=null;#o=null;#i=null;#l=null;#a=0;#c=null;#u=null;#h=null;#d=!1;#f=null;#s;#p=null;#m="";#g;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Ze.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Qt.prototype;return ot(this,"_keyboardManager",new Uu([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Qt._defaultColor,this.#g=e.thickness||Qt._defaultThickness,this.#s=e.opacity||Qt._defaultOpacity,this.#n=e.boxes||null,this.#v=e.methodOfCreation||"",this.#m=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#d=!0,this.#y(e),this.#T()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#a=e.focusOffset,this.#E(),this.#T(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#E(){const e=new vg(this.#n,.001);this.#u=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#u.box;const t=new vg(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#i=t.getOutlines();const{lastPoint:r}=this.#i;this.#f=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#y({highlightOutlines:e,highlightId:t,clipPathId:r}){this.#u=e;const i=1.5;if(this.#i=e.getNewOutline(this.#g/2+i,.0025),t>=0)this.#h=t,this.#r=r,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const c=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Qt.#w(this.#u.box,(c-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:Qt.#w(this.#i.box,c),path:{d:this.#i.toSVGPath()}})}const[o,s,a,l]=e.box;switch(this.rotation){case 0:this.x=o,this.y=s,this.width=a,this.height=l;break;case 90:{const[c,d]=this.parentDimensions;this.x=s,this.y=1-o,this.width=a*d/c,this.height=l*c/d;break}case 180:this.x=1-o,this.y=1-s,this.width=a,this.height=l;break;case 270:{const[c,d]=this.parentDimensions;this.x=1-s,this.y=o,this.width=a*d/c,this.height=l*c/d;break}}const{lastPoint:u}=this.#i;this.#f=[(u[0]-o)/a,(u[1]-s)/l]}static initialize(e,t){Ue.initialize(e,t),Qt._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case lt.HIGHLIGHT_DEFAULT_COLOR:Qt._defaultColor=t;break;case lt.HIGHLIGHT_THICKNESS:Qt._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#f}updateParams(e,t){switch(e){case lt.HIGHLIGHT_COLOR:this.#_(t);break;case lt.HIGHLIGHT_THICKNESS:this.#C(t);break}}static get defaultPropertiesToUpdate(){return[[lt.HIGHLIGHT_DEFAULT_COLOR,Qt._defaultColor],[lt.HIGHLIGHT_THICKNESS,Qt._defaultThickness]]}get propertiesToUpdate(){return[[lt.HIGHLIGHT_COLOR,this.color||Qt._defaultColor],[lt.HIGHLIGHT_THICKNESS,this.#g||Qt._defaultThickness],[lt.HIGHLIGHT_FREE,this.#d]]}#_(e){const t=(o,s)=>{this.color=o,this.#s=s,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:o,"fill-opacity":s}}),this.#o?.updateColor(o)},r=this.color,i=this.#s;this.addCommands({cmd:t.bind(this,e,Qt._defaultOpacity),undo:t.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#C(e){const t=this.#g,r=i=>{this.#g=i,this.#x(i)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(this.#o=new qr({editor:this}),e.addColorPicker(this.#o)),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#P())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#F(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#T(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#F():e&&(this.#T(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#x(e){if(!this.#d)return;this.#y({highlightOutlines:this.#u.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,r]=this.parentDimensions;this.setDims(this.width*t,this.height*r)}#F(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#T(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#r}=e.drawLayer.draw({bbox:this.#u.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#s},rootClass:{highlight:!0,free:this.#d},path:{d:this.#u.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#r))}static#w([e,t,r,i],o){switch(o){case 90:return[1-t-i,e,i,r];case 180:return[1-e-r,1-t-i,r,i];case 270:return[t,1-e-r,i,r]}return[e,t,r,i]}rotate(e){const{drawLayer:t}=this.parent;let r;this.#d?(e=(e-this.rotation+360)%360,r=Qt.#w(this.#u.box,e)):r=Qt.#w([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:r,root:{"data-main-rotation":e}}),t.updateProperties(this.#p,{bbox:Qt.#w(this.#i.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#m&&(e.setAttribute("aria-label",this.#m),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#k.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#r;const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),Od(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#k(e){Qt._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#A(!0);break;case 1:case 3:this.#A(!1);break}}#A(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#a)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#A(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#P(){return this.#d?this.rotation:0}#R(){if(this.#d)return null;const[e,t]=this.pageDimensions,[r,i]=this.pageTranslation,o=this.#n,s=new Float32Array(o.length*8);let a=0;for(const{x:l,y:u,width:c,height:d}of o){const f=l*e+r,g=(1-u)*t+i;s[a]=s[a+4]=f,s[a+1]=s[a+3]=g,s[a+2]=s[a+6]=f+c*e,s[a+5]=s[a+7]=g-d*t,a+=8}return s}#N(e){return this.#u.serialize(e,this.#P())}static startHighlighting(e,t,{target:r,x:i,y:o}){const{x:s,y:a,width:l,height:u}=r.getBoundingClientRect(),c=new AbortController,d=e.combinedSignal(c),f=g=>{c.abort(),this.#b(e,g)};window.addEventListener("blur",f,{signal:d}),window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("pointerdown",Rr,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",ki,{signal:d}),r.addEventListener("pointermove",this.#S.bind(this,e),{signal:d}),this._freeHighlight=new yg({x:i,y:o},[s,a,l,u],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#S(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#b(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,r){let i=null;if(e instanceof Tw){const{data:{quadPoints:m,rect:y,rotation:S,id:b,color:E,opacity:w,popupRef:C},parent:{page:{pageNumber:T}}}=e;i=e={annotationType:Ze.HIGHLIGHT,color:Array.from(E),opacity:w,quadPoints:m,boxes:null,pageIndex:T-1,rect:y.slice(0),rotation:S,id:b,deleted:!1,popupRef:C}}else if(e instanceof jm){const{data:{inkLists:m,rect:y,rotation:S,id:b,color:E,borderStyle:{rawWidth:w},popupRef:C},parent:{page:{pageNumber:T}}}=e;i=e={annotationType:Ze.HIGHLIGHT,color:Array.from(E),thickness:w,inkLists:m,boxes:null,pageIndex:T-1,rect:y.slice(0),rotation:S,id:b,deleted:!1,popupRef:C}}const{color:o,quadPoints:s,inkLists:a,opacity:l}=e,u=await super.deserialize(e,t,r);u.color=Ne.makeHexColor(...o),u.#s=l||1,a&&(u.#g=e.thickness),u.annotationElementId=e.id||null,u._initialData=i;const[c,d]=u.pageDimensions,[f,g]=u.pageTranslation;if(s){const m=u.#n=[];for(let y=0;y<s.length;y+=8)m.push({x:(s[y]-f)/c,y:1-(s[y+1]-g)/d,width:(s[y+2]-s[y])/c,height:(s[y+1]-s[y+5])/d});u.#E(),u.#T(),u.rotate(u.rotation)}else if(a){u.#d=!0;const m=a[0],y={x:m[0]-f,y:d-(m[1]-g)},S=new yg(y,[0,0,c,d],1,u.#g/2,!0,.001);for(let w=0,C=m.length;w<C;w+=2)y.x=m[w]-f,y.y=d-(m[w+1]-g),S.add(y);const{id:b,clipPathId:E}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);u.#y({highlightOutlines:S.getOutlines(),highlightId:b,clipPathId:E}),u.#T()}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),r=Ue._colorManager.convert(this.color),i={annotationType:Ze.HIGHLIGHT,color:r,opacity:this.#s,thickness:this.#g,quadPoints:this.#R(),outlines:this.#N(t),pageIndex:this.pageIndex,rect:t,rotation:this.#P(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#I(i)?null:(i.id=this.annotationElementId,i)}#I(e){const{color:t}=this._initialData;return e.color.some((r,i)=>r!==t[i])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class iD{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))this.updateProperty(t,r)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){_t("Not implemented")}}class We extends Ue{#e=null;#t;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#r=null;static#o=null;static#i=NaN;static#l=null;static#a=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,e.drawOutlines&&(this.#u(e),this.#f())}#u({drawOutlines:e,drawId:t,drawingOptions:r}){this.#e=e,this._drawingOptions||=r,t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#m(e.box)}#h(e,t){const{id:r}=t.drawLayer.draw(We._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r}static _mergeSVGProperties(e,t){const r=new Set(Object.keys(e));for(const[i,o]of Object.entries(t))r.has(i)?Object.assign(e[i],o):e[i]=o;return e}static getDefaultDrawingOptions(e){_t("Not implemented")}static get typesMap(){_t("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,t),this._currentParent&&(We.#n.updateProperty(r,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)e.push([r,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[r,i]of this.constructor.typesMap)e.push([r,t[i]]);return e}_updateProperty(e,t,r){const i=this._drawingOptions,o=i[t],s=a=>{i.updateProperty(t,a);const l=this.#e.updateProperty(t,a);l&&this.#m(l),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:s.bind(this,r),undo:s.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,We._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,We._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g(e,t)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,We._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#m(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#s([e,t,r,i]){const{parentDimensions:[o,s],rotation:a}=this;switch(a){case 90:return[t,1-e,r*(s/o),i*(o/s)];case 180:return[1-e,1-t,r,i];case 270:return[1-t,e,r*(s/o),i*(o/s)];default:return[e,t,r,i]}}#p(){const{x:e,y:t,width:r,height:i,parentDimensions:[o,s],rotation:a}=this;switch(a){case 90:return[1-t,e,r*(o/s),i*(s/o)];case 180:return[1-e,1-t,r,i];case 270:return[t,1-e,r*(o/s),i*(s/o)];default:return[e,t,r,i]}}#m(e){if([this.x,this.y,this.width,this.height]=this.#s(e),this.div){this.fixAndSetPosition();const[t,r]=this.parentDimensions;this.setDims(this.width*t,this.height*r)}this._onResized()}#g(){const{x:e,y:t,width:r,height:i,rotation:o,parentRotation:s,parentDimensions:[a,l]}=this;switch((o*4+s)/90){case 1:return[1-t-i,e,i,r];case 2:return[1-e-r,1-t-i,r,i];case 3:return[t,1-e-r,i,r];case 4:return[e,t-r*(a/l),i*(l/a),r*(a/l)];case 5:return[1-t,e,r*(a/l),i*(l/a)];case 6:return[1-e-i*(l/a),1-t,i*(l/a),r*(a/l)];case 7:return[t-r*(a/l),1-e-i*(l/a),r*(a/l),i*(l/a)];case 8:return[e-r,t-i,r,i];case 9:return[1-t,e-r,i,r];case 10:return[1-e,1-t,r,i];case 11:return[t-i,1-e,i,r];case 12:return[e-i*(l/a),t,i*(l/a),r*(a/l)];case 13:return[1-t-r*(a/l),e-i*(l/a),r*(a/l),i*(l/a)];case 14:return[1-e,1-t-r*(a/l),i*(l/a),r*(a/l)];case 15:return[t,1-e,r*(a/l),i*(l/a)];default:return[e,t,r,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,We._mergeSVGProperties({bbox:this.#g()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#m(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const t=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal";const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,t,r,i,o){_t("Not implemented")}static startDrawing(e,t,r,i){const{target:o,offsetX:s,offsetY:a,pointerId:l,pointerType:u}=i;if(We.#l&&We.#l!==u)return;const{viewport:{rotation:c}}=e,{width:d,height:f}=o.getBoundingClientRect(),g=We.#r=new AbortController,m=e.combinedSignal(g);if(We.#i||=l,We.#l??=u,window.addEventListener("pointerup",y=>{We.#i===y.pointerId?this._endDraw(y):We.#a?.delete(y.pointerId)},{signal:m}),window.addEventListener("pointercancel",y=>{We.#i===y.pointerId?this._currentParent.endDrawingSession():We.#a?.delete(y.pointerId)},{signal:m}),window.addEventListener("pointerdown",y=>{We.#l===y.pointerType&&((We.#a||=new Set).add(y.pointerId),We.#n.isCancellable()&&(We.#n.removeLastElement(),We.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",ki,{signal:m}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),o.addEventListener("touchmove",y=>{y.timeStamp===We.#c&&Rr(y)},{signal:m}),e.toggleDrawing(),t._editorUndoBar?.hide(),We.#n){e.drawLayer.updateProperties(this._currentDrawId,We.#n.startNew(s,a,d,f,c));return}t.updateUIForDefaultProperties(this),We.#n=this.createDrawerInstance(s,a,d,f,c),We.#o=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(We.#o.toSVGProperties(),We.#n.defaultSVGProperties),!0,!1)}static _drawMove(e){if(We.#c=-1,!We.#n)return;const{offsetX:t,offsetY:r,pointerId:i}=e;if(We.#i===i){if(We.#a?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,We.#n.add(t,r)),We.#c=e.timeStamp,Rr(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,We.#n=null,We.#o=null,We.#l=null,We.#c=NaN),We.#r&&(We.#r.abort(),We.#r=null,We.#i=NaN,We.#a=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e&&t.drawLayer.updateProperties(this._currentDrawId,We.#n.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=We.#n,i=this._currentDrawId,o=r.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,r.setLastElement(o))},undo:()=>{t.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:lt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(lt.DRAW_STEP),!We.#n.isEmpty()){const{pageDimensions:[r,i],scale:o}=t,s=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:We.#n.getOutlines(r*o,i*o,o,this._INNER_MARGIN),drawingOptions:We.#o,mustBeCommitted:!e});return this._cleanup(!0),s}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,r,i,o,s){_t("Not implemented")}static async deserialize(e,t,r){const{rawDims:{pageWidth:i,pageHeight:o,pageX:s,pageY:a}}=t.viewport,l=this.deserializeDraw(s,a,i,o,this._INNER_MARGIN,e),u=await super.deserialize(e,t,r);return u.createDrawingOptions(e),u.#u({drawOutlines:l}),u.#f(),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[t,r]=this.pageTranslation,[i,o]=this.pageDimensions;return this.#e.serialize([t,r,i,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class oD{#e=new Float64Array(6);#t;#n;#r;#o;#i;#l="";#a=0;#c=new Th;#u;#h;constructor(e,t,r,i,o,s){this.#u=r,this.#h=i,this.#r=o,this.#o=s,[e,t]=this.#d(e,t);const a=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t],this.#n=[{line:a,points:this.#i}],this.#e.set(a,0)}updateProperty(e,t){e==="stroke-width"&&(this.#o=t)}#d(e,t){return ke._normalizePoint(e,t,this.#u,this.#h,this.#r)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#i.length<=10}add(e,t){[e,t]=this.#d(e,t);const[r,i,o,s]=this.#e.subarray(2,6),a=e-o,l=t-s;return Math.hypot(this.#u*a,this.#h*l)<=2?null:(this.#i.push(e,t),isNaN(r)?(this.#e.set([o,s,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([r,i,o,s,e,t],0),this.#t.push(...ke.createBezierPoints(r,i,o,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,i,o){this.#u=r,this.#h=i,this.#r=o,[e,t]=this.#d(e,t);const s=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t];const a=this.#n.at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),this.#n.push({line:s,points:this.#i}),this.#e.set(s,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(e){return this.#n?(this.#n.push(e),this.#t=e.line,this.#i=e.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#l="";for(let e=0,t=this.#n.length;e<t;e++){const{line:r,points:i}=this.#n[e];this.#t=r,this.#i=i,this.#a=0,this.toSVGPath()}return{path:{d:this.#l}}}toSVGPath(){const e=ke.svgRound(this.#t[4]),t=ke.svgRound(this.#t[5]);if(this.#i.length===2)return this.#l=`${this.#l} M ${e} ${t} Z`,this.#l;if(this.#i.length<=6){const i=this.#l.lastIndexOf("M");this.#l=`${this.#l.slice(0,i)} M ${e} ${t}`,this.#a=6}if(this.#i.length===4){const i=ke.svgRound(this.#t[10]),o=ke.svgRound(this.#t[11]);return this.#l=`${this.#l} L ${i} ${o}`,this.#a=12,this.#l}const r=[];this.#a===0&&(r.push(`M ${e} ${t}`),this.#a=6);for(let i=this.#a,o=this.#t.length;i<o;i+=6){const[s,a,l,u,c,d]=this.#t.slice(i,i+6).map(ke.svgRound);r.push(`C${s} ${a} ${l} ${u} ${c} ${d}`)}return this.#l+=r.join(" "),this.#a=this.#t.length,this.#l}getOutlines(e,t,r,i){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#n,e,t,r,this.#r,this.#o,i),this.#e=null,this.#t=null,this.#n=null,this.#l=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Th extends ke{#e;#t=0;#n;#r;#o;#i;#l;#a;#c;build(e,t,r,i,o,s,a){this.#o=t,this.#i=r,this.#l=i,this.#a=o,this.#c=s,this.#n=a??0,this.#r=e,this.#d()}setLastElement(e){return this.#r.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#r.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#r){if(e.push(`M${ke.svgRound(t[4])} ${ke.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12){e.push(`L${ke.svgRound(t[10])} ${ke.svgRound(t[11])}`);continue}for(let r=6,i=t.length;r<i;r+=6){const[o,s,a,l,u,c]=t.subarray(r,r+6).map(ke.svgRound);e.push(`C${o} ${s} ${a} ${l} ${u} ${c}`)}}return e.join("")}serialize([e,t,r,i],o){const s=[],a=[],[l,u,c,d]=this.#h();let f,g,m,y,S,b,E,w,C;switch(this.#a){case 0:C=ke._rescale,f=e,g=t+i,m=r,y=-i,S=e+l*r,b=t+(1-u-d)*i,E=e+(l+c)*r,w=t+(1-u)*i;break;case 90:C=ke._rescaleAndSwap,f=e,g=t,m=r,y=i,S=e+u*r,b=t+l*i,E=e+(u+d)*r,w=t+(l+c)*i;break;case 180:C=ke._rescale,f=e+r,g=t,m=-r,y=i,S=e+(1-l-c)*r,b=t+u*i,E=e+(1-l)*r,w=t+(u+d)*i;break;case 270:C=ke._rescaleAndSwap,f=e+r,g=t+i,m=-r,y=-i,S=e+(1-u-d)*r,b=t+(1-l-c)*i,E=e+(1-u)*r,w=t+(1-l)*i;break}for(const{line:T,points:D}of this.#r)s.push(C(T,f,g,m,y,o?new Array(T.length):null)),a.push(C(D,f,g,m,y,o?new Array(D.length):null));return{lines:s,points:a,rect:[S,b,E,w]}}static deserialize(e,t,r,i,o,{paths:{lines:s,points:a},rotation:l,thickness:u}){const c=[];let d,f,g,m,y;switch(l){case 0:y=ke._rescale,d=-e/r,f=t/i+1,g=1/r,m=-1/i;break;case 90:y=ke._rescaleAndSwap,d=-t/i,f=-e/r,g=1/i,m=1/r;break;case 180:y=ke._rescale,d=e/r+1,f=-t/i,g=-1/r,m=1/i;break;case 270:y=ke._rescaleAndSwap,d=t/i+1,f=e/r+1,g=-1/i,m=-1/r;break}if(!s){s=[];for(const b of a){const E=b.length;if(E===2){s.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(E===4){s.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const w=new Float32Array(3*(E-2));s.push(w);let[C,T,D,k]=b.subarray(0,4);w.set([NaN,NaN,NaN,NaN,C,T],0);for(let M=4;M<E;M+=2){const N=b[M],U=b[M+1];w.set(ke.createBezierPoints(C,T,D,k,N,U),(M-2)*3),[C,T,D,k]=[D,k,N,U]}}}for(let b=0,E=s.length;b<E;b++)c.push({line:y(s[b].map(w=>w??NaN),d,f,g,m),points:y(a[b].map(w=>w??NaN),d,f,g,m)});const S=new Th;return S.build(c,r,i,1,l,u,o),S}#u(e=this.#c){const t=this.#n+e/2*this.#l;return this.#a%180===0?[t/this.#o,t/this.#i]:[t/this.#i,t/this.#o]}#h(){const[e,t,r,i]=this.#e,[o,s]=this.#u(0);return[e+o,t+s,r-2*o,i-2*s]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#r){if(i.length<=12){for(let a=4,l=i.length;a<l;a+=6){const[u,c]=i.subarray(a,a+2);e[0]=Math.min(e[0],u),e[1]=Math.min(e[1],c),e[2]=Math.max(e[2],u),e[3]=Math.max(e[3],c)}continue}let o=i[4],s=i[5];for(let a=6,l=i.length;a<l;a+=6){const[u,c,d,f,g,m]=i.subarray(a,a+6);Ne.bezierBoundingBox(o,s,u,c,d,f,g,m,e),o=g,s=m}}const[t,r]=this.#u();e[0]=Math.min(1,Math.max(0,e[0]-t)),e[1]=Math.min(1,Math.max(0,e[1]-r)),e[2]=Math.min(1,Math.max(0,e[2]+t)),e[3]=Math.min(1,Math.max(0,e[3]+r)),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,r]=this.#u();this.#c=e;const[i,o]=this.#u(),[s,a]=[i-t,o-r],l=this.#e;return l[0]-=s,l[1]-=a,l[2]+=2*s,l[3]+=2*a,l}updateParentDimensions([e,t],r){const[i,o]=this.#u();this.#o=e,this.#i=t,this.#l=r;const[s,a]=this.#u(),l=s-i,u=a-o,c=this.#e;return c[0]-=l,c[1]-=u,c[2]+=2*l,c[3]+=2*u,c}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(ke.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ke.svgRound(e)} ${ke.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let r=0,i=0,o=0,s=0,a=0,l=0;switch(this.#t){case 90:i=t/e,o=-e/t,a=e;break;case 180:r=-1,s=-1,a=e,l=t;break;case 270:i=-t/e,o=e/t,l=t;break;default:return""}return`matrix(${r} ${i} ${o} ${s} ${ke.svgRound(a)} ${ke.svgRound(l)})`}getPathResizingSVGProperties([e,t,r,i]){const[o,s]=this.#u(),[a,l,u,c]=this.#e;if(Math.abs(u-o)<=ke.PRECISION||Math.abs(c-s)<=ke.PRECISION){const y=e+r/2-(a+u/2),S=t+i/2-(l+c/2);return{path:{"transform-origin":`${ke.svgRound(e)} ${ke.svgRound(t)}`,transform:`${this.rotationTransform} translate(${y} ${S})`}}}const d=(r-2*o)/(u-2*o),f=(i-2*s)/(c-2*s),g=u/r,m=c/i;return{path:{"transform-origin":`${ke.svgRound(a)} ${ke.svgRound(l)}`,transform:`${this.rotationTransform} scale(${g} ${m}) translate(${ke.svgRound(o)} ${ke.svgRound(s)}) scale(${d} ${f}) translate(${ke.svgRound(-o)} ${ke.svgRound(-s)})`}}}getPathResizedSVGProperties([e,t,r,i]){const[o,s]=this.#u(),a=this.#e,[l,u,c,d]=a;if(a[0]=e,a[1]=t,a[2]=r,a[3]=i,Math.abs(c-o)<=ke.PRECISION||Math.abs(d-s)<=ke.PRECISION){const S=e+r/2-(l+c/2),b=t+i/2-(u+d/2);for(const{line:E,points:w}of this.#r)ke._translate(E,S,b,E),ke._translate(w,S,b,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ke.svgRound(e)} ${ke.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const f=(r-2*o)/(c-2*o),g=(i-2*s)/(d-2*s),m=-f*(l+o)+e+o,y=-g*(u+s)+t+s;if(f!==1||g!==1||m!==0||y!==0)for(const{line:S,points:b}of this.#r)ke._rescale(S,m,y,f,g,S),ke._rescale(b,m,y,f,g,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ke.svgRound(e)} ${ke.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],r){const[i,o]=r,s=this.#e,a=e-s[0],l=t-s[1];if(this.#o===i&&this.#i===o)for(const{line:u,points:c}of this.#r)ke._translate(u,a,l,u),ke._translate(c,a,l,c);else{const u=this.#o/i,c=this.#i/o;this.#o=i,this.#i=o;for(const{line:d,points:f}of this.#r)ke._rescale(d,a,l,u,c,d),ke._rescale(f,a,l,u,c,f);s[2]*=u,s[3]*=c}return s[0]=e,s[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ke.svgRound(e)} ${ke.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ke.svgRound(e[0])} ${ke.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Wm extends iD{#e;constructor(e){super(),this.#e=e,super.updateProperties({fill:"none",stroke:Ue._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this.#e.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Wm(this.#e);return e.updateAll(this),e}}class Um extends We{static _type="ink";static _editorType=Ze.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0}static initialize(e,t){Ue.initialize(e,t),this._defaultDrawingOptions=new Wm(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return ot(this,"typesMap",new Map([[lt.INK_THICKNESS,"stroke-width"],[lt.INK_COLOR,"stroke"],[lt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,r,i,o){return new oD(e,t,r,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,r,i,o,s){return Th.deserialize(e,t,r,i,o,s)}static async deserialize(e,t,r){let i=null;if(e instanceof jm){const{data:{inkLists:s,rect:a,rotation:l,id:u,color:c,opacity:d,borderStyle:{rawWidth:f},popupRef:g},parent:{page:{pageNumber:m}}}=e;i=e={annotationType:Ze.INK,color:Array.from(c),thickness:f,opacity:d,paths:{points:s},boxes:null,pageIndex:m-1,rect:a.slice(0),rotation:l,id:u,deleted:!1,popupRef:g}}const o=await super.deserialize(e,t,r);return o.annotationElementId=e.id||null,o._initialData=i,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:r}=this;t.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:r}){this._drawingOptions=Um.getDefaultDrawingOptions({stroke:Ne.makeHexColor(...e),"stroke-width":t,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:r,rect:i}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":s,"stroke-width":a}}=this,l={annotationType:Ze.INK,color:Ue._colorManager.convert(o),opacity:s,thickness:a,paths:{lines:t,points:r},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?l:this.annotationElementId&&!this.#e(l)?null:(l.id=this.annotationElementId,l)}#e(e){const{color:t,thickness:r,opacity:i,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((s,a)=>s!==t[a])||e.thickness!==r||e.opacity!==i||e.pageIndex!==o}renderAnnotationElement(e){const{points:t,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:t}),null}}class Vm extends Ue{#e=null;#t=null;#n=null;#r=null;#o=null;#i="";#l=null;#a=null;#c=!1;#u=!1;static _type="stamp";static _editorType=Ze.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#r=e.bitmapUrl,this.#o=e.bitmapFile}static initialize(e,t){Ue.initialize(e,t)}static get supportedTypes(){return ot(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return ot(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(Ze.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#h(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#c=e.isSvg),e.file&&(this.#i=e.file.name),this.#s()}#d(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:s}=e||this.copyCanvas(null,null,!0).imageData,a=await r.guess({name:"altText",request:{data:i,width:o,height:s,channels:i.length/(o*s)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const l=a.output;return await this.setGuessedAltText(l),t&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}#f(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#h(r,!0)).finally(()=>this.#d());return}if(this.#r){const r=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(r).then(i=>this.#h(i)).finally(()=>this.#d());return}if(this.#o){const r=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(r).then(i=>this.#h(i)).finally(()=>this.#d());return}const e=document.createElement("input");e.type="file",e.accept=Vm.supportedTypesStr;const t=this._uiManager._signal;this.#n=new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(i)}r()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:t})}).finally(()=>this.#d()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#a&&(clearTimeout(this.#a),this.#a=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#f();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#f(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#o||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#s():this.#f(),this.width&&!this.annotationElementId){const[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#a!==null&&clearTimeout(this.#a);const e=200;this.#a=setTimeout(()=>{this.#a=null,this.#m()},e)}#s(){const{div:e}=this;let{width:t,height:r}=this.#e;const[i,o]=this.pageDimensions,s=.75;if(this.width)t=this.width*i,r=this.height*o;else if(t>s*i||r>s*o){const c=Math.min(s*i/t,s*o/r);t*=c,r*=c}const[a,l]=this.parentDimensions;this.setDims(t*a/i,r*l/o),this._uiManager.enableWaiting(!1);const u=this.#l=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=t/i,this.height=r/o,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(),this.#u||(this.parent.addUndoableEditor(this),this.#u=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&u.setAttribute("aria-label",this.#i)}copyCanvas(e,t,r=!1){e||(e=224);const{width:i,height:o}=this.#e,s=new fg;let a=this.#e,l=i,u=o,c=null;if(t){if(i>t||o>t){const D=Math.min(t/i,t/o);l=Math.floor(i*D),u=Math.floor(o*D)}c=document.createElement("canvas");const f=c.width=Math.ceil(l*s.sx),g=c.height=Math.ceil(u*s.sy);this.#c||(a=this.#p(f,g));const m=c.getContext("2d");m.filter=this._uiManager.hcmFilter;let y="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",S="#42414d");const b=15,E=b*s.sx,w=b*s.sy,C=new OffscreenCanvas(E*2,w*2),T=C.getContext("2d");T.fillStyle=y,T.fillRect(0,0,E*2,w*2),T.fillStyle=S,T.fillRect(0,0,E,w),T.fillRect(E,w,E,w),m.fillStyle=m.createPattern(C,"repeat"),m.fillRect(0,0,f,g),m.drawImage(a,0,0,a.width,a.height,0,0,f,g)}let d=null;if(r){let f,g;if(s.symmetric&&a.width<e&&a.height<e)f=a.width,g=a.height;else if(a=this.#e,i>e||o>e){const S=Math.min(e/i,e/o);f=Math.floor(i*S),g=Math.floor(o*S),this.#c||(a=this.#p(f,g))}const y=new OffscreenCanvas(f,g).getContext("2d",{willReadFrequently:!0});y.drawImage(a,0,0,a.width,a.height,0,0,f,g),d={width:f,height:g,data:y.getImageData(0,0,f,g).data}}return{canvas:c,width:l,height:u,imageData:d}}#p(e,t){const{width:r,height:i}=this.#e;let o=r,s=i,a=this.#e;for(;o>2*e||s>2*t;){const l=o,u=s;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const c=new OffscreenCanvas(o,s);c.getContext("2d").drawImage(a,0,0,l,u,0,0,o,s),a=c.transferToImageBitmap()}return a}#m(){const[e,t]=this.parentDimensions,{width:r,height:i}=this,o=new fg,s=Math.ceil(r*e*o.sx),a=Math.ceil(i*t*o.sy),l=this.#l;if(!l||l.width===s&&l.height===a)return;l.width=s,l.height=a;const u=this.#c?this.#e:this.#p(s,a),c=l.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(u,0,0,u.width,u.height,0,0,s,a)}getImageForAltText(){return this.#l}#g(e){if(e){if(this.#c){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#c){const[t,r]=this.pageDimensions,i=Math.round(this.width*t*Ga.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*Ga.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(i,o);return s.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,o),s.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,r){let i=null;if(e instanceof Dw){const{data:{rect:m,rotation:y,id:S,structParent:b,popupRef:E},container:w,parent:{page:{pageNumber:C}}}=e,T=w.querySelector("canvas"),D=r.imageManager.getFromCanvas(w.id,T);T.remove();const k=(await t._structTree.getAriaAttributes(`${Dm}${S}`))?.get("aria-label")||"";i=e={annotationType:Ze.STAMP,bitmapId:D.id,bitmap:D.bitmap,pageIndex:C-1,rect:m.slice(0),rotation:y,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:k},isSvg:!1,structParent:b,popupRef:E}}const o=await super.deserialize(e,t,r),{rect:s,bitmap:a,bitmapUrl:l,bitmapId:u,isSvg:c,accessibilityData:d}=e;u&&r.imageManager.isValidId(u)?(o.#t=u,a&&(o.#e=a)):o.#r=l,o.#c=c;const[f,g]=o.pageDimensions;return o.width=(s[2]-s[0])/f,o.height=(s[3]-s[1])/g,o.annotationElementId=e.id||null,d&&(o.altTextData=d),o._initialData=i,o.#u=!!i,o}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Ze.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=this.#g(!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const a=this.#v(r);if(a.isSame)return null;a.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,t===null)return r;t.stamps||=new Map;const s=this.#c?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:s,serialized:r}),r.bitmap=this.#g(!1);else if(this.#c){const a=t.stamps.get(this.#t);s>a.area&&(a.area=s,a.serialized.bitmap.close(),a.serialized.bitmap=this.#g(!1))}return r}#v(e){const{pageIndex:t,accessibilityData:{altText:r}}=this._initialData,i=e.pageIndex===t,o=(e.accessibilityData?.alt||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class ho{#e;#t=!1;#n=null;#r=null;#o=null;#i=new Map;#l=!1;#a=!1;#c=!1;#u=null;#h=null;#d=null;#f=null;#s;static _initialized=!1;static#p=new Map([hn,Um,Vm,Qt].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:i,accessibilityManager:o,annotationLayer:s,drawLayer:a,textLayer:l,viewport:u,l10n:c}){const d=[...ho.#p.values()];if(!ho._initialized){ho._initialized=!0;for(const f of d)f.initialize(c,e)}e.registerEditorTypes(d),this.#s=e,this.pageIndex=t,this.div=r,this.#e=o,this.#n=s,this.viewport=u,this.#d=l,this.drawLayer=a,this._structTree=i,this.#s.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#s.getMode()===Ze.NONE}updateToolbar(e){this.#s.updateToolbar(e)}updateMode(e=this.#s.getMode()){switch(this.#y(),e){case Ze.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ze.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ze.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of ho.#p.values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#s.setEditingState(e)}addCommands(e){this.#s.addCommands(e)}cleanUndoStack(e){this.#s.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const r of this.#i.values())r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#s.removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!this.#n){this.#c=!1;return}const t=this.#n.getEditableAnnotations();for(const r of t){if(r.hide(),this.#s.isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1}disable(){this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of this.#i.values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);this.getEditableAnnotation(i.annotationElementId)?.show(),i.remove()}if(this.#n){const i=this.#n.getEditableAnnotations();for(const o of i){const{id:s}=o.data;if(this.#s.isDeletedAnnotationElement(s))continue;let a=t.get(s);if(a){a.resetAnnotationElement(o),a.show(!1),o.show();continue}a=e.get(s),a&&(this.#s.addChangedExistingAnnotation(a),a.renderAnnotationElement(o)&&a.show(!1)),o.show()}}this.#y(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of ho.#p.values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#a=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#s.getActive()!==e&&this.#s.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#s.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#m.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#m(e){this.#s.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:r}=sr.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#s.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Qt.startHighlighting(this,this.#s.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#s._signal}),e.preventDefault()}}enableClick(){if(this.#r)return;this.#r=new AbortController;const e=this.#s.combinedSignal(this.#r);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#r?.abort(),this.#r=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:t}=e;t&&this.#s.isDeletedAnnotationElement(t)&&this.#s.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#a&&e.annotationElementId&&this.#s.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#s.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#s.addDeletedAnnotationElement(e.annotationElementId),Ue.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#s.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#s.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#o&&(e._focusEventsAllowed=!1,this.#o=setTimeout(()=>{this.#o=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#s._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return this.#s.getId()}get#g(){return ho.#p.get(this.#s.getMode())}combinedSignal(e){return this.#s.combinedSignal(e)}#v(e){const t=this.#g;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#g?.canCreateNewEmptyEditor()}pasteEditor(e,t){this.#s.updateToolbar(e),this.#s.updateMode(e);const{offsetX:r,offsetY:i}=this.#E(),o=this.getNextId(),s=this.#v({parent:this,id:o,x:r,y:i,uiManager:this.#s,isCentered:!0,...t});s&&this.add(s)}async deserialize(e){return await ho.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#s)||null}createAndAddNewEditor(e,t,r={}){const i=this.getNextId(),o=this.#v({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#s,isCentered:t,...r});return o&&this.add(o),o}#E(){const{x:e,y:t,width:r,height:i}=this.div.getBoundingClientRect(),o=Math.max(0,e),s=Math.max(0,t),a=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,t+i),u=(o+a)/2-e,c=(s+l)/2-t,[d,f]=this.viewport.rotation%180===0?[u,c]:[c,u];return{offsetX:d,offsetY:f}}addNewEditor(){this.createAndAddNewEditor(this.#E(),!0)}setSelected(e){this.#s.setSelected(e)}toggleSelected(e){this.#s.toggleSelected(e)}unselect(e){this.#s.unselect(e)}pointerup(e){const{isMac:t}=sr.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&this.#l&&(this.#l=!1,!(this.#g?.isDrawer&&this.#g.supportMultipleDrawings))){if(!this.#t){this.#t=!0;return}if(this.#s.getMode()===Ze.STAMP){this.#s.unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(this.#s.getMode()===Ze.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:t}=sr.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#l=!0,this.#g?.isDrawer){this.startDrawingSession(e);return}const r=this.#s.getActive();this.#t=!r||r.isEmpty()}startDrawingSession(e){if(this.div.focus(),this.#u){this.#g.startDrawing(this,this.#s,!1,e);return}this.#s.setCurrentDrawingSession(this),this.#u=new AbortController;const t=this.#s.combinedSignal(this.#u);this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#g.startDrawing(this,this.#s,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#u?(this.#s.setCurrentDrawingSession(null),this.#u.abort(),this.#u=null,this.#h=null,this.#g.endDrawing(e)):null}findNewParent(e,t,r){const i=this.#s.findParent(t,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#u?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#u&&this.#g.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#s.getActive()?.parent===this&&(this.#s.commitOrRemove(),this.#s.setActiveEditor(null)),this.#o&&(clearTimeout(this.#o),this.#o=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#s.removeLayer(this)}#y(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Ks(this.div,e);for(const t of this.#s.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#s.commitOrRemove(),this.#y();const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Ks(this.div,{rotation:r}),t!==r)for(const i of this.#i.values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#s.viewParameters.realScale}}class Yn{#e=null;#t=0;#n=new Map;#r=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#n.size>0)for(const t of this.#n.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return ot(this,"_svgFactory",new zm)}static#o(e,[t,r,i,o]){const{style:s}=e;s.top=`${100*r}%`,s.left=`${100*t}%`,s.width=`${100*i}%`,s.height=`${100*o}%`}#i(){const e=Yn._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#l(e,t){const r=Yn._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const o=Yn._svgFactory.createElement("use");return r.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),i}#a(e,t){for(const[r,i]of Object.entries(t))i===null?e.removeAttribute(r):e.setAttribute(r,i)}draw(e,t=!1,r=!1){const i=this.#t++,o=this.#i(),s=Yn._svgFactory.createElement("defs");o.append(s);const a=Yn._svgFactory.createElement("path");s.append(a);const l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#r.set(i,a);const u=r?this.#l(s,l):null,c=Yn._svgFactory.createElement("use");return o.append(c),c.setAttribute("href",`#${l}`),this.updateProperties(o,e),this.#n.set(i,o),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,t){const r=this.#t++,i=this.#i(),o=Yn._svgFactory.createElement("defs");i.append(o);const s=Yn._svgFactory.createElement("path");o.append(s);const a=`path_p${this.pageIndex}_${r}`;s.setAttribute("id",a),s.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const d=Yn._svgFactory.createElement("mask");o.append(d),l=`mask_p${this.pageIndex}_${r}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const f=Yn._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const g=Yn._svgFactory.createElement("use");d.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const u=Yn._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${a}`),l&&u.setAttribute("mask",`url(#${l})`);const c=u.cloneNode();return i.append(c),u.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#n.set(r,i),r}finalizeDraw(e,t){this.#r.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:r,bbox:i,rootClass:o,path:s}=t,a=typeof e=="number"?this.#n.get(e):e;if(a){if(r&&this.#a(a,r),i&&Yn.#o(a,i),o){const{classList:l}=a;for(const[u,c]of Object.entries(o))l.toggle(u,c)}if(s){const u=a.firstChild.firstChild;this.#a(u,s)}}}updateParent(e,t){if(t===this)return;const r=this.#n.get(e);r&&(t.#e.append(r),this.#n.delete(e),t.#n.set(e,r))}remove(e){this.#r.delete(e),this.#e!==null&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(const e of this.#n.values())e.remove();this.#n.clear(),this.#r.clear()}}globalThis.pdfjsTestingUtils={HighlightOutliner:vg};Ge.AbortException;Ge.AnnotationEditorLayer;Ge.AnnotationEditorParamsType;Ge.AnnotationEditorType;Ge.AnnotationEditorUIManager;Ge.AnnotationLayer;Ge.AnnotationMode;Ge.ColorPicker;Ge.DOMSVGFactory;Ge.DrawLayer;Ge.FeatureTest;var sD=Ge.GlobalWorkerOptions;Ge.ImageKind;Ge.InvalidPDFException;Ge.MissingPDFException;Ge.OPS;Ge.OutputScale;Ge.PDFDataRangeTransport;Ge.PDFDateString;Ge.PDFWorker;Ge.PasswordResponses;Ge.PermissionFlag;Ge.PixelsPerInch;Ge.RenderingCancelledException;Ge.TextLayer;Ge.TouchManager;Ge.UnexpectedResponseException;Ge.Util;Ge.VerbosityLevel;Ge.XfaLayer;Ge.build;Ge.createValidAbsoluteUrl;Ge.fetchData;var aD=Ge.getDocument;Ge.getFilenameFromUrl;Ge.getPdfFilenameFromUrl;Ge.getXfaPageViewport;Ge.isDataScheme;Ge.isPdfFile;Ge.noContextMenu;Ge.normalizeUnicode;Ge.setLayerDimensions;Ge.shadow;Ge.stopEvent;Ge.version;const lD=n=>$.jsxs("div",{style:{color:"black"},children:["Loading ",Math.floor(n.loaded/n.total*100),"%"]}),uD=n=>$.jsx("div",{style:{color:"black"},children:n.message}),cD=n=>{throw new Error(`Error loading PDF document: ${n.message}!`)},dD="https://unpkg.com/pdfjs-dist@4.4.168/build/pdf.worker.min.mjs",hD=({document:n,beforeLoad:e=lD,errorMessage:t=uD,children:r,onError:i=cD,workerSrc:o=dD})=>{const s=A.useRef(null),a=A.useRef(null),[l,u]=A.useState(null),[c,d]=A.useState(null);return A.useEffect(()=>(sD.workerSrc=o,s.current=aD(n),s.current.onProgress=f=>{d(f.loaded>f.total?null:f)},s.current.promise.then(f=>{a.current=f}).catch(f=>{f.message!="Worker was destroyed"&&(u(f),i(f))}).finally(()=>{d(null)}),()=>{s.current&&s.current.destroy(),a.current&&a.current.destroy()}),[n]),l?t(l):c?e(c):a.current&&r(a.current)},fD=({addHighlight:n})=>{const[e,t]=A.useState(!0),r=A.useRef(null),{getCurrentSelection:i,removeGhostHighlight:o,setTip:s,updateTipPosition:a}=gh();return A.useLayoutEffect(()=>{a()},[e]),$.jsx("div",{className:"Tip",children:e?$.jsx("button",{className:"Tip__compact",onClick:()=>{t(!1),r.current=i(),r.current.makeGhostHighlight()},children:"Add highlight"}):$.jsx(Mb,{placeHolder:"Your comment...",onSubmit:l=>{n({content:r.current.content,type:r.current.type,position:r.current.position},l),o(),s(null)}})})},pD=({highlight:n})=>n.comment?$.jsx("div",{className:"Highlight__popup",children:n.comment}):$.jsx("div",{className:"Highlight__popup",children:"Comment has no Text"}),gD=({editHighlight:n,onContextMenu:e})=>{const{highlight:t,viewportToScaled:r,screenshot:i,isScrolledTo:o,highlightBindings:s}=j1(),{toggleEditInProgress:a}=gh(),l=t.type==="text"?$.jsx(J1,{isScrolledTo:o,highlight:t,onContextMenu:c=>e&&e(c,t)}):$.jsx(sk,{isScrolledTo:o,highlight:t,onChange:c=>{const d={position:{boundingRect:r(c),rects:[]},content:{image:i(c)}};n(t.id,d),a(!1)},bounds:s.textLayer,onContextMenu:c=>e&&e(c,t),onEditStart:()=>a(!0)}),u={position:t.position,content:$.jsx(pD,{highlight:t})};return $.jsx(tF,{highlightTip:u,children:l},t.id)};var bg=function(n,e){return bg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},bg(n,e)};function Lt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");bg(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var H=function(){return H=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},H.apply(this,arguments)};function ol(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function sl(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}function So(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var F0={},ud=void 0;try{ud=window}catch{}function Km(n,e){if(typeof ud<"u"){var t=ud.__packages__=ud.__packages__||{};if(!t[n]||!F0[n]){F0[n]=e;var r=t[n]=t[n]||[];r.push(e)}}}Km("@fluentui/set-version","6.0.0");var $m="__global__",k0="__shadow_dom_stylesheet__",Mw={stylesheetKey:$m,inShadow:!1,window:void 0,__isShadowConfig__:!0},mD=function(n,e,t){return{stylesheetKey:n,inShadow:e,window:t,__isShadowConfig__:!0}},Fu=function(n){return n&&vD(n)?n.__isShadowConfig__===!0:!1};function vD(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)}function Iw(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=[],i=[],o=n;function s(a){for(var l=0,u=a;l<u.length;l++){var c=u[l];if(c&&!Fu(c))if(typeof c=="string")if(c.indexOf(" ")>=0)s(c.split(" "));else{var d=o.argsFromClassName(c);d?s(d):r.indexOf(c)===-1&&r.push(c)}else Array.isArray(c)?s(c):typeof c=="object"&&i.push(c)}}return s(e),{classes:r,objects:i}}function Rw(n){Oa!==n&&(Oa=n)}function Lw(){return Oa===void 0&&(Oa=typeof document<"u"&&!!document.documentElement&&document.documentElement.getAttribute("dir")==="rtl"),Oa}var Oa;Oa=Lw();function Dh(){return{rtl:Lw(),shadowConfig:Mw}}var Ml={none:0,insertNode:1,appendChild:2},T0="__stylesheet__",yD=typeof navigator<"u"&&/rv:11.0/.test(navigator.userAgent),Ho={};try{Ho=window||{}}catch{}var sa,si=function(){function n(e,t){var r,i,o,s,a,l;this._rules=[],this._preservedRules=[],this._counter=0,this._keyToClassName={},this._onInsertRuleCallbacks=[],this._onResetCallbacks=[],this._classNameToArgs={},this._config=H({injectionMode:typeof document>"u"?Ml.none:Ml.insertNode,defaultPrefix:"css",namespace:void 0,cspSettings:void 0},e),this._classNameToArgs=(r=t?.classNameToArgs)!==null&&r!==void 0?r:this._classNameToArgs,this._counter=(i=t?.counter)!==null&&i!==void 0?i:this._counter,this._keyToClassName=(s=(o=this._config.classNameCache)!==null&&o!==void 0?o:t?.keyToClassName)!==null&&s!==void 0?s:this._keyToClassName,this._preservedRules=(a=t?.preservedRules)!==null&&a!==void 0?a:this._preservedRules,this._rules=(l=t?.rules)!==null&&l!==void 0?l:this._rules}return n.getInstance=function(e){if(sa=Ho[T0],Ho[k0])return Ho[k0].getInstance(e);if(!sa||sa._lastStyleElement&&sa._lastStyleElement.ownerDocument!==document){var t=Ho?.FabricConfig||{},r=new n(t.mergeStyles,t.serializedStylesheet);sa=r,Ho[T0]=r}return sa},n.prototype.serialize=function(){return JSON.stringify({classNameToArgs:this._classNameToArgs,counter:this._counter,keyToClassName:this._keyToClassName,preservedRules:this._preservedRules,rules:this._rules})},n.prototype.setConfig=function(e){this._config=H(H({},this._config),e)},n.prototype.onReset=function(e){var t=this;return this._onResetCallbacks.push(e),function(){t._onResetCallbacks=t._onResetCallbacks.filter(function(r){return r!==e})}},n.prototype.onInsertRule=function(e){var t=this;return this._onInsertRuleCallbacks.push(e),function(){t._onInsertRuleCallbacks=t._onInsertRuleCallbacks.filter(function(r){return r!==e})}},n.prototype.getClassName=function(e){var t=this._config.namespace,r=e||this._config.defaultPrefix;return"".concat(t?t+"-":"").concat(r,"-").concat(this._counter++)},n.prototype.cacheClassName=function(e,t,r,i){this._keyToClassName[this._getCacheKey(t)]=e,this._classNameToArgs[e]={args:r,rules:i}},n.prototype.classNameFromKey=function(e){return this._keyToClassName[this._getCacheKey(e)]},n.prototype.getClassNameCache=function(){return this._keyToClassName},n.prototype.argsFromClassName=function(e){var t=this._classNameToArgs[e];return t&&t.args},n.prototype.insertedRulesFromClassName=function(e){var t=this._classNameToArgs[e];return t&&t.rules},n.prototype.insertRule=function(e,t,r){r===void 0&&(r=$m);var i=this._config.injectionMode,o=i!==Ml.none?this._getStyleElement():void 0;if(t&&this._preservedRules.push(e),o)switch(i){case Ml.insertNode:this._insertRuleIntoSheet(o.sheet,e);break;case Ml.appendChild:o.appendChild(document.createTextNode(e));break}else this._rules.push(e);this._config.onInsertRule&&this._config.onInsertRule(e),this._onInsertRuleCallbacks.forEach(function(s){return s({key:r,sheet:o?o.sheet:void 0,rule:e})})},n.prototype.getRules=function(e){return(e?this._preservedRules.join(""):"")+this._rules.join("")},n.prototype.reset=function(){this._rules=[],this._counter=0,this._classNameToArgs={},this._keyToClassName={},this._onResetCallbacks.forEach(function(e){return e()})},n.prototype.resetKeys=function(){this._keyToClassName={}},n.prototype._createStyleElement=function(){var e,t=((e=this._config.window)===null||e===void 0?void 0:e.document)||document,r=t.head,i=t.createElement("style"),o=null;i.setAttribute("data-merge-styles","true");var s=this._config.cspSettings;if(s&&s.nonce&&i.setAttribute("nonce",s.nonce),this._lastStyleElement)o=this._lastStyleElement.nextElementSibling;else{var a=this._findPlaceholderStyleTag();a?o=a.nextElementSibling:o=r.childNodes[0]}return r.insertBefore(i,r.contains(o)?o:null),this._lastStyleElement=i,i},n.prototype._insertRuleIntoSheet=function(e,t){if(!e)return!1;try{return e.insertRule(t,e.cssRules.length),!0}catch{}return!1},n.prototype._getCacheKey=function(e){return e},n.prototype._getStyleElement=function(){var e=this;if(!this._styleElement&&(this._styleElement=this._createStyleElement(),!yD)){var t=this._config.window||window;t.requestAnimationFrame(function(){e._styleElement=void 0})}return this._styleElement},n.prototype._findPlaceholderStyleTag=function(){var e=document.head;return e?e.querySelector("style[data-merge-styles]"):null},n}(),D0={};function bD(n,e){var t=n[e];t.charAt(0)!=="-"&&(n[e]=D0[t]=D0[t]||t.replace(/([A-Z])/g,"-$1").toLowerCase())}var jc;function ED(){var n;if(!jc){var e=typeof document<"u"?document:void 0,t=typeof navigator<"u"?navigator:void 0,r=(n=t?.userAgent)===null||n===void 0?void 0:n.toLowerCase();e?jc={isWebkit:!!(e&&"WebkitAppearance"in e.documentElement.style),isMoz:!!(r&&r.indexOf("firefox")>-1),isOpera:!!(r&&r.indexOf("opera")>-1),isMs:!!(t&&(/rv:11.0/i.test(t.userAgent)||/Edge\/\d./i.test(navigator.userAgent)))}:jc={isWebkit:!0,isMoz:!0,isOpera:!0,isMs:!0}}return jc}var P0={"user-select":1};function _D(n,e){var t=ED(),r=n[e];if(P0[r]){var i=n[e+1];P0[r]&&(t.isWebkit&&n.push("-webkit-"+r,i),t.isMoz&&n.push("-moz-"+r,i),t.isMs&&n.push("-ms-"+r,i),t.isOpera&&n.push("-o-"+r,i))}}var wD=["column-count","font-weight","flex","flex-grow","flex-shrink","fill-opacity","opacity","order","z-index","zoom"];function CD(n,e){var t=n[e],r=n[e+1];if(typeof r=="number"){var i=wD.indexOf(t)>-1,o=t.indexOf("--")>-1,s=i||o?"":"px";n[e+1]="".concat(r).concat(s)}}var Wc,Wo="left",Uo="right",SD="@noflip",M0=(Wc={},Wc[Wo]=Uo,Wc[Uo]=Wo,Wc),I0={"w-resize":"e-resize","sw-resize":"se-resize","nw-resize":"ne-resize"};function xD(n,e,t){if(n.rtl){var r=e[t];if(!r)return;var i=e[t+1];if(typeof i=="string"&&i.indexOf(SD)>=0)e[t+1]=i.replace(/\s*(?:\/\*\s*)?\@noflip\b(?:\s*\*\/)?\s*?/g,"");else if(r.indexOf(Wo)>=0)e[t]=r.replace(Wo,Uo);else if(r.indexOf(Uo)>=0)e[t]=r.replace(Uo,Wo);else if(String(i).indexOf(Wo)>=0)e[t+1]=i.replace(Wo,Uo);else if(String(i).indexOf(Uo)>=0)e[t+1]=i.replace(Uo,Wo);else if(M0[r])e[t]=M0[r];else if(I0[i])e[t+1]=I0[i];else switch(r){case"margin":case"padding":e[t+1]=FD(i);break;case"box-shadow":e[t+1]=AD(i,0);break}}}function AD(n,e){var t=n.split(" "),r=parseInt(t[e],10);return t[0]=t[0].replace(String(r),String(r*-1)),t.join(" ")}function FD(n){if(typeof n=="string"){var e=n.split(" ");if(e.length===4)return"".concat(e[0]," ").concat(e[3]," ").concat(e[2]," ").concat(e[1])}return n}function kD(n){for(var e=[],t=0,r=0,i=0;i<n.length;i++)switch(n[i]){case"(":r++;break;case")":r&&r--;break;case"	":case" ":r||(i>t&&e.push(n.substring(t,i)),t=i+1);break}return t<n.length&&e.push(n.substring(t)),e}var TD="displayName";function DD(n){var e=n&&n["&"];return e?e.displayName:void 0}var Nw=/\:global\((.+?)\)/g;function PD(n){if(!Nw.test(n))return n;for(var e=[],t=/\:global\((.+?)\)/g,r=null;r=t.exec(n);)r[1].indexOf(",")>-1&&e.push([r.index,r.index+r[0].length,r[1].split(",").map(function(i){return":global(".concat(i.trim(),")")}).join(", ")]);return e.reverse().reduce(function(i,o){var s=o[0],a=o[1],l=o[2],u=i.slice(0,s),c=i.slice(a);return u+l+c},n)}function MD(n){return n.indexOf(":global(")>=0||n.indexOf(":")===0}function R0(n,e){return n.indexOf(":global(")>=0?n.replace(Nw,"$1"):n.indexOf(":host(")===0?n:n.indexOf(":")===0?e+n:n.indexOf("&")<0?e+" "+n:n}function L0(n,e,t,r,i){e===void 0&&(e={__order:[]}),t.indexOf("@")===0?(t=t+"{"+n,Ha([r],e,t,i)):t.indexOf(",")>-1?PD(t).split(",").map(function(o){return o.trim()}).forEach(function(o){return Ha([r],e,R0(o,n),i)}):Ha([r],e,R0(t,n),i)}function Ha(n,e,t,r){e===void 0&&(e={__order:[]}),t===void 0&&(t="&");var i=e[t];i||(i={},e[t]=i,e.__order.push(t));for(var o=0,s=n;o<s.length;o++){var a=s[o];if(typeof a=="string"){var l=r.argsFromClassName(a);l&&Ha(l,e,t,r)}else if(Array.isArray(a))Ha(a,e,t,r);else for(var u in a)if(a.hasOwnProperty(u)){var c=a[u];if(u==="selectors"){var d=a.selectors;for(var f in d)d.hasOwnProperty(f)&&L0(t,e,f,d[f],r)}else typeof c=="object"||MD(u)?c!=null&&L0(t,e,u,c,r):c!==void 0&&(u==="margin"||u==="padding"?ID(i,u,c):i[u]=c)}}return e}function ID(n,e,t){var r=typeof t=="string"?kD(t):[t];r.length===0&&r.push(t),r[r.length-1]==="!important"&&(r=r.slice(0,-1).map(function(i){return i+" !important"})),n[e+"Top"]=r[0],n[e+"Right"]=r[1]||r[0],n[e+"Bottom"]=r[2]||r[0],n[e+"Left"]=r[3]||r[1]||r[0]}function RD(n,e){for(var t=[n.rtl?"rtl":"ltr"],r=!1,i=0,o=e.__order;i<o.length;i++){var s=o[i];t.push(s);var a=e[s];for(var l in a)a.hasOwnProperty(l)&&a[l]!==void 0&&(r=!0,t.push(l,a[l]))}return r?t.join(""):void 0}function Bw(n,e){return e<=0?"":e===1?n:n+Bw(n,e-1)}function Gm(n,e){if(!e)return"";var t=[];for(var r in e)e.hasOwnProperty(r)&&r!==TD&&e[r]!==void 0&&t.push(r,e[r]);for(var i=0;i<t.length;i+=2)bD(t,i),CD(t,i),xD(n,t,i),_D(t,i);for(var i=1;i<t.length;i+=4)t.splice(i,1,":",t[i],";");return t.join("")}function Ow(n){for(var e,t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=(e=n.stylesheet)!==null&&e!==void 0?e:si.getInstance(n.shadowConfig),o=Ha(t,void 0,void 0,i),s=RD(n,o);if(s){var a={className:i.classNameFromKey(s),key:s,args:t};if(!a.className){a.className=i.getClassName(DD(o));for(var l=[],u=0,c=o.__order;u<c.length;u++){var d=c[u];l.push(d,Gm(n,o[d]))}a.rulesToInsert=l}return a}}function Hw(n,e,t,r){e===void 0&&(e=1);var i=r??si.getInstance(t),o=n.className,s=n.key,a=n.args,l=n.rulesToInsert;if(l){for(var u=0;u<l.length;u+=2){var c=l[u+1];if(c){var d=l[u];d=d.replace(/&/g,Bw(".".concat(n.className),e));var f="".concat(d,"{").concat(c,"}").concat(d.indexOf("@")===0?"}":"");i.insertRule(f)}}i.cacheClassName(o,s,a,l)}}function LD(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=Ow.apply(void 0,So([n],e,!1));return r?(Hw(r,n.specificityMultiplier,n.shadowConfig,n.stylesheet),r.className):""}function Gi(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return ND(n,Dh())}function ND(n,e){var t=n instanceof Array?n:[n],r=e||{},i=Fu(t[0]);i&&(r.shadowConfig=t[0]),r.stylesheet=si.getInstance(r.shadowConfig);var o=Iw(r.stylesheet,t),s=o.classes,a=o.objects;return a.length&&s.push(LD(r,a)),s.join(" ")}function Fo(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n&&n.length===1&&n[0]&&!n[0].subComponentStyles&&!Fu(n[0]))return n[0];for(var t={},r={},i=0,o=n;i<o.length;i++){var s=o[i];if(s&&!Fu(s)){for(var a in s)if(s.hasOwnProperty(a)){if(a==="subComponentStyles"&&s.subComponentStyles!==void 0){var l=s.subComponentStyles;for(var u in l)l.hasOwnProperty(u)&&(r.hasOwnProperty(u)?r[u].push(l[u]):r[u]=[l[u]]);continue}var c=t[a],d=s[a];c===void 0?t[a]=d:t[a]=So(So([],Array.isArray(c)?c:[c],!0),Array.isArray(d)?d:[d],!0)}}}if(Object.keys(r).length>0){t.subComponentStyles={};var f=t.subComponentStyles,g=function(m){if(r.hasOwnProperty(m)){var y=r[m];f[m]=function(S){return Fo.apply(void 0,y.map(function(b){return typeof b=="function"?b(S):b}))}}};for(var u in r)g(u)}return t}function Ku(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return zw(n,Dh())}function zw(n,e){var t={subComponentStyles:{}},r=void 0,i;Fu(n[0])?(r=n[0],i=n[1]):i=n[0],r??(r=e?.shadowConfig);var o=H(H({},e),{shadowConfig:r});if(!i&&n.length<=1)return{subComponentStyles:{}};var s=si.getInstance(r);o.stylesheet=s;var a=Fo.apply(void 0,n),l=[];for(var u in a)if(a.hasOwnProperty(u)){if(u==="subComponentStyles"){t.subComponentStyles=a.subComponentStyles||{};continue}else if(u==="__shadowConfig__")continue;var c=a[u],d=Iw(s,c),f=d.classes,g=d.objects;if(g?.length){var m=Ow(o||{},{displayName:u},g);m&&(l.push(m),t[u]=f.concat([m.className]).join(" "))}else t[u]=f.join(" ")}for(var y=0,S=l;y<S.length;y++){var m=S[y];m&&Hw(m,e?.specificityMultiplier,r)}return t}function jw(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=[],i=0,o=e;i<o.length;i++){var s=o[i];s&&r.push(typeof s=="function"?s(n):s)}return r.length===1?r[0]:r.length?Fo.apply(void 0,r):{}}function Ww(n){var e=si.getInstance(),t=Gm(Dh(),n),r=e.classNameFromKey(t);if(!r){var i=e.getClassName();e.insertRule("@font-face{".concat(t,"}"),!0),e.cacheClassName(i,t,[],["font-face",t])}}function ai(n){var e=si.getInstance(),t=[];for(var r in n)n.hasOwnProperty(r)&&t.push(r,"{",Gm(Dh(),n[r]),"}");var i=t.join(""),o=e.classNameFromKey(i);if(o)return o;var s=e.getClassName();return e.insertRule("@keyframes ".concat(s,"{").concat(i,"}"),!0),e.cacheClassName(s,i,[],["keyframes",i]),s}function BD(n){var e={},t=function(i){if(n.hasOwnProperty(i)){var o;Object.defineProperty(e,i,{get:function(){return o===void 0&&(o=Gi(n[i]).toString()),o},enumerable:!0,configurable:!0})}};for(var r in n)t(r);return e}function qm(){return typeof window<"u"&&!!(window.document&&window.document.createElement)}var Eg=void 0;try{Eg=window}catch{}function Ft(n){if(!(!qm()||typeof Eg>"u")){var e=n;return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:Eg}}var $u=function(){function n(e,t){this._timeoutIds=null,this._immediateIds=null,this._intervalIds=null,this._animationFrameIds=null,this._isDisposed=!1,this._parent=e||null,this._onErrorHandler=t,this._noop=function(){}}return n.prototype.dispose=function(){var e;if(this._isDisposed=!0,this._parent=null,this._timeoutIds){for(e in this._timeoutIds)this._timeoutIds.hasOwnProperty(e)&&this.clearTimeout(parseInt(e,10));this._timeoutIds=null}if(this._immediateIds){for(e in this._immediateIds)this._immediateIds.hasOwnProperty(e)&&this.clearImmediate(parseInt(e,10));this._immediateIds=null}if(this._intervalIds){for(e in this._intervalIds)this._intervalIds.hasOwnProperty(e)&&this.clearInterval(parseInt(e,10));this._intervalIds=null}if(this._animationFrameIds){for(e in this._animationFrameIds)this._animationFrameIds.hasOwnProperty(e)&&this.cancelAnimationFrame(parseInt(e,10));this._animationFrameIds=null}},n.prototype.setTimeout=function(e,t){var r=this,i=0;return this._isDisposed||(this._timeoutIds||(this._timeoutIds={}),i=setTimeout(function(){try{r._timeoutIds&&delete r._timeoutIds[i],e.apply(r._parent)}catch(o){r._logError(o)}},t),this._timeoutIds[i]=!0),i},n.prototype.clearTimeout=function(e){this._timeoutIds&&this._timeoutIds[e]&&(clearTimeout(e),delete this._timeoutIds[e])},n.prototype.setImmediate=function(e,t){var r=this,i=0,o=Ft(t);if(!this._isDisposed){this._immediateIds||(this._immediateIds={});var s=function(){try{r._immediateIds&&delete r._immediateIds[i],e.apply(r._parent)}catch(a){r._logError(a)}};i=o.setTimeout(s,0),this._immediateIds[i]=!0}return i},n.prototype.clearImmediate=function(e,t){var r=Ft(t);this._immediateIds&&this._immediateIds[e]&&(r.clearTimeout(e),delete this._immediateIds[e])},n.prototype.setInterval=function(e,t){var r=this,i=0;return this._isDisposed||(this._intervalIds||(this._intervalIds={}),i=setInterval(function(){try{e.apply(r._parent)}catch(o){r._logError(o)}},t),this._intervalIds[i]=!0),i},n.prototype.clearInterval=function(e){this._intervalIds&&this._intervalIds[e]&&(clearInterval(e),delete this._intervalIds[e])},n.prototype.throttle=function(e,t,r){var i=this;if(this._isDisposed)return this._noop;var o=t||0,s=!0,a=!0,l=0,u,c,d=null;r&&typeof r.leading=="boolean"&&(s=r.leading),r&&typeof r.trailing=="boolean"&&(a=r.trailing);var f=function(m){var y=Date.now(),S=y-l,b=s?o-S:o;return S>=o&&(!m||s)?(l=y,d&&(i.clearTimeout(d),d=null),u=e.apply(i._parent,c)):d===null&&a&&(d=i.setTimeout(f,b)),u},g=function(){for(var m=[],y=0;y<arguments.length;y++)m[y]=arguments[y];return c=m,f(!0)};return g},n.prototype.debounce=function(e,t,r){var i=this;if(this._isDisposed){var o=function(){};return o.cancel=function(){},o.flush=function(){return null},o.pending=function(){return!1},o}var s=t||0,a=!1,l=!0,u=null,c=0,d=Date.now(),f,g,m=null;r&&typeof r.leading=="boolean"&&(a=r.leading),r&&typeof r.trailing=="boolean"&&(l=r.trailing),r&&typeof r.maxWait=="number"&&!isNaN(r.maxWait)&&(u=r.maxWait);var y=function(D){m&&(i.clearTimeout(m),m=null),d=D},S=function(D){y(D),f=e.apply(i._parent,g)},b=function(D){var k=Date.now(),M=!1;D&&(a&&k-c>=s&&(M=!0),c=k);var N=k-c,U=s-N,ne=k-d,oe=!1;return u!==null&&(ne>=u&&m?oe=!0:U=Math.min(U,u-ne)),N>=s||oe||M?S(k):(m===null||!D)&&l&&(m=i.setTimeout(b,U)),f},E=function(){return!!m},w=function(){E()&&y(Date.now())},C=function(){return E()&&S(Date.now()),f},T=function(){for(var D=[],k=0;k<arguments.length;k++)D[k]=arguments[k];return g=D,b(!0)};return T.cancel=w,T.flush=C,T.pending=E,T},n.prototype.requestAnimationFrame=function(e,t){var r=this,i=0,o=Ft(t);if(!this._isDisposed){this._animationFrameIds||(this._animationFrameIds={});var s=function(){try{r._animationFrameIds&&delete r._animationFrameIds[i],e.apply(r._parent)}catch(a){r._logError(a)}};i=o.requestAnimationFrame?o.requestAnimationFrame(s):o.setTimeout(s,0),this._animationFrameIds[i]=!0}return i},n.prototype.cancelAnimationFrame=function(e,t){var r=Ft(t);this._animationFrameIds&&this._animationFrameIds[e]&&(r.cancelAnimationFrame?r.cancelAnimationFrame(e):r.clearTimeout(e),delete this._animationFrameIds[e])},n.prototype._logError=function(e){this._onErrorHandler&&this._onErrorHandler(e)},n}();function OD(n){return n&&!!n._virtual}function HD(n){var e;return n&&OD(n)&&(e=n._virtual.parent),e}function Ui(n,e){var t,r;if(e===void 0&&(e=!0),!n)return null;var i=e&&HD(n);return i||(typeof n.assignedElements!="function"&&(!((t=n.assignedSlot)===null||t===void 0)&&t.parentNode)?n.assignedSlot:((r=n.parentNode)===null||r===void 0?void 0:r.nodeType)===11?n.parentNode.host:n.parentNode)}function _r(n,e,t){t===void 0&&(t=!0);var r=!1;if(n&&e)if(t)if(n===e)r=!0;else for(r=!1;e;){var i=Ui(e);if(i===n){r=!0;break}e=i}else n.contains&&(r=n.contains(e));return r}function Xm(n,e,t){return t??(t=document),!n||n===t.body||n instanceof Document?null:e(n)?n:Xm(Ui(n),e)}function zD(n,e,t){var r=Xm(n,function(i){return i.hasAttribute(e)},t);return r&&r.getAttribute(e)}var Uc=function(n){for(var e=n.activeElement;e?.shadowRoot;)e=e.shadowRoot.activeElement;return e},N0=function(n){var e=n.target;return e&&e.shadowRoot&&(e=n.composedPath()[0]),e},_g="data-portal-element";function jD(n){n.setAttribute(_g,"true")}function Ym(n,e,t){var r,i=Xm(n,function(o){var s;return e===o||!!(!((s=o.hasAttribute)===null||s===void 0)&&s.call(o,_g))},t);return i!==null&&!!(!((r=i.hasAttribute)===null||r===void 0)&&r.call(i,_g))}function WD(n,e){var t=n,r=e;t._virtual||(t._virtual={children:[]});var i=t._virtual.parent;if(i&&i!==e){var o=i._virtual.children.indexOf(t);o>-1&&i._virtual.children.splice(o,1)}t._virtual.parent=r||void 0,r&&(r._virtual||(r._virtual={children:[]}),r._virtual.children.push(t))}function Cn(n){if(!(!qm()||typeof document>"u")){var e=n;return e&&e.ownerDocument?e.ownerDocument:document}}var UD="data-is-focusable",VD="data-is-visible",KD="data-focuszone-id",$D="data-is-sub-focuszone";function GD(n,e,t,r){return nr(n,e,!0,!1,!1,t,void 0,void 0,void 0,r)}function qD(n,e,t,r){return br(n,e,!0,!1,!0,t,void 0,void 0,r)}function XD(n,e,t,r,i){return nr(n,e,r,!1,!1,t,!1,!0,void 0,i)}function YD(n,e,t,r,i){return br(n,e,r,!1,!0,t,!1,!0,i)}function QD(n,e,t){var r=nr(n,n,!0,!1,!1,!0,void 0,void 0,e,t);return r?(Kw(r),!0):!1}function br(n,e,t,r,i,o,s,a,l){var u;if(!e||!s&&e===n)return null;var c=Ph(e);if(i&&c&&(o||!(fo(e)||Qm(e)))){var d=e.lastElementChild||l&&((u=e.shadowRoot)===null||u===void 0?void 0:u.lastElementChild),f=br(n,d,!0,!0,!0,o,s,a,l);if(f){if(a&&Vi(f,!0,l)||!a)return f;var g=br(n,f.previousElementSibling,!0,!0,!0,o,s,a,l);if(g)return g;for(var m=f.parentElement;m&&m!==e;){var y=br(n,m.previousElementSibling,!0,!0,!0,o,s,a,l);if(y)return y;m=m.parentElement}}}if(t&&c&&Vi(e,a,l))return e;var S=br(n,e.previousElementSibling,!0,!0,!0,o,s,a,l);return S||(r?null:br(n,e.parentElement,!0,!1,!1,o,s,a,l))}function nr(n,e,t,r,i,o,s,a,l,u){var c;if(!e||e===n&&i&&!s)return null;var d=l?Uw:Ph,f=d(e);if(t&&f&&Vi(e,a,u))return e;if(!i&&f&&(o||!(fo(e)||Qm(e)))){var g=e.firstElementChild||u&&((c=e.shadowRoot)===null||c===void 0?void 0:c.firstElementChild),m=nr(n,g,!0,!0,!1,o,s,a,l,u);if(m)return m}if(e===n)return null;var y=nr(n,e.nextElementSibling,!0,!0,!1,o,s,a,l,u);return y||(r?null:nr(n,e.parentElement,!1,!1,!0,o,s,a,l,u))}function Ph(n){if(!n||!n.getAttribute)return!1;var e=n.getAttribute(VD);return e!=null?e==="true":n.offsetHeight!==0||n.offsetParent!==null||n.isVisible===!0}function Uw(n,e){var t=e??Ft();return!!n&&Ph(n)&&!n.hidden&&t.getComputedStyle(n).visibility!=="hidden"}function Vi(n,e,t){if(t===void 0&&(t=!0),!n||n.disabled)return!1;var r=0,i=null;n&&n.getAttribute&&(i=n.getAttribute("tabIndex"),i&&(r=parseInt(i,10)));var o=n.getAttribute?n.getAttribute(UD):null,s=i!==null&&r>=0,a=t&&n.shadowRoot?!!n.shadowRoot.delegatesFocus:!1,l=!!n&&o!=="false"&&(n.tagName==="A"||n.tagName==="BUTTON"||n.tagName==="INPUT"||n.tagName==="TEXTAREA"||n.tagName==="SELECT"||o==="true"||s||a);return e?r!==-1&&l:l}function fo(n){return!!(n&&n.getAttribute&&n.getAttribute(KD))}function Qm(n){return!!(n&&n.getAttribute&&n.getAttribute($D)==="true")}function ZD(n){var e=Cn(n),t=e&&e.activeElement;return!!(t&&_r(n,t))}function Vw(n,e,t){var r=Cn();return zD(n,e,r)!=="true"}var Vc=void 0;function Kw(n){if(n){var e=Ft(n);e&&(Vc!==void 0&&e.cancelAnimationFrame(Vc),Vc=e.requestAnimationFrame(function(){n&&n.focus(),Vc=void 0}))}}function JD(n,e){for(var t=n,r=0,i=e;r<i.length;r++){var o=i[r],s=t.children[Math.min(o,t.children.length-1)];if(!s)break;t=s}return t=Vi(t)&&Ph(t)?t:nr(n,t,!0)||br(n,t),t}function eP(n,e){for(var t=[];e&&n&&e!==n;){var r=Ui(e,!0);if(r===null)return[];t.unshift(Array.prototype.indexOf.call(r.children,e)),e=r}return t}function qi(n,e,t,r){return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}function Zm(n,e){if(!n||!e)return!n&&!e;for(var t in n)if(n.hasOwnProperty(t)&&(!e.hasOwnProperty(t)||e[t]!==n[t]))return!1;for(var t in e)if(e.hasOwnProperty(t)&&!n.hasOwnProperty(t))return!1;return!0}function Xo(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return tP.apply(this,[null,n].concat(e))}function tP(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];e=e||{};for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s)for(var a in s)s.hasOwnProperty(a)&&(!n||n(a))&&(e[a]=s[a])}return e}var _i=function(){function n(e){this._id=n._uniqueId++,this._parent=e,this._eventRecords=[]}return n.raise=function(e,t,r,i,o){var s,a=o??Cn();if(n._isElement(e)){if(typeof a<"u"&&a.createEvent){var l=a.createEvent("HTMLEvents");l.initEvent(t,i||!1,!0),Xo(l,r),s=e.dispatchEvent(l)}else if(typeof a<"u"&&a.createEventObject){var u=a.createEventObject(r);e.fireEvent("on"+t,u)}}else for(;e&&s!==!1;){var c=e.__events__,d=c?c[t]:null;if(d){for(var f in d)if(d.hasOwnProperty(f))for(var g=d[f],m=0;s!==!1&&m<g.length;m++){var y=g[m];y.objectCallback&&(s=y.objectCallback.call(y.parent,r))}}e=i?e.parent:null}return s},n.isObserved=function(e,t){var r=e&&e.__events__;return!!r&&!!r[t]},n.isDeclared=function(e,t){var r=e&&e.__declaredEvents;return!!r&&!!r[t]},n.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},n._isElement=function(e){return!!e&&(!!e.addEventListener||typeof HTMLElement<"u"&&e instanceof HTMLElement)},n.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this.off(),this._parent=null)},n.prototype.onAll=function(e,t,r){for(var i in t)t.hasOwnProperty(i)&&this.on(e,i,t[i],r)},n.prototype.on=function(e,t,r,i){var o=this;if(t.indexOf(",")>-1)for(var s=t.split(/[ ,]+/),a=0;a<s.length;a++)this.on(e,s[a],r,i);else{var l=this._parent,u={target:e,eventName:t,parent:l,callback:r,options:i},s=e.__events__=e.__events__||{};if(s[t]=s[t]||{count:0},s[t][this._id]=s[t][this._id]||[],s[t][this._id].push(u),s[t].count++,n._isElement(e)){var c=function(){for(var g=[],m=0;m<arguments.length;m++)g[m]=arguments[m];if(!o._isDisposed){var y;try{if(y=r.apply(l,g),y===!1&&g[0]){var S=g[0];S.preventDefault&&S.preventDefault(),S.stopPropagation&&S.stopPropagation(),S.cancelBubble=!0}}catch{}return y}};u.elementCallback=c,e.addEventListener?e.addEventListener(t,c,i):e.attachEvent&&e.attachEvent("on"+t,c)}else{var d=function(){for(var g=[],m=0;m<arguments.length;m++)g[m]=arguments[m];if(!o._isDisposed)return r.apply(l,g)};u.objectCallback=d}this._eventRecords.push(u)}},n.prototype.off=function(e,t,r,i){for(var o=0;o<this._eventRecords.length;o++){var s=this._eventRecords[o];if((!e||e===s.target)&&(!t||t===s.eventName)&&(!r||r===s.callback)&&(typeof i!="boolean"||i===s.options)){var a=s.target.__events__,l=a[s.eventName],u=l?l[this._id]:null;u&&(u.length===1||!r?(l.count-=u.length,delete a[s.eventName][this._id]):(l.count--,u.splice(u.indexOf(s),1)),l.count||delete a[s.eventName]),s.elementCallback&&(s.target.removeEventListener?s.target.removeEventListener(s.eventName,s.elementCallback,s.options):s.target.detachEvent&&s.target.detachEvent("on"+s.eventName,s.elementCallback)),this._eventRecords.splice(o--,1)}}},n.prototype.raise=function(e,t,r){return n.raise(this._parent,e,t,r)},n.prototype.declare=function(e){var t=this._parent.__declaredEvents=this._parent.__declaredEvents||{};if(typeof e=="string")t[e]=!0;else for(var r=0;r<e.length;r++)t[e[r]]=!0},n._uniqueId=0,n}(),Gf,iu=0,$w=Gi({overflow:"hidden !important"}),B0="data-is-scrollable",nP=function(n,e){var t=Ft(n);if(!(!n||!t)){var r=0,i=null,o=t.getComputedStyle(n),s=function(l){l.targetTouches.length===1&&(r=l.targetTouches[0].clientY)},a=function(l){if(l.targetTouches.length===1&&(l.stopPropagation(),!!i)){var u=l.targetTouches[0].clientY-r,c=qw(l.target);c&&i!==c&&(i=c,o=t.getComputedStyle(i));var d=i.scrollTop,f=o?.flexDirection==="column-reverse";d===0&&(f?u<0:u>0)&&l.preventDefault(),i.scrollHeight-Math.abs(Math.ceil(d))<=i.clientHeight&&(f?u>0:u<0)&&l.preventDefault()}};e.on(n,"touchstart",s,{passive:!1}),e.on(n,"touchmove",a,{passive:!1}),i=n}},rP=function(n,e){if(n){var t=function(r){r.stopPropagation()};e.on(n,"touchmove",t,{passive:!1})}},Gw=function(n){n.preventDefault()};function iP(){var n=Cn();n&&n.body&&!iu&&(n.body.classList.add($w),n.body.addEventListener("touchmove",Gw,{passive:!1,capture:!1})),iu++}function oP(){if(iu>0){var n=Cn();n&&n.body&&iu===1&&(n.body.classList.remove($w),n.body.removeEventListener("touchmove",Gw)),iu--}}function sP(n){if(Gf===void 0){var e=Cn(),t=e.createElement("div");t.style.setProperty("width","100px"),t.style.setProperty("height","100px"),t.style.setProperty("overflow","scroll"),t.style.setProperty("position","absolute"),t.style.setProperty("top","-9999px"),e.body.appendChild(t),Gf=t.offsetWidth-t.clientWidth,e.body.removeChild(t)}return Gf}function qw(n){for(var e=n,t=Cn(n);e&&e!==t.body;){if(e.getAttribute(B0)==="true")return e;e=e.parentElement}for(e=n;e&&e!==t.body;){if(e.getAttribute(B0)!=="false"){var r=getComputedStyle(e),i=r?r.getPropertyValue("overflow-y"):"";if(i&&(i==="scroll"||i==="auto"))return e}e=e.parentElement}return(!e||e===t.body)&&(e=Ft(n)),e}function Xw(n){console&&console.warn&&console.warn(n)}function Yw(n,e,t,r,i){if(i===!0&&!1)for(var o,s;o<s.length;o++)var a}(function(n){Lt(e,n);function e(t,r){var i=n.call(this,t,r)||this;return aP(i,e.prototype,["componentDidMount","shouldComponentUpdate","getSnapshotBeforeUpdate","render","componentDidUpdate","componentWillUnmount"]),i}return e.prototype.componentDidUpdate=function(t,r){this._updateComponentRef(t,this.props)},e.prototype.componentDidMount=function(){this._setComponentRef(this.props.componentRef,this)},e.prototype.componentWillUnmount=function(){if(this._setComponentRef(this.props.componentRef,null),this.__disposables){for(var t=0,r=this._disposables.length;t<r;t++){var i=this.__disposables[t];i.dispose&&i.dispose()}this.__disposables=null}},Object.defineProperty(e.prototype,"className",{get:function(){if(!this.__className){var t=/function (.{1,})\(/,r=t.exec(this.constructor.toString());this.__className=r&&r.length>1?r[1]:""}return this.__className},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_disposables",{get:function(){return this.__disposables||(this.__disposables=[]),this.__disposables},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_async",{get:function(){return this.__async||(this.__async=new $u(this),this._disposables.push(this.__async)),this.__async},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_events",{get:function(){return this.__events||(this.__events=new _i(this),this._disposables.push(this.__events)),this.__events},enumerable:!1,configurable:!0}),e.prototype._resolveRef=function(t){var r=this;return this.__resolves||(this.__resolves={}),this.__resolves[t]||(this.__resolves[t]=function(i){return r[t]=i}),this.__resolves[t]},e.prototype._updateComponentRef=function(t,r){r===void 0&&(r={}),t&&r&&t.componentRef!==r.componentRef&&(this._setComponentRef(t.componentRef,null),this._setComponentRef(r.componentRef,this))},e.prototype._warnDeprecations=function(t){this.className,this.props},e.prototype._warnMutuallyExclusive=function(t){this.className,this.props},e.prototype._warnConditionallyRequiredProps=function(t,r,i){Yw(this.className,this.props,t,r,i)},e.prototype._setComponentRef=function(t,r){!this._skipComponentRefResolution&&t&&(typeof t=="function"&&t(r),typeof t=="object"&&(t.current=r))},e})(A.Component);function aP(n,e,t){for(var r=0,i=t.length;r<i;r++)lP(n,e,t[r])}function lP(n,e,t){var r=n[t],i=e[t];(r||i)&&(n[t]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a;return i&&(a=i.apply(this,o)),r!==i&&(a=r.apply(this,o)),a})}function qa(){return null}var qf="__globalSettings__",Jm="__callbacks__",uP=0,Qw=function(){function n(){}return n.getValue=function(e,t){var r=wg();return r[e]===void 0&&(r[e]=typeof t=="function"?t():t),r[e]},n.setValue=function(e,t){var r=wg(),i=r[Jm],o=r[e];if(t!==o){r[e]=t;var s={oldValue:o,value:t,key:e};for(var a in i)i.hasOwnProperty(a)&&i[a](s)}return t},n.addChangeListener=function(e){var t=e.__id__,r=O0();t||(t=e.__id__=String(uP++)),r[t]=e},n.removeChangeListener=function(e){var t=O0();delete t[e.__id__]},n}();function wg(){var n,e=Ft(),t=e||{};return t[qf]||(t[qf]=(n={},n[Jm]={},n)),t[qf]}function O0(){var n=wg();return n[Jm]}var Re={tab:9,enter:13,alt:18,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40},ti=function(){function n(e,t,r,i){e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),this.top=r,this.bottom=i,this.left=e,this.right=t}return Object.defineProperty(n.prototype,"width",{get:function(){return this.right-this.left},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.bottom-this.top},enumerable:!1,configurable:!0}),n.prototype.equals=function(e){return parseFloat(this.top.toFixed(4))===parseFloat(e.top.toFixed(4))&&parseFloat(this.bottom.toFixed(4))===parseFloat(e.bottom.toFixed(4))&&parseFloat(this.left.toFixed(4))===parseFloat(e.left.toFixed(4))&&parseFloat(this.right.toFixed(4))===parseFloat(e.right.toFixed(4))},n}();function cP(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.length<2?e[0]:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];e.forEach(function(o){return o&&o.apply(n,r)})}}function Gu(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(function(r){return r}).join(" ").trim();return t===""?void 0:t}function dP(n,e,t){var r=n.slice();return r.splice(e,0,t),r}function hP(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Zw(n){var e=null;try{var t=Ft();e=t?t.sessionStorage.getItem(n):null}catch{}return e}function fP(n,e){var t;try{(t=Ft())===null||t===void 0||t.sessionStorage.setItem(n,e)}catch{}}var Jw="isRTL",po;function ir(n){if(n===void 0&&(n={}),n.rtl!==void 0)return n.rtl;if(po===void 0){var e=Zw(Jw);e!==null&&(po=e==="1",pP(po));var t=Cn();po===void 0&&t&&(po=(t.body&&t.body.getAttribute("dir")||t.documentElement.getAttribute("dir"))==="rtl",Rw(po))}return!!po}function pP(n,e){e===void 0&&(e=!1);var t=Cn();t&&t.documentElement.setAttribute("dir",n?"rtl":"ltr"),e&&fP(Jw,n?"1":"0"),po=n,Rw(po)}var gP=50,mP=5,cd=0,Xf=si.getInstance();Xf&&Xf.onReset&&Xf.onReset(function(){return cd++});var Kc="__retval__";function Wn(n){n===void 0&&(n={});var e=new Map,t=0,r=0,i=cd,o=function(s,a){var l;if(a===void 0&&(a={}),n.useStaticStyles&&typeof s=="function"&&s.__noStyleOverride__)return s(a);r++;var u=s?s.__shadowConfig__:void 0,c=u&&u.window?u.window:"__default__";e.has(c)||e.set(c,new Map);var d=e.get(c),f=a.theme,g=f&&f.rtl!==void 0?f.rtl:ir(),m=n.disableCaching;if(i!==cd&&(i=cd,e.set(c,new Map),d=e.get(c),t=0),n.disableCaching||(d=H0(e.get(c),s),d=H0(d,a)),(m||!d[Kc])&&(s===void 0?d[Kc]={}:d[Kc]=zw([typeof s=="function"?s(a):s],{shadowConfig:s.__shadowConfig__,rtl:!!g,specificityMultiplier:n.useStaticStyles?mP:void 0}),m||t++),t>(n.cacheSize||gP)){var y=Ft();!((l=y?.FabricConfig)===null||l===void 0)&&l.enableClassNameCacheFullWarning&&(console.warn("Styles are being recalculated too frequently. Cache miss rate is ".concat(t,"/").concat(r,".")),console.trace()),e.get(c).clear(),t=0,n.disableCaching=!0}return d[Kc]};return o}function Yf(n,e){return e=vP(e),n.has(e)||n.set(e,new Map),n.get(e)}function H0(n,e){if(typeof e=="function"){var t=e.__cachedInputs__;if(t)for(var r=0,i=e.__cachedInputs__;r<i.length;r++){var o=i[r];n=Yf(n,o)}else n=Yf(n,e)}else if(typeof e=="object")for(var s in e)e.hasOwnProperty(s)&&(n=Yf(n,e[s]));return n}function vP(n){switch(n){case void 0:return"__undefined__";case null:return"__null__";default:return n}}var z0=!1,dd=0,yP={empty:!0},Qf={},ku=typeof WeakMap>"u"?null:WeakMap;function bP(){dd++}function zt(n,e,t){if(e===void 0&&(e=100),t===void 0&&(t=!1),!ku)return n;if(!z0){var r=si.getInstance();r&&r.onReset&&si.getInstance().onReset(bP),z0=!0}var i,o=0,s=dd;return function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];var c=i;(i===void 0||s!==dd||e>0&&o>e)&&(i=j0(),o=0,s=dd),c=i;for(var d=0;d<l.length;d++){var f=EP(l[d]);c.map.has(f)||c.map.set(f,j0()),c=c.map.get(f)}return c.hasOwnProperty("value")||(c.value=n.apply(void 0,l),o++),t&&(c.value===null||c.value===void 0)&&(c.value=n.apply(void 0,l)),c.value}}function Xa(n){if(!ku)return n;var e=new ku;function t(r){if(!r||typeof r!="function"&&typeof r!="object")return n(r);if(e.has(r))return e.get(r);var i=n(r);return e.set(r,i),i}return t}function EP(n){if(n){if(typeof n=="object"||typeof n=="function")return n;Qf[n]||(Qf[n]={val:n})}else return yP;return Qf[n]}function j0(){return{map:ku?new ku:null}}function _P(n){var e=n,t=Xa(function(r){if(n===r)throw new Error("Attempted to compose a component with itself.");var i=r,o=Xa(function(a){var l=function(u){return A.createElement(i,H({},u,{defaultRender:a}))};return l}),s=function(a){var l=a.defaultRender;return A.createElement(e,H({},a,{defaultRender:l?o(l):i}))};return s});return t}var wP=Xa(_P);function Zr(n,e){return wP(n)(e)}function Nr(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=[],r=0,i=n;r<i.length;r++){var o=i[r];if(o)if(typeof o=="string")t.push(o);else if(o.hasOwnProperty("toString")&&typeof o.toString=="function")t.push(o.toString());else for(var s in o)o[s]&&t.push(s)}return t.join(" ")}var CP="customizations",SP={settings:{},scopedSettings:{},inCustomizerContext:!1},Oo=Qw.getValue(CP,{settings:{},scopedSettings:{},inCustomizerContext:!1}),$c=[],xi=function(){function n(){}return n.reset=function(){Oo.settings={},Oo.scopedSettings={}},n.applySettings=function(e){Oo.settings=H(H({},Oo.settings),e),n._raiseChange()},n.applyScopedSettings=function(e,t){Oo.scopedSettings[e]=H(H({},Oo.scopedSettings[e]),t),n._raiseChange()},n.getSettings=function(e,t,r){r===void 0&&(r=SP);for(var i={},o=t&&r.scopedSettings[t]||{},s=t&&Oo.scopedSettings[t]||{},a=0,l=e;a<l.length;a++){var u=l[a];i[u]=o[u]||r.settings[u]||s[u]||Oo.settings[u]}return i},n.applyBatchedUpdates=function(e,t){n._suppressUpdates=!0;try{e()}catch{}n._suppressUpdates=!1,t||n._raiseChange()},n.observe=function(e){$c.push(e)},n.unobserve=function(e){$c=$c.filter(function(t){return t!==e})},n._raiseChange=function(){n._suppressUpdates||$c.forEach(function(e){return e()})},n}(),Hd=A.createContext({customizations:{inCustomizerContext:!1,settings:{},scopedSettings:{}}});function xP(n,e){n===void 0&&(n={});var t=eC(e)?e:FP(e);return t(n)}function AP(n,e){n===void 0&&(n={});var t=eC(e)?e:kP(e);return t(n)}function eC(n){return typeof n=="function"}function FP(n){return function(e){return n?H(H({},e),n):e}}function kP(n){return n===void 0&&(n={}),function(e){var t=H({},e);for(var r in n)n.hasOwnProperty(r)&&(t[r]=H(H({},e[r]),n[r]));return t}}function TP(n,e){var t=(e||{}).customizations,r=t===void 0?{settings:{},scopedSettings:{}}:t;return{customizations:{settings:xP(r.settings,n.settings),scopedSettings:AP(r.scopedSettings,n.scopedSettings),inCustomizerContext:!0}}}var DP=function(n){Lt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._onCustomizationChange=function(){return t.forceUpdate()},t}return e.prototype.componentDidMount=function(){xi.observe(this._onCustomizationChange)},e.prototype.componentWillUnmount=function(){xi.unobserve(this._onCustomizationChange)},e.prototype.render=function(){var t=this,r=this.props.contextTransform;return A.createElement(Hd.Consumer,null,function(i){var o=TP(t.props,i);return r&&(o=r(o)),A.createElement(Hd.Provider,{value:o},t.props.children)})},e}(A.Component);function tC(n,e){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}var Zf=function(){return!1},PP=function(){return Mw},MP=function(){return new Map},Jf=function(){},IP=function(){return{stylesheets:new Map,useAdoptedStylesheetEx:Zf,useAdoptedStylesheet:Zf,useShadowConfig:PP,useMergeStylesShadowRootContext:Jf,useHasMergeStylesShadowRootContext:Zf,useMergeStylesRootStylesheets:MP,useWindow:Jf,useStyled:Jf}},RP=A.createContext(IP()),nC=function(){var n=A.useContext(RP);return{useAdoptedStylesheet:n.useAdoptedStylesheet,useAdoptedStylesheetEx:n.useAdoptedStylesheetEx,useShadowConfig:n.useShadowConfig,useMergeStylesShadowRootContext:n.useMergeStylesShadowRootContext,useHasMergeStylesShadowRootContext:n.useHasMergeStylesShadowRootContext,useMergeStylesRootStylesheets:n.useMergeStylesRootStylesheets,useWindow:n.useWindow,useStyled:n.useStyled}},rC=A.createContext(void 0),LP=function(){return!!iC()},iC=function(){return A.useContext(rC)},NP=function(n){var e=n.stylesheetKey,t=n.children,r=nC(),i=r.useAdoptedStylesheetEx,o=r.useMergeStylesRootStylesheets,s=r.useWindow,a=iC(),l=o(),u=s();return i($m,a,l,u),i(e,a,l,u),t(!!a)},al=A.createContext({window:typeof window=="object"?window:void 0}),qu=function(){return A.useContext(al).window},BP=function(){var n;return(n=A.useContext(al).window)===null||n===void 0?void 0:n.document},OP=zt(mD),HP=zt(function(n,e,t){var r,i=(r=e??n)!==null&&r!==void 0?r:{};return i.__shadowConfig__=t,i});function Mh(n,e,t){return function(i){var o,s=(o=function(a){Lt(l,a);function l(u){var c=a.call(this,u)||this;return c._styleCache={},c._onSettingChanged=c._onSettingChanged.bind(c),c}return l.prototype.componentDidMount=function(){xi.observe(this._onSettingChanged)},l.prototype.componentWillUnmount=function(){xi.unobserve(this._onSettingChanged)},l.prototype.render=function(){var u=this;return A.createElement(NP,{stylesheetKey:n},function(c){return A.createElement(Hd.Consumer,null,function(d){var f,g=xi.getSettings(e,n,d.customizations),m=(f=u.context.window)!==null&&f!==void 0?f:Ft(),y=OP(n,c,m),S=u.props;if(g.styles&&typeof g.styles=="function"&&(g.styles=g.styles(H(H({},g),S))),g.styles){if(u._styleCache.default!==g.styles||u._styleCache.component!==S.styles){var b=Fo(g.styles,S.styles);b.__shadowConfig__=y,u._styleCache.default=g.styles,u._styleCache.component=S.styles,u._styleCache.merged=b}return A.createElement(i,H({},g,S,{styles:u._styleCache.merged}))}var E=HP(g.styles,S.styles,y);return A.createElement(i,H({},g,S,{styles:E}))})})},l.prototype._onSettingChanged=function(){this.forceUpdate()},l}(A.Component),o.displayName="Customized"+n,o.contextType=al,o);return tC(i,s)}}function zP(n,e){var t=jP(),r=A.useContext(Hd).customizations,i=r.inCustomizerContext;return A.useEffect(function(){return i||xi.observe(t),function(){i||xi.unobserve(t)}},[i]),xi.getSettings(n,e,r)}function jP(){var n=A.useState(0),e=n[1];return function(){return e(function(t){return++t})}}function WP(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=cP(n,n[t],e[t]))}var zd="__currentId__",UP="id__",jd=Ft()||{};jd[zd]===void 0&&(jd[zd]=0);var W0=!1;function ni(n){if(!W0){var e=si.getInstance();e&&e.onReset&&e.onReset(VP),W0=!0}var t=jd[zd]++;return(n===void 0?UP:n)+t}function VP(n){n===void 0&&(n=0),jd[zd]=n}var $t=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t={},r=0,i=n;r<i.length;r++)for(var o=i[r],s=Array.isArray(o)?o:Object.keys(o),a=0,l=s;a<l.length;a++){var u=l[a];t[u]=1}return t},KP=$t(["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onInput","onSubmit","onLoad","onError","onKeyDown","onKeyDownCapture","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onClickCapture","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onMouseUpCapture","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onGotPointerCapture","onLostPointerCapture"]),$P=$t(["accessKey","children","className","contentEditable","dir","draggable","hidden","htmlFor","id","lang","ref","role","style","tabIndex","title","translate","spellCheck","name"]),ln=$t($P,KP);$t(ln,["form"]);var GP=$t(ln,["height","loop","muted","preload","src","width"]);$t(GP,["poster"]);$t(ln,["start"]);$t(ln,["value"]);var oC=$t(ln,["download","href","hrefLang","media","rel","target","type"]),Gs=$t(ln,["autoFocus","disabled","form","formAction","formEncType","formMethod","formNoValidate","formTarget","type","value"]),qP=$t(Gs,["accept","alt","autoCapitalize","autoComplete","checked","dirname","form","height","inputMode","list","max","maxLength","min","minLength","multiple","pattern","placeholder","readOnly","required","src","step","size","type","value","width"]);$t(Gs,["autoCapitalize","cols","dirname","form","maxLength","minLength","placeholder","readOnly","required","rows","wrap"]);$t(Gs,["form","multiple","required"]);$t(ln,["selected","value"]);$t(ln,["cellPadding","cellSpacing"]);$t(ln,["rowSpan","scope"]);$t(ln,["colSpan","headers","rowSpan","scope"]);$t(ln,["span"]);$t(ln,["span"]);$t(ln,["acceptCharset","action","encType","encType","method","noValidate","target"]);$t(ln,["allow","allowFullScreen","allowPaymentRequest","allowTransparency","csp","height","importance","referrerPolicy","sandbox","src","srcDoc","width"]);var XP=$t(ln,["alt","crossOrigin","height","src","srcSet","useMap","width"]),ms=ln;function an(n,e,t){for(var r=Array.isArray(e),i={},o=Object.keys(n),s=0,a=o;s<a.length;s++){var l=a[s],u=!r&&e[l]||r&&e.indexOf(l)>=0||l.indexOf("data-")===0||l.indexOf("aria-")===0;u&&(!t||t?.indexOf(l)===-1)&&(i[l]=n[l])}return i}var YP=["setState","render","componentWillMount","UNSAFE_componentWillMount","componentDidMount","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","getSnapshotBeforeUpdate","UNSAFE_componentWillUpdate","componentDidUpdate","componentWillUnmount"];function QP(n,e,t){t===void 0&&(t=YP);var r=[],i=function(s){typeof e[s]=="function"&&n[s]===void 0&&(!t||t.indexOf(s)===-1)&&(r.push(s),n[s]=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];e[s].apply(e,a)})};for(var o in e)i(o);return r}function ZP(n,e){e.forEach(function(t){return delete n[t]})}function vs(n){WP(n,{componentDidMount:JP,componentDidUpdate:eM,componentWillUnmount:tM})}function JP(){Wd(this.props.componentRef,this)}function eM(n){n.componentRef!==this.props.componentRef&&(Wd(n.componentRef,null),Wd(this.props.componentRef,this))}function tM(){Wd(this.props.componentRef,null)}function Wd(n,e){n&&(typeof n=="object"?n.current=e:typeof n=="function"&&n(e))}var hi,nM=(hi={},hi[Re.up]=1,hi[Re.down]=1,hi[Re.left]=1,hi[Re.right]=1,hi[Re.home]=1,hi[Re.end]=1,hi[Re.tab]=1,hi[Re.pageUp]=1,hi[Re.pageDown]=1,hi);function sC(n){return!!nM[n]}var gt="ms-Fabric--isFocusVisible",U0="ms-Fabric--isFocusHidden";function V0(n,e){n&&(n.classList.add(e?gt:U0),n.classList.remove(e?U0:gt))}function Os(n,e,t){var r;t?t.forEach(function(i){return V0(i.current,n)}):V0((r=Ft(e))===null||r===void 0?void 0:r.document.body,n)}var K0=new WeakMap,$0=new WeakMap;function G0(n,e){var t,r=K0.get(n);return r?t=r+e:t=1,K0.set(n,t),t}function rM(n){var e=$0.get(n);if(e)return e;var t=function(s){return lC(s,n.registeredProviders)},r=function(s){return uC(s,n.registeredProviders)},i=function(s){return cC(s,n.registeredProviders)},o=function(s){return dC(s,n.registeredProviders)};return e={onMouseDown:t,onPointerDown:r,onKeyDown:i,onKeyUp:o},$0.set(n,e),e}var Tu=A.createContext(void 0);function iM(n){var e=A.useContext(Tu);A.useEffect(function(){var t,r,i,o,s=Ft(n?.current);if(!(!s||((t=s.FabricConfig)===null||t===void 0?void 0:t.disableFocusRects)===!0)){var a=s,l,u,c,d;if(!((r=e?.providerRef)===null||r===void 0)&&r.current&&(!((o=(i=e?.providerRef)===null||i===void 0?void 0:i.current)===null||o===void 0)&&o.addEventListener)){a=e.providerRef.current;var f=rM(e);l=f.onMouseDown,u=f.onPointerDown,c=f.onKeyDown,d=f.onKeyUp}else l=lC,u=uC,c=cC,d=dC;var g=G0(a,1);return g<=1&&(a.addEventListener("mousedown",l,!0),a.addEventListener("pointerdown",u,!0),a.addEventListener("keydown",c,!0),a.addEventListener("keyup",d,!0)),function(){var m;!s||((m=s.FabricConfig)===null||m===void 0?void 0:m.disableFocusRects)===!0||(g=G0(a,-1),g===0&&(a.removeEventListener("mousedown",l,!0),a.removeEventListener("pointerdown",u,!0),a.removeEventListener("keydown",c,!0),a.removeEventListener("keyup",d,!0)))}}},[e,n])}var aC=function(n){return iM(n.rootRef),null};function lC(n,e){Os(!1,n.target,e)}function uC(n,e){n.pointerType!=="mouse"&&Os(!1,n.target,e)}function cC(n,e){sC(n.which)&&Os(!0,n.target,e)}function dC(n,e){sC(n.which)&&Os(!0,n.target,e)}var hC=function(n){var e=n.providerRef,t=n.layerRoot,r=A.useState([])[0],i=A.useContext(Tu),o=i!==void 0&&!t,s=A.useMemo(function(){return o?void 0:{providerRef:e,registeredProviders:r,registerProvider:function(a){r.push(a),i?.registerProvider(a)},unregisterProvider:function(a){i?.unregisterProvider(a);var l=r.indexOf(a);l>=0&&r.splice(l,1)}}},[e,r,i,o]);return A.useEffect(function(){if(s)return s.registerProvider(s.providerRef),function(){return s.unregisterProvider(s.providerRef)}},[s]),s?A.createElement(Tu.Provider,{value:s},n.children):A.createElement(A.Fragment,null,n.children)};function oM(n){var e=null;try{var t=Ft();e=t?t.localStorage.getItem(n):null}catch{}return e}var Ss,q0="language";function sM(n){if(n===void 0&&(n="sessionStorage"),Ss===void 0){var e=Cn(),t=n==="localStorage"?oM(q0):n==="sessionStorage"?Zw(q0):void 0;t&&(Ss=t),Ss===void 0&&e&&(Ss=e.documentElement.getAttribute("lang")),Ss===void 0&&(Ss="en")}return Ss}function X0(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,i=e;r<i.length;r++){var o=i[r];fC(n||{},o)}return n}function fC(n,e,t){t===void 0&&(t=[]),t.push(e);for(var r in e)if(e.hasOwnProperty(r)&&r!=="__proto__"&&r!=="constructor"&&r!=="prototype"){var i=e[r];if(typeof i=="object"&&i!==null&&!Array.isArray(i)){var o=t.indexOf(i)>-1;n[r]=o?i:fC(n[r]||{},i,t)}else n[r]=i}return t.pop(),n}var Y0=function(){return!window||!window.navigator||!window.navigator.userAgent?!1:/iPad|iPhone|iPod/i.test(window.navigator.userAgent)},aM=["TEMPLATE","STYLE","SCRIPT"];function pC(n){var e=Cn(n);if(!e)return function(){};for(var t=[];n!==e.body&&n.parentElement;){for(var r=0,i=n.parentElement.children;r<i.length;r++){var o=i[r],s=o.getAttribute("aria-hidden");o!==n&&s?.toLowerCase()!=="true"&&aM.indexOf(o.tagName)===-1&&t.push([o,s])}n=n.parentElement}return t.forEach(function(a){var l=a[0];l.setAttribute("aria-hidden","true")}),function(){lM(t),t=[]}}function lM(n){n.forEach(function(e){var t=e[0],r=e[1];r?t.setAttribute("aria-hidden",r):t.removeAttribute("aria-hidden")})}var ep;function Q0(n){var e;if(typeof ep>"u"||n){var t=Ft(),r=(e=t?.navigator)===null||e===void 0?void 0:e.userAgent;ep=!!r&&r.indexOf("Macintosh")!==-1}return!!ep}function uM(n){return n.clientWidth<n.scrollWidth}function cM(n){return n.clientHeight<n.scrollHeight}function dM(n){return uM(n)||cM(n)}function hM(n){var e=Xa(function(t){var r=Xa(function(i){return function(o){return t(o,i)}});return function(i,o){return n(i,o?r(o):t)}});return e}var fM=Xa(hM);function pM(n,e){return fM(n)(e)}var gM=["theme","styles"];function Un(n,e,t,r,i){r=r||{scope:"",fields:void 0};var o=r.scope,s=r.fields,a=s===void 0?gM:s,l=A.forwardRef(function(c,d){var f=A.useRef(void 0),g=zP(a,o),m=g.styles;g.dir;var y=ol(g,["styles","dir"]),S=t?t(c):void 0,b=nC().useStyled,E=f.current&&f.current.__cachedInputs__||[],w=c.styles;if(!f.current||m!==E[1]||w!==E[2]){var C=function(T){return jw(T,e,m,w)};C.__cachedInputs__=[e,m,w],C.__noStyleOverride__=!m&&!w,f.current=C}return f.current.__shadowConfig__=b(o),A.createElement(n,H({ref:d},y,S,c,{styles:f.current}))});l.displayName="Styled".concat(n.displayName||n.name);var u=i?A.memo(l):l;return l.displayName&&(u.displayName=l.displayName),u}function Xu(n,e){for(var t=H({},e),r=0,i=Object.keys(n);r<i.length;r++){var o=i[r];t[o]===void 0&&(t[o]=n[o])}return t}var mM=function(n){return function(e){for(var t=0,r=n.refs;t<r.length;t++){var i=r[t];typeof i=="function"?i(e):i&&(i.current=e)}}},gC=function(n){var e={refs:[]};return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(!e.resolver||!hP(e.refs,t))&&(e.resolver=mM(e)),e.refs=t,e.resolver}},Ya=qm()?A.useLayoutEffect:A.useEffect,vM="icons",Br=Qw.getValue(vM,{__options:{disableWarnings:!1,warnOnMissingIcons:!0},__remapped:{}}),tp=si.getInstance();tp&&tp.onReset&&tp.onReset(function(){for(var n in Br)Br.hasOwnProperty(n)&&Br[n].subset&&(Br[n].subset.className=void 0)});var Ud=function(n){return n.toLowerCase()};function gn(n,e){var t=H(H({},n),{isRegistered:!1,className:void 0}),r=n.icons;e=e?H(H({},Br.__options),e):Br.__options;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i],s=Ud(i);Br[s]?bM(i):Br[s]={code:o,subset:t}}}function xs(n,e){Br.__remapped[Ud(n)]=Ud(e)}function yM(n){var e=void 0,t=Br.__options;if(n=n?Ud(n):"",n=Br.__remapped[n]||n,n)if(e=Br[n],e){var r=e.subset;r&&r.fontFace&&(r.isRegistered||(Ww(r.fontFace),r.isRegistered=!0),r.className||(r.className=Gi(r.style,{fontFamily:r.fontFace.fontFamily,fontWeight:r.fontFace.fontWeight||"normal",fontStyle:r.fontFace.fontStyle||"normal"})))}else!t.disableWarnings&&t.warnOnMissingIcons&&Xw('The icon "'.concat(n,'" was used but not registered. See https://github.com/microsoft/fluentui/wiki/Using-icons for more information.'));return e}var Il=[],np=void 0;function bM(n){var e=Br.__options,t=2e3,r=10;e.disableWarnings||(Il.push(n),np===void 0&&(np=setTimeout(function(){Xw(`Some icons were re-registered. Applications should only call registerIcons for any given icon once. Redefining what an icon is may have unintended consequences. Duplicates include: 
`+Il.slice(0,r).join(", ")+(Il.length>r?" (+ ".concat(Il.length-r," more)"):"")),np=void 0,Il=[]},t)))}function EM(n,e,t,r,i){i===void 0&&(i=!1);var o=H({primaryButtonBorder:"transparent",errorText:r?"#F1707B":"#a4262c",messageText:r?"#F3F2F1":"#323130",messageLink:r?"#6CB8F6":"#005A9E",messageLinkHovered:r?"#82C7FF":"#004578",infoIcon:r?"#C8C6C4":"#605e5c",errorIcon:r?"#F1707B":"#A80000",blockingIcon:r?"#442726":"#FDE7E9",warningIcon:r?"#C8C6C4":"#797775",severeWarningIcon:r?"#FCE100":"#D83B01",successIcon:r?"#92C353":"#107C10",infoBackground:r?"#323130":"#f3f2f1",errorBackground:r?"#442726":"#FDE7E9",blockingBackground:r?"#442726":"#FDE7E9",warningBackground:r?"#433519":"#FFF4CE",severeWarningBackground:r?"#4F2A0F":"#FED9CC",successBackground:r?"#393D1B":"#DFF6DD",warningHighlight:r?"#fff100":"#ffb900",successText:r?"#92c353":"#107C10"},t),s=mC(n,e,o,r);return _M(s,i)}function mC(n,e,t,r,i){var o={},s=n||{},a=s.white,l=s.black,u=s.themePrimary,c=s.themeDark,d=s.themeDarker,f=s.themeDarkAlt,g=s.themeLighter,m=s.neutralLight,y=s.neutralLighter,S=s.neutralDark,b=s.neutralQuaternary,E=s.neutralQuaternaryAlt,w=s.neutralPrimary,C=s.neutralSecondary,T=s.neutralSecondaryAlt,D=s.neutralTertiary,k=s.neutralTertiaryAlt,M=s.neutralLighterAlt,N=s.accent;return a&&(o.bodyBackground=a,o.bodyFrameBackground=a,o.accentButtonText=a,o.buttonBackground=a,o.primaryButtonText=a,o.primaryButtonTextHovered=a,o.primaryButtonTextPressed=a,o.inputBackground=a,o.inputForegroundChecked=a,o.listBackground=a,o.menuBackground=a,o.cardStandoutBackground=a),l&&(o.bodyTextChecked=l,o.buttonTextCheckedHovered=l),u&&(o.link=u,o.primaryButtonBackground=u,o.inputBackgroundChecked=u,o.inputIcon=u,o.inputFocusBorderAlt=u,o.menuIcon=u,o.menuHeader=u,o.accentButtonBackground=u),c&&(o.primaryButtonBackgroundPressed=c,o.inputBackgroundCheckedHovered=c,o.inputIconHovered=c),d&&(o.linkHovered=d),f&&(o.primaryButtonBackgroundHovered=f),g&&(o.inputPlaceholderBackgroundChecked=g),m&&(o.bodyBackgroundChecked=m,o.bodyFrameDivider=m,o.bodyDivider=m,o.variantBorder=m,o.buttonBackgroundCheckedHovered=m,o.buttonBackgroundPressed=m,o.listItemBackgroundChecked=m,o.listHeaderBackgroundPressed=m,o.menuItemBackgroundPressed=m,o.menuItemBackgroundChecked=m),y&&(o.bodyBackgroundHovered=y,o.buttonBackgroundHovered=y,o.buttonBackgroundDisabled=y,o.buttonBorderDisabled=y,o.primaryButtonBackgroundDisabled=y,o.disabledBackground=y,o.listItemBackgroundHovered=y,o.listHeaderBackgroundHovered=y,o.menuItemBackgroundHovered=y),b&&(o.primaryButtonTextDisabled=b,o.disabledSubtext=b),E&&(o.listItemBackgroundCheckedHovered=E),D&&(o.disabledBodyText=D,o.variantBorderHovered=t?.variantBorderHovered||D,o.buttonTextDisabled=D,o.inputIconDisabled=D,o.disabledText=D),w&&(o.bodyText=w,o.actionLink=w,o.buttonText=w,o.inputBorderHovered=w,o.inputText=w,o.listText=w,o.menuItemText=w),M&&(o.bodyStandoutBackground=M,o.defaultStateBackground=M),S&&(o.actionLinkHovered=S,o.buttonTextHovered=S,o.buttonTextChecked=S,o.buttonTextPressed=S,o.inputTextHovered=S,o.menuItemTextHovered=S),C&&(o.bodySubtext=C,o.focusBorder=C,o.inputBorder=C,o.smallInputBorder=C,o.inputPlaceholderText=C),T&&(o.buttonBorder=T),k&&(o.disabledBodySubtext=k,o.disabledBorder=k,o.buttonBackgroundChecked=k,o.menuDivider=k),N&&(o.accentButtonBackground=N),e?.elevation4&&(o.cardShadow=e.elevation4),!r&&e?.elevation8?o.cardShadowHovered=e.elevation8:o.variantBorderHovered&&(o.cardShadowHovered="0 0 1px "+o.variantBorderHovered),o=H(H({},o),t),o}function _M(n,e){var t="";return e===!0&&(t=" /* @deprecated */"),n.listTextColor=n.listText+t,n.menuItemBackgroundChecked+=t,n.warningHighlight+=t,n.warningText=n.messageText+t,n.successText+=t,n}function wM(n,e){var t,r,i;e===void 0&&(e={});var o=X0({},n,e,{semanticColors:mC(e.palette,e.effects,e.semanticColors,e.isInverted===void 0?n.isInverted:e.isInverted)});if(!((t=e.palette)===null||t===void 0)&&t.themePrimary&&!(!((r=e.palette)===null||r===void 0)&&r.accent)&&(o.palette.accent=e.palette.themePrimary),e.defaultFontStyle)for(var s=0,a=Object.keys(o.fonts);s<a.length;s++){var l=a[s];o.fonts[l]=X0(o.fonts[l],e.defaultFontStyle,(i=e?.fonts)===null||i===void 0?void 0:i[l])}return o}var Z0={themeDarker:"#004578",themeDark:"#005a9e",themeDarkAlt:"#106ebe",themePrimary:"#0078d4",themeSecondary:"#2b88d8",themeTertiary:"#71afe5",themeLight:"#c7e0f4",themeLighter:"#deecf9",themeLighterAlt:"#eff6fc",black:"#000000",blackTranslucent40:"rgba(0,0,0,.4)",neutralDark:"#201f1e",neutralPrimary:"#323130",neutralPrimaryAlt:"#3b3a39",neutralSecondary:"#605e5c",neutralSecondaryAlt:"#8a8886",neutralTertiary:"#a19f9d",neutralTertiaryAlt:"#c8c6c4",neutralQuaternary:"#d2d0ce",neutralQuaternaryAlt:"#e1dfdd",neutralLight:"#edebe9",neutralLighter:"#f3f2f1",neutralLighterAlt:"#faf9f8",accent:"#0078d4",white:"#ffffff",whiteTranslucent40:"rgba(255,255,255,.4)",yellowDark:"#d29200",yellow:"#ffb900",yellowLight:"#fff100",orange:"#d83b01",orangeLight:"#ea4300",orangeLighter:"#ff8c00",redDark:"#a4262c",red:"#e81123",magentaDark:"#5c005c",magenta:"#b4009e",magentaLight:"#e3008c",purpleDark:"#32145a",purple:"#5c2d91",purpleLight:"#b4a0ff",blueDark:"#002050",blueMid:"#00188f",blue:"#0078d4",blueLight:"#00bcf2",tealDark:"#004b50",teal:"#008272",tealLight:"#00b294",greenDark:"#004b1c",green:"#107c10",greenLight:"#bad80a"},Fa;(function(n){n.depth0="0 0 0 0 transparent",n.depth4="0 1.6px 3.6px 0 rgba(0, 0, 0, 0.132), 0 0.3px 0.9px 0 rgba(0, 0, 0, 0.108)",n.depth8="0 3.2px 7.2px 0 rgba(0, 0, 0, 0.132), 0 0.6px 1.8px 0 rgba(0, 0, 0, 0.108)",n.depth16="0 6.4px 14.4px 0 rgba(0, 0, 0, 0.132), 0 1.2px 3.6px 0 rgba(0, 0, 0, 0.108)",n.depth64="0 25.6px 57.6px 0 rgba(0, 0, 0, 0.22), 0 4.8px 14.4px 0 rgba(0, 0, 0, 0.18)"})(Fa||(Fa={}));var J0={elevation4:Fa.depth4,elevation8:Fa.depth8,elevation16:Fa.depth16,elevation64:Fa.depth64,roundedCorner2:"2px",roundedCorner4:"4px",roundedCorner6:"6px"},CM={s2:"4px",s1:"8px",m:"16px",l1:"20px",l2:"32px"},xt="cubic-bezier(.1,.9,.2,1)",Gr="cubic-bezier(.1,.25,.75,.9)",Vl="0.167s",Cg="0.267s",Et="0.367s",eb="0.467s",yn=ai({from:{opacity:0},to:{opacity:1}}),bn=ai({from:{opacity:1},to:{opacity:0,visibility:"hidden"}}),SM=ys(-10),xM=ys(-20),AM=ys(-40),FM=ys(-400),kM=ys(10),TM=ys(20),DM=ys(40),PM=ys(400),MM=Ih(10),IM=Ih(20),RM=Ih(-10),LM=Ih(-20),NM=bs(10),BM=bs(20),OM=bs(40),HM=bs(400),zM=bs(-10),jM=bs(-20),WM=bs(-40),UM=bs(-400),VM=Rh(-10),KM=Rh(-20),$M=Rh(10),GM=Rh(20),qM=ai({from:{transform:"scale3d(.98,.98,1)"},to:{transform:"scale3d(1,1,1)"}}),XM=ai({from:{transform:"scale3d(1,1,1)"},to:{transform:"scale3d(.98,.98,1)"}}),YM=ai({from:{transform:"scale3d(1.03,1.03,1)"},to:{transform:"scale3d(1,1,1)"}}),QM=ai({from:{transform:"scale3d(1,1,1)"},to:{transform:"scale3d(1.03,1.03,1)"}}),ZM=ai({from:{transform:"rotateZ(0deg)"},to:{transform:"rotateZ(90deg)"}}),JM=ai({from:{transform:"rotateZ(0deg)"},to:{transform:"rotateZ(-90deg)"}}),Sg={durationValue1:Vl,durationValue2:Cg},eI={slideRightIn10:it("".concat(yn,",").concat(SM),Et,xt),slideRightIn20:it("".concat(yn,",").concat(xM),Et,xt),slideRightIn40:it("".concat(yn,",").concat(AM),Et,xt),slideRightIn400:it("".concat(yn,",").concat(FM),Et,xt),slideLeftIn10:it("".concat(yn,",").concat(kM),Et,xt),slideLeftIn20:it("".concat(yn,",").concat(TM),Et,xt),slideLeftIn40:it("".concat(yn,",").concat(DM),Et,xt),slideLeftIn400:it("".concat(yn,",").concat(PM),Et,xt),slideUpIn10:it("".concat(yn,",").concat(MM),Et,xt),slideUpIn20:it("".concat(yn,",").concat(IM),Et,xt),slideDownIn10:it("".concat(yn,",").concat(RM),Et,xt),slideDownIn20:it("".concat(yn,",").concat(LM),Et,xt),slideRightOut10:it("".concat(bn,",").concat(NM),Et,xt),slideRightOut20:it("".concat(bn,",").concat(BM),Et,xt),slideRightOut40:it("".concat(bn,",").concat(OM),Et,xt),slideRightOut400:it("".concat(bn,",").concat(HM),Et,xt),slideLeftOut10:it("".concat(bn,",").concat(zM),Et,xt),slideLeftOut20:it("".concat(bn,",").concat(jM),Et,xt),slideLeftOut40:it("".concat(bn,",").concat(WM),Et,xt),slideLeftOut400:it("".concat(bn,",").concat(UM),Et,xt),slideUpOut10:it("".concat(bn,",").concat(VM),Et,xt),slideUpOut20:it("".concat(bn,",").concat(KM),Et,xt),slideDownOut10:it("".concat(bn,",").concat($M),Et,xt),slideDownOut20:it("".concat(bn,",").concat(GM),Et,xt),scaleUpIn100:it("".concat(yn,",").concat(qM),Et,xt),scaleDownIn100:it("".concat(yn,",").concat(YM),Et,xt),scaleUpOut103:it("".concat(bn,",").concat(QM),Vl,Gr),scaleDownOut98:it("".concat(bn,",").concat(XM),Vl,Gr),fadeIn100:it(yn,Vl,Gr),fadeIn200:it(yn,Cg,Gr),fadeIn400:it(yn,Et,Gr),fadeIn500:it(yn,eb,Gr),fadeOut100:it(bn,Vl,Gr),fadeOut200:it(bn,Cg,Gr),fadeOut400:it(bn,Et,Gr),fadeOut500:it(bn,eb,Gr),rotate90deg:it(ZM,"0.1s",Gr),rotateN90deg:it(JM,"0.1s",Gr)};function it(n,e,t){return{animationName:n,animationDuration:e,animationTimingFunction:t,animationFillMode:"both"}}function ys(n){return ai({from:{transform:"translate3d(".concat(n,"px,0,0)"),pointerEvents:"none"},to:{transform:"translate3d(0,0,0)",pointerEvents:"auto"}})}function Ih(n){return ai({from:{transform:"translate3d(0,".concat(n,"px,0)"),pointerEvents:"none"},to:{transform:"translate3d(0,0,0)",pointerEvents:"auto"}})}function bs(n){return ai({from:{transform:"translate3d(0,0,0)"},to:{transform:"translate3d(".concat(n,"px,0,0)")}})}function Rh(n){return ai({from:{transform:"translate3d(0,0,0)"},to:{transform:"translate3d(0,".concat(n,"px,0)")}})}var Nt;(function(n){n.Arabic="Segoe UI Web (Arabic)",n.Cyrillic="Segoe UI Web (Cyrillic)",n.EastEuropean="Segoe UI Web (East European)",n.Greek="Segoe UI Web (Greek)",n.Hebrew="Segoe UI Web (Hebrew)",n.Thai="Leelawadee UI Web",n.Vietnamese="Segoe UI Web (Vietnamese)",n.WestEuropean="Segoe UI Web (West European)",n.Selawik="Selawik Web",n.Armenian="Segoe UI Web (Armenian)",n.Georgian="Segoe UI Web (Georgian)"})(Nt||(Nt={}));var vt;(function(n){n.Arabic="'".concat(Nt.Arabic,"'"),n.ChineseSimplified="'Microsoft Yahei UI', Verdana, Simsun",n.ChineseTraditional="'Microsoft Jhenghei UI', Pmingliu",n.Cyrillic="'".concat(Nt.Cyrillic,"'"),n.EastEuropean="'".concat(Nt.EastEuropean,"'"),n.Greek="'".concat(Nt.Greek,"'"),n.Hebrew="'".concat(Nt.Hebrew,"'"),n.Hindi="'Nirmala UI'",n.Japanese="'Yu Gothic UI', 'Meiryo UI', Meiryo, 'MS Pgothic', Osaka",n.Korean="'Malgun Gothic', Gulim",n.Selawik="'".concat(Nt.Selawik,"'"),n.Thai="'Leelawadee UI Web', 'Kmer UI'",n.Vietnamese="'".concat(Nt.Vietnamese,"'"),n.WestEuropean="'".concat(Nt.WestEuropean,"'"),n.Armenian="'".concat(Nt.Armenian,"'"),n.Georgian="'".concat(Nt.Georgian,"'")})(vt||(vt={}));var Qn;(function(n){n.size10="10px",n.size12="12px",n.size14="14px",n.size16="16px",n.size18="18px",n.size20="20px",n.size24="24px",n.size28="28px",n.size32="32px",n.size42="42px",n.size68="68px",n.mini="10px",n.xSmall="10px",n.small="12px",n.smallPlus="12px",n.medium="14px",n.mediumPlus="16px",n.icon="16px",n.large="18px",n.xLarge="20px",n.xLargePlus="24px",n.xxLarge="28px",n.xxLargePlus="32px",n.superLarge="42px",n.mega="68px"})(Qn||(Qn={}));var Tt;(function(n){n.light=100,n.semilight=300,n.regular=400,n.semibold=600,n.bold=700})(Tt||(Tt={}));var mo;(function(n){n.xSmall="10px",n.small="12px",n.medium="16px",n.large="20px"})(mo||(mo={}));var tI="'Segoe UI', -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', sans-serif",nI="'Segoe UI', '".concat(Nt.WestEuropean,"'"),rp={ar:vt.Arabic,bg:vt.Cyrillic,cs:vt.EastEuropean,el:vt.Greek,et:vt.EastEuropean,he:vt.Hebrew,hi:vt.Hindi,hr:vt.EastEuropean,hu:vt.EastEuropean,ja:vt.Japanese,kk:vt.EastEuropean,ko:vt.Korean,lt:vt.EastEuropean,lv:vt.EastEuropean,pl:vt.EastEuropean,ru:vt.Cyrillic,sk:vt.EastEuropean,"sr-latn":vt.EastEuropean,th:vt.Thai,tr:vt.EastEuropean,uk:vt.Cyrillic,vi:vt.Vietnamese,"zh-hans":vt.ChineseSimplified,"zh-hant":vt.ChineseTraditional,hy:vt.Armenian,ka:vt.Georgian};function rI(n){return"".concat(n,", ").concat(tI)}function iI(n){for(var e in rp)if(rp.hasOwnProperty(e)&&n&&e.indexOf(n)===0)return rp[e];return nI}function Dr(n,e,t){return{fontFamily:t,MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontSize:n,fontWeight:e}}function oI(n){var e=iI(n),t=rI(e),r={tiny:Dr(Qn.mini,Tt.regular,t),xSmall:Dr(Qn.xSmall,Tt.regular,t),small:Dr(Qn.small,Tt.regular,t),smallPlus:Dr(Qn.smallPlus,Tt.regular,t),medium:Dr(Qn.medium,Tt.regular,t),mediumPlus:Dr(Qn.mediumPlus,Tt.regular,t),large:Dr(Qn.large,Tt.regular,t),xLarge:Dr(Qn.xLarge,Tt.semibold,t),xLargePlus:Dr(Qn.xLargePlus,Tt.semibold,t),xxLarge:Dr(Qn.xxLarge,Tt.semibold,t),xxLargePlus:Dr(Qn.xxLargePlus,Tt.semibold,t),superLarge:Dr(Qn.superLarge,Tt.semibold,t),mega:Dr(Qn.mega,Tt.semibold,t)};return r}var sI="https://res-1.cdn.office.net/files/fabric-cdn-prod_20230815.002/assets",aI=oI(sM());function ks(n,e,t,r){n="'".concat(n,"'");var i=r!==void 0?"local('".concat(r,"'),"):"";Ww({fontFamily:n,src:i+"url('".concat(e,".woff2') format('woff2'),")+"url('".concat(e,".woff') format('woff')"),fontWeight:t,fontStyle:"normal",fontDisplay:"swap"})}function fi(n,e,t,r,i){r===void 0&&(r="segoeui");var o="".concat(n,"/").concat(t,"/").concat(r);ks(e,o+"-light",Tt.light,i&&i+" Light"),ks(e,o+"-semilight",Tt.semilight,i&&i+" SemiLight"),ks(e,o+"-regular",Tt.regular,i),ks(e,o+"-semibold",Tt.semibold,i&&i+" SemiBold"),ks(e,o+"-bold",Tt.bold,i&&i+" Bold")}function lI(n){if(n){var e="".concat(n,"/fonts");fi(e,Nt.Thai,"leelawadeeui-thai","leelawadeeui"),fi(e,Nt.Arabic,"segoeui-arabic"),fi(e,Nt.Cyrillic,"segoeui-cyrillic"),fi(e,Nt.EastEuropean,"segoeui-easteuropean"),fi(e,Nt.Greek,"segoeui-greek"),fi(e,Nt.Hebrew,"segoeui-hebrew"),fi(e,Nt.Vietnamese,"segoeui-vietnamese"),fi(e,Nt.WestEuropean,"segoeui-westeuropean","segoeui","Segoe UI"),fi(e,vt.Selawik,"selawik","selawik"),fi(e,Nt.Armenian,"segoeui-armenian"),fi(e,Nt.Georgian,"segoeui-georgian"),ks("Leelawadee UI Web","".concat(e,"/leelawadeeui-thai/leelawadeeui-semilight"),Tt.light),ks("Leelawadee UI Web","".concat(e,"/leelawadeeui-thai/leelawadeeui-bold"),Tt.semibold)}}function uI(){var n,e,t=(n=Ft())===null||n===void 0?void 0:n.FabricConfig;return(e=t?.fontBaseUrl)!==null&&e!==void 0?e:sI}lI(uI());function Yu(n,e){n===void 0&&(n={}),e===void 0&&(e=!1);var t=!!n.isInverted,r={palette:Z0,effects:J0,fonts:aI,spacing:CM,isInverted:t,disableGlobalClassNames:!1,semanticColors:EM(Z0,J0,void 0,t,e),rtl:void 0};return wM(r,n)}var Ke="@media screen and (-ms-high-contrast: active), screen and (forced-colors: active)",ip=320,vC=480,cI=640,op=vC-1,yC=cI-1;function bC(n,e){var t=" and (min-width: ".concat(n,"px)"),r=" and (max-width: ".concat(e,"px)");return"@media only screen".concat(t).concat(r)}function yi(){return{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}}var Qa;(function(n){n.Nav=1,n.ScrollablePane=1,n.FocusStyle=1,n.Coachmark=1e3,n.Layer=1e6,n.KeytipLayer=1000001})(Qa||(Qa={}));function Za(n,e,t,r,i,o,s,a){return typeof e=="number"||!e?tb(n,{inset:e,position:t,highContrastStyle:r,borderColor:i,outlineColor:o,isFocusedOnly:s,borderRadius:a}):tb(n,e)}function tb(n,e){var t,r;e===void 0&&(e={});var i=e.borderRadius,o=e.inset,s=o===void 0?0:o,a=e.width,l=a===void 0?1:a,u=e.position,c=u===void 0?"relative":u,d=e.highContrastStyle,f=e.borderColor,g=f===void 0?n.palette.white:f,m=e.outlineColor,y=m===void 0?n.palette.neutralSecondary:m,S=e.isFocusedOnly,b=S===void 0?!0:S,E=e.pointerEvents;return{outline:"transparent",position:c,selectors:(t={"::-moz-focus-inner":{border:"0"}},t[".".concat(gt," &").concat(b?":focus":"",":after, :host(.").concat(gt,") &").concat(b?":focus":"",":after")]={content:'""',position:"absolute",pointerEvents:E,left:s+1,top:s+1,bottom:s+1,right:s+1,border:"".concat(l,"px solid ").concat(g),outline:"".concat(l,"px solid ").concat(y),zIndex:Qa.FocusStyle,borderRadius:i,selectors:(r={},r[Ke]=d,r)},t)}}function dI(){return{selectors:{"&::-moz-focus-inner":{border:0},"&":{outline:"transparent"}}}}var hI=function(n,e,t,r){var i,o,s;t===void 0&&(t="border"),r===void 0&&(r=-1);var a=t==="borderBottom";return{borderColor:n,selectors:{":after":(i={pointerEvents:"none",content:"''",position:"absolute",left:a?0:r,top:r,bottom:r,right:a?0:r},i[t]="2px solid ".concat(n),i.borderRadius=e,i.width=t==="borderBottom"?"100%":void 0,i.selectors=(o={},o[Ke]=(s={},s[t==="border"?"borderColor":"borderBottomColor"]="Highlight",s),o),i)}}},ev={position:"absolute",width:1,height:1,margin:-1,padding:0,border:0,overflow:"hidden",whiteSpace:"nowrap"},fI=zt(function(n,e){var t=si.getInstance();return e?Object.keys(n).reduce(function(r,i){return r[i]=t.getClassName(n[i]),r},{}):n});function Ar(n,e,t){return fI(n,e.disableGlobalClassNames)}var ka=function(){return ka=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ka.apply(this,arguments)},ou=typeof window>"u"?global:window,nb=ou&&ou.CSPSettings&&ou.CSPSettings.nonce,Ai=pI();function pI(){var n=ou.__themeState__||{theme:void 0,lastStyleElement:void 0,registeredStyles:[]};return n.runState||(n=ka(ka({},n),{perf:{count:0,duration:0},runState:{flushTimer:0,mode:0,buffer:[]}})),n.registeredThemableStyles||(n=ka(ka({},n),{registeredThemableStyles:[]})),ou.__themeState__=n,n}function gI(n,e){Ai.loadStyles?Ai.loadStyles(EC(n).styleString,n):EI(n)}function mI(n){Ai.theme=n,bI()}function vI(n){yI(Ai.registeredThemableStyles),Ai.registeredThemableStyles=[]}function yI(n){n.forEach(function(e){var t=e&&e.styleElement;t&&t.parentElement&&t.parentElement.removeChild(t)})}function bI(){if(Ai.theme){for(var n=[],e=0,t=Ai.registeredThemableStyles;e<t.length;e++){var r=t[e];n.push(r.themableStyle)}n.length>0&&(vI(),gI([].concat.apply([],n)))}}function EC(n){var e=Ai.theme,t=!1,r=(n||[]).map(function(i){var o=i.theme;if(o){t=!0;var s=e?e[o]:void 0,a=i.defaultValue||"inherit";return e&&!s&&console&&!(o in e)&&typeof DEBUG<"u"&&DEBUG&&console.warn('Theming value not provided for "'.concat(o,'". Falling back to "').concat(a,'".')),s||a}else return i.rawString});return{styleString:r.join(""),themable:t}}function EI(n){if(!(typeof document>"u")){var e=document.getElementsByTagName("head")[0],t=document.createElement("style"),r=EC(n),i=r.styleString,o=r.themable;t.setAttribute("data-load-themed-styles","true"),nb&&t.setAttribute("nonce",nb),t.appendChild(document.createTextNode(i)),Ai.perf.count++,e.appendChild(t);var s=document.createEvent("HTMLEvents");s.initEvent("styleinsert",!0,!1),s.args={newStyle:t},document.dispatchEvent(s);var a={styleElement:t,themableStyle:n};o?Ai.registeredThemableStyles.push(a):Ai.registeredStyles.push(a)}}var Xr=Yu({}),_I=[],xg="theme";function _C(){var n,e,t,r=Ft();!((e=r?.FabricConfig)===null||e===void 0)&&e.legacyTheme?CI(r.FabricConfig.legacyTheme):xi.getSettings([xg]).theme||(!((t=r?.FabricConfig)===null||t===void 0)&&t.theme&&(Xr=Yu(r.FabricConfig.theme)),xi.applySettings((n={},n[xg]=Xr,n)))}_C();function wI(n){return n===void 0&&(n=!1),n===!0&&(Xr=Yu({},n)),Xr}function CI(n,e){var t;return e===void 0&&(e=!1),Xr=Yu(n,e),mI(H(H(H(H({},Xr.palette),Xr.semanticColors),Xr.effects),SI(Xr))),xi.applySettings((t={},t[xg]=Xr,t)),_I.forEach(function(r){try{r(Xr)}catch{}}),Xr}function SI(n){for(var e={},t=0,r=Object.keys(n.fonts);t<r.length;t++)for(var i=r[t],o=n.fonts[i],s=0,a=Object.keys(o);s<a.length;s++){var l=a[s],u=i+l.charAt(0).toUpperCase()+l.slice(1),c=o[l];l==="fontSize"&&typeof c=="number"&&(c=c+"px"),e[u]=c}return e}var rb={boxShadow:"none",margin:0,padding:0,boxSizing:"border-box"};function xI(n){return{selectors:{"::placeholder":n,":-ms-input-placeholder":n,"::-ms-input-placeholder":n}}}var Ta=BD(eI),AI="https://res.cdn.office.net/files/fabric-cdn-prod_20260113.001";Km("@fluentui/style-utilities","8.14.0");_C();var Ut={topLeftEdge:0,topCenter:1,topRightEdge:2,topAutoEdge:3,bottomLeftEdge:4,bottomCenter:5,bottomRightEdge:6,bottomAutoEdge:7,leftTopEdge:8,leftCenter:9,leftBottomEdge:10,rightTopEdge:11,rightCenter:12,rightBottomEdge:13},Le;(function(n){n[n.top=1]="top",n[n.bottom=-1]="bottom",n[n.left=2]="left",n[n.right=-2]="right"})(Le||(Le={}));var ib;(function(n){n[n.top=0]="top",n[n.bottom=1]="bottom",n[n.start=2]="start",n[n.end=3]="end"})(ib||(ib={}));var Rn;function gr(n,e,t){return{targetEdge:n,alignmentEdge:e,isAuto:t}}var ob=(Rn={},Rn[Ut.topLeftEdge]=gr(Le.top,Le.left),Rn[Ut.topCenter]=gr(Le.top),Rn[Ut.topRightEdge]=gr(Le.top,Le.right),Rn[Ut.topAutoEdge]=gr(Le.top,void 0,!0),Rn[Ut.bottomLeftEdge]=gr(Le.bottom,Le.left),Rn[Ut.bottomCenter]=gr(Le.bottom),Rn[Ut.bottomRightEdge]=gr(Le.bottom,Le.right),Rn[Ut.bottomAutoEdge]=gr(Le.bottom,void 0,!0),Rn[Ut.leftTopEdge]=gr(Le.left,Le.top),Rn[Ut.leftCenter]=gr(Le.left),Rn[Ut.leftBottomEdge]=gr(Le.left,Le.bottom),Rn[Ut.rightTopEdge]=gr(Le.right,Le.top),Rn[Ut.rightCenter]=gr(Le.right),Rn[Ut.rightBottomEdge]=gr(Le.right,Le.bottom),Rn);function tv(n,e){return!(n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}function Vd(n,e){var t=[];return n.top<e.top&&t.push(Le.top),n.bottom>e.bottom&&t.push(Le.bottom),n.left<e.left&&t.push(Le.left),n.right>e.right&&t.push(Le.right),t}function jn(n,e){return n[Le[e]]}function sb(n,e,t){return n[Le[e]]=t,n}function Du(n,e){var t=ll(e);return(jn(n,t.positiveEdge)+jn(n,t.negativeEdge))/2}function Lh(n,e){return n>0?e:e*-1}function Ag(n,e){return Lh(n,jn(e,n))}function Xi(n,e,t){var r=jn(n,t)-jn(e,t);return Lh(t,r)}function Ja(n,e,t,r){r===void 0&&(r=!0);var i=jn(n,e)-t,o=sb(n,e,t);return r&&(o=sb(n,e*-1,jn(n,e*-1)-i)),o}function Pu(n,e,t,r){return r===void 0&&(r=0),Ja(n,t,jn(e,t)+Lh(t,r))}function FI(n,e,t,r){r===void 0&&(r=0);var i=t*-1,o=Lh(i,r);return Ja(n,t*-1,jn(e,t)+o)}function Kd(n,e,t){var r=Ag(t,n);return r>Ag(t,e)}function kI(n,e){for(var t=Vd(n,e),r=0,i=0,o=t;i<o.length;i++){var s=o[i];r+=Math.pow(Xi(n,e,s),2)}return r}function TI(n,e,t,r){return r===void 0&&(r=200),t!==Le.bottom&&t!==Le.top?!1:Xi(n,e,t)>=r}function DI(n,e,t,r,i,o,s){i===void 0&&(i=!1),s===void 0&&(s=0);var a=[Le.left,Le.right,Le.bottom,Le.top];ir()&&(a[0]*=-1,a[1]*=-1);for(var l=n,u=r.targetEdge,c=r.alignmentEdge,d,f=u,g=c,m=0;m<4;m++){if(Kd(l,t,u))return{elementRectangle:l,targetEdge:u,alignmentEdge:c};if(i&&TI(e,t,u,o)){switch(u){case Le.bottom:l.bottom=t.bottom;break;case Le.top:l.top=t.top;break}return{elementRectangle:l,targetEdge:u,alignmentEdge:c,forcedInBounds:!0}}else{var y=kI(l,t);(!d||y<d)&&(d=y,f=u,g=c),a.splice(a.indexOf(u),1),a.length>0&&(a.indexOf(u*-1)>-1?u=u*-1:(c=u,u=a.slice(-1)[0]),l=$d(n,e,{targetEdge:u,alignmentEdge:c},s))}}return l=$d(n,e,{targetEdge:f,alignmentEdge:g},s),{elementRectangle:l,targetEdge:f,alignmentEdge:g}}function PI(n,e,t,r){var i=n.alignmentEdge,o=n.targetEdge,s=n.elementRectangle,a=i*-1,l=$d(s,e,{targetEdge:o,alignmentEdge:a},t,r);return{elementRectangle:l,targetEdge:o,alignmentEdge:a}}function MI(n,e,t,r,i,o,s,a,l){i===void 0&&(i=!1),s===void 0&&(s=0);var u=r.alignmentEdge,c=r.alignTargetEdge,d={elementRectangle:n,targetEdge:r.targetEdge,alignmentEdge:u};!a&&!l&&(d=DI(n,e,t,r,i,o,s));var f=Vd(d.elementRectangle,t),g=a?-d.targetEdge:void 0;if(f.length>0)if(c)if(d.alignmentEdge&&f.indexOf(d.alignmentEdge*-1)>-1){var m=PI(d,e,s,l);if(tv(m.elementRectangle,t))return m;d=sp(Vd(m.elementRectangle,t),d,t,g)}else d=sp(f,d,t,g);else d=sp(f,d,t,g);return d}function sp(n,e,t,r){for(var i=0,o=n;i<o.length;i++){var s=o[i],a=void 0;if(r&&r===s*-1)a=Ja(e.elementRectangle,s,jn(t,s),!1),e.forcedInBounds=!0;else{a=Pu(e.elementRectangle,t,s);var l=Kd(a,t,s*-1);l||(a=Ja(a,s*-1,jn(t,s*-1),!1),e.forcedInBounds=!0)}e.elementRectangle=a}return e}function wC(n,e,t){var r=ll(e).positiveEdge,i=Du(n,e),o=i-jn(n,r);return Ja(n,r,t-o)}function $d(n,e,t,r,i){r===void 0&&(r=0);var o=new ti(n.left,n.right,n.top,n.bottom),s=t.alignmentEdge,a=t.targetEdge,l=i?a:a*-1;if(o=i?Pu(o,e,a,r):FI(o,e,a,r),s)o=Pu(o,e,s);else{var u=Du(e,a);o=wC(o,l,u)}return o}function ll(n){return n===Le.top||n===Le.bottom?{positiveEdge:Le.left,negativeEdge:Le.right}:{positiveEdge:Le.top,negativeEdge:Le.bottom}}function CC(n,e,t){return t&&Math.abs(Xi(n,t,e))>Math.abs(Xi(n,t,e*-1))?e*-1:e}function II(n,e,t){return t!==void 0&&jn(n,e)===jn(t,e)}function RI(n,e,t,r,i,o,s,a){var l={},u=Nh(e),c=o?t:t*-1,d=i||ll(t).positiveEdge;return(!s||II(n,XI(d),r))&&(d=CC(n,d,r)),l[Le[c]]=Xi(n,u,c),l[Le[d]]=Xi(n,u,d),a&&(l[Le[c*-1]]=Xi(n,u,c*-1),l[Le[d*-1]]=Xi(n,u,d*-1)),l}function LI(n){return Math.sqrt(n*n*2)}function NI(n,e,t){if(n===void 0&&(n=Ut.bottomAutoEdge),t)return{alignmentEdge:t.alignmentEdge,isAuto:t.isAuto,targetEdge:t.targetEdge};var r=H({},ob[n]);return ir()?(r.alignmentEdge&&r.alignmentEdge%2===0&&(r.alignmentEdge=r.alignmentEdge*-1),e!==void 0?ob[e]:r):r}function BI(n,e,t,r,i){return n.isAuto&&(n.alignmentEdge=SC(n.targetEdge,e,t)),n.alignTargetEdge=i,n}function SC(n,e,t){var r=Du(e,n),i=Du(t,n),o=ll(n),s=o.positiveEdge,a=o.negativeEdge;return r<=i?s:a}function OI(n,e,t,r,i,o,s,a,l){o===void 0&&(o=!1);var u=$d(n,e,r,i,l);return tv(u,t)?{elementRectangle:u,targetEdge:r.targetEdge,alignmentEdge:r.alignmentEdge}:MI(u,e,t,r,o,s,i,a,l)}function HI(n,e,t){var r=n.targetEdge*-1,i=new ti(0,n.elementRectangle.width,0,n.elementRectangle.height),o={},s=CC(n.elementRectangle,n.alignmentEdge?n.alignmentEdge:ll(r).positiveEdge,t),a=Xi(n.elementRectangle,n.targetRectangle,r),l=a>Math.abs(jn(e,r));return o[Le[r]]=jn(e,r),o[Le[s]]=Xi(e,i,s),{elementPosition:H({},o),closestEdge:SC(n.targetEdge,e,i),targetEdge:r,hideBeak:!l}}function zI(n,e){var t=e.targetRectangle,r=ll(e.targetEdge),i=r.positiveEdge,o=r.negativeEdge,s=Du(t,e.targetEdge),a=new ti(n/2,e.elementRectangle.width-n/2,n/2,e.elementRectangle.height-n/2),l=new ti(0,n,0,n);return l=Ja(l,e.targetEdge*-1,-n/2),l=wC(l,e.targetEdge*-1,s-Ag(i,e.elementRectangle)),Kd(l,a,i)?Kd(l,a,o)||(l=Pu(l,a,o)):l=Pu(l,a,i),l}function Nh(n){var e=n.getBoundingClientRect();return new ti(e.left,e.right,e.top,e.bottom)}function jI(n){return new ti(n.left,n.right,n.top,n.bottom)}function WI(n,e){var t;if(e){if(e.preventDefault){var r=e;t=new ti(r.clientX,r.clientX,r.clientY,r.clientY)}else if(e.getBoundingClientRect)t=Nh(e);else{var i=e,o=i.left||i.x,s=i.top||i.y,a=i.right||o,l=i.bottom||s;t=new ti(o,a,s,l)}if(!tv(t,n))for(var u=Vd(t,n),c=0,d=u;c<d.length;c++){var f=d[c];t[Le[f]]=n[Le[f]]}}else t=new ti(0,0,0,0);return t}function UI(n,e,t,r,i,o){i===void 0&&(i=!1);var s=n.gapSpace?n.gapSpace:0,a=WI(t,n.target),l=BI(NI(n.directionalHint,n.directionalHintForRTL,r),a,t,n.coverTarget,n.alignTargetEdge),u=OI(Nh(e),a,t,l,s,i,o,n.directionalHintFixed,n.coverTarget);return H(H({},u),{targetRectangle:a})}function VI(n,e,t,r,i){var o=RI(n.elementRectangle,e,n.targetEdge,t,n.alignmentEdge,r,i,n.forcedInBounds);return{elementPosition:o,targetEdge:n.targetEdge,alignmentEdge:n.alignmentEdge}}function xC(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=0),LI(n?e:0)/2+t}function AC(n,e,t,r,i,o,s,a){i===void 0&&(i=!1);var l=a??Ft(),u=n.isBeakVisible&&n.beakWidth||0,c=xC(n.isBeakVisible,n.beakWidth,n.gapSpace),d=n;d.gapSpace=c;var f=n.bounds?jI(n.bounds):new ti(0,l.innerWidth-sP(),0,l.innerHeight),g=UI(d,t,f,r,i,o),m=zI(u,g),y=HI(g,m,f);return H(H({},VI(g,e,f,n.coverTarget,s)),{beakPosition:y})}function KI(n,e,t,r,i){var o=i??Ft();return AC(n,e,t,r,!1,void 0,!0,o)}function $I(n){var e,t,r,i,o=n,s=n,a=n,l,u=(e=a.left)!==null&&e!==void 0?e:a.x,c=(t=a.top)!==null&&t!==void 0?t:a.y,d=(r=a.right)!==null&&r!==void 0?r:u,f=(i=a.bottom)!==null&&i!==void 0?i:c;return o.stopPropagation?l=new ti(o.clientX,o.clientX,o.clientY,o.clientY):u!==void 0&&c!==void 0?l=new ti(u,d,c,f):l=Nh(s),l}function GI(n,e,t,r,i,o,s){return AC(n,e,t,r,i,o,void 0,s)}function qI(n,e,t,r,i){return KI(n,e,t,r,i)}function XI(n){return n*-1}function YI(n,e){var t=void 0;if(e.getWindowSegments&&(t=e.getWindowSegments()),t===void 0||t.length<=1)return{top:0,left:0,right:e.innerWidth,bottom:e.innerHeight,width:e.innerWidth,height:e.innerHeight};var r=0,i=0;if(n!==null&&n.getBoundingClientRect){var o=n.getBoundingClientRect();r=(o.left+o.right)/2,i=(o.top+o.bottom)/2}else n!==null&&(r=n.left||n.x,i=n.top||n.y);for(var s={top:0,left:0,right:0,bottom:0,width:0,height:0},a=0,l=t;a<l.length;a++){var u=l[a];r&&u.left<=r&&u.right>=r&&i&&u.top<=i&&u.bottom>=i&&(s={top:u.top,left:u.left,right:u.right,bottom:u.bottom,width:u.width,height:u.height})}return s}function QI(n,e){return YI(n,e)}function ZI(n,e,t){return xC(n,e,t)}function JI(n){return $I(n)}function ul(){var n=A.useRef(void 0);return n.current||(n.current=new $u),A.useEffect(function(){return function(){var e;(e=n.current)===null||e===void 0||e.dispose(),n.current=void 0}},[]),n.current}function ri(n){var e=A.useRef(void 0);return e.current===void 0&&(e.current={value:typeof n=="function"?n():n}),e.current.value}function eR(n){var e=A.useState(n),t=e[0],r=e[1],i=ri(function(){return function(){r(!0)}}),o=ri(function(){return function(){r(!1)}}),s=ri(function(){return function(){r(function(a){return!a})}});return[t,{setTrue:i,setFalse:o,toggle:s}]}function tR(n,e,t){var r=A.useState(e),i=r[0],o=r[1],s=ri(n!==void 0),a=s?n:i,l=A.useRef(a),u=A.useRef(t);A.useEffect(function(){l.current=a,u.current=t});var c=ri(function(){return function(d,f){var g=typeof d=="function"?d(l.current):d;u.current&&u.current(f,g),s||o(g)}});return[a,c]}function ap(n){var e=A.useRef(function(){throw new Error("Cannot call an event handler while rendering")});return Ya(function(){e.current=n},[n]),ri(function(){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=e.current;return i.apply(void 0,t)}})}function Qu(n,e){var t=A.useRef(e);return t.current||(t.current=ni(n)),t.current}function Ti(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=A.useCallback(function(r){t.current=r;for(var i=0,o=n;i<o.length;i++){var s=o[i];typeof s=="function"?s(r):s&&(s.current=r)}},So([],n,!0));return t}function Mu(n,e,t,r){var i=A.useRef(t);i.current=t,A.useEffect(function(){var o=n&&"current"in n?n.current:n;if(!(!o||!o.addEventListener)){var s=qi(o,e,function(a){return i.current(a)},r);return s}},[n,e,r])}function nv(n){var e=A.useRef(void 0);return A.useEffect(function(){e.current=n}),e.current}var nR=function(){var n=ri({});return A.useEffect(function(){return function(){for(var e=0,t=Object.keys(n);e<t.length;e++){var r=t[e];clearTimeout(r)}}},[n]),ri({setTimeout:function(e,t){var r=setTimeout(e,t);return n[r]=1,r},clearTimeout:function(e){delete n[e],clearTimeout(e)}})};function FC(n,e){var t,r,i,o=A.useRef(void 0),s=A.useRef(null),a=qu();if(!n||n!==o.current||typeof n=="string"){var l=e?.current;if(n)if(typeof n=="string")if(!((t=l?.getRootNode())===null||t===void 0)&&t.host)s.current=(i=(r=l?.getRootNode())===null||r===void 0?void 0:r.querySelector(n))!==null&&i!==void 0?i:null;else{var u=Cn(l);s.current=u?u.querySelector(n):null}else"stopPropagation"in n||"getBoundingClientRect"in n?s.current=n:"current"in n?s.current=n.current:s.current=n;o.current=n}return[s,a]}var kC=function(n){var e=A.useRef(n);e.current=n,A.useEffect(function(){return function(){var t;(t=e.current)===null||t===void 0||t.call(e)}},[])};function rR(n,e){var t=ul(),r=A.useState(!1),i=r[0],o=r[1];return A.useEffect(function(){return t.requestAnimationFrame(function(){var s;if(!(n.style&&n.style.overflowY)){var a=!1;if(e&&e.current&&(!((s=e.current)===null||s===void 0)&&s.firstElementChild)){var l=e.current.clientHeight,u=e.current.firstElementChild.clientHeight;l>0&&u>l&&(a=u-l>1)}i!==a&&o(a)}}),function(){return t.dispose()}}),i}function iR(n){var e=n.originalElement,t=n.containsFocus;e&&t&&e!==Ft()&&setTimeout(function(){var r;(r=e.focus)===null||r===void 0||r.call(e)},0)}function oR(n,e){var t=n.onRestoreFocus,r=t===void 0?iR:t,i=A.useRef(void 0),o=A.useRef(!1);A.useEffect(function(){return i.current=Cn().activeElement,ZD(e.current)&&(o.current=!0),function(){var s;r?.({originalElement:i.current,containsFocus:o.current,documentContainsFocus:((s=Cn())===null||s===void 0?void 0:s.hasFocus())||!1}),i.current=void 0}},[]),Mu(e,"focus",A.useCallback(function(){o.current=!0},[]),!0),Mu(e,"blur",A.useCallback(function(s){e.current&&s.relatedTarget&&!e.current.contains(s.relatedTarget)&&(o.current=!1)},[]),!0)}function sR(n,e){var t=String(n["aria-modal"]).toLowerCase()==="true"&&n.enableAriaHiddenSiblings;A.useEffect(function(){if(t&&e.current){var r=pC(e.current);return r}},[e,t])}var rv=A.forwardRef(function(n,e){var t=Xu({shouldRestoreFocus:!0,enableAriaHiddenSiblings:!0},n),r=A.useRef(void 0),i=Ti(r,e);sR(t,r),oR(t,r);var o=t.role,s=t.className,a=t.ariaLabel,l=t.ariaLabelledBy,u=t.ariaDescribedBy,c=t.style,d=t.children,f=t.onDismiss,g=rR(t,r),m=A.useCallback(function(S){switch(S.which){case Re.escape:f&&(f(S),S.preventDefault(),S.stopPropagation());break}},[f]),y=qu();return Mu(y,"keydown",m),A.createElement("div",H({ref:i},an(t,ms),{className:s,role:o,"aria-label":a,"aria-labelledby":l,"aria-describedby":u,onKeyDown:m,style:H({overflowY:g?"scroll":void 0,outline:"none"},c)}),d)});rv.displayName="Popup";var TC=function(){var n;return(n=qu())!==null&&n!==void 0?n:typeof window<"u"?window:void 0},Gd=function(n){var e,t;return(t=(e=n?.window)===null||e===void 0?void 0:e.document)!==null&&t!==void 0?t:typeof document<"u"?document:void 0},aa,aR="CalloutContentBase",lR=(aa={},aa[Le.top]=Ta.slideUpIn10,aa[Le.bottom]=Ta.slideDownIn10,aa[Le.left]=Ta.slideLeftIn10,aa[Le.right]=Ta.slideRightIn10,aa),ab={top:0,left:0},uR={opacity:0,filter:"opacity(0)",pointerEvents:"none"},cR=["role","aria-roledescription"],DC={preventDismissOnLostFocus:!1,preventDismissOnScroll:!1,preventDismissOnResize:!1,isBeakVisible:!0,beakWidth:16,gapSpace:0,minPagePadding:8,directionalHint:Ut.bottomAutoEdge},dR=Wn({disableCaching:!0});function hR(n,e,t){var r=n.bounds,i=n.minPagePadding,o=i===void 0?DC.minPagePadding:i,s=n.target,a=A.useState(!1),l=a[0],u=a[1],c=A.useRef(void 0),d=A.useCallback(function(){if(!c.current||l){var g=typeof r=="function"?t?r(s,t):void 0:r;!g&&t&&(g=QI(e.current,t),g={top:g.top+o,left:g.left+o,right:g.right-o,bottom:g.bottom-o,width:g.width-o*2,height:g.height-o*2}),c.current=g,l&&u(!1)}return c.current},[r,o,s,e,t,l]),f=ul();return Mu(t,"resize",f.debounce(function(){u(!0)},500,{leading:!0})),d}function fR(n,e,t,r){var i,o=n.calloutMaxHeight,s=n.finalHeight,a=n.directionalHint,l=n.directionalHintFixed,u=n.hidden,c=n.gapSpace,d=n.beakWidth,f=n.isBeakVisible,g=n.coverTarget,m=A.useState(),y=m[0],S=m[1],b=(i=r?.elementPosition)!==null&&i!==void 0?i:{},E=b.top,w=b.bottom,C=t?.current?JI(t.current):void 0;return A.useEffect(function(){var T,D=(T=e())!==null&&T!==void 0?T:{},k=D.top,M=D.bottom,N;r?.targetEdge===Le.top&&C?.top&&!g&&(M=C.top-ZI(f,d,c)),typeof E=="number"&&M?N=M-E:typeof w=="number"&&typeof k=="number"&&M&&(N=M-k-w),!o&&!u||o&&N&&o>N?S(N):S(o||void 0)},[w,o,s,a,l,e,u,r,E,c,d,f,C,g]),y}function pR(n,e,t,r,i,o){var s=A.useState(),a=s[0],l=s[1],u=A.useRef(0),c=A.useRef(void 0),d=ul(),f=n.hidden,g=n.target,m=n.finalHeight,y=n.calloutMaxHeight,S=n.onPositioned,b=n.directionalHint,E=n.hideOverflow,w=n.preferScrollResizePositioning,C=TC(),T=A.useRef(void 0),D;T.current!==o.current&&(T.current=o.current,D=o.current?C?.getComputedStyle(o.current):void 0);var k=D?.overflowY;return A.useEffect(function(){if(f)l(void 0),u.current=0;else{var M=d.requestAnimationFrame(function(){var N,U;if(e.current&&t){var ne=H(H({},n),{target:r.current,bounds:i()}),oe=t.cloneNode(!0);oe.style.maxHeight=y?"".concat(y):"",oe.style.visibility="hidden",(N=t.parentElement)===null||N===void 0||N.appendChild(oe);var ae=c.current===g?a:void 0,te=E||k==="clip"||k==="hidden",we=w&&!te,J=m?qI(ne,e.current,oe,ae,C):GI(ne,e.current,oe,ae,we,void 0,C);(U=t.parentElement)===null||U===void 0||U.removeChild(oe),!a&&J||a&&J&&!yR(a,J)&&u.current<5?(u.current++,l(J)):u.current>0&&(u.current=0,S?.(a))}},t);return c.current=g,function(){d.cancelAnimationFrame(M),c.current=void 0}}},[f,b,d,t,y,e,r,m,i,S,a,n,g,E,w,k,C]),a}function gR(n,e,t){var r=n.hidden,i=n.setInitialFocus,o=ul(),s=!!e;A.useEffect(function(){if(!r&&i&&s&&t){var a=o.requestAnimationFrame(function(){return QD(t)},t);return function(){return o.cancelAnimationFrame(a)}}},[r,s,o,t,i])}function mR(n,e,t,r,i){var o=n.hidden,s=n.onDismiss,a=n.preventDismissOnScroll,l=n.preventDismissOnResize,u=n.preventDismissOnLostFocus,c=n.dismissOnTargetClick,d=n.shouldDismissOnWindowFocus,f=n.preventDismissOnEvent,g=A.useRef(!1),m=ul(),y=ri([function(){g.current=!0},function(){g.current=!1}]),S=!!e;return A.useEffect(function(){var b=function(k){S&&!a&&C(k)},E=function(k){!l&&!(f&&f(k))&&s?.(k)},w=function(k){u||C(k)},C=function(k){var M=k.composedPath?k.composedPath():[],N=M.length>0?M[0]:k.target,U=t.current&&!_r(t.current,N);if(U&&g.current){g.current=!1;return}if(!r.current&&U||k.target!==i&&U&&(!r.current||"stopPropagation"in r.current||c||N!==r.current&&!_r(r.current,N))){if(f&&f(k))return;s?.(k)}},T=function(k){d&&(f&&!f(k)||!f&&!u)&&!i?.document.hasFocus()&&k.relatedTarget===null&&s?.(k)},D=new Promise(function(k){m.setTimeout(function(){if(!o&&i){var M=[qi(i,"scroll",b,!0),qi(i,"resize",E,!0),qi(i.document.documentElement,"focus",w,!0),qi(i.document.documentElement,"click",w,!0),qi(i,"blur",T,!0)];k(function(){M.forEach(function(N){return N()})})}},0)});return function(){D.then(function(k){return k()})}},[o,m,t,r,i,s,d,c,u,l,a,S,f]),y}var PC=A.memo(A.forwardRef(function(n,e){var t=Xu(DC,n),r=t.styles,i=t.style,o=t.ariaLabel,s=t.ariaDescribedBy,a=t.ariaLabelledBy,l=t.className,u=t.isBeakVisible,c=t.children,d=t.beakWidth,f=t.calloutWidth,g=t.calloutMaxWidth,m=t.calloutMinWidth,y=t.doNotLayer,S=t.finalHeight,b=t.hideOverflow,E=b===void 0?!!S:b,w=t.backgroundColor,C=t.calloutMaxHeight,T=t.onScroll,D=t.shouldRestoreFocus,k=D===void 0?!0:D,M=t.target,N=t.hidden,U=t.onLayerMounted,ne=t.popupProps,oe=A.useRef(null),ae=A.useRef(null),te=Ti(ae,ne?.ref),we=A.useState(null),J=we[0],Q=we[1],G=A.useCallback(function(Ct){Q(Ct)},[]),re=Ti(oe,e),ie=FC(t.target,{current:J}),Ce=ie[0],Te=ie[1],Oe=hR(t,Ce,Te),De=pR(t,oe,J,Ce,Oe,te),pt=fR(t,Oe,Ce,De),He=mR(t,De,oe,Ce,Te),fe=He[0],nt=He[1],me=De?.elementPosition.top&&De?.elementPosition.bottom,Qe=H(H({},De?.elementPosition),{maxHeight:pt});if(me&&(Qe.bottom=void 0),gR(t,De,J),A.useEffect(function(){N||U?.()},[N]),!Te)return null;var wt=E,ze=u&&!!M,bt=dR(r,{theme:t.theme,className:l,overflowYHidden:wt,calloutWidth:f,positions:De,beakWidth:d,backgroundColor:w,calloutMaxWidth:g,calloutMinWidth:m,doNotLayer:y}),je=H(H({maxHeight:C||"100%"},i),wt&&{overflowY:"hidden"}),mt=t.hidden?{visibility:"hidden"}:void 0;return A.createElement("div",{ref:re,className:bt.container,style:mt},A.createElement("div",H({},an(t,ms,cR),{className:Nr(bt.root,De&&De.targetEdge&&lR[De.targetEdge]),style:De?H({},Qe):uR,tabIndex:-1,ref:G}),ze&&A.createElement("div",{className:bt.beak,style:vR(De)}),ze&&A.createElement("div",{className:bt.beakCurtain}),A.createElement(rv,H({role:t.role,"aria-roledescription":t["aria-roledescription"],ariaDescribedBy:s,ariaLabel:o,ariaLabelledBy:a,className:bt.calloutMain,onDismiss:t.onDismiss,onMouseDown:fe,onMouseUp:nt,onRestoreFocus:t.onRestoreFocus,onScroll:T,shouldRestoreFocus:k,style:je},ne,{ref:te}),c)))}),function(n,e){return!e.shouldUpdateWhenHidden&&n.hidden&&e.hidden?!0:Zm(n,e)});function vR(n){var e,t,r=H(H({},(e=n?.beakPosition)===null||e===void 0?void 0:e.elementPosition),{display:!((t=n?.beakPosition)===null||t===void 0)&&t.hideBeak?"none":void 0});return!r.top&&!r.bottom&&!r.left&&!r.right&&(r.left=ab.left,r.top=ab.top),r}function yR(n,e){return lb(n.elementPosition,e.elementPosition)&&lb(n.beakPosition.elementPosition,e.beakPosition.elementPosition)}function lb(n,e){for(var t in e)if(e.hasOwnProperty(t)){var r=n[t],i=e[t];if(r!==void 0&&i!==void 0){if(r.toFixed(2)!==i.toFixed(2))return!1}else return!1}return!0}PC.displayName=aR;function bR(n){return{height:n,width:n}}var ER={container:"ms-Callout-container",root:"ms-Callout",beak:"ms-Callout-beak",beakCurtain:"ms-Callout-beakCurtain",calloutMain:"ms-Callout-main"},_R=function(n){var e,t=n.theme,r=n.className,i=n.overflowYHidden,o=n.calloutWidth,s=n.beakWidth,a=n.backgroundColor,l=n.calloutMaxWidth,u=n.calloutMinWidth,c=n.doNotLayer,d=Ar(ER,t),f=t.semanticColors,g=t.effects;return{container:[d.container,{position:"relative"}],root:[d.root,t.fonts.medium,{position:"absolute",display:"flex",zIndex:c?Qa.Layer:void 0,boxSizing:"border-box",borderRadius:g.roundedCorner2,boxShadow:g.elevation16,selectors:(e={},e[Ke]={borderWidth:1,borderStyle:"solid",borderColor:"WindowText"},e)},dI(),r,!!o&&{width:o},!!l&&{maxWidth:l},!!u&&{minWidth:u}],beak:[d.beak,{position:"absolute",backgroundColor:f.menuBackground,boxShadow:"inherit",border:"inherit",boxSizing:"border-box",transform:"rotate(45deg)"},bR(s),a&&{backgroundColor:a}],beakCurtain:[d.beakCurtain,{position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:f.menuBackground,borderRadius:g.roundedCorner2}],calloutMain:[d.calloutMain,{backgroundColor:f.menuBackground,overflowX:"hidden",overflowY:"auto",position:"relative",width:"100%",borderRadius:g.roundedCorner2},i&&{overflowY:"hidden"},a&&{backgroundColor:a}]}},wR=Un(PC,_R,void 0,{scope:"CalloutContent"}),MC=A.createContext(void 0),CR=function(){return function(){}};MC.Provider;function SR(){var n;return(n=A.useContext(MC))!==null&&n!==void 0?n:CR}var xR=Wn(),AR=zt(function(n,e){return Yu(H(H({},n),{rtl:e}))}),FR=function(n){var e=n.theme,t=n.dir,r=ir(e)?"rtl":"ltr",i=ir()?"rtl":"ltr",o=t||r;return{rootDir:o!==r||o!==i?o:t,needsTheme:o!==r}},IC=A.forwardRef(function(n,e){var t=n.className,r=n.theme,i=n.applyTheme,o=n.applyThemeToBody,s=n.styles,a=xR(s,{theme:r,applyTheme:i,className:t}),l=A.useRef(null);return TR(o,a,l),A.createElement(A.Fragment,null,kR(n,a,l,e))});IC.displayName="FabricBase";function kR(n,e,t,r){var i=e.root,o=n.as,s=o===void 0?"div":o,a=n.dir,l=n.theme,u=an(n,ms,["dir"]),c=FR(n),d=c.rootDir,f=c.needsTheme,g=A.createElement(hC,{providerRef:t},A.createElement(s,H({dir:d},u,{className:i,ref:Ti(t,r)})));return f&&(g=A.createElement(DP,{settings:{theme:AR(l,a==="rtl")}},g)),g}function TR(n,e,t){var r=e.bodyThemed;return A.useEffect(function(){if(n){var i=Cn(t.current);if(i)return i.body.classList.add(r),function(){i.body.classList.remove(r)}}},[r,n,t]),t}var lp={fontFamily:"inherit"},DR={root:"ms-Fabric",bodyThemed:"ms-Fabric-bodyThemed"},PR=function(n){var e=n.applyTheme,t=n.className,r=n.preventBlanketFontInheritance,i=n.theme,o=Ar(DR,i);return{root:[o.root,i.fonts.medium,{color:i.palette.neutralPrimary},!r&&{"& button":lp,"& input":lp,"& textarea":lp},e&&{color:i.semanticColors.bodyText,backgroundColor:i.semanticColors.bodyBackground},t],bodyThemed:[{backgroundColor:i.semanticColors.bodyBackground}]}},MR=Un(IC,PR,void 0,{scope:"Fabric"}),su={},iv={},RC="fluent-default-layer-host",IR="#".concat(RC);function RR(n,e){su[n]||(su[n]=[]),su[n].push(e);var t=iv[n];if(t)for(var r=0,i=t;r<i.length;r++){var o=i[r];o.notifyLayersChanged()}}function LR(n,e){var t=su[n];if(t){var r=t.indexOf(e);r>=0&&(t.splice(r,1),t.length===0&&delete su[n])}var i=iv[n];if(i)for(var o=0,s=i;o<s.length;o++){var a=s[o];a.notifyLayersChanged()}}function NR(n){var e=iv[n];return e&&e[0]||void 0}function BR(n,e){e===void 0&&(e=null);var t=n.createElement("div");return t.setAttribute("id",RC),t.style.cssText="position:fixed;z-index:1000000",e?e.appendChild(t):n?.body.appendChild(t),t}function OR(){return IR}var HR=Wn(),zR=function(n){return n?.current?n.current.classList.contains(gt):!1},LC=A.forwardRef(function(n,e){var t=SR(),r=A.useRef(null),i=Ti(r,e),o=A.useRef(void 0),s=A.useRef(null),a=A.useContext(Tu),l=A.useState(!1),u=l[0],c=l[1],d=A.useCallback(function(te){var we=zR(a?.providerRef);te&&we&&te.classList.add(gt)},[a]),f=n.children,g=n.className,m=n.eventBubblingEnabled,y=n.fabricProps,S=n.hostId,b=n.insertFirst,E=n.onLayerDidMount,w=E===void 0?function(){}:E,C=n.onLayerMounted,T=C===void 0?function(){}:C,D=n.onLayerWillUnmount,k=n.styles,M=n.theme,N=Ti(s,y?.ref,d),U=HR(k,{theme:M,className:g,isNotHost:!S}),ne=function(te,we){var J,Q;we===void 0&&(we=null);var G=we??te;if(S){var re=NR(S);return re?(J=re.rootRef.current)!==null&&J!==void 0?J:null:(Q=G.getElementById(S))!==null&&Q!==void 0?Q:null}else{var ie=OR(),Ce=ie?G.querySelector(ie):null;return Ce||(Ce=BR(te,we)),Ce}},oe=function(){D?.();var te=o.current;o.current=void 0,te&&te.parentNode&&te.parentNode.removeChild(te)},ae=function(){var te,we,J,Q,G=Cn(r.current),re=!((we=(te=r.current)===null||te===void 0?void 0:te.getRootNode())===null||we===void 0)&&we.host?(J=r?.current)===null||J===void 0?void 0:J.getRootNode():void 0;if(!(!G||!G&&!re)){var ie=ne(G,re);if(ie){ie.__tabsterElementFlags||(ie.__tabsterElementFlags={}),ie.__tabsterElementFlags.noDirectAriaHidden=!0,oe();var Ce=((Q=ie.ownerDocument)!==null&&Q!==void 0?Q:G).createElement("div");Ce.className=U.root,jD(Ce),WD(Ce,r.current),b?ie.insertBefore(Ce,ie.firstChild):ie.appendChild(Ce),o.current=Ce,c(!0)}}};return Ya(function(){ae(),S&&RR(S,ae);var te=o.current?t(o.current):void 0;return function(){te&&te(),oe(),S&&LR(S,ae)}},[S]),A.useEffect(function(){o.current&&u&&(T?.(),w?.(),c(!1))},[u,T,w]),A.createElement("span",{className:"ms-layer",ref:i},o.current&&il.createPortal(A.createElement(hC,{layerRoot:!0,providerRef:N},A.createElement(MR,H({},!m&&WR(),y,{className:Nr(U.content,y?.className),ref:N}),f)),o.current))});LC.displayName="LayerBase";var Gc,jR=function(n){n.eventPhase===Event.BUBBLING_PHASE&&n.type!=="mouseenter"&&n.type!=="mouseleave"&&n.type!=="touchstart"&&n.type!=="touchend"&&n.stopPropagation()};function WR(){return Gc||(Gc={},["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOver","onMouseOut","onMouseUp","onTouchMove","onTouchStart","onTouchCancel","onTouchEnd","onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onInvalid","onSubmit"].forEach(function(n){return Gc[n]=jR})),Gc}var UR={root:"ms-Layer",rootNoHost:"ms-Layer--fixed",content:"ms-Layer-content"},VR=function(n){var e=n.className,t=n.isNotHost,r=n.theme,i=Ar(UR,r);return{root:[i.root,r.fonts.medium,t&&[i.rootNoHost,{position:"fixed",zIndex:Qa.Layer,top:0,left:0,bottom:0,right:0,visibility:"hidden"}],e],content:[i.content,{visibility:"visible"}]}},NC=Un(LC,VR,void 0,{scope:"Layer",fields:["hostId","theme","styles"]}),ov=A.forwardRef(function(n,e){var t=n.layerProps,r=n.doNotLayer,i=ol(n,["layerProps","doNotLayer"]),o=A.createElement(wR,H({},i,{doNotLayer:r,ref:e}));return r?o:A.createElement(NC,H({},t),o)});ov.displayName="Callout";var KR="FocusTrapZone",$R={disabled:!1,disableFirstFocus:!1,forceFocusInsideTrap:!0,isClickableOutsideFocusTrap:!1,"data-tabster":'{"uncontrolled": {"completely": true}}'},GR=function(n,e,t){A.useImperativeHandle(n,function(){return{get previouslyFocusedElement(){return e},focus:t}},[t,e])},Rs=A.forwardRef(function(n,e){var t,r=A.useRef(null),i=A.useRef(null),o=A.useRef(null),s=Ti(r,e),a=BP(),l=TC(),u=LP(),c=(t=nv(!1))!==null&&t!==void 0?t:!0,d=Xu($R,n),f=ri({hasFocus:!1,focusStackId:Qu("ftz-",d.id)}),g=d.children,m=d.componentRef,y=d.disabled,S=d.disableFirstFocus,b=d.forceFocusInsideTrap,E=d.focusPreviouslyFocusedInnerElement,w=d.firstFocusableSelector,C=d.firstFocusableTarget,T=d.disableRestoreFocus,D=T===void 0?d.ignoreExternalFocusing:T,k=d.isClickableOutsideFocusTrap,M=d.enableAriaHiddenSiblings,N={"aria-hidden":!0,style:{pointerEvents:"none",position:"fixed"},tabIndex:y?-1:0,"data-is-visible":!0,"data-is-focus-trap-zone-bumper":!0},U=A.useCallback(function(Q){Q!==i.current&&Q!==o.current&&Kw(Q)},[]),ne=ap(function(){if(r.current){var Q=f.previouslyFocusedElementInTrapZone;if(E&&Q&&_r(r.current,Q)){U(Q);return}var G=null;if(typeof C=="string")G=r.current.querySelector(C);else if(C)G=C(r.current);else if(w){var re=typeof w=="string"?w:w();G=r.current.querySelector("."+re)}G||(G=nr(r.current,r.current.firstChild,!1,!1,!1,!0,void 0,void 0,void 0,u)),G&&U(G)}}),oe=function(Q){if(!(y||!r.current)){var G=Q===f.hasFocus?YD(r.current,o.current,!0,!1,u):XD(r.current,i.current,!0,!1,u);G&&(G===i.current||G===o.current?ne():G.focus())}},ae=function(Q){var G;(G=d.onBlurCapture)===null||G===void 0||G.call(d,Q);var re=Q.relatedTarget;Q.relatedTarget===null&&(re=Uc(a)),_r(r.current,re)||(f.hasFocus=!1)},te=function(Q){var G;(G=d.onFocusCapture)===null||G===void 0||G.call(d,Q),Q.target===i.current?oe(!0):Q.target===o.current&&oe(!1),f.hasFocus=!0,Q.target!==Q.currentTarget&&!(Q.target===i.current||Q.target===o.current)&&(f.previouslyFocusedElementInTrapZone=N0(Q.nativeEvent))},we=ap(function(Q){if(Rs.focusStack=Rs.focusStack.filter(function(re){return f.focusStackId!==re}),!!a){var G=a.activeElement;!D&&typeof Q?.focus=="function"&&(_r(r.current,G)||G===a.body||G.shadowRoot)&&U(Q)}}),J=ap(function(Q){if(!y&&f.focusStackId===Rs.focusStack.slice(-1)[0]){var G=N0(Q);G&&!_r(r.current,G)&&(a&&Uc(a)===a.body?setTimeout(function(){a&&Uc(a)===a.body&&(ne(),f.hasFocus=!0)},0):(ne(),f.hasFocus=!0),Q.preventDefault(),Q.stopPropagation())}});return A.useEffect(function(){var Q=[];return b&&Q.push(qi(l,"focus",J,!0)),k||Q.push(qi(l,"click",J,!0)),function(){Q.forEach(function(G){return G()})}},[b,k,l]),A.useEffect(function(){if(!(y||!c&&!b||!r.current)){Rs.focusStack.push(f.focusStackId);var Q=d.elementToFocusOnDismiss||Uc(a);return!S&&!_r(r.current,Q)&&ne(),function(){return we(Q)}}},[b,y]),A.useEffect(function(){if(!y&&M){var Q=pC(r.current);return Q}},[y,M,r]),kC(function(){delete f.previouslyFocusedElementInTrapZone}),GR(m,f.previouslyFocusedElementInTrapZone,ne),A.createElement("div",H({"aria-labelledby":d.ariaLabelledBy},an(d,ms),{ref:s,onFocusCapture:te,onBlurCapture:ae}),A.createElement("div",H({},N,{ref:i})),g,A.createElement("div",H({},N,{ref:o})))});Rs.displayName=KR;Rs.focusStack=[];var qR=Wn(),XR=function(n){Lt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._onRenderContent=function(r){return typeof r.content=="string"?A.createElement("p",{className:t._classNames.subText},r.content):A.createElement("div",{className:t._classNames.subText},r.content)},t}return e.prototype.render=function(){var t=this.props,r=t.className,i=t.calloutProps,o=t.directionalHint,s=t.directionalHintForRTL,a=t.styles,l=t.id,u=t.maxWidth,c=t.onRenderContent,d=c===void 0?this._onRenderContent:c,f=t.targetElement,g=t.theme;return this._classNames=qR(a,{theme:g,className:r||i&&i.className,beakWidth:i&&i.isBeakVisible?i.beakWidth:0,gapSpace:i&&i.gapSpace,maxWidth:u}),A.createElement(ov,H({target:f,directionalHint:o,directionalHintForRTL:s},i,an(this.props,ms,["id"]),{className:this._classNames.root}),A.createElement("div",{className:this._classNames.content,id:l,onFocus:this.props.onFocus,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},d(this.props,this._onRenderContent)))},e.defaultProps={directionalHint:Ut.topCenter,maxWidth:"364px",calloutProps:{isBeakVisible:!0,beakWidth:16,gapSpace:0,setInitialFocus:!0,doNotLayer:!1}},e}(A.Component),YR=function(n){var e=n.className,t=n.beakWidth,r=t===void 0?16:t,i=n.gapSpace,o=i===void 0?0:i,s=n.maxWidth,a=n.theme,l=a.semanticColors,u=a.fonts,c=a.effects,d=-(Math.sqrt(r*r/2)+o)+1/window.devicePixelRatio;return{root:["ms-Tooltip",a.fonts.medium,Ta.fadeIn200,{background:l.menuBackground,boxShadow:c.elevation8,padding:"8px",maxWidth:s,selectors:{":after":{content:"''",position:"absolute",bottom:d,left:d,right:d,top:d,zIndex:0}}},e],content:["ms-Tooltip-content",u.small,{position:"relative",zIndex:1,color:l.menuItemText,wordWrap:"break-word",overflowWrap:"break-word",overflow:"hidden"}],subText:["ms-Tooltip-subtext",{fontSize:"inherit",fontWeight:"inherit",color:"inherit",margin:0}]}},QR=Un(XR,YR,void 0,{scope:"Tooltip"}),Da;(function(n){n[n.zero=0]="zero",n[n.medium=1]="medium",n[n.long=2]="long"})(Da||(Da={}));var qd;(function(n){n[n.Parent=0]="Parent",n[n.Self=1]="Self"})(qd||(qd={}));var ZR=Wn(),JR=function(n){Lt(e,n);function e(t){var r=n.call(this,t)||this;return r._tooltipHost=A.createRef(),r._defaultTooltipId=ni("tooltip"),r.show=function(){r._toggleTooltip(!0)},r.dismiss=function(){r._hideTooltip()},r._getTargetElement=function(){if(r._tooltipHost.current){var i=r.props.overflowMode;if(i!==void 0)switch(i){case qd.Parent:return r._tooltipHost.current.parentElement;case qd.Self:return r._tooltipHost.current}return r._tooltipHost.current}},r._onTooltipFocus=function(i){if(r._ignoreNextFocusEvent){r._ignoreNextFocusEvent=!1;return}r._onTooltipMouseEnter(i)},r._onTooltipContentFocus=function(i){e._currentVisibleTooltip&&e._currentVisibleTooltip!==r&&e._currentVisibleTooltip.dismiss(),e._currentVisibleTooltip=r,r._clearDismissTimer(),r._clearOpenTimer()},r._onTooltipBlur=function(i){var o;r._ignoreNextFocusEvent=((o=Gd(r.context))===null||o===void 0?void 0:o.activeElement)===i.target,r._dismissTimerId=r._async.setTimeout(function(){r._hideTooltip()},0)},r._onTooltipMouseEnter=function(i){var o=r.props,s=o.overflowMode,a=o.delay,l=Gd(r.context);if(e._currentVisibleTooltip&&e._currentVisibleTooltip!==r&&e._currentVisibleTooltip.dismiss(),e._currentVisibleTooltip=r,s!==void 0){var u=r._getTargetElement();if(u&&!dM(u))return}if(!(i.target&&Ym(i.target,r._getTargetElement(),l)))if(r._clearDismissTimer(),r._clearOpenTimer(),a!==Da.zero){var c=r._getDelayTime(a);r._openTimerId=r._async.setTimeout(function(){r._toggleTooltip(!0)},c)}else r._toggleTooltip(!0)},r._onTooltipMouseLeave=function(i){var o=r.props.closeDelay;r._clearDismissTimer(),r._clearOpenTimer(),o?r._dismissTimerId=r._async.setTimeout(function(){r._toggleTooltip(!1)},o):r._toggleTooltip(!1),e._currentVisibleTooltip===r&&(e._currentVisibleTooltip=void 0)},r._onTooltipKeyDown=function(i){(i.which===Re.escape||i.ctrlKey)&&r.state.isTooltipVisible&&(r._hideTooltip(),i.stopPropagation())},r._clearDismissTimer=function(){r._async.clearTimeout(r._dismissTimerId)},r._clearOpenTimer=function(){r._async.clearTimeout(r._openTimerId)},r._hideTooltip=function(){r._clearOpenTimer(),r._clearDismissTimer(),r._toggleTooltip(!1)},r._toggleTooltip=function(i){r.state.isTooltipVisible!==i&&r.setState({isTooltipVisible:i},function(){return r.props.onTooltipToggle&&r.props.onTooltipToggle(i)})},r._getDelayTime=function(i){switch(i){case Da.medium:return 300;case Da.long:return 500;default:return 0}},vs(r),r.state={isAriaPlaceholderRendered:!1,isTooltipVisible:!1},r}return e.prototype.render=function(){var t=this.props,r=t.calloutProps,i=t.children,o=t.content,s=t.directionalHint,a=t.directionalHintForRTL,l=t.hostClassName,u=t.id,c=t.setAriaDescribedBy,d=c===void 0?!0:c,f=t.tooltipProps,g=t.styles,m=t.theme;this._classNames=ZR(g,{theme:m,className:l});var y=this.state.isTooltipVisible,S=u||this._defaultTooltipId,b=H(H({id:"".concat(S,"--tooltip"),content:o,targetElement:this._getTargetElement(),directionalHint:s,directionalHintForRTL:a,calloutProps:Xo({},r,{onDismiss:this._hideTooltip,onFocus:this._onTooltipContentFocus,onMouseEnter:this._onTooltipMouseEnter,onMouseLeave:this._onTooltipMouseLeave}),onMouseEnter:this._onTooltipMouseEnter,onMouseLeave:this._onTooltipMouseLeave},an(this.props,ms,["id"])),f),E=f?.onRenderContent?f.onRenderContent(b,function(T){return T?.content?A.createElement(A.Fragment,null,T.content):null}):o,w=y&&!!E,C=d&&y&&E?S:void 0;return A.createElement("div",{className:this._classNames.root,ref:this._tooltipHost,onFocusCapture:this._onTooltipFocus,onBlurCapture:this._onTooltipBlur,onMouseEnter:this._onTooltipMouseEnter,onMouseLeave:this._onTooltipMouseLeave,onKeyDown:this._onTooltipKeyDown,role:"none","aria-describedby":C},i,w&&A.createElement(QR,H({},b)),A.createElement("div",{hidden:!0,id:S,style:ev},E))},e.prototype.componentDidMount=function(){this._async=new $u(this)},e.prototype.componentWillUnmount=function(){e._currentVisibleTooltip&&e._currentVisibleTooltip===this&&(e._currentVisibleTooltip=void 0),this._async.dispose()},e.defaultProps={delay:Da.medium},e.contextType=al,e}(A.Component),eL={root:"ms-TooltipHost",ariaPlaceholder:"ms-TooltipHost-aria-placeholder"},tL=function(n){var e=n.className,t=n.theme,r=Ar(eL,t);return{root:[r.root,{display:"inline"},e]}},Vo=Un(JR,tL,void 0,{scope:"TooltipHost"}),Xd;(function(n){n[n.default=0]="default",n[n.image=1]="image",n[n.Default=1e5]="Default",n[n.Image=100001]="Image"})(Xd||(Xd={}));var Er;(function(n){n[n.center=0]="center",n[n.contain=1]="contain",n[n.cover=2]="cover",n[n.none=3]="none",n[n.centerCover=4]="centerCover",n[n.centerContain=5]="centerContain"})(Er||(Er={}));var Iu;(function(n){n[n.landscape=0]="landscape",n[n.portrait=1]="portrait"})(Iu||(Iu={}));var rr;(function(n){n[n.notLoaded=0]="notLoaded",n[n.loaded=1]="loaded",n[n.error=2]="error",n[n.errorLoaded=3]="errorLoaded"})(rr||(rr={}));var nL=Wn(),rL=/\.svg$/i,iL="fabricImage";function oL(n,e){var t=n.onLoadingStateChange,r=n.onLoad,i=n.onError,o=n.src,s=A.useState(rr.notLoaded),a=s[0],l=s[1];Ya(function(){l(rr.notLoaded)},[o]),A.useEffect(function(){if(a===rr.notLoaded){var d=e.current?o&&e.current.naturalWidth>0&&e.current.naturalHeight>0||e.current.complete&&rL.test(o):!1;d&&l(rr.loaded)}}),A.useEffect(function(){t?.(a)},[a]);var u=A.useCallback(function(d){r?.(d),o&&l(rr.loaded)},[o,r]),c=A.useCallback(function(d){i?.(d),l(rr.error)},[i]);return[a,u,c]}var BC=A.forwardRef(function(n,e){var t=A.useRef(void 0),r=A.useRef(void 0),i=oL(n,r),o=i[0],s=i[1],a=i[2],l=an(n,XP,["width","height"]),u=n.src,c=n.alt,d=n.width,f=n.height,g=n.shouldFadeIn,m=g===void 0?!0:g,y=n.shouldStartVisible,S=n.className,b=n.imageFit,E=n.role,w=n.maximizeFrame,C=n.styles,T=n.theme,D=n.loading,k=sL(n,o,r,t),M=nL(C,{theme:T,className:S,width:d,height:f,maximizeFrame:w,shouldFadeIn:m,shouldStartVisible:y,isLoaded:o===rr.loaded||o===rr.notLoaded&&n.shouldStartVisible,isLandscape:k===Iu.landscape,isCenter:b===Er.center,isCenterContain:b===Er.centerContain,isCenterCover:b===Er.centerCover,isContain:b===Er.contain,isCover:b===Er.cover,isNone:b===Er.none,isError:o===rr.error,isNotImageFit:b===void 0});return A.createElement("div",{className:M.root,style:{width:d,height:f},ref:t},A.createElement("img",H({},l,{onLoad:s,onError:a,key:iL+n.src||"",className:M.image,ref:Ti(r,e),src:u,alt:c,role:E,loading:D})))});BC.displayName="ImageBase";function sL(n,e,t,r){var i=A.useRef(e),o=A.useRef(void 0);return(o===void 0||i.current===rr.notLoaded&&e===rr.loaded)&&(o.current=aL(n,e,t,r)),i.current=e,o.current}function aL(n,e,t,r){var i=n.imageFit,o=n.width,s=n.height;if(n.coverStyle!==void 0)return n.coverStyle;if(e===rr.loaded&&(i===Er.cover||i===Er.contain||i===Er.centerContain||i===Er.centerCover)&&t.current&&r.current){var a=void 0;typeof o=="number"&&typeof s=="number"&&i!==Er.centerContain&&i!==Er.centerCover?a=o/s:a=r.current.clientWidth/r.current.clientHeight;var l=t.current.naturalWidth/t.current.naturalHeight;if(l>a)return Iu.landscape}return Iu.portrait}var lL={root:"ms-Image",rootMaximizeFrame:"ms-Image--maximizeFrame",image:"ms-Image-image",imageCenter:"ms-Image-image--center",imageContain:"ms-Image-image--contain",imageCover:"ms-Image-image--cover",imageCenterContain:"ms-Image-image--centerContain",imageCenterCover:"ms-Image-image--centerCover",imageNone:"ms-Image-image--none",imageLandscape:"ms-Image-image--landscape",imagePortrait:"ms-Image-image--portrait"},uL=function(n){var e=n.className,t=n.width,r=n.height,i=n.maximizeFrame,o=n.isLoaded,s=n.shouldFadeIn,a=n.shouldStartVisible,l=n.isLandscape,u=n.isCenter,c=n.isContain,d=n.isCover,f=n.isCenterContain,g=n.isCenterCover,m=n.isNone,y=n.isError,S=n.isNotImageFit,b=n.theme,E=Ar(lL,b),w={position:"absolute",left:"50% /* @noflip */",top:"50%",transform:"translate(-50%,-50%)"},C=Ft(),T=C!==void 0&&C.navigator.msMaxTouchPoints===void 0,D=c&&l||d&&!l?{width:"100%",height:"auto"}:{width:"auto",height:"100%"};return{root:[E.root,b.fonts.medium,{overflow:"hidden"},i&&[E.rootMaximizeFrame,{height:"100%",width:"100%"}],o&&s&&!a&&Ta.fadeIn400,(u||c||d||f||g)&&{position:"relative"},e],image:[E.image,{display:"block",opacity:0},o&&["is-loaded",{opacity:1}],u&&[E.imageCenter,w],c&&[E.imageContain,T&&{width:"100%",height:"100%",objectFit:"contain"},!T&&D,!T&&w],d&&[E.imageCover,T&&{width:"100%",height:"100%",objectFit:"cover"},!T&&D,!T&&w],f&&[E.imageCenterContain,l&&{maxWidth:"100%"},!l&&{maxHeight:"100%"},w],g&&[E.imageCenterCover,l&&{maxHeight:"100%"},!l&&{maxWidth:"100%"},w],m&&[E.imageNone,{width:"auto",height:"auto"}],S&&[!!t&&!r&&{height:"auto",width:"100%"},!t&&!!r&&{height:"100%",width:"auto"},!!t&&!!r&&{height:"100%",width:"100%"}],l&&E.imageLandscape,!l&&E.imagePortrait,!o&&"is-notLoaded",s&&"is-fadeIn",y&&"is-error"]}},sv=Un(BC,uL,void 0,{scope:"Image"},!0);sv.displayName="Image";var Hs=Ku({root:{display:"inline-block",textDecoration:"inherit"},placeholder:["ms-Icon-placeHolder",{width:"1em"}],image:["ms-Icon-imageContainer",{overflow:"hidden"}]}),OC="ms-Icon",cL=function(n){var e=n.className,t=n.iconClassName,r=n.isPlaceholder,i=n.isImage,o=n.styles;return{root:[r&&Hs.placeholder,Hs.root,i&&Hs.image,t,e,o&&o.root,o&&o.imageContainer]}},HC=zt(function(n){var e=yM(n)||{subset:{},code:void 0},t=e.code,r=e.subset;return t?{children:t,iconClassName:r.className,fontFamily:r.fontFace&&r.fontFace.fontFamily,mergeImageProps:r.mergeImageProps}:null},void 0,!0),Fg=function(n){var e=n.iconName,t=n.className,r=n.style,i=r===void 0?{}:r,o=HC(e)||{},s=o.iconClassName,a=o.children,l=o.fontFamily,u=o.mergeImageProps,c=an(n,ln),d=n["aria-label"]||n.title,f=n["aria-label"]||n["aria-labelledby"]||n.title?{role:u?void 0:"img"}:{"aria-hidden":!0},g=a;return u&&typeof a=="object"&&typeof a.props=="object"&&d&&(g=A.cloneElement(a,{alt:d})),A.createElement("i",H({"data-icon-name":e},f,c,u?{title:void 0,"aria-label":void 0}:{},{className:Nr(OC,Hs.root,s,!e&&Hs.placeholder,t),style:H({fontFamily:l},i)}),g)};zt(function(n,e,t){return Fg({iconName:n,className:e,"aria-label":t})});var dL=Wn({cacheSize:100}),hL=function(n){Lt(e,n);function e(t){var r=n.call(this,t)||this;return r._onImageLoadingStateChange=function(i){r.props.imageProps&&r.props.imageProps.onLoadingStateChange&&r.props.imageProps.onLoadingStateChange(i),i===rr.error&&r.setState({imageLoadError:!0})},r.state={imageLoadError:!1},r}return e.prototype.render=function(){var t=this.props,r=t.children,i=t.className,o=t.styles,s=t.iconName,a=t.imageErrorAs,l=t.theme,u=typeof s=="string"&&s.length===0,c=!!this.props.imageProps||this.props.iconType===Xd.image||this.props.iconType===Xd.Image,d=HC(s)||{},f=d.iconClassName,g=d.children,m=d.mergeImageProps,y=dL(o,{theme:l,className:i,iconClassName:f,isImage:c,isPlaceholder:u}),S=c?"span":"i",b=an(this.props,ln,["aria-label"]),E=this.state.imageLoadError,w=H(H({},this.props.imageProps),{onLoadingStateChange:this._onImageLoadingStateChange}),C=E&&a||sv,T=this.props["aria-label"]||this.props.ariaLabel,D=w.alt||T||this.props.title,k=!!(D||this.props["aria-labelledby"]||w["aria-label"]||w["aria-labelledby"]),M=k?{role:c||m?void 0:"img","aria-label":c||m?void 0:D}:{"aria-hidden":!0},N=g;return m&&g&&typeof g=="object"&&D&&(N=A.cloneElement(g,{alt:D})),A.createElement(S,H({"data-icon-name":s},M,b,m?{title:void 0,"aria-label":void 0}:{},{className:y.root}),c?A.createElement(C,H({},w)):r||N)},e}(A.Component),ds=Un(hL,cL,void 0,{scope:"Icon"},!0);ds.displayName="Icon";var fL=function(n){var e=n.className,t=n.imageProps,r=an(n,ln,["aria-label","aria-labelledby","title","aria-describedby"]),i=t.alt||n["aria-label"],o=i||n["aria-labelledby"]||n.title||t["aria-label"]||t["aria-labelledby"]||t.title,s={"aria-labelledby":n["aria-labelledby"],"aria-describedby":n["aria-describedby"],title:n.title},a=o?{}:{"aria-hidden":!0};return A.createElement("div",H({},a,r,{className:Nr(OC,Hs.root,Hs.image,e)}),A.createElement(sv,H({},s,t,{alt:o?i:""})))},kg={all:1,inputOnly:2},er;(function(n){n[n.vertical=0]="vertical",n[n.horizontal=1]="horizontal",n[n.bidirectional=2]="bidirectional",n[n.domOrder=3]="domOrder"})(er||(er={}));var qc="data-is-focusable",pL="data-disable-click-on-enter",up="data-focuszone-id",Oi="tabindex",cp="data-no-vertical-wrap",dp="data-no-horizontal-wrap",hp=999999999,Rl=-999999999,fp,gL="ms-FocusZone";function mL(n,e){var t;typeof MouseEvent=="function"?t=new MouseEvent("click",{ctrlKey:e?.ctrlKey,metaKey:e?.metaKey,shiftKey:e?.shiftKey,altKey:e?.altKey,bubbles:e?.bubbles,cancelable:e?.cancelable}):(t=document.createEvent("MouseEvents"),t.initMouseEvent("click",e?e.bubbles:!1,e?e.cancelable:!1,window,0,0,0,0,0,e?e.ctrlKey:!1,e?e.altKey:!1,e?e.shiftKey:!1,e?e.metaKey:!1,0,null)),n.dispatchEvent(t)}function vL(){return fp||(fp=Gi({selectors:{":focus":{outline:"none"}}},gL)),fp}var Ll={},Xc=new Set,yL=["text","number","password","email","tel","url","search","textarea"],lo=!1,bL=function(n){Lt(e,n);function e(t){var r,i,o,s,a=n.call(this,t)||this;a._root=A.createRef(),a._mergedRef=gC(),a._onFocus=function(u){if(!a._portalContainsElement(u.target)){var c=a.props,d=c.onActiveElementChanged,f=c.doNotAllowFocusEventToPropagate,g=c.stopFocusPropagation,m=c.onFocusNotification,y=c.onFocus,S=c.shouldFocusInnerElementWhenReceivedFocus,b=c.defaultTabbableElement,E=a._isImmediateDescendantOfZone(u.target),w;if(E)w=u.target;else for(var C=u.target;C&&C!==a._root.current;){if(Vi(C,void 0,a._inShadowRoot)&&a._isImmediateDescendantOfZone(C)){w=C;break}C=Ui(C,lo)}if(S&&u.target===a._root.current){var T=b&&typeof b=="function"&&a._root.current&&b(a._root.current);T&&Vi(T,void 0,a._inShadowRoot)?(w=T,T.focus()):(a.focus(!0),a._activeElement&&(w=null))}var D=!a._activeElement;w&&w!==a._activeElement&&((E||D)&&a._setFocusAlignment(w,!0,!0),a._activeElement=w,D&&a._updateTabIndexes()),d&&d(a._activeElement,u),(g||f)&&u.stopPropagation(),y?y(u):m&&m()}},a._onBlur=function(){a._setParkedFocus(!1)},a._onMouseDown=function(u){if(!a._portalContainsElement(u.target)){var c=a.props.disabled;if(!c){for(var d=u.target,f=[];d&&d!==a._root.current;)f.push(d),d=Ui(d,lo);for(;f.length&&(d=f.pop(),d&&Vi(d,void 0,a._inShadowRoot)&&a._setActiveElement(d,!0),!fo(d)););}}},a._onKeyDown=function(u,c){if(!a._portalContainsElement(u.target)){var d=a.props,f=d.direction,g=d.disabled,m=d.isInnerZoneKeystroke,y=d.pagingSupportDisabled,S=d.shouldEnterInnerZone;if(!g&&(a.props.onKeyDown&&a.props.onKeyDown(u),!u.isDefaultPrevented()&&!(a._getDocument().activeElement===a._root.current&&a._isInnerZone))){if((S&&S(u)||m&&m(u))&&a._isImmediateDescendantOfZone(u.target)){var b=a._getFirstInnerZone();if(b){if(!b.focus(!0))return}else if(Qm(u.target)){if(!a.focusElement(nr(u.target,u.target.firstChild,!0)))return}else return}else{if(u.altKey)return;switch(u.which){case Re.space:if(a._shouldRaiseClicksOnSpace&&a._tryInvokeClickForFocusable(u.target,u))break;return;case Re.left:if(f!==er.vertical&&(a._preventDefaultWhenHandled(u),a._moveFocusLeft(c)))break;return;case Re.right:if(f!==er.vertical&&(a._preventDefaultWhenHandled(u),a._moveFocusRight(c)))break;return;case Re.up:if(f!==er.horizontal&&(a._preventDefaultWhenHandled(u),a._moveFocusUp()))break;return;case Re.down:if(f!==er.horizontal&&(a._preventDefaultWhenHandled(u),a._moveFocusDown()))break;return;case Re.pageDown:if(!y&&a._moveFocusPaging(!0))break;return;case Re.pageUp:if(!y&&a._moveFocusPaging(!1))break;return;case Re.tab:if(a.props.allowTabKey||a.props.handleTabKey===kg.all||a.props.handleTabKey===kg.inputOnly&&a._isElementInput(u.target)){var E=!1;if(a._processingTabKey=!0,f===er.vertical||!a._shouldWrapFocus(a._activeElement,dp))E=u.shiftKey?a._moveFocusUp():a._moveFocusDown();else{var w=ir(c)?!u.shiftKey:u.shiftKey;E=w?a._moveFocusLeft(c):a._moveFocusRight(c)}if(a._processingTabKey=!1,E)break;a.props.shouldResetActiveElementWhenTabFromZone&&(a._activeElement=null)}return;case Re.home:if(a._isContentEditableElement(u.target)||a._isElementInput(u.target)&&!a._shouldInputLoseFocus(u.target,!1))return!1;var C=a._root.current&&a._root.current.firstChild;if(a._root.current&&C&&a.focusElement(nr(a._root.current,C,!0)))break;return;case Re.end:if(a._isContentEditableElement(u.target)||a._isElementInput(u.target)&&!a._shouldInputLoseFocus(u.target,!0))return!1;var T=a._root.current&&a._root.current.lastChild;if(a._root.current&&a.focusElement(br(a._root.current,T,!0,!0,!0)))break;return;case Re.enter:if(a._shouldRaiseClicksOnEnter&&a._tryInvokeClickForFocusable(u.target,u))break;return;default:return}}u.preventDefault(),u.stopPropagation()}}},a._getHorizontalDistanceFromCenter=function(u,c,d){var f=a._focusAlignment.left||a._focusAlignment.x||0,g=Math.floor(d.top),m=Math.floor(c.bottom),y=Math.floor(d.bottom),S=Math.floor(c.top),b=u&&g>m,E=!u&&y<S;return b||E?f>=d.left&&f<=d.left+d.width?0:Math.abs(d.left+d.width/2-f):a._shouldWrapFocus(a._activeElement,cp)?hp:Rl},vs(a),a._id=ni("FocusZone"),a._focusAlignment={left:0,top:0},a._processingTabKey=!1;var l=(i=(r=t.shouldRaiseClicks)!==null&&r!==void 0?r:e.defaultProps.shouldRaiseClicks)!==null&&i!==void 0?i:!0;return a._shouldRaiseClicksOnEnter=(o=t.shouldRaiseClicksOnEnter)!==null&&o!==void 0?o:l,a._shouldRaiseClicksOnSpace=(s=t.shouldRaiseClicksOnSpace)!==null&&s!==void 0?s:l,a}return e.getOuterZones=function(){return Xc.size},e._onKeyDownCapture=function(t){t.which===Re.tab&&Xc.forEach(function(r){return r._updateTabIndexes()})},e.prototype.componentDidMount=function(){var t,r=this._root.current;if(this._inShadowRoot=!!(!((t=this.context)===null||t===void 0)&&t.shadowRoot),Ll[this._id]=this,r){for(var i=Ui(r,lo);i&&i!==this._getDocument().body&&i.nodeType===1;){if(fo(i)){this._isInnerZone=!0;break}i=Ui(i,lo)}this._isInnerZone||(Xc.add(this),this._root.current&&this._root.current.addEventListener("keydown",e._onKeyDownCapture,!0)),this._root.current&&this._root.current.addEventListener("blur",this._onBlur,!0),this._updateTabIndexes(),this.props.defaultTabbableElement&&typeof this.props.defaultTabbableElement=="string"?this._activeElement=this._getDocument().querySelector(this.props.defaultTabbableElement):this.props.defaultActiveElement&&(this._activeElement=this._getDocument().querySelector(this.props.defaultActiveElement)),this.props.shouldFocusOnMount&&this.focus()}},e.prototype.componentDidUpdate=function(){var t,r=this._root.current,i=this._getDocument();if(this._inShadowRoot=!!(!((t=this.context)===null||t===void 0)&&t.shadowRoot),(this._activeElement&&!_r(this._root.current,this._activeElement,lo)||this._defaultFocusElement&&!_r(this._root.current,this._defaultFocusElement,lo))&&(this._activeElement=null,this._defaultFocusElement=null,this._updateTabIndexes()),!this.props.preventFocusRestoration&&i&&this._lastIndexPath&&(i.activeElement===i.body||i.activeElement===null||i.activeElement===r)){var o=JD(r,this._lastIndexPath);o?(this._setActiveElement(o,!0),o.focus(),this._setParkedFocus(!1)):this._setParkedFocus(!0)}},e.prototype.componentWillUnmount=function(){delete Ll[this._id],this._isInnerZone||(Xc.delete(this),this._root.current&&this._root.current.removeEventListener("keydown",e._onKeyDownCapture,!0)),this._root.current&&this._root.current.removeEventListener("blur",this._onBlur,!0),this._activeElement=null,this._defaultFocusElement=null},e.prototype.render=function(){var t=this,r=this.props,i=r.as,o=r.elementType,s=r.rootProps,a=r.ariaDescribedBy,l=r.ariaLabelledBy,u=r.className,c=an(this.props,ln),d=i||o||"div";this._evaluateFocusBeforeRender();var f=wI();return A.createElement(d,H({"aria-labelledby":l,"aria-describedby":a},c,s,{className:Nr(vL(),u),ref:this._mergedRef(this.props.elementRef,this._root),"data-focuszone-id":this._id,onKeyDown:function(g){return t._onKeyDown(g,f)},onFocus:this._onFocus,onMouseDownCapture:this._onMouseDown}),this.props.children)},e.prototype.focus=function(t,r){if(t===void 0&&(t=!1),r===void 0&&(r=!1),this._root.current)if(!t&&this._root.current.getAttribute(qc)==="true"&&this._isInnerZone){var i=this._getOwnerZone(this._root.current);if(i!==this._root.current){var o=Ll[i.getAttribute(up)];return!!o&&o.focusElement(this._root.current)}return!1}else{if(!t&&this._activeElement&&_r(this._root.current,this._activeElement)&&Vi(this._activeElement,void 0,this._inShadowRoot)&&(!r||Uw(this._activeElement)))return this._activeElement.focus(),!0;var s=this._root.current.firstChild;return this.focusElement(nr(this._root.current,s,!0,void 0,void 0,void 0,void 0,void 0,r))}return!1},e.prototype.focusLast=function(){if(this._root.current){var t=this._root.current&&this._root.current.lastChild;return this.focusElement(br(this._root.current,t,!0,!0,!0))}return!1},e.prototype.focusElement=function(t,r){var i=this.props,o=i.onBeforeFocus,s=i.shouldReceiveFocus;return s&&!s(t)||o&&!o(t)?!1:t?(this._setActiveElement(t,r),this._activeElement&&this._activeElement.focus(),!0):!1},e.prototype.setFocusAlignment=function(t){this._focusAlignment=t},Object.defineProperty(e.prototype,"defaultFocusElement",{get:function(){return this._defaultFocusElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeElement",{get:function(){return this._activeElement},enumerable:!1,configurable:!0}),e.prototype._evaluateFocusBeforeRender=function(){var t=this._root.current,r=this._getDocument();if(r){var i=r.activeElement;if(i!==t){var o=_r(t,i,!1);this._lastIndexPath=o?eP(t,i):void 0}}},e.prototype._setParkedFocus=function(t){var r=this._root.current;r&&this._isParked!==t&&(this._isParked=t,t?(this.props.allowFocusRoot||(this._parkedTabIndex=r.getAttribute("tabindex"),r.setAttribute("tabindex","-1")),r.focus()):this.props.allowFocusRoot||(this._parkedTabIndex?(r.setAttribute("tabindex",this._parkedTabIndex),this._parkedTabIndex=void 0):r.removeAttribute("tabindex")))},e.prototype._setActiveElement=function(t,r){var i=this._activeElement;this._activeElement=t,i&&(fo(i)&&this._updateTabIndexes(i),i.tabIndex=-1),this._activeElement&&((!this._focusAlignment||r)&&this._setFocusAlignment(t,!0,!0),this._activeElement.tabIndex=0)},e.prototype._preventDefaultWhenHandled=function(t){this.props.preventDefaultWhenHandled&&t.preventDefault()},e.prototype._tryInvokeClickForFocusable=function(t,r){var i=t;if(i===this._root.current)return!1;do{if(i.tagName==="BUTTON"||i.tagName==="A"||i.tagName==="INPUT"||i.tagName==="TEXTAREA"||i.tagName==="SUMMARY")return!1;if(this._isImmediateDescendantOfZone(i)&&i.getAttribute(qc)==="true"&&i.getAttribute(pL)!=="true")return mL(i,r),!0;i=Ui(i,lo)}while(i!==this._root.current);return!1},e.prototype._getFirstInnerZone=function(t){if(t=t||this._activeElement||this._root.current,!t)return null;if(fo(t))return Ll[t.getAttribute(up)];for(var r=t.firstElementChild;r;){if(fo(r))return Ll[r.getAttribute(up)];var i=this._getFirstInnerZone(r);if(i)return i;r=r.nextElementSibling}return null},e.prototype._moveFocus=function(t,r,i,o){o===void 0&&(o=!0);var s=this._activeElement,a=-1,l=void 0,u=!1,c=this.props.direction===er.bidirectional;if(!s||!this._root.current||this._isElementInput(s)&&!this._shouldInputLoseFocus(s,t))return!1;var d=c?s.getBoundingClientRect():null;do if(s=t?nr(this._root.current,s):br(this._root.current,s),c){if(s){var f=s.getBoundingClientRect(),g=r(d,f);if(g===-1&&a===-1){l=s;break}if(g>-1&&(a===-1||g<a)&&(a=g,l=s),a>=0&&g<0)break}}else{l=s;break}while(s);if(l&&l!==this._activeElement)u=!0,this.focusElement(l);else if(this.props.isCircularNavigation&&o)return t?this.focusElement(nr(this._root.current,this._root.current.firstElementChild,!0)):this.focusElement(br(this._root.current,this._root.current.lastElementChild,!0,!0,!0));return u},e.prototype._moveFocusDown=function(){var t=this,r=-1,i=this._focusAlignment.left||this._focusAlignment.x||0;return this._moveFocus(!0,function(o,s){var a=-1,l=Math.floor(s.top),u=Math.floor(o.bottom);return l<u?t._shouldWrapFocus(t._activeElement,cp)?hp:Rl:((r===-1&&l>=u||l===r)&&(r=l,i>=s.left&&i<=s.left+s.width?a=0:a=Math.abs(s.left+s.width/2-i)),a)})?(this._setFocusAlignment(this._activeElement,!1,!0),!0):!1},e.prototype._moveFocusUp=function(){var t=this,r=-1,i=this._focusAlignment.left||this._focusAlignment.x||0;return this._moveFocus(!1,function(o,s){var a=-1,l=Math.floor(s.bottom),u=Math.floor(s.top),c=Math.floor(o.top);return l>c?t._shouldWrapFocus(t._activeElement,cp)?hp:Rl:((r===-1&&l<=c||u===r)&&(r=u,i>=s.left&&i<=s.left+s.width?a=0:a=Math.abs(s.left+s.width/2-i)),a)})?(this._setFocusAlignment(this._activeElement,!1,!0),!0):!1},e.prototype._moveFocusLeft=function(t){var r=this,i=this._shouldWrapFocus(this._activeElement,dp);return this._moveFocus(ir(t),function(o,s){var a=-1,l;return ir(t)?l=parseFloat(s.top.toFixed(3))<parseFloat(o.bottom.toFixed(3)):l=parseFloat(s.bottom.toFixed(3))>parseFloat(o.top.toFixed(3)),l&&s.right<=o.right&&r.props.direction!==er.vertical?a=o.right-s.right:i||(a=Rl),a},void 0,i)?(this._setFocusAlignment(this._activeElement,!0,!1),!0):!1},e.prototype._moveFocusRight=function(t){var r=this,i=this._shouldWrapFocus(this._activeElement,dp);return this._moveFocus(!ir(t),function(o,s){var a=-1,l;return ir(t)?l=parseFloat(s.bottom.toFixed(3))>parseFloat(o.top.toFixed(3)):l=parseFloat(s.top.toFixed(3))<parseFloat(o.bottom.toFixed(3)),l&&s.left>=o.left&&r.props.direction!==er.vertical?a=s.left-o.left:i||(a=Rl),a},void 0,i)?(this._setFocusAlignment(this._activeElement,!0,!1),!0):!1},e.prototype._moveFocusPaging=function(t,r){r===void 0&&(r=!0);var i=this._activeElement;if(!i||!this._root.current||this._isElementInput(i)&&!this._shouldInputLoseFocus(i,t))return!1;var o=qw(i);if(!o)return!1;var s=-1,a=void 0,l=-1,u=-1,c=o.clientHeight,d=i.getBoundingClientRect();do if(i=t?nr(this._root.current,i):br(this._root.current,i),i){var f=i.getBoundingClientRect(),g=Math.floor(f.top),m=Math.floor(d.bottom),y=Math.floor(f.bottom),S=Math.floor(d.top),b=this._getHorizontalDistanceFromCenter(t,d,f),E=t&&g>m+c,w=!t&&y<S-c;if(E||w)break;b>-1&&(t&&g>l?(l=g,s=b,a=i):!t&&y<u?(u=y,s=b,a=i):(s===-1||b<=s)&&(s=b,a=i))}while(i);var C=!1;if(a&&a!==this._activeElement)C=!0,this.focusElement(a),this._setFocusAlignment(a,!1,!0);else if(this.props.isCircularNavigation&&r)return t?this.focusElement(nr(this._root.current,this._root.current.firstElementChild,!0)):this.focusElement(br(this._root.current,this._root.current.lastElementChild,!0,!0,!0));return C},e.prototype._setFocusAlignment=function(t,r,i){if(this.props.direction===er.bidirectional&&(!this._focusAlignment||r||i)){var o=t.getBoundingClientRect(),s=o.left+o.width/2,a=o.top+o.height/2;this._focusAlignment||(this._focusAlignment={left:s,top:a}),r&&(this._focusAlignment.left=s),i&&(this._focusAlignment.top=a)}},e.prototype._isImmediateDescendantOfZone=function(t){return this._getOwnerZone(t)===this._root.current},e.prototype._getOwnerZone=function(t){for(var r=Ui(t,lo);r&&r!==this._root.current&&r!==this._getDocument().body;){if(fo(r))return r;r=Ui(r,lo)}return r},e.prototype._updateTabIndexes=function(t){!this._activeElement&&this.props.defaultTabbableElement&&typeof this.props.defaultTabbableElement=="function"&&(this._activeElement=this.props.defaultTabbableElement(this._root.current)),!t&&this._root.current&&(this._defaultFocusElement=null,t=this._root.current,this._activeElement&&!_r(t,this._activeElement)&&(this._activeElement=null)),this._activeElement&&!Vi(this._activeElement,void 0,this._inShadowRoot)&&(this._activeElement=null);for(var r=t&&t.children,i=0;r&&i<r.length;i++){var o=r[i];fo(o)?o.getAttribute(qc)==="true"&&(!this._isInnerZone&&(!this._activeElement&&!this._defaultFocusElement||this._activeElement===o)?(this._defaultFocusElement=o,o.getAttribute(Oi)!=="0"&&o.setAttribute(Oi,"0")):o.getAttribute(Oi)!=="-1"&&o.setAttribute(Oi,"-1")):(o.getAttribute&&o.getAttribute(qc)==="false"&&o.setAttribute(Oi,"-1"),Vi(o,void 0,this._inShadowRoot)?this.props.disabled?o.setAttribute(Oi,"-1"):!this._isInnerZone&&(!this._activeElement&&!this._defaultFocusElement||this._activeElement===o)?(this._defaultFocusElement=o,o.getAttribute(Oi)!=="0"&&o.setAttribute(Oi,"0")):o.getAttribute(Oi)!=="-1"&&o.setAttribute(Oi,"-1"):o.tagName==="svg"&&o.getAttribute("focusable")!=="false"&&o.setAttribute("focusable","false")),this._updateTabIndexes(o)}},e.prototype._isContentEditableElement=function(t){return t&&t.getAttribute("contenteditable")==="true"},e.prototype._isElementInput=function(t){return!!(t&&t.tagName&&(t.tagName.toLowerCase()==="input"||t.tagName.toLowerCase()==="textarea"))},e.prototype._shouldInputLoseFocus=function(t,r){if(!this._processingTabKey&&t&&t.type&&yL.indexOf(t.type.toLowerCase())>-1){var i=t.selectionStart,o=t.selectionEnd,s=i!==o,a=t.value,l=t.readOnly;if(s||i>0&&!r&&!l||i!==a.length&&r&&!l||this.props.handleTabKey&&!(this.props.shouldInputLoseFocusOnArrowKey&&this.props.shouldInputLoseFocusOnArrowKey(t)))return!1}return!0},e.prototype._shouldWrapFocus=function(t,r){return this.props.checkForNoWrap?Vw(t,r):!0},e.prototype._portalContainsElement=function(t){return t&&!!this._root.current&&Ym(t,this._root.current)},e.prototype._getDocument=function(){return Cn(this._root.current)},e.defaultProps={isCircularNavigation:!1,direction:er.bidirectional,shouldRaiseClicks:!0,"data-tabster":'{"uncontrolled": {}}'},e.contextType=rC,e}(A.Component),Nn;(function(n){n[n.Normal=0]="Normal",n[n.Divider=1]="Divider",n[n.Header=2]="Header",n[n.Section=3]="Section"})(Nn||(Nn={}));function el(n){return n.canCheck?!!(n.isChecked||n.checked):typeof n.isChecked=="boolean"?n.isChecked:typeof n.checked=="boolean"?n.checked:null}function xo(n){return!!(n.subMenuProps||n.items)}function Yi(n){return!!(n.isDisabled||n.disabled)}function zC(n){var e=el(n),t=e!==null;return t?"menuitemcheckbox":"menuitem"}var ub=function(n){var e=n.item,t=n.classNames,r=e.iconProps;return A.createElement(ds,H({},r,{className:t.icon}))},EL=function(n){var e=n.item,t=n.hasIcons;return t?e.onRenderIcon?e.onRenderIcon(n,ub):ub(n):null},_L=function(n){var e=n.onCheckmarkClick,t=n.item,r=n.classNames,i=el(t);if(e){var o=function(s){return e(t,s)};return A.createElement(ds,{iconName:t.canCheck!==!1&&i?"CheckMark":"",className:r.checkmarkIcon,onClick:o})}return null},wL=function(n){var e=n.item,t=n.classNames;return e.text||e.name?A.createElement("span",{className:t.label},e.text||e.name):null},CL=function(n){var e=n.item,t=n.classNames;return e.secondaryText?A.createElement("span",{className:t.secondaryText},e.secondaryText):null},SL=function(n){var e=n.item,t=n.classNames,r=n.theme;return xo(e)?A.createElement(ds,H({iconName:ir(r)?"ChevronLeft":"ChevronRight"},e.submenuIconProps,{className:t.subMenuIcon})):null},xL=function(n){Lt(e,n);function e(t){var r=n.call(this,t)||this;return r.openSubMenu=function(){var i=r.props,o=i.item,s=i.openSubMenu,a=i.getSubmenuTarget;if(a){var l=a();xo(o)&&s&&l&&s(o,l)}},r.dismissSubMenu=function(){var i=r.props,o=i.item,s=i.dismissSubMenu;xo(o)&&s&&s()},r.dismissMenu=function(i){var o=r.props.dismissMenu;o&&o(void 0,i)},vs(r),r}return e.prototype.render=function(){var t=this.props,r=t.item,i=t.classNames,o=r.onRenderContent||this._renderLayout;return A.createElement("div",{className:r.split?i.linkContentMenu:i.linkContent},o(this.props,{renderCheckMarkIcon:_L,renderItemIcon:EL,renderItemName:wL,renderSecondaryText:CL,renderSubMenuIcon:SL}))},e.prototype._renderLayout=function(t,r){return A.createElement(A.Fragment,null,r.renderCheckMarkIcon(t),r.renderItemIcon(t),r.renderItemName(t),r.renderSecondaryText(t),r.renderSubMenuIcon(t))},e}(A.Component),AL=zt(function(n){return Ku({wrapper:{display:"inline-flex",height:"100%",alignItems:"center"},divider:{width:1,height:"100%",backgroundColor:n.palette.neutralTertiaryAlt}})}),Ko=36,cb=bC(0,yC),FL=zt(function(n){var e,t,r,i,o,s=n.semanticColors,a=n.fonts,l=n.palette,u=s.menuItemBackgroundHovered,c=s.menuItemTextHovered,d=s.menuItemBackgroundPressed,f=s.bodyDivider,g={item:[a.medium,{color:s.bodyText,position:"relative",boxSizing:"border-box"}],divider:{display:"block",height:"1px",backgroundColor:f,position:"relative"},root:[Za(n),a.medium,{color:s.bodyText,backgroundColor:"transparent",border:"none",width:"100%",height:Ko,lineHeight:Ko,display:"block",cursor:"pointer",padding:"0px 8px 0 4px",textAlign:"left"}],rootDisabled:{color:s.disabledBodyText,cursor:"default",pointerEvents:"none",selectors:(e={},e[Ke]={color:"GrayText",opacity:1},e)},rootHovered:{backgroundColor:u,color:c,selectors:{".ms-ContextualMenu-icon":{color:l.themeDarkAlt},".ms-ContextualMenu-submenuIcon":{color:l.neutralPrimary}}},rootFocused:{backgroundColor:l.white},rootChecked:{selectors:{".ms-ContextualMenu-checkmarkIcon":{color:l.neutralPrimary}}},rootPressed:{backgroundColor:d,selectors:{".ms-ContextualMenu-icon":{color:l.themeDark},".ms-ContextualMenu-submenuIcon":{color:l.neutralPrimary}}},rootExpanded:{backgroundColor:d,color:s.bodyTextChecked,selectors:(t={".ms-ContextualMenu-submenuIcon":(r={},r[Ke]={color:"inherit"},r)},t[Ke]=H({},yi()),t)},linkContent:{whiteSpace:"nowrap",height:"inherit",display:"flex",alignItems:"center",maxWidth:"100%"},anchorLink:{padding:"0px 8px 0 4px",textRendering:"auto",color:"inherit",letterSpacing:"normal",wordSpacing:"normal",textTransform:"none",textIndent:"0px",textShadow:"none",textDecoration:"none",boxSizing:"border-box"},label:{margin:"0 4px",verticalAlign:"middle",display:"inline-block",flexGrow:"1",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},secondaryText:{color:n.palette.neutralSecondary,paddingLeft:"20px",textAlign:"right"},icon:{display:"inline-block",minHeight:"1px",maxHeight:Ko,fontSize:mo.medium,width:mo.medium,margin:"0 4px",verticalAlign:"middle",flexShrink:"0",selectors:(i={},i[cb]={fontSize:mo.large,width:mo.large},i)},iconColor:{color:s.menuIcon},iconDisabled:{color:s.disabledBodyText},checkmarkIcon:{color:s.bodySubtext},subMenuIcon:{height:Ko,lineHeight:Ko,color:l.neutralSecondary,textAlign:"center",display:"inline-block",verticalAlign:"middle",flexShrink:"0",fontSize:mo.small,selectors:(o={":hover":{color:l.neutralPrimary},":active":{color:l.neutralPrimary}},o[cb]={fontSize:mo.medium},o)},splitButtonFlexContainer:[Za(n),{display:"flex",height:Ko,flexWrap:"nowrap",justifyContent:"center",alignItems:"flex-start"}]};return Fo(g)}),db="28px",kL=bC(0,yC),TL=zt(function(n){var e;return Ku(AL(n),{wrapper:{position:"absolute",right:28,selectors:(e={},e[kL]={right:32},e)},divider:{height:16,width:1}})}),DL={item:"ms-ContextualMenu-item",divider:"ms-ContextualMenu-divider",root:"ms-ContextualMenu-link",isChecked:"is-checked",isExpanded:"is-expanded",isDisabled:"is-disabled",linkContent:"ms-ContextualMenu-linkContent",linkContentMenu:"ms-ContextualMenu-linkContent",icon:"ms-ContextualMenu-icon",iconColor:"ms-ContextualMenu-iconColor",checkmarkIcon:"ms-ContextualMenu-checkmarkIcon",subMenuIcon:"ms-ContextualMenu-submenuIcon",label:"ms-ContextualMenu-itemText",secondaryText:"ms-ContextualMenu-secondaryText",splitMenu:"ms-ContextualMenu-splitMenu",screenReaderText:"ms-ContextualMenu-screenReaderText"},PL=zt(function(n,e,t,r,i,o,s,a,l,u,c,d){var f,g,m,y,S=FL(n),b=Ar(DL,n);return Ku({item:[b.item,S.item,s],divider:[b.divider,S.divider,a],root:[b.root,S.root,r&&[b.isChecked,S.rootChecked],i&&S.anchorLink,t&&[b.isExpanded,S.rootExpanded],e&&[b.isDisabled,S.rootDisabled],!e&&!t&&[{selectors:(f={":hover":S.rootHovered,":active":S.rootPressed},f[".".concat(gt," &:focus, .").concat(gt," &:focus:hover, :host(.").concat(gt,") &:focus, :host(.").concat(gt,") &:focus:hover")]=S.rootFocused,f[".".concat(gt," &:hover, :host(.").concat(gt,") &:hover")]={background:"inherit;"},f)}],d],splitPrimary:[S.root,{width:"calc(100% - ".concat(db,")")},r&&["is-checked",S.rootChecked],(e||c)&&["is-disabled",S.rootDisabled],!(e||c)&&!r&&[{selectors:(g={":hover":S.rootHovered},g[":hover ~ .".concat(b.splitMenu)]=S.rootHovered,g[":active"]=S.rootPressed,g[".".concat(gt," &:focus, .").concat(gt," &:focus:hover, :host(.").concat(gt,") &:focus, :host(.").concat(gt,") &:focus:hover")]=S.rootFocused,g[".".concat(gt," &:hover, :host(.").concat(gt,") &:hover")]={background:"inherit;"},g)}]],splitMenu:[b.splitMenu,S.root,{flexBasis:"0",padding:"0 8px",minWidth:db},t&&["is-expanded",S.rootExpanded],e&&["is-disabled",S.rootDisabled],!e&&!t&&[{selectors:(m={":hover":S.rootHovered,":active":S.rootPressed},m[".".concat(gt," &:focus, .").concat(gt," &:focus:hover, :host(.").concat(gt,") &:focus, :host(.").concat(gt,") &:focus:hover")]=S.rootFocused,m[".".concat(gt," &:hover, :host(.").concat(gt,") &:hover")]={background:"inherit;"},m)}]],anchorLink:S.anchorLink,linkContent:[b.linkContent,S.linkContent],linkContentMenu:[b.linkContentMenu,S.linkContent,{justifyContent:"center"}],icon:[b.icon,o&&S.iconColor,S.icon,l,e&&[b.isDisabled,S.iconDisabled]],iconColor:S.iconColor,checkmarkIcon:[b.checkmarkIcon,o&&S.checkmarkIcon,S.icon,l],subMenuIcon:[b.subMenuIcon,S.subMenuIcon,u,t&&{color:n.palette.neutralPrimary},e&&[S.iconDisabled]],label:[b.label,S.label],secondaryText:[b.secondaryText,S.secondaryText],splitContainer:[S.splitButtonFlexContainer,!e&&!r&&[{selectors:(y={},y[".".concat(gt," &:focus, .").concat(gt," &:focus:hover, :host(.").concat(gt,") &:focus, :host(.").concat(gt,") &:focus:hover")]=S.rootFocused,y)}]],screenReaderText:[b.screenReaderText,S.screenReaderText,ev,{visibility:"hidden"}]})}),jC=function(n){var e=n.theme,t=n.disabled,r=n.expanded,i=n.checked,o=n.isAnchorLink,s=n.knownIcon,a=n.itemClassName,l=n.dividerClassName,u=n.iconClassName,c=n.subMenuClassName,d=n.primaryDisabled,f=n.className;return PL(e,t,r,i,o,s,a,l,u,c,d,f)},Ru=Un(xL,jC,void 0,{scope:"ContextualMenuItem"}),av=function(n){Lt(e,n);function e(t){var r=n.call(this,t)||this;return r._onItemMouseEnter=function(i){var o=r.props,s=o.item,a=o.onItemMouseEnter;a&&a(s,i,i.currentTarget)},r._onItemClick=function(i){var o=r.props,s=o.item,a=o.onItemClickBase;a&&a(s,i,i.currentTarget)},r._onItemMouseLeave=function(i){var o=r.props,s=o.item,a=o.onItemMouseLeave;a&&a(s,i)},r._onItemKeyDown=function(i){var o=r.props,s=o.item,a=o.onItemKeyDown;a&&a(s,i)},r._onItemMouseMove=function(i){var o=r.props,s=o.item,a=o.onItemMouseMove;a&&a(s,i,i.currentTarget)},r._getSubmenuTarget=function(){},vs(r),r}return e.prototype.shouldComponentUpdate=function(t){return!Zm(t,this.props)},e}(A.Component),ML="ktp",hb="-",IL="data-ktp-target",RL="data-ktp-execute-target",LL="ktp-layer-id",ji;(function(n){n.KEYTIP_ADDED="keytipAdded",n.KEYTIP_REMOVED="keytipRemoved",n.KEYTIP_UPDATED="keytipUpdated",n.PERSISTED_KEYTIP_ADDED="persistedKeytipAdded",n.PERSISTED_KEYTIP_REMOVED="persistedKeytipRemoved",n.PERSISTED_KEYTIP_EXECUTE="persistedKeytipExecute",n.ENTER_KEYTIP_MODE="enterKeytipMode",n.EXIT_KEYTIP_MODE="exitKeytipMode"})(ji||(ji={}));var NL=function(){function n(){this.keytips={},this.persistedKeytips={},this.sequenceMapping={},this.inKeytipMode=!1,this.shouldEnterKeytipMode=!0,this.delayUpdatingKeytipChange=!1}return n.getInstance=function(){return this._instance},n.prototype.init=function(e){this.delayUpdatingKeytipChange=e},n.prototype.register=function(e,t){t===void 0&&(t=!1);var r=e;t||(r=this.addParentOverflow(e),this.sequenceMapping[r.keySequences.toString()]=r);var i=this._getUniqueKtp(r);if(t?this.persistedKeytips[i.uniqueID]=i:this.keytips[i.uniqueID]=i,this.inKeytipMode||!this.delayUpdatingKeytipChange){var o=t?ji.PERSISTED_KEYTIP_ADDED:ji.KEYTIP_ADDED;_i.raise(this,o,{keytip:r,uniqueID:i.uniqueID})}return i.uniqueID},n.prototype.update=function(e,t){var r=this.addParentOverflow(e),i=this._getUniqueKtp(r,t),o=this.keytips[t];o&&(i.keytip.visible=o.keytip.visible,this.keytips[t]=i,delete this.sequenceMapping[o.keytip.keySequences.toString()],this.sequenceMapping[i.keytip.keySequences.toString()]=i.keytip,(this.inKeytipMode||!this.delayUpdatingKeytipChange)&&_i.raise(this,ji.KEYTIP_UPDATED,{keytip:i.keytip,uniqueID:i.uniqueID}))},n.prototype.unregister=function(e,t,r){r===void 0&&(r=!1),r?delete this.persistedKeytips[t]:delete this.keytips[t],!r&&delete this.sequenceMapping[e.keySequences.toString()];var i=r?ji.PERSISTED_KEYTIP_REMOVED:ji.KEYTIP_REMOVED;(this.inKeytipMode||!this.delayUpdatingKeytipChange)&&_i.raise(this,i,{keytip:e,uniqueID:t})},n.prototype.enterKeytipMode=function(){_i.raise(this,ji.ENTER_KEYTIP_MODE)},n.prototype.exitKeytipMode=function(){_i.raise(this,ji.EXIT_KEYTIP_MODE)},n.prototype.getKeytips=function(){var e=this;return Object.keys(this.keytips).map(function(t){return e.keytips[t].keytip})},n.prototype.addParentOverflow=function(e){var t=So([],e.keySequences,!0);if(t.pop(),t.length!==0){var r=this.sequenceMapping[t.toString()];if(r&&r.overflowSetSequence)return H(H({},e),{overflowSetSequence:r.overflowSetSequence})}return e},n.prototype.menuExecute=function(e,t){_i.raise(this,ji.PERSISTED_KEYTIP_EXECUTE,{overflowButtonSequences:e,keytipSequences:t})},n.prototype._getUniqueKtp=function(e,t){return t===void 0&&(t=ni()),{keytip:H({},e),uniqueID:t}},n._instance=new n,n}();function WC(n){return n.reduce(function(e,t){return e+hb+t.split("").join(hb)},ML)}function BL(n,e){var t=e.length,r=So([],e,!0).pop(),i=So([],n,!0);return dP(i,t-1,r)}function OL(n){var e=" "+LL;return n.length?e+" "+WC(n):e}function HL(n){var e=A.useRef(void 0),t=n.keytipProps?H({disabled:n.disabled},n.keytipProps):void 0,r=ri(NL.getInstance()),i=nv(n);Ya(function(){e.current&&t&&(i?.keytipProps!==n.keytipProps||i?.disabled!==n.disabled)&&r.update(t,e.current)}),Ya(function(){return t&&(e.current=r.register(t)),function(){t&&r.unregister(t,e.current)}},[]);var o={ariaDescribedBy:n.ariaDescribedBy,keytipId:void 0};return t&&(o=zL(r,t,n.ariaDescribedBy)),o}function zL(n,e,t){var r=n.addParentOverflow(e),i=Gu(t,OL(r.keySequences)),o=So([],r.keySequences,!0);r.overflowSetSequence&&(o=BL(o,r.overflowSetSequence));var s=WC(o);return{ariaDescribedBy:i,keytipId:s}}var Lu=function(n){var e,t=n.children,r=ol(n,["children"]),i=HL(r),o=i.keytipId,s=i.ariaDescribedBy;return t((e={},e[IL]=o,e[RL]=o,e["aria-describedby"]=s,e))},jL=function(n){Lt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._anchor=A.createRef(),t._getMemoizedMenuButtonKeytipProps=zt(function(r){return H(H({},r),{hasMenu:!0})}),t._getSubmenuTarget=function(){return t._anchor.current?t._anchor.current:void 0},t._onItemClick=function(r){var i=t.props,o=i.item,s=i.onItemClick;s&&s(o,r)},t._renderAriaDescription=function(r,i){return r?A.createElement("span",{id:t._ariaDescriptionId,className:i},r):null},t}return e.prototype.render=function(){var t=this,r=this.props,i=r.item,o=r.classNames,s=r.index,a=r.focusableElementIndex,l=r.totalItemCount,u=r.hasCheckmarks,c=r.hasIcons,d=r.expandedMenuItemKey,f=r.onItemClick,g=r.openSubMenu,m=r.dismissSubMenu,y=r.dismissMenu,S=Ru;this.props.item.contextualMenuItemAs&&(S=Zr(this.props.item.contextualMenuItemAs,S)),this.props.contextualMenuItemAs&&(S=Zr(this.props.contextualMenuItemAs,S));var b=i.rel;i.target&&i.target.toLowerCase()==="_blank"&&(b=b||"nofollow noopener noreferrer");var E=xo(i),w=an(i,oC),C=Yi(i),T=i.itemProps,D=i.ariaDescription,k=i.keytipProps;k&&E&&(k=this._getMemoizedMenuButtonKeytipProps(k)),D&&(this._ariaDescriptionId=ni());var M=Gu(i.ariaDescribedBy,D?this._ariaDescriptionId:void 0,w["aria-describedby"]),N={"aria-describedby":M};return A.createElement("div",null,A.createElement(Lu,{keytipProps:i.keytipProps,ariaDescribedBy:M,disabled:C},function(U){return A.createElement("a",H({},N,w,U,{ref:t._anchor,href:i.href,target:i.target,rel:b,className:o.root,role:"menuitem","aria-haspopup":E||void 0,"aria-expanded":E?i.key===d:void 0,"aria-posinset":a+1,"aria-setsize":l,"aria-disabled":Yi(i),style:i.style,onClick:t._onItemClick,onMouseEnter:t._onItemMouseEnter,onMouseLeave:t._onItemMouseLeave,onMouseMove:t._onItemMouseMove,onKeyDown:E?t._onItemKeyDown:void 0}),A.createElement(S,H({componentRef:i.componentRef,item:i,classNames:o,index:s,onCheckmarkClick:u&&f?f:void 0,hasIcons:c,openSubMenu:g,dismissSubMenu:m,dismissMenu:y,getSubmenuTarget:t._getSubmenuTarget},T)),t._renderAriaDescription(D,o.screenReaderText))}))},e}(av),WL=function(n){Lt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._btn=A.createRef(),t._getMemoizedMenuButtonKeytipProps=zt(function(r){return H(H({},r),{hasMenu:!0})}),t._renderAriaDescription=function(r,i){return r?A.createElement("span",{id:t._ariaDescriptionId,className:i},r):null},t._getSubmenuTarget=function(){return t._btn.current?t._btn.current:void 0},t}return e.prototype.render=function(){var t=this,r=this.props,i=r.item,o=r.classNames,s=r.index,a=r.focusableElementIndex,l=r.totalItemCount,u=r.hasCheckmarks,c=r.hasIcons,d=r.contextualMenuItemAs,f=r.expandedMenuItemKey,g=r.onItemMouseDown,m=r.onItemClick,y=r.openSubMenu,S=r.dismissSubMenu,b=r.dismissMenu,E=Ru;i.contextualMenuItemAs&&(E=Zr(i.contextualMenuItemAs,E)),d&&(E=Zr(d,E));var w=el(i),C=w!==null,T=zC(i),D=xo(i),k=i.itemProps,M=i.ariaLabel,N=i.ariaDescription,U=an(i,Gs);delete U.disabled;var ne=i.role||T;N&&(this._ariaDescriptionId=ni());var oe=Gu(i.ariaDescribedBy,N?this._ariaDescriptionId:void 0,U["aria-describedby"]),ae={className:o.root,onClick:this._onItemClick,onKeyDown:D?this._onItemKeyDown:void 0,onMouseEnter:this._onItemMouseEnter,onMouseLeave:this._onItemMouseLeave,onMouseDown:function(we){return g?g(i,we):void 0},onMouseMove:this._onItemMouseMove,href:i.href,title:i.title,"aria-label":M,"aria-describedby":oe,"aria-haspopup":D||void 0,"aria-expanded":D?i.key===f:void 0,"aria-posinset":a+1,"aria-setsize":l,"aria-disabled":Yi(i),"aria-checked":(ne==="menuitemcheckbox"||ne==="menuitemradio")&&C?!!w:void 0,"aria-selected":ne==="menuitem"&&C?!!w:void 0,role:ne,style:i.style},te=i.keytipProps;return te&&D&&(te=this._getMemoizedMenuButtonKeytipProps(te)),A.createElement(Lu,{keytipProps:te,ariaDescribedBy:oe,disabled:Yi(i)},function(we){return A.createElement("button",H({ref:t._btn},U,ae,we),A.createElement(E,H({componentRef:i.componentRef,item:i,classNames:o,index:s,onCheckmarkClick:u&&m?m:void 0,hasIcons:c,openSubMenu:y,dismissSubMenu:S,dismissMenu:b,getSubmenuTarget:t._getSubmenuTarget},k)),t._renderAriaDescription(N,o.screenReaderText))})},e}(av),UL=function(n){var e=n.theme,t=n.getClassNames,r=n.className;if(!e)throw new Error("Theme is undefined or null.");if(t){var i=t(e);return{wrapper:[i.wrapper],divider:[i.divider]}}return{wrapper:[{display:"inline-flex",height:"100%",alignItems:"center"},r],divider:[{width:1,height:"100%",backgroundColor:e.palette.neutralTertiaryAlt}]}},VL=Wn(),UC=A.forwardRef(function(n,e){var t=n.styles,r=n.theme,i=n.getClassNames,o=n.className,s=VL(t,{theme:r,getClassNames:i,className:o});return A.createElement("span",{className:s.wrapper,ref:e},A.createElement("span",{className:s.divider}))});UC.displayName="VerticalDividerBase";var KL=Un(UC,UL,void 0,{scope:"VerticalDivider"}),$L=500,GL=function(n){Lt(e,n);function e(t){var r=n.call(this,t)||this;return r._getMemoizedMenuButtonKeytipProps=zt(function(i){return H(H({},i),{hasMenu:!0})}),r._onItemKeyDown=function(i){var o=r.props,s=o.item,a=o.onItemKeyDown;i.which===Re.enter?(r._executeItemClick(i),i.preventDefault(),i.stopPropagation()):a&&a(s,i)},r._getSubmenuTarget=function(){return r._splitButton},r._renderAriaDescription=function(i,o){return i?A.createElement("span",{id:r._ariaDescriptionId,className:o},i):null},r._onItemMouseEnterPrimary=function(i){var o=r.props,s=o.item,a=o.onItemMouseEnter;a&&a(H(H({},s),{subMenuProps:void 0,items:void 0}),i,r._splitButton)},r._onItemMouseEnterIcon=function(i){var o=r.props,s=o.item,a=o.onItemMouseEnter;a&&a(s,i,r._splitButton)},r._onItemMouseMovePrimary=function(i){var o=r.props,s=o.item,a=o.onItemMouseMove;a&&a(H(H({},s),{subMenuProps:void 0,items:void 0}),i,r._splitButton)},r._onItemMouseMoveIcon=function(i){var o=r.props,s=o.item,a=o.onItemMouseMove;a&&a(s,i,r._splitButton)},r._onIconItemClick=function(i){var o=r.props,s=o.item,a=o.onItemClickBase;a&&a(s,i,r._splitButton?r._splitButton:i.currentTarget)},r._executeItemClick=function(i){var o=r.props,s=o.item,a=o.executeItemClick,l=o.onItemClick;if(!(s.disabled||s.isDisabled)){if(r._processingTouch&&!s.canCheck&&l)return l(s,i);a&&a(s,i)}},r._onTouchStart=function(i){r._splitButton&&!("onpointerdown"in r._splitButton)&&r._handleTouchAndPointerEvent(i)},r._onPointerDown=function(i){i.pointerType==="touch"&&(r._handleTouchAndPointerEvent(i),i.preventDefault(),i.stopImmediatePropagation())},r._async=new $u(r),r._events=new _i(r),r._dismissLabelId=ni(),r}return e.prototype.componentDidMount=function(){this._splitButton&&"onpointerdown"in this._splitButton&&this._events.on(this._splitButton,"pointerdown",this._onPointerDown,!0)},e.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose()},e.prototype.render=function(){var t=this,r,i=this.props,o=i.item,s=i.classNames,a=i.index,l=i.focusableElementIndex,u=i.totalItemCount,c=i.hasCheckmarks,d=i.hasIcons,f=i.onItemMouseLeave,g=i.expandedMenuItemKey,m=xo(o),y=o.keytipProps;y&&(y=this._getMemoizedMenuButtonKeytipProps(y));var S=o.ariaDescription;S&&(this._ariaDescriptionId=ni());var b=(r=el(o))!==null&&r!==void 0?r:void 0;return A.createElement(Lu,{keytipProps:y,disabled:Yi(o)},function(E){return A.createElement("div",{"data-ktp-target":E["data-ktp-target"],ref:function(w){t._splitButton=w},role:zC(o),"aria-label":o.ariaLabel,className:s.splitContainer,"aria-disabled":Yi(o),"aria-expanded":m?o.key===g:void 0,"aria-haspopup":!0,"aria-describedby":Gu(o.ariaDescribedBy,S?t._ariaDescriptionId:void 0,E["aria-describedby"]),"aria-checked":b,"aria-posinset":l+1,"aria-setsize":u,onMouseEnter:t._onItemMouseEnterPrimary,onMouseLeave:f?f.bind(t,H(H({},o),{subMenuProps:null,items:null})):void 0,onMouseMove:t._onItemMouseMovePrimary,onKeyDown:t._onItemKeyDown,onClick:t._executeItemClick,onTouchStart:t._onTouchStart,tabIndex:0,"data-is-focusable":!0,"aria-roledescription":o["aria-roledescription"]},t._renderSplitPrimaryButton(o,s,a,c,d),t._renderSplitDivider(o),t._renderSplitIconButton(o,s,a,E),t._renderAriaDescription(S,s.screenReaderText))})},e.prototype._renderSplitPrimaryButton=function(t,r,i,o,s){var a=this.props,l=a.contextualMenuItemAs,u=l===void 0?Ru:l,c=a.onItemClick,d={key:t.key,disabled:Yi(t)||t.primaryDisabled,name:t.name,text:t.text||t.name,secondaryText:t.secondaryText,className:r.splitPrimary,canCheck:t.canCheck,isChecked:t.isChecked,checked:t.checked,iconProps:t.iconProps,id:this._dismissLabelId,onRenderIcon:t.onRenderIcon,data:t.data,"data-is-focusable":!1},f=t.itemProps;return A.createElement("button",H({},an(d,Gs)),A.createElement(u,H({"data-is-focusable":!1,item:H(H({},d),{onClick:t.onClick}),classNames:r,index:i,onCheckmarkClick:o&&c?c:void 0,hasIcons:s},f)))},e.prototype._renderSplitDivider=function(t){var r=t.getSplitButtonVerticalDividerClassNames||TL;return A.createElement(KL,{getClassNames:r})},e.prototype._renderSplitIconButton=function(t,r,i,o){var s=this.props,a=s.onItemMouseLeave,l=s.onItemMouseDown,u=s.openSubMenu,c=s.dismissSubMenu,d=s.dismissMenu,f=Ru;this.props.item.contextualMenuItemAs&&(f=Zr(this.props.item.contextualMenuItemAs,f)),this.props.contextualMenuItemAs&&(f=Zr(this.props.contextualMenuItemAs,f));var g={onClick:this._onIconItemClick,disabled:Yi(t),className:r.splitMenu,subMenuProps:t.subMenuProps,submenuIconProps:t.submenuIconProps,split:!0,key:t.key,"aria-labelledby":this._dismissLabelId},m=H(H({},an(g,Gs)),{onMouseEnter:this._onItemMouseEnterIcon,onMouseLeave:a?a.bind(this,t):void 0,onMouseDown:function(S){return l?l(t,S):void 0},onMouseMove:this._onItemMouseMoveIcon,"data-is-focusable":!1,"data-ktp-execute-target":o["data-ktp-execute-target"],"aria-haspopup":!0}),y=t.itemProps;return A.createElement("button",H({},m),A.createElement(f,H({componentRef:t.componentRef,item:g,classNames:r,index:i,hasIcons:!1,openSubMenu:u,dismissSubMenu:c,dismissMenu:d,getSubmenuTarget:this._getSubmenuTarget},y)))},e.prototype._handleTouchAndPointerEvent=function(t){var r=this,i=this.props.onTap;i&&i(t),this._lastTouchTimeoutId&&(this._async.clearTimeout(this._lastTouchTimeoutId),this._lastTouchTimeoutId=void 0),this._processingTouch=!0,this._lastTouchTimeoutId=this._async.setTimeout(function(){r._processingTouch=!1,r._lastTouchTimeoutId=void 0},$L)},e}(av),qL=function(n){Lt(e,n);function e(t){var r=n.call(this,t)||this;return r._updateComposedComponentRef=r._updateComposedComponentRef.bind(r),r}return e.prototype._updateComposedComponentRef=function(t){this._composedComponentInstance=t,t?this._hoisted=QP(this,t):this._hoisted&&ZP(this,this._hoisted)},e}(A.Component),qs;(function(n){n[n.small=0]="small",n[n.medium=1]="medium",n[n.large=2]="large",n[n.xLarge=3]="xLarge",n[n.xxLarge=4]="xxLarge",n[n.xxxLarge=5]="xxxLarge",n[n.unknown=999]="unknown"})(qs||(qs={}));var XL=[479,639,1023,1365,1919,99999999],VC;function lv(){var n;return(n=VC)!==null&&n!==void 0?n:qs.large}function KC(n){var e,t=(e=function(r){Lt(i,r);function i(o){var s=r.call(this,o)||this;return s._onResize=function(){var a=$C(s.context.window);a!==s.state.responsiveMode&&s.setState({responsiveMode:a})},s._events=new _i(s),s._updateComposedComponentRef=s._updateComposedComponentRef.bind(s),s.state={responsiveMode:lv()},s}return i.prototype.componentDidMount=function(){this._events.on(this.context.window,"resize",this._onResize),this._onResize()},i.prototype.componentWillUnmount=function(){this._events.dispose()},i.prototype.render=function(){var o=this.state.responsiveMode;return o===qs.unknown?null:A.createElement(n,H({ref:this._updateComposedComponentRef,responsiveMode:o},this.props))},i}(qL),e.contextType=al,e);return tC(n,t)}function YL(n){try{return n.document.documentElement.clientWidth}catch{return n.innerWidth}}function $C(n){var e=qs.small;if(n){try{for(;YL(n)>XL[e];)e++}catch{e=lv()}VC=e}else throw new Error("Content was rendered in a server environment without providing a default responsive mode. Call setResponsiveMode to define what the responsive mode is.");return e}var GC=function(n,e){var t=A.useState(lv()),r=t[0],i=t[1],o=A.useCallback(function(){var a=$C(Ft(n.current));r!==a&&i(a)},[n,r]),s=qu();return Mu(s,"resize",o),A.useEffect(function(){e===void 0&&o()},[e]),e??r},QL=A.createContext({}),ZL=Wn(),JL=Wn(),eN={items:[],shouldFocusOnMount:!0,gapSpace:0,directionalHint:Ut.bottomAutoEdge,beakWidth:16};function fb(n){for(var e=0,t=0,r=n;t<r.length;t++){var i=r[t];if(i.itemType!==Nn.Divider&&i.itemType!==Nn.Header){var o=i.customOnRenderListLength?i.customOnRenderListLength:1;e+=o}}return e}function qC(n,e){var t=e?.target,r=n.subMenuProps?n.subMenuProps.items:n.items;if(r){for(var i=[],o=0,s=r;o<s.length;o++){var a=s[o];if(a.preferMenuTargetAsEventTarget){var l=a.onClick,u=ol(a,["onClick"]);i.push(H(H({},u),{onClick:JC(l,t)}))}else i.push(a)}return i}}function tN(n){return n.some(function(e){return!!(e.canCheck||e.sectionProps&&e.sectionProps.items.some(function(t){return t.canCheck===!0}))})}var XC=250,YC="ContextualMenu",nN=zt(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(t){return jw.apply(void 0,So([t,jC],n,!1))}});function rN(n,e){var t=n.hidden,r=t===void 0?!1:t,i=n.onMenuDismissed,o=n.onMenuOpened,s=nv(r),a=A.useRef(o),l=A.useRef(i),u=A.useRef(n);a.current=o,l.current=i,u.current=n,A.useEffect(function(){var c,d;r&&s===!1?(c=l.current)===null||c===void 0||c.call(l,u.current):!r&&s!==!1&&((d=a.current)===null||d===void 0||d.call(a,u.current))},[r,s]),A.useEffect(function(){return function(){var c;return(c=l.current)===null||c===void 0?void 0:c.call(l,u.current)}},[])}function iN(n,e){var t=n.hidden,r=n.items,i=n.theme,o=n.className,s=n.id,a=n.target,l=A.useState(),u=l[0],c=l[1],d=A.useState(),f=d[0],g=d[1],m=A.useState(),y=m[0],S=m[1],b=Qu(YC,s),E=A.useCallback(function(){S(void 0),c(void 0),g(void 0)},[]),w=A.useCallback(function(D,k,M){var N=D.key;u!==N&&(k.focus(),S(M),c(N),g(k))},[u]);A.useEffect(function(){t&&E()},[t,E]);var C=uN(e,E),T=function(){var D=ZC(u,r),k=null;if(D&&(k={items:qC(D,{target:a}),target:f,onDismiss:C,isSubMenu:!0,id:b,shouldFocusOnMount:!0,shouldFocusOnContainer:y,directionalHint:ir(i)?Ut.leftTopEdge:Ut.rightTopEdge,className:o,gapSpace:0,isBeakVisible:!1},D.subMenuProps&&Xo(k,D.subMenuProps),D.preferMenuTargetAsEventTarget)){var M=D.onItemClick;k.onItemClick=JC(M,a)}return k};return[u,w,T,C]}function oN(n){var e=n.delayUpdateFocusOnHover,t=n.hidden,r=A.useRef(!e),i=A.useRef(!1);A.useEffect(function(){r.current=!e,i.current=t?!1:!e&&i.current},[e,t]);var o=A.useCallback(function(){e&&(r.current=!1)},[e]);return[r,i,o]}function sN(n,e,t){var r=n.hidden,i=n.onRestoreFocus,o=A.useRef(void 0),s=A.useCallback(function(a){var l,u;i?i(a):a?.documentContainsFocus&&((u=(l=o.current)===null||l===void 0?void 0:l.focus)===null||u===void 0||u.call(l))},[i]);return Ya(function(){var a,l;if(r)o.current&&(s({originalElement:o.current,containsFocus:!0,documentContainsFocus:((l=Cn())===null||l===void 0?void 0:l.hasFocus())||!1}),o.current=void 0);else{var u=e?.document.activeElement;!(!((a=t.current)===null||a===void 0)&&a.contains(u))&&u.tagName!=="BODY"&&(o.current=u)}},[r,e?.document.activeElement,s,t]),[s]}function aN(n,e,t,r){var i=n.theme,o=n.isSubMenu,s=n.focusZoneProps,a=s===void 0?{}:s,l=a.checkForNoWrap,u=a.direction,c=u===void 0?er.vertical:u,d=A.useRef(void 0),f=function(C,T,D){var k=!1;return T(C)&&(e(C,D),C.preventDefault(),C.stopPropagation(),k=!0),k},g=function(C){var T=ir(i)?Re.right:Re.left;return C.which!==T||!o?!1:!!(c===er.vertical||l&&!Vw(C.target,"data-no-horizontal-wrap"))},m=function(C){return C.which===Re.escape||g(C)||C.which===Re.up&&(C.altKey||C.metaKey)},y=function(C){d.current=pb(C);var T=C.which===Re.escape&&(Q0()||Y0());return f(C,m,T)},S=function(C){var T=d.current&&pb(C);return d.current=!1,!!T&&!(Y0()||Q0())},b=function(C){return f(C,S,!0)},E=function(C){var T=y(C);if(!(T||!t.current)){var D=!!(C.altKey||C.metaKey),k=C.which===Re.up,M=C.which===Re.down;if(!D&&(k||M)){var N=k?qD(t.current,t.current.lastChild,!0):GD(t.current,t.current.firstChild,!0);N&&(N.focus(),C.preventDefault(),C.stopPropagation())}}},w=function(C,T){var D=ir(i)?Re.left:Re.right;!C.disabled&&(T.which===D||T.which===Re.enter||T.which===Re.down&&(T.altKey||T.metaKey))&&(r(C,T.currentTarget),T.preventDefault())};return[y,b,E,w]}function lN(n){var e=A.useRef(!0),t=A.useRef(void 0),r=function(){!e.current&&t.current!==void 0?(n.clearTimeout(t.current),t.current=void 0):e.current=!1,t.current=n.setTimeout(function(){e.current=!0},XC)};return[r,e]}function uN(n,e){var t=A.useRef(!1);A.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]);var r=function(i,o){o?n(i,o):t.current&&e()};return r}function cN(n,e){var t=n.subMenuHoverDelay,r=t===void 0?XC:t,i=A.useRef(void 0),o=function(){i.current!==void 0&&(e.clearTimeout(i.current),i.current=void 0)},s=function(a){i.current=e.setTimeout(function(){a(),o()},r)};return[o,s,i]}function dN(n,e,t,r,i,o,s,a,l,u,c,d,f){var g=n.target,m=function(k,M,N){i.current&&(o.current=!0),!S()&&E(k,M,N)},y=function(k,M,N){var U=M.currentTarget;if(i.current)o.current=!0;else return;!e.current||t.current!==void 0||U===r?.document.activeElement||E(k,M,N)},S=function(){return!e.current||!o.current},b=function(k,M){var N;if(!S()&&(u(),s===void 0))if(a.current.setActive)try{a.current.setActive()}catch{}else(N=a.current)===null||N===void 0||N.focus()},E=function(k,M,N){var U=N||M.currentTarget;k.key!==s&&(u(),s===void 0&&U.focus(),xo(k)?(M.stopPropagation(),l(function(){U.focus(),c(k,U,!0)})):l(function(){d(M),U.focus()}))},w=function(k,M){C(k,M,M.currentTarget)},C=function(k,M,N){var U=qC(k,{target:g});if(u(),!xo(k)&&(!U||!U.length))D(k,M);else if(k.key!==s){var ne=typeof n.shouldFocusOnContainer=="boolean"?n.shouldFocusOnContainer:M.nativeEvent.pointerType==="mouse";c(k,N,ne)}M.stopPropagation(),M.preventDefault()},T=function(k,M){D(k,M),M.stopPropagation()},D=function(k,M){if(!(k.disabled||k.isDisabled)){k.preferMenuTargetAsEventTarget&&eS(M,g);var N=!1;k.onClick?N=!!k.onClick(M,k):n.onItemClick&&(N=!!n.onItemClick(M,k)),(N||!M.defaultPrevented)&&f(M,!0)}};return[m,y,b,w,T,D,C]}var QC=A.memo(A.forwardRef(function(n,e){var t,r=Xu(eN,n);r.ref;var i=ol(r,["ref"]),o=A.useRef(null),s=ul(),a=Qu(YC,i.id),l=function(ue,Be){var $e;return($e=i.onDismiss)===null||$e===void 0?void 0:$e.call(i,ue,Be)},u=FC(i.target,o),c=u[0],d=u[1],f=sN(i,d,o)[0],g=iN(i,l),m=g[0],y=g[1],S=g[2],b=g[3],E=oN(i),w=E[0],C=E[1],T=E[2],D=lN(s),k=D[0],M=D[1],N=cN(i,s),U=N[0],ne=N[1],oe=N[2],ae=GC(o,i.responsiveMode);rN(i);var te=aN(i,l,o,y),we=te[0],J=te[1],Q=te[2],G=te[3],re=dN(i,M,oe,d,w,C,m,o,ne,U,y,b,l),ie=re[0],Ce=re[1],Te=re[2],Oe=re[3],De=re[4],pt=re[5],He=re[6],fe=function(ue,Be,$e){var qe=0,ft=ue.items,tn=ue.totalItemCount,Ve=ue.hasCheckmarks,jt=ue.hasIcons;return A.createElement("ul",{className:Be.list,onKeyDown:we,onKeyUp:J,role:"presentation"},ft.map(function(ct,Mt){var qt=me(ct,Mt,qe,tn,Ve,jt,Be);if(ct.itemType!==Nn.Divider&&ct.itemType!==Nn.Header){var ut=ct.customOnRenderListLength?ct.customOnRenderListLength:1;qe+=ut}return qt}))},nt=function(ue,Be){var $e=i.focusZoneAs,qe=$e===void 0?bL:$e;return A.createElement(qe,H({},Be),ue)},me=function(ue,Be,$e,qe,ft,tn,Ve){var jt,ct=[],Mt=ue.iconProps||{iconName:"None"},qt=ue.getItemClassNames,ut=ue.itemProps,qn=ut?ut.styles:void 0,Wt=ue.itemType===Nn.Divider?ue.className:void 0,hr=ue.submenuIconProps?ue.submenuIconProps.className:"",Xt;if(qt)Xt=qt(i.theme,Yi(ue),m===ue.key,!!el(ue),!!ue.href,Mt.iconName!=="None",ue.className,Wt,Mt.className,hr,ue.primaryDisabled);else{var Po={theme:i.theme,disabled:Yi(ue),expanded:m===ue.key,checked:!!el(ue),isAnchorLink:!!ue.href,knownIcon:Mt.iconName!=="None",itemClassName:ue.className,dividerClassName:Wt,iconClassName:Mt.className,subMenuClassName:hr,primaryDisabled:ue.primaryDisabled};Xt=JL(nN((jt=Ve.subComponentStyles)===null||jt===void 0?void 0:jt.menuItem,qn),Po)}switch((ue.text==="-"||ue.name==="-")&&(ue.itemType=Nn.Divider),ue.itemType){case Nn.Divider:ct.push(bt(Be,Xt));break;case Nn.Header:ct.push(bt(Be,Xt));var Es=mt(ue,Xt,Ve,Be,ft,tn);ct.push(ze(Es,ue.key||Be,Xt,ue.title));break;case Nn.Section:ct.push(wt(ue,Xt,Ve,Be,ft,tn));break;default:var Js=function(){return je(ue,Xt,Be,$e,qe,ft,tn)},so=i.onRenderContextualMenuItem?i.onRenderContextualMenuItem(ue,Js):Js();ct.push(ze(so,ue.key||Be,Xt,ue.title));break}return A.createElement(A.Fragment,{key:ue.key},ct)},Qe=function(ue,Be){var $e=ue.index,qe=ue.focusableElementIndex,ft=ue.totalItemCount,tn=ue.hasCheckmarks,Ve=ue.hasIcons;return me(ue,$e,qe,ft,tn,Ve,Be)},wt=function(ue,Be,$e,qe,ft,tn){var Ve=ue.sectionProps;if(Ve){var jt,ct;if(Ve.title){var Mt=void 0,qt="";if(typeof Ve.title=="string"){var ut=a+Ve.title.replace(/\s/g,"");Mt={key:"section-".concat(Ve.title,"-title"),itemType:Nn.Header,text:Ve.title,id:ut},qt=ut}else{var qn=Ve.title.id||a+Ve.title.key.replace(/\s/g,"");Mt=H(H({},Ve.title),{id:qn}),qt=qn}Mt&&(ct={role:"group","aria-labelledby":qt},jt=mt(Mt,Be,$e,qe,ft,tn))}if(Ve.items&&Ve.items.length>0){var Wt=0;return A.createElement("li",{role:"presentation",key:Ve.key||ue.key||"section-".concat(qe)},A.createElement("div",H({},ct),A.createElement("ul",{className:$e.list,role:"presentation"},Ve.topDivider&&bt(qe,Be,!0,!0),jt&&ze(jt,ue.key||qe,Be,ue.title),Ve.items.map(function(hr,Xt){var Po=me(hr,Xt,Wt,fb(Ve.items),ft,tn,$e);if(hr.itemType!==Nn.Divider&&hr.itemType!==Nn.Header){var Es=hr.customOnRenderListLength?hr.customOnRenderListLength:1;Wt+=Es}return Po}),Ve.bottomDivider&&bt(qe,Be,!1,!0))))}}},ze=function(ue,Be,$e,qe){return A.createElement("li",{role:"presentation",title:qe,key:Be,className:$e.item},ue)},bt=function(ue,Be,$e,qe){return qe||ue>0?A.createElement("li",{role:"separator",key:"separator-"+ue+($e===void 0?"":$e?"-top":"-bottom"),className:Be.divider,"aria-hidden":"true"}):null},je=function(ue,Be,$e,qe,ft,tn,Ve){if(ue.onRender)return ue.onRender(H({"aria-posinset":qe+1,"aria-setsize":ft},ue),l);var jt=i.contextualMenuItemAs,ct={item:ue,classNames:Be,index:$e,focusableElementIndex:qe,totalItemCount:ft,hasCheckmarks:tn,hasIcons:Ve,contextualMenuItemAs:jt,onItemMouseEnter:ie,onItemMouseLeave:Te,onItemMouseMove:Ce,onItemMouseDown:hN,executeItemClick:pt,onItemKeyDown:G,expandedMenuItemKey:m,openSubMenu:y,dismissSubMenu:b,dismissMenu:l};if(ue.href){var Mt=jL;return ue.contextualMenuItemWrapperAs&&(Mt=Zr(ue.contextualMenuItemWrapperAs,Mt)),A.createElement(Mt,H({},ct,{onItemClick:De}))}if(ue.split&&xo(ue)){var qt=GL;return ue.contextualMenuItemWrapperAs&&(qt=Zr(ue.contextualMenuItemWrapperAs,qt)),A.createElement(qt,H({},ct,{onItemClick:Oe,onItemClickBase:He,onTap:U}))}var ut=WL;return ue.contextualMenuItemWrapperAs&&(ut=Zr(ue.contextualMenuItemWrapperAs,ut)),A.createElement(ut,H({},ct,{onItemClick:Oe,onItemClickBase:He}))},mt=function(ue,Be,$e,qe,ft,tn){var Ve=Ru;ue.contextualMenuItemAs&&(Ve=Zr(ue.contextualMenuItemAs,Ve)),i.contextualMenuItemAs&&(Ve=Zr(i.contextualMenuItemAs,Ve));var jt=ue.itemProps,ct=ue.id,Mt=jt&&an(jt,ms);return A.createElement("div",H({id:ct,className:$e.header},Mt,{style:ue.style}),A.createElement(Ve,H({item:ue,classNames:Be,index:qe,onCheckmarkClick:ft?Oe:void 0,hasIcons:tn},jt)))},Ct=i.isBeakVisible,Vn=i.items,ko=i.labelElementId,no=i.id,Ur=i.className,Sn=i.beakWidth,ur=i.directionalHint,Fr=i.directionalHintForRTL,To=i.alignTargetEdge,li=i.gapSpace,Kn=i.coverTarget,$n=i.ariaLabel,Di=i.doNotLayer,ui=i.target,cr=i.bounds,Pe=i.useTargetWidth,mn=i.useTargetAsMinWidth,Pi=i.directionalHintFixed,ro=i.shouldFocusOnMount,un=i.shouldFocusOnContainer,Fe=i.title,ci=i.styles,Gn=i.theme,Gt=i.calloutProps,ye=i.onRenderSubMenu,io=ye===void 0?gb:ye,Mi=i.onRenderMenuList,oo=Mi===void 0?function(ue,Be){return fe(ue,Z)}:Mi,Do=i.focusZoneProps,Y=i.getMenuClassNames,Z=Y?Y(Gn,Ur):ZL(ci,{theme:Gn,className:Ur}),pe=le(Vn);function le(ue){for(var Be=0,$e=ue;Be<$e.length;Be++){var qe=$e[Be];if(qe.iconProps||qe.itemType===Nn.Section&&qe.sectionProps&&le(qe.sectionProps.items))return!0}return!1}var de=H(H({direction:er.vertical,handleTabKey:kg.all,isCircularNavigation:!0,"data-tabster":'{"uncontrolled": {}, "focusable": { "excludeFromMover": true }}'},Do),{className:Nr(Z.root,(t=i.focusZoneProps)===null||t===void 0?void 0:t.className)}),Se=tN(Vn),et=m&&i.hidden!==!0?S():null;Ct=Ct===void 0?ae<=qs.medium:Ct;var Ie,Me=c.current;if((Pe||mn)&&Me&&Me.offsetWidth){var Pt=Me.getBoundingClientRect(),en=Pt.width-2;Pe?Ie={width:en}:mn&&(Ie={minWidth:en})}if(Vn&&Vn.length>0){var dr=fb(Vn),Vr=Z.subComponentStyles?Z.subComponentStyles.callout:void 0;return A.createElement(QL.Consumer,null,function(ue){return A.createElement(ov,H({styles:Vr,onRestoreFocus:f},Gt,{target:ui||ue.target,isBeakVisible:Ct,beakWidth:Sn,directionalHint:ur,directionalHintForRTL:Fr,gapSpace:li,coverTarget:Kn,doNotLayer:Di,className:Nr("ms-ContextualMenu-Callout",Gt&&Gt.className),setInitialFocus:ro,onDismiss:i.onDismiss||ue.onDismiss,onScroll:k,bounds:cr,directionalHintFixed:Pi,alignTargetEdge:To,hidden:i.hidden||ue.hidden,ref:e}),A.createElement("div",{style:Ie,ref:o,id:no,className:Z.container,tabIndex:un?0:-1,onKeyDown:Q,onKeyUp:J,onFocusCapture:T,"aria-label":$n,"aria-labelledby":ko,role:"menu"},Fe&&A.createElement("div",{className:Z.title}," ",Fe," "),Vn&&Vn.length?nt(oo({ariaLabel:$n,items:Vn,totalItemCount:dr,hasCheckmarks:Se,hasIcons:pe,defaultMenuItemRenderer:function(Be){return Qe(Be,Z)},labelElementId:ko},function(Be,$e){return fe(Be,Z)}),de):null,et&&io(et,gb)),A.createElement(aC,null))})}else return null}),function(n,e){return!e.shouldUpdateWhenHidden&&n.hidden&&e.hidden?!0:Zm(n,e)});QC.displayName="ContextualMenuBase";function pb(n){return n.which===Re.alt||n.key==="Meta"}function hN(n,e){var t;(t=n.onMouseDown)===null||t===void 0||t.call(n,n,e)}function gb(n,e){throw Error("ContextualMenuBase: onRenderSubMenu callback is null or undefined. Please ensure to set `onRenderSubMenu` property either manually or with `styled` helper.")}function ZC(n,e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(i.itemType===Nn.Section&&i.sectionProps){var o=ZC(n,i.sectionProps.items);if(o)return o}else if(i.key&&i.key===n)return i}}function JC(n,e){return n&&function(t,r){return eS(t,e),n(t,r)}}function eS(n,e){n&&e&&(n.persist(),e instanceof Event?n.target=e.target:e instanceof Element&&(n.target=e))}var fN={root:"ms-ContextualMenu",container:"ms-ContextualMenu-container",list:"ms-ContextualMenu-list",header:"ms-ContextualMenu-header",title:"ms-ContextualMenu-title",isopen:"is-open"},pN=function(n){var e=n.className,t=n.theme,r=Ar(fN,t),i=t.fonts,o=t.semanticColors,s=t.effects;return{root:[t.fonts.medium,r.root,r.isopen,{backgroundColor:o.menuBackground,minWidth:"180px"},e],container:[r.container,{selectors:{":focus":{outline:0}}}],list:[r.list,r.isopen,{listStyleType:"none",margin:"0",padding:"0"}],header:[r.header,i.small,{fontWeight:Tt.semibold,color:o.menuHeader,background:"none",backgroundColor:"transparent",border:"none",height:Ko,lineHeight:Ko,cursor:"default",padding:"0px 6px",userSelect:"none",textAlign:"left"}],title:[r.title,{fontSize:i.mediumPlus.fontSize,paddingRight:"14px",paddingLeft:"14px",paddingBottom:"5px",paddingTop:"5px",backgroundColor:o.menuItemBackgroundPressed}],subComponentStyles:{callout:{root:{boxShadow:s.elevation8}},menuItem:{}}}};function mb(n){return A.createElement(tS,H({},n))}var tS=Un(QC,pN,function(n){return{onRenderSubMenu:n.onRenderSubMenu?pM(n.onRenderSubMenu,mb):mb}},{scope:"ContextualMenu"}),Tg=tS;Tg.displayName="ContextualMenu";var vb={msButton:"ms-Button",msButtonHasMenu:"ms-Button--hasMenu",msButtonIcon:"ms-Button-icon",msButtonMenuIcon:"ms-Button-menuIcon",msButtonLabel:"ms-Button-label",msButtonDescription:"ms-Button-description",msButtonScreenReaderText:"ms-Button-screenReaderText",msButtonFlexContainer:"ms-Button-flexContainer",msButtonTextContainer:"ms-Button-textContainer"},gN=zt(function(n,e,t,r,i,o,s,a,l,u,c){var d,f,g=Ar(vb,n||{}),m=u&&!c;return Ku(e.__shadowConfig__,{root:[g.msButton,e.root,r,l&&["is-checked",e.rootChecked],m&&["is-expanded",e.rootExpanded,(d={},d[":hover .".concat(g.msButtonIcon)]=e.iconExpandedHovered,d[":hover .".concat(g.msButtonMenuIcon)]=e.menuIconExpandedHovered||e.rootExpandedHovered,d[":hover"]=e.rootExpandedHovered,d)],a&&[vb.msButtonHasMenu,e.rootHasMenu],s&&["is-disabled",e.rootDisabled],!s&&!m&&!l&&(f={":hover":e.rootHovered},f[":hover .".concat(g.msButtonLabel)]=e.labelHovered,f[":hover .".concat(g.msButtonIcon)]=e.iconHovered,f[":hover .".concat(g.msButtonDescription)]=e.descriptionHovered,f[":hover .".concat(g.msButtonMenuIcon)]=e.menuIconHovered,f[":focus"]=e.rootFocused,f[":active"]=e.rootPressed,f[":active .".concat(g.msButtonIcon)]=e.iconPressed,f[":active .".concat(g.msButtonDescription)]=e.descriptionPressed,f[":active .".concat(g.msButtonMenuIcon)]=e.menuIconPressed,f),s&&l&&[e.rootCheckedDisabled],!s&&l&&{":hover":e.rootCheckedHovered,":active":e.rootCheckedPressed},t],flexContainer:[g.msButtonFlexContainer,e.flexContainer],textContainer:[g.msButtonTextContainer,e.textContainer],icon:[g.msButtonIcon,i,e.icon,m&&e.iconExpanded,l&&e.iconChecked,s&&e.iconDisabled],label:[g.msButtonLabel,e.label,l&&e.labelChecked,s&&e.labelDisabled],menuIcon:[g.msButtonMenuIcon,o,e.menuIcon,l&&e.menuIconChecked,s&&!c&&e.menuIconDisabled,!s&&!m&&!l&&{":hover":e.menuIconHovered,":active":e.menuIconPressed},m&&["is-expanded",e.menuIconExpanded]],description:[g.msButtonDescription,e.description,l&&e.descriptionChecked,s&&e.descriptionDisabled],screenReaderText:[g.msButtonScreenReaderText,e.screenReaderText]})}),mN={msSplitButtonDivider:"ms-SplitButton-divider"},vN=zt(function(n,e,t,r,i){return{root:Gi(n.splitButtonMenuButton,t&&[n.splitButtonMenuButtonExpanded],e&&[n.splitButtonMenuButtonDisabled],r&&!e&&[n.splitButtonMenuButtonChecked],i&&!e&&[{":focus":n.splitButtonMenuFocused}]),splitButtonContainer:Gi(n.splitButtonContainer,!e&&r&&[n.splitButtonContainerChecked,{":hover":n.splitButtonContainerCheckedHovered}],!e&&!r&&[{":hover":n.splitButtonContainerHovered,":focus":n.splitButtonContainerFocused}],e&&n.splitButtonContainerDisabled),icon:Gi(n.splitButtonMenuIcon,e&&n.splitButtonMenuIconDisabled,!e&&i&&n.splitButtonMenuIcon),flexContainer:Gi(n.splitButtonFlexContainer),divider:Gi(mN.msSplitButtonDivider,n.splitButtonDivider,(i||e)&&n.splitButtonDividerDisabled)}}),yN=500,bN="BaseButton",uv=function(n){Lt(e,n);function e(t){var r=n.call(this,t)||this;return r._buttonElement=A.createRef(),r._splitButtonContainer=A.createRef(),r._mergedRef=gC(),r._renderedVisibleMenu=!1,r._getMemoizedMenuButtonKeytipProps=zt(function(i){return H(H({},i),{hasMenu:!0})}),r._onRenderIcon=function(i,o){var s=r.props.iconProps;if(s&&(s.iconName!==void 0||s.imageProps)){var a=s.className,l=s.imageProps,u=ol(s,["className","imageProps"]);if(s.styles)return A.createElement(ds,H({className:Nr(r._classNames.icon,a),imageProps:l},u));if(s.iconName)return A.createElement(Fg,H({className:Nr(r._classNames.icon,a)},u));if(l)return A.createElement(fL,H({className:Nr(r._classNames.icon,a),imageProps:l},u))}return null},r._onRenderTextContents=function(){var i=r.props,o=i.text,s=i.children,a=i.secondaryText,l=a===void 0?r.props.description:a,u=i.onRenderText,c=u===void 0?r._onRenderText:u,d=i.onRenderDescription,f=d===void 0?r._onRenderDescription:d;return o||typeof s=="string"||l?A.createElement("span",{className:r._classNames.textContainer},c(r.props,r._onRenderText),f(r.props,r._onRenderDescription)):[c(r.props,r._onRenderText),f(r.props,r._onRenderDescription)]},r._onRenderText=function(){var i=r.props.text,o=r.props.children;return i===void 0&&typeof o=="string"&&(i=o),r._hasText()?A.createElement("span",{key:r._labelId,className:r._classNames.label,id:r._labelId},i):null},r._onRenderChildren=function(){var i=r.props.children;return typeof i=="string"?null:i},r._onRenderDescription=function(i){var o=i.secondaryText,s=o===void 0?r.props.description:o;return s?A.createElement("span",{key:r._descriptionId,className:r._classNames.description,id:r._descriptionId},s):null},r._onRenderAriaDescription=function(){var i=r.props.ariaDescription;return i?A.createElement("span",{className:r._classNames.screenReaderText,id:r._ariaDescriptionId},i):null},r._onRenderMenuIcon=function(i){var o=r.props.menuIconProps;return A.createElement(Fg,H({iconName:"ChevronDown"},o,{className:r._classNames.menuIcon}))},r._onRenderMenu=function(i){var o=r.props.menuAs?Zr(r.props.menuAs,Tg):Tg;return A.createElement(o,H({},i))},r._onDismissMenu=function(i){var o=r.props.menuProps;o&&o.onDismiss&&o.onDismiss(i),(!i||!i.defaultPrevented)&&r._dismissMenu()},r._dismissMenu=function(){r._menuShouldFocusOnMount=void 0,r._menuShouldFocusOnContainer=void 0,r.setState({menuHidden:!0})},r._openMenu=function(i,o){o===void 0&&(o=!0),r.props.menuProps&&(r._menuShouldFocusOnContainer=i,r._menuShouldFocusOnMount=o,r._renderedVisibleMenu=!0,r.setState({menuHidden:!1}))},r._onToggleMenu=function(i){var o=!0;r.props.menuProps&&r.props.menuProps.shouldFocusOnMount===!1&&(o=!1),r.state.menuHidden?r._openMenu(i,o):r._dismissMenu()},r._onSplitContainerFocusCapture=function(i){var o=r._splitButtonContainer.current;!o||i.target&&Ym(i.target,o)||o.focus()},r._onSplitButtonPrimaryClick=function(i){r.state.menuHidden||r._dismissMenu();var o=r._processingTouch&&!r.props.toggle;!o&&r.props.onClick?r.props.onClick(i):o&&r._onMenuClick(i)},r._onKeyDown=function(i){r.props.disabled&&(i.which===Re.enter||i.which===Re.space)?(i.preventDefault(),i.stopPropagation()):r.props.disabled||(r.props.menuProps?r._onMenuKeyDown(i):r.props.onKeyDown!==void 0&&r.props.onKeyDown(i))},r._onKeyUp=function(i){!r.props.disabled&&r.props.onKeyUp!==void 0&&r.props.onKeyUp(i)},r._onKeyPress=function(i){!r.props.disabled&&r.props.onKeyPress!==void 0&&r.props.onKeyPress(i)},r._onMouseUp=function(i){!r.props.disabled&&r.props.onMouseUp!==void 0&&r.props.onMouseUp(i)},r._onMouseDown=function(i){!r.props.disabled&&r.props.onMouseDown!==void 0&&r.props.onMouseDown(i)},r._onClick=function(i){r.props.disabled||(r.props.menuProps?r._onMenuClick(i):r.props.onClick!==void 0&&r.props.onClick(i))},r._onSplitButtonContainerKeyDown=function(i){i.which===Re.enter||i.which===Re.space?r._buttonElement.current&&(r._buttonElement.current.click(),i.preventDefault(),i.stopPropagation()):r._onMenuKeyDown(i)},r._onMenuKeyDown=function(i){var o;if(!r.props.disabled){r.props.onKeyDown&&r.props.onKeyDown(i);var s=i.which===Re.up,a=i.which===Re.down;if(!i.defaultPrevented&&r._isValidMenuOpenKey(i)){var l=r.props.onMenuClick;l&&l(i,r.props),r._onToggleMenu(!1),i.preventDefault(),i.stopPropagation()}if((i.which===Re.enter||i.which===Re.space)&&Os(!0,i.target,(o=r.context)===null||o===void 0?void 0:o.registeredProviders),!(i.altKey||i.metaKey)&&(s||a)&&!r.state.menuHidden&&r.props.menuProps){var u=r._menuShouldFocusOnMount!==void 0?r._menuShouldFocusOnMount:r.props.menuProps.shouldFocusOnMount;u||(i.preventDefault(),i.stopPropagation(),r._menuShouldFocusOnMount=!0,r.forceUpdate())}}},r._onTouchStart=function(){r._isSplitButton&&r._splitButtonContainer.current&&!("onpointerdown"in r._splitButtonContainer.current)&&r._handleTouchAndPointerEvent()},r._onMenuClick=function(i){var o=r.props,s=o.onMenuClick,a=o.menuProps;s&&s(i,r.props);var l=typeof a?.shouldFocusOnContainer=="boolean"?a.shouldFocusOnContainer:i.nativeEvent.pointerType==="mouse";i.defaultPrevented||(r._onToggleMenu(l),i.preventDefault(),i.stopPropagation())},vs(r),r._async=new $u(r),r._events=new _i(r),Yw(bN,t,["menuProps","onClick"],"split",r.props.split),r._labelId=ni(),r._descriptionId=ni(),r._ariaDescriptionId=ni(),r.state={menuHidden:!0},r}return Object.defineProperty(e.prototype,"_isSplitButton",{get:function(){return!!this.props.menuProps&&!!this.props.onClick&&this.props.split===!0},enumerable:!1,configurable:!0}),e.prototype.render=function(){var t,r=this.props,i=r.ariaDescription,o=r.ariaLabel,s=r.ariaHidden,a=r.className,l=r.disabled,u=r.allowDisabledFocus,c=r.primaryDisabled,d=r.secondaryText,f=d===void 0?this.props.description:d,g=r.href,m=r.iconProps,y=r.menuIconProps,S=r.styles,b=r.checked,E=r.variantClassName,w=r.theme,C=r.toggle,T=r.getClassNames,D=r.role,k=this.state.menuHidden,M=l||c;this._classNames=T?T(w,a,E,m&&m.className,y&&y.className,M,b,!k,!!this.props.menuProps,this.props.split,!!u):gN(w,S,a,E,m&&m.className,y&&y.className,M,!!this.props.menuProps,b,!k,this.props.split);var N=this,U=N._ariaDescriptionId,ne=N._labelId,oe=N._descriptionId,ae=!M&&!!g,te=ae?"a":"button",we=an(Xo(ae?{}:{type:"button"},this.props.rootProps,this.props),ae?oC:Gs,["disabled"]),J=o||we["aria-label"],Q=void 0;i?Q=U:f&&this.props.onRenderDescription!==qa?Q=oe:we["aria-describedby"]&&(Q=we["aria-describedby"]);var G=void 0;we["aria-labelledby"]?G=we["aria-labelledby"]:Q&&!J&&(G=this._hasText()?ne:void 0);var re=!(this.props["data-is-focusable"]===!1||l&&!u||this._isSplitButton),ie=D==="menuitemcheckbox"||D==="checkbox",Ce=ie||C===!0?!!b:void 0,Te=Xo(we,(t={className:this._classNames.root,ref:this._mergedRef(this.props.elementRef,this._buttonElement),disabled:M&&!u,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onClick:this._onClick,"aria-label":J,"aria-labelledby":G,"aria-describedby":Q,"aria-disabled":M,"data-is-focusable":re},t[ie?"aria-checked":"aria-pressed"]=Ce,t));if(s&&(Te["aria-hidden"]=!0),this._isSplitButton)return this._onRenderSplitButtonContent(te,Te);if(this.props.menuProps){var Oe=this.props.menuProps.id,De=Oe===void 0?"".concat(this._labelId,"-menu"):Oe;Xo(Te,{"aria-expanded":!k,"aria-controls":k?null:De,"aria-haspopup":!0})}return this._onRenderContent(te,Te)},e.prototype.componentDidMount=function(){this._isSplitButton&&this._splitButtonContainer.current&&("onpointerdown"in this._splitButtonContainer.current&&this._events.on(this._splitButtonContainer.current,"pointerdown",this._onPointerDown,!0),"onpointerup"in this._splitButtonContainer.current&&this.props.onPointerUp&&this._events.on(this._splitButtonContainer.current,"pointerup",this.props.onPointerUp,!0))},e.prototype.componentDidUpdate=function(t,r){this.props.onAfterMenuDismiss&&!r.menuHidden&&this.state.menuHidden&&this.props.onAfterMenuDismiss()},e.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose()},e.prototype.focus=function(){var t,r;this._isSplitButton&&this._splitButtonContainer.current?(Os(!0,void 0,(t=this.context)===null||t===void 0?void 0:t.registeredProviders),this._splitButtonContainer.current.focus()):this._buttonElement.current&&(Os(!0,void 0,(r=this.context)===null||r===void 0?void 0:r.registeredProviders),this._buttonElement.current.focus())},e.prototype.dismissMenu=function(){this._dismissMenu()},e.prototype.openMenu=function(t,r){this._openMenu(t,r)},e.prototype._onRenderContent=function(t,r){var i=this,o=this.props,s=t,a=o.menuIconProps,l=o.menuProps,u=o.onRenderIcon,c=u===void 0?this._onRenderIcon:u,d=o.onRenderAriaDescription,f=d===void 0?this._onRenderAriaDescription:d,g=o.onRenderChildren,m=g===void 0?this._onRenderChildren:g,y=o.onRenderMenu,S=y===void 0?this._onRenderMenu:y,b=o.onRenderMenuIcon,E=b===void 0?this._onRenderMenuIcon:b,w=o.disabled,C=o.keytipProps;C&&l&&(C=this._getMemoizedMenuButtonKeytipProps(C));var T=function(k){return A.createElement(s,H({},r,k),A.createElement("span",{className:i._classNames.flexContainer,"data-automationid":"splitbuttonprimary"},c(o,i._onRenderIcon),i._onRenderTextContents(),f(o,i._onRenderAriaDescription),m(o,i._onRenderChildren),!i._isSplitButton&&(l||a||i.props.onRenderMenuIcon)&&E(i.props,i._onRenderMenuIcon),l&&!l.doNotLayer&&i._shouldRenderMenu()&&S(i._getMenuProps(l),i._onRenderMenu)))},D=C?A.createElement(Lu,{keytipProps:this._isSplitButton?void 0:C,ariaDescribedBy:r["aria-describedby"],disabled:w},function(k){return T(k)}):T();return l&&l.doNotLayer?A.createElement(A.Fragment,null,D,this._shouldRenderMenu()&&S(this._getMenuProps(l),this._onRenderMenu)):A.createElement(A.Fragment,null,D,A.createElement(aC,null))},e.prototype._shouldRenderMenu=function(){var t=this.state.menuHidden,r=this.props,i=r.persistMenu,o=r.renderPersistedMenuHiddenOnMount;if(t){if(i&&(this._renderedVisibleMenu||o))return!0}else return!0;return!1},e.prototype._hasText=function(){return this.props.text!==null&&(this.props.text!==void 0||typeof this.props.children=="string")},e.prototype._getMenuProps=function(t){var r=this.props.persistMenu,i=this.state.menuHidden;return!t.ariaLabel&&!t.labelElementId&&this._hasText()&&(t=H(H({},t),{labelElementId:this._labelId})),H(H({id:this._labelId+"-menu",directionalHint:Ut.bottomLeftEdge},t),{shouldFocusOnContainer:this._menuShouldFocusOnContainer,shouldFocusOnMount:this._menuShouldFocusOnMount,hidden:r?i:void 0,className:Nr("ms-BaseButton-menuhost",t.className),target:this._isSplitButton?this._splitButtonContainer.current:this._buttonElement.current,onDismiss:this._onDismissMenu})},e.prototype._onRenderSplitButtonContent=function(t,r){var i=this,o=this.props,s=o.styles,a=s===void 0?{}:s,l=o.disabled,u=o.allowDisabledFocus,c=o.checked,d=o.getSplitButtonClassNames,f=o.primaryDisabled,g=o.menuProps,m=o.toggle,y=o.role,S=o.primaryActionButtonProps,b=this.props.keytipProps,E=this.state.menuHidden,w=d?d(!!l,!E,!!c,!!u):a&&vN(a,!!l,!E,!!c,!!f);Xo(r,{onClick:void 0,onPointerDown:void 0,onPointerUp:void 0,tabIndex:-1,"data-is-focusable":!1}),b&&g&&(b=this._getMemoizedMenuButtonKeytipProps(b));var C=an(r,[],["disabled"]);S&&Xo(r,S);var T=function(D){return A.createElement("div",H({},C,{"data-ktp-target":D?D["data-ktp-target"]:void 0,role:y||"button","aria-disabled":l,"aria-haspopup":!0,"aria-expanded":!E,"aria-pressed":m?!!c:void 0,"aria-describedby":Gu(r["aria-describedby"],D?D["aria-describedby"]:void 0),className:w&&w.splitButtonContainer,onKeyDown:i._onSplitButtonContainerKeyDown,onTouchStart:i._onTouchStart,ref:i._splitButtonContainer,"data-is-focusable":!0,onClick:!l&&!f?i._onSplitButtonPrimaryClick:void 0,tabIndex:!l&&!f||u?0:void 0,"aria-roledescription":r["aria-roledescription"],onFocusCapture:i._onSplitContainerFocusCapture}),A.createElement("span",{style:{display:"flex",width:"100%"}},i._onRenderContent(t,r),i._onRenderSplitButtonMenuButton(w,D),i._onRenderSplitButtonDivider(w)))};return b?A.createElement(Lu,{keytipProps:b,disabled:l},function(D){return T(D)}):T()},e.prototype._onRenderSplitButtonDivider=function(t){if(t&&t.divider){var r=function(i){i.stopPropagation()};return A.createElement("span",{className:t.divider,"aria-hidden":!0,onClick:r})}return null},e.prototype._onRenderSplitButtonMenuButton=function(t,r){var i=this.props,o=i.allowDisabledFocus,s=i.checked,a=i.disabled,l=i.splitButtonMenuProps,u=i.splitButtonAriaLabel,c=i.primaryDisabled,d=this.state.menuHidden,f=this.props.menuIconProps;f===void 0&&(f={iconName:"ChevronDown"});var g=H(H({},l),{styles:t,checked:s,disabled:a,allowDisabledFocus:o,onClick:this._onMenuClick,menuProps:void 0,iconProps:H(H({},f),{className:this._classNames.menuIcon}),ariaLabel:u,"aria-haspopup":!0,"aria-expanded":!d,"data-is-focusable":!1});return A.createElement(e,H({},g,{"data-ktp-execute-target":r&&r["data-ktp-execute-target"],onMouseDown:this._onMouseDown,tabIndex:c&&!o?0:-1}))},e.prototype._onPointerDown=function(t){var r=this.props.onPointerDown;r&&r(t),t.pointerType==="touch"&&(this._handleTouchAndPointerEvent(),t.preventDefault(),t.stopImmediatePropagation())},e.prototype._handleTouchAndPointerEvent=function(){var t=this;this._lastTouchTimeoutId!==void 0&&(this._async.clearTimeout(this._lastTouchTimeoutId),this._lastTouchTimeoutId=void 0),this._processingTouch=!0,this._lastTouchTimeoutId=this._async.setTimeout(function(){t._processingTouch=!1,t._lastTouchTimeoutId=void 0,t.state.menuHidden&&t.focus()},yN)},e.prototype._isValidMenuOpenKey=function(t){return this.props.menuTriggerKeyCode?t.which===this.props.menuTriggerKeyCode:this.props.menuProps?t.which===Re.down&&(t.altKey||t.metaKey):!1},e.defaultProps={baseClassName:"ms-Button",styles:{},split:!1},e.contextType=Tu,e}(A.Component),yb={outline:0},bb=function(n){return{fontSize:n,margin:"0 4px",height:"16px",lineHeight:"16px",textAlign:"center",flexShrink:0}},cv=zt(function(n){var e,t,r=n.semanticColors,i=n.effects,o=n.fonts,s=r.buttonBorder,a=r.disabledBackground,l=r.disabledText,u={left:-2,top:-2,bottom:-2,right:-2,outlineColor:"ButtonText"};return{root:[Za(n,{inset:1,highContrastStyle:u,borderColor:"transparent"}),n.fonts.medium,{border:"1px solid "+s,borderRadius:i.roundedCorner2,boxSizing:"border-box",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 16px",textDecoration:"none",textAlign:"center",userSelect:"none",":active > span":{position:"relative",left:0,top:0}}],rootDisabled:[Za(n,{inset:1,highContrastStyle:u,borderColor:"transparent"}),{backgroundColor:a,borderColor:a,color:l,cursor:"default",":hover":yb,":focus":yb}],iconDisabled:(e={color:l},e[Ke]={color:"GrayText"},e),menuIconDisabled:(t={color:l},t[Ke]={color:"GrayText"},t),flexContainer:{display:"flex",height:"100%",flexWrap:"nowrap",justifyContent:"center",alignItems:"center"},description:{display:"block"},textContainer:{flexGrow:1,display:"block"},icon:bb(o.mediumPlus.fontSize),menuIcon:bb(o.small.fontSize),label:{margin:"0 4px",lineHeight:"100%",display:"block"},screenReaderText:ev}}),nS=zt(function(n,e){var t,r,i,o,s,a,l,u,c,d,f,g,m,y,S,b,E,w=n.effects,C=n.palette,T=n.semanticColors,D={left:-2,top:-2,bottom:-2,right:-2,border:"none"},k={position:"absolute",width:1,right:31,top:8,bottom:8},M={splitButtonContainer:[Za(n,{highContrastStyle:D,inset:2,pointerEvents:"none"}),{display:"inline-flex",".ms-Button--default":{borderTopRightRadius:"0",borderBottomRightRadius:"0",borderRight:"none",flexGrow:"1"},".ms-Button--primary":(t={borderTopRightRadius:"0",borderBottomRightRadius:"0",border:"none",flexGrow:"1",":hover":{border:"none"},":active":{border:"none"}},t[Ke]=H(H({color:"WindowText",backgroundColor:"Window",border:"1px solid WindowText",borderRightWidth:"0"},yi()),{":hover":{backgroundColor:"Highlight",border:"1px solid Highlight",borderRightWidth:"0",color:"HighlightText"},":active":{border:"1px solid Highlight"}}),t),".ms-Button--default + .ms-Button":(r={},r[Ke]={border:"1px solid WindowText",borderLeftWidth:"0",":hover":{backgroundColor:"HighlightText",borderColor:"Highlight",color:"Highlight",".ms-Button-menuIcon":H({backgroundColor:"HighlightText",color:"Highlight"},yi())}},r),'.ms-Button--default + .ms-Button[aria-expanded="true"]':(i={},i[Ke]={backgroundColor:"HighlightText",borderColor:"Highlight",color:"Highlight",".ms-Button-menuIcon":H({backgroundColor:"HighlightText",color:"Highlight"},yi())},i),".ms-Button--primary + .ms-Button":(o={border:"none"},o[Ke]={border:"1px solid WindowText",borderLeftWidth:"0",":hover":{borderLeftWidth:"0",backgroundColor:"Highlight",borderColor:"Highlight",color:"HighlightText",".ms-Button-menuIcon":H(H({},yi()),{color:"HighlightText"})}},o),'.ms-Button--primary + .ms-Button[aria-expanded="true"]':(s={},s[Ke]=H(H({backgroundColor:"Highlight",borderColor:"Highlight",color:"HighlightText"},yi()),{".ms-Button-menuIcon":{color:"HighlightText"}}),s),".ms-Button.is-disabled":(a={},a[Ke]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},a)}],splitButtonContainerHovered:{".ms-Button--default.is-disabled":(l={backgroundColor:T.buttonBackgroundDisabled,color:T.buttonTextDisabled},l[Ke]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},l),".ms-Button--primary.is-disabled":(u={backgroundColor:T.primaryButtonBackgroundDisabled,color:T.primaryButtonTextDisabled},u[Ke]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},u)},splitButtonContainerChecked:{".ms-Button--primary":(c={},c[Ke]=H({color:"Window",backgroundColor:"WindowText"},yi()),c)},splitButtonContainerCheckedHovered:{".ms-Button--primary":(d={},d[Ke]=H({color:"Window",backgroundColor:"WindowText"},yi()),d)},splitButtonContainerFocused:{outline:"none!important"},splitButtonMenuButton:(f={padding:6,height:"auto",boxSizing:"border-box",borderRadius:0,borderTopRightRadius:w.roundedCorner2,borderBottomRightRadius:w.roundedCorner2,border:"1px solid ".concat(C.neutralSecondaryAlt),borderLeft:"none",outline:"transparent",userSelect:"none",display:"inline-block",textDecoration:"none",textAlign:"center",cursor:"pointer",verticalAlign:"top",width:32,marginLeft:-1,marginTop:0,marginRight:0,marginBottom:0},f[Ke]={".ms-Button-menuIcon":{color:"WindowText"}},f),splitButtonDivider:H(H({},k),(g={},g[Ke]={backgroundColor:"WindowText"},g)),splitButtonDividerDisabled:H(H({},k),(m={},m[Ke]={backgroundColor:"GrayText"},m)),splitButtonMenuButtonDisabled:(y={pointerEvents:"none",border:"none",":hover":{cursor:"default"},".ms-Button--primary":(S={},S[Ke]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},S),".ms-Button-menuIcon":(b={},b[Ke]={color:"GrayText"},b)},y[Ke]={color:"GrayText",border:"1px solid GrayText",backgroundColor:"Window"},y),splitButtonFlexContainer:{display:"flex",height:"100%",flexWrap:"nowrap",justifyContent:"center",alignItems:"center"},splitButtonContainerDisabled:(E={outline:"none",border:"none"},E[Ke]=H({color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},yi()),E),splitButtonMenuFocused:H({},Za(n,{highContrastStyle:D,inset:2}))};return Fo(M,e)}),rS=function(){return{position:"absolute",width:1,right:31,top:8,bottom:8}};function EN(n){var e,t,r,i,o,s=n.semanticColors,a=n.palette,l=s.buttonBackground,u=s.buttonBackgroundPressed,c=s.buttonBackgroundHovered,d=s.buttonBackgroundDisabled,f=s.buttonText,g=s.buttonTextHovered,m=s.buttonTextDisabled,y=s.buttonTextChecked,S=s.buttonTextCheckedHovered;return{root:{backgroundColor:l,color:f},rootHovered:(e={backgroundColor:c,color:g},e[Ke]={borderColor:"Highlight",color:"Highlight"},e),rootPressed:{backgroundColor:u,color:y},rootExpanded:{backgroundColor:u,color:y},rootChecked:{backgroundColor:u,color:y},rootCheckedHovered:{backgroundColor:u,color:S},rootDisabled:(t={color:m,backgroundColor:d},t[Ke]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},t),splitButtonContainer:(r={},r[Ke]={border:"none"},r),splitButtonMenuButton:{color:a.white,backgroundColor:"transparent",":hover":(i={backgroundColor:a.neutralLight},i[Ke]={color:"Highlight"},i)},splitButtonMenuButtonDisabled:{backgroundColor:s.buttonBackgroundDisabled,":hover":{backgroundColor:s.buttonBackgroundDisabled}},splitButtonDivider:H(H({},rS()),(o={backgroundColor:a.neutralTertiaryAlt},o[Ke]={backgroundColor:"WindowText"},o)),splitButtonDividerDisabled:{backgroundColor:n.palette.neutralTertiaryAlt},splitButtonMenuButtonChecked:{backgroundColor:a.neutralQuaternaryAlt,":hover":{backgroundColor:a.neutralQuaternaryAlt}},splitButtonMenuButtonExpanded:{backgroundColor:a.neutralQuaternaryAlt,":hover":{backgroundColor:a.neutralQuaternaryAlt}},splitButtonMenuIcon:{color:s.buttonText},splitButtonMenuIconDisabled:{color:s.buttonTextDisabled}}}function _N(n){var e,t,r,i,o,s,a,l,u,c=n.palette,d=n.semanticColors;return{root:(e={backgroundColor:d.primaryButtonBackground,border:"1px solid ".concat(d.primaryButtonBackground),color:d.primaryButtonText},e[Ke]=H({color:"Window",backgroundColor:"WindowText",borderColor:"WindowText"},yi()),e[".".concat(gt," &:focus, :host(.").concat(gt,") &:focus")]={":after":{border:"none",outlineColor:c.white}},e),rootHovered:(t={backgroundColor:d.primaryButtonBackgroundHovered,border:"1px solid ".concat(d.primaryButtonBackgroundHovered),color:d.primaryButtonTextHovered},t[Ke]={color:"Window",backgroundColor:"Highlight",borderColor:"Highlight"},t),rootPressed:(r={backgroundColor:d.primaryButtonBackgroundPressed,border:"1px solid ".concat(d.primaryButtonBackgroundPressed),color:d.primaryButtonTextPressed},r[Ke]=H({color:"Window",backgroundColor:"WindowText",borderColor:"WindowText"},yi()),r),rootExpanded:{backgroundColor:d.primaryButtonBackgroundPressed,color:d.primaryButtonTextPressed},rootChecked:{backgroundColor:d.primaryButtonBackgroundPressed,color:d.primaryButtonTextPressed},rootCheckedHovered:{backgroundColor:d.primaryButtonBackgroundPressed,color:d.primaryButtonTextPressed},rootDisabled:(i={color:d.primaryButtonTextDisabled,backgroundColor:d.primaryButtonBackgroundDisabled},i[Ke]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},i),splitButtonContainer:(o={},o[Ke]={border:"none"},o),splitButtonDivider:H(H({},rS()),(s={backgroundColor:c.white},s[Ke]={backgroundColor:"Window"},s)),splitButtonMenuButton:(a={backgroundColor:d.primaryButtonBackground,color:d.primaryButtonText},a[Ke]={backgroundColor:"Canvas"},a[":hover"]=(l={backgroundColor:d.primaryButtonBackgroundHovered},l[Ke]={color:"Highlight"},l),a),splitButtonMenuButtonDisabled:{backgroundColor:d.primaryButtonBackgroundDisabled,":hover":{backgroundColor:d.primaryButtonBackgroundDisabled}},splitButtonMenuButtonChecked:{backgroundColor:d.primaryButtonBackgroundPressed,":hover":{backgroundColor:d.primaryButtonBackgroundPressed}},splitButtonMenuButtonExpanded:{backgroundColor:d.primaryButtonBackgroundPressed,":hover":{backgroundColor:d.primaryButtonBackgroundPressed}},splitButtonMenuIcon:{color:d.primaryButtonText},splitButtonMenuIconDisabled:(u={color:c.neutralTertiary},u[Ke]={color:"GrayText"},u)}}var wN="32px",CN="80px",SN=zt(function(n,e,t){var r=cv(n),i=nS(n),o={root:{minWidth:CN,minHeight:wN},label:{fontWeight:Tt.semibold}};return Fo(r,o,t?_N(n):EN(n),i,e)}),Ls=function(n){Lt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(){var t=this.props,r=t.primary,i=r===void 0?!1:r,o=t.styles,s=t.theme;return A.createElement(uv,H({},this.props,{variantClassName:i?"ms-Button--primary":"ms-Button--default",styles:SN(s,o,i),onRenderDescription:qa}))},e=sl([Mh("DefaultButton",["theme","styles"])],e),e}(A.Component),xN="40px",AN="0 4px",FN=zt(function(n,e){var t,r,i,o=cv(n),s={root:(t={padding:AN,height:xN,color:n.palette.neutralPrimary,backgroundColor:"transparent",border:"1px solid transparent"},t[Ke]={borderColor:"Window"},t),rootHovered:(r={color:n.palette.themePrimary},r[Ke]={color:"Highlight"},r),iconHovered:{color:n.palette.themePrimary},rootPressed:{color:n.palette.black},rootExpanded:{color:n.palette.themePrimary},iconPressed:{color:n.palette.themeDarker},rootDisabled:(i={color:n.palette.neutralTertiary,backgroundColor:"transparent",borderColor:"transparent"},i[Ke]={color:"GrayText"},i),rootChecked:{color:n.palette.black},iconChecked:{color:n.palette.themeDarker},flexContainer:{justifyContent:"flex-start"},icon:{color:n.palette.themeDarkAlt},iconDisabled:{color:"inherit"},menuIcon:{color:n.palette.neutralSecondary},textContainer:{flexGrow:0}};return Fo(o,s,e)}),kN=function(n){Lt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(){var t=this.props,r=t.styles,i=t.theme;return A.createElement(uv,H({},this.props,{variantClassName:"ms-Button--action ms-Button--command",styles:FN(i,r),onRenderDescription:qa}))},e=sl([Mh("ActionButton",["theme","styles"])],e),e}(A.Component),TN=zt(function(n,e){var t,r=cv(n),i=nS(n),o=n.palette,s=n.semanticColors,a={root:{padding:"0 4px",width:"32px",height:"32px",backgroundColor:"transparent",border:"none",color:s.link},rootHovered:(t={color:o.themeDarkAlt,backgroundColor:o.neutralLighter},t[Ke]={borderColor:"Highlight",color:"Highlight"},t),rootHasMenu:{width:"auto"},rootPressed:{color:o.themeDark,backgroundColor:o.neutralLight},rootExpanded:{color:o.themeDark,backgroundColor:o.neutralLight},rootChecked:{color:o.themeDark,backgroundColor:o.neutralLight},rootCheckedHovered:{color:o.themeDark,backgroundColor:o.neutralQuaternaryAlt},rootDisabled:{color:o.neutralTertiaryAlt}};return Fo(r,a,i,e)}),wi=function(n){Lt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(){var t=this.props,r=t.styles,i=t.theme;return A.createElement(uv,H({},this.props,{variantClassName:"ms-Button--icon",styles:TN(i,r),onRenderText:qa,onRenderDescription:qa}))},e=sl([Mh("IconButton",["theme","styles"])],e),e}(A.Component),Dg=function(n){Lt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(){return A.createElement(Ls,H({},this.props,{primary:!0,onRenderDescription:qa}))},e=sl([Mh("PrimaryButton",["theme","styles"])],e),e}(A.Component),Qi;(function(n){n[n.normal=0]="normal",n[n.largeHeader=1]="largeHeader",n[n.close=2]="close"})(Qi||(Qi={}));var iS=Sg.durationValue2,DN={root:"ms-Modal",main:"ms-Dialog-main",scrollableContent:"ms-Modal-scrollableContent",isOpen:"is-open",layer:"ms-Modal-Layer"},PN=function(n){var e,t=n.className,r=n.containerClassName,i=n.scrollableContentClassName,o=n.isOpen,s=n.isVisible,a=n.hasBeenOpened,l=n.modalRectangleTop,u=n.theme,c=n.topOffsetFixed,d=n.isModeless,f=n.layerClassName,g=n.isDefaultDragHandle,m=n.windowInnerHeight,y=u.palette,S=u.effects,b=u.fonts,E=Ar(DN,u);return{root:[E.root,b.medium,{backgroundColor:"transparent",position:"fixed",height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,pointerEvents:"none",transition:"opacity ".concat(iS)},c&&typeof l=="number"&&a&&{alignItems:"flex-start"},o&&E.isOpen,s&&{opacity:1},s&&!d&&{pointerEvents:"auto"},t],main:[E.main,{boxShadow:S.elevation64,borderRadius:S.roundedCorner2,backgroundColor:y.white,boxSizing:"border-box",position:"relative",textAlign:"left",outline:"3px solid transparent",maxHeight:"calc(100% - 32px)",maxWidth:"calc(100% - 32px)",minHeight:"176px",minWidth:"288px",overflowY:"auto",zIndex:d?Qa.Layer:void 0},d&&{pointerEvents:"auto"},c&&typeof l=="number"&&a&&{top:l},g&&{cursor:"move"},r],scrollableContent:[E.scrollableContent,{overflowY:"auto",flexGrow:1,maxHeight:"100vh",selectors:(e={},e["@supports (-webkit-overflow-scrolling: touch)"]={maxHeight:m},e)},i],layer:d&&[f,E.layer,{pointerEvents:"none"}],keyboardMoveIconContainer:{position:"absolute",display:"flex",justifyContent:"center",width:"100%",padding:"3px 0px"},keyboardMoveIcon:{fontSize:b.xLargePlus.fontSize,width:"24px"}}},MN=Wn(),IN=function(n){Lt(e,n);function e(t){var r=n.call(this,t)||this;vs(r);var i=r.props.allowTouchBodyScroll,o=i===void 0?!1:i;return r._allowTouchBodyScroll=o,r}return e.prototype.componentDidMount=function(){!this._allowTouchBodyScroll&&iP()},e.prototype.componentWillUnmount=function(){!this._allowTouchBodyScroll&&oP()},e.prototype.render=function(){var t=this.props,r=t.isDarkThemed,i=t.className,o=t.theme,s=t.styles,a=an(this.props,ms),l=MN(s,{theme:o,className:i,isDark:r});return A.createElement("div",H({},a,{className:l.root}))},e}(A.Component),RN={root:"ms-Overlay",rootDark:"ms-Overlay--dark"},LN=function(n){var e,t=n.className,r=n.theme,i=n.isNone,o=n.isDark,s=r.palette,a=Ar(RN,r);return{root:[a.root,r.fonts.medium,{backgroundColor:s.whiteTranslucent40,top:0,right:0,bottom:0,left:0,position:"absolute",selectors:(e={},e[Ke]={border:"1px solid WindowText",opacity:0},e)},i&&{visibility:"hidden"},o&&[a.rootDark,{backgroundColor:s.blackTranslucent40}],t]}},NN=Un(IN,LN,void 0,{scope:"Overlay"}),BN=zt(function(n,e){return{root:Gi(n,e&&{touchAction:"none",selectors:{"& *":{userSelect:"none"}}})}}),Nl={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},ON=function(n){Lt(e,n);function e(t){var r=n.call(this,t)||this;return r._currentEventType=Nl.mouse,r._events=[],r._onMouseDown=function(i){var o=A.Children.only(r.props.children).props.onMouseDown;return o&&o(i),r._currentEventType=Nl.mouse,r._onDragStart(i)},r._onMouseUp=function(i){var o=A.Children.only(r.props.children).props.onMouseUp;return o&&o(i),r._currentEventType=Nl.mouse,r._onDragStop(i)},r._onTouchStart=function(i){var o=A.Children.only(r.props.children).props.onTouchStart;return o&&o(i),r._currentEventType=Nl.touch,r._onDragStart(i)},r._onTouchEnd=function(i){var o=A.Children.only(r.props.children).props.onTouchEnd;o&&o(i),r._currentEventType=Nl.touch,r._onDragStop(i)},r._onDragStart=function(i){if(typeof i.button=="number"&&i.button!==0)return!1;if(!(r.props.handleSelector&&!r._matchesSelector(i.target,r.props.handleSelector)||r.props.preventDragSelector&&r._matchesSelector(i.target,r.props.preventDragSelector))){r._touchId=r._getTouchId(i);var o=r._getControlPosition(i);if(o!==void 0){var s=r._createDragDataFromPosition(o);r.props.onStart&&r.props.onStart(i,s),r.setState({isDragging:!0,lastPosition:o});var a=Gd(r.context);r._events=[qi(a.body,r._currentEventType.move,r._onDrag,!0),qi(a.body,r._currentEventType.stop,r._onDragStop,!0)]}}},r._onDrag=function(i){i.type==="touchmove"&&i.preventDefault();var o=r._getControlPosition(i);if(o){var s=r._createUpdatedDragData(r._createDragDataFromPosition(o)),a=s.position;r.props.onDragChange&&r.props.onDragChange(i,s),r.setState({position:a,lastPosition:o})}},r._onDragStop=function(i){if(r.state.isDragging){var o=r._getControlPosition(i);if(o){var s=r._createDragDataFromPosition(o);r.setState({isDragging:!1,lastPosition:void 0}),r.props.onStop&&r.props.onStop(i,s),r.props.position&&r.setState({position:r.props.position}),r._events.forEach(function(a){return a()})}}},r.state={isDragging:!1,position:r.props.position||{x:0,y:0},lastPosition:void 0},r}return e.prototype.componentDidUpdate=function(t){this.props.position&&(!t.position||this.props.position!==t.position)&&this.setState({position:this.props.position})},e.prototype.componentWillUnmount=function(){this._events.forEach(function(t){return t()})},e.prototype.render=function(){var t=A.Children.only(this.props.children),r=t.props,i=this.props.position,o=this.state,s=o.position,a=o.isDragging,l=s.x,u=s.y;return i&&!a&&(l=i.x,u=i.y),A.cloneElement(t,{style:H(H({},r.style),{transform:"translate(".concat(l,"px, ").concat(u,"px)")}),className:BN(r.className,this.state.isDragging).root,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onTouchStart:this._onTouchStart,onTouchEnd:this._onTouchEnd})},e.prototype._getControlPosition=function(t){var r=this._getActiveTouch(t);if(!(this._touchId!==void 0&&!r)){var i=r||t;return{x:i.clientX,y:i.clientY}}},e.prototype._getActiveTouch=function(t){return t.targetTouches&&this._findTouchInTouchList(t.targetTouches)||t.changedTouches&&this._findTouchInTouchList(t.changedTouches)},e.prototype._getTouchId=function(t){var r=t.targetTouches&&t.targetTouches[0]||t.changedTouches&&t.changedTouches[0];if(r)return r.identifier},e.prototype._matchesSelector=function(t,r){var i;if(!t||t===((i=Gd(this.context))===null||i===void 0?void 0:i.body))return!1;var o=t.matches||t.webkitMatchesSelector||t.msMatchesSelector;return o?o.call(t,r)||this._matchesSelector(t.parentElement,r):!1},e.prototype._findTouchInTouchList=function(t){if(this._touchId!==void 0){for(var r=0;r<t.length;r++)if(t[r].identifier===this._touchId)return t[r]}},e.prototype._createDragDataFromPosition=function(t){var r=this.state.lastPosition;return r===void 0?{delta:{x:0,y:0},lastPosition:t,position:t}:{delta:{x:t.x-r.x,y:t.y-r.y},lastPosition:r,position:t}},e.prototype._createUpdatedDragData=function(t){var r=this.state.position;return{position:{x:r.x+t.delta.x,y:r.y+t.delta.y},delta:t.delta,lastPosition:r}},e.contextType=al,e}(A.Component),la={x:0,y:0},HN={isOpen:!1,isDarkOverlay:!0,className:"",containerClassName:"",enableAriaHiddenSiblings:!0},zN=Wn(),jN=function(n){var e=10;return n.shiftKey?n.ctrlKey||(e=50):n.ctrlKey&&(e=1),e},WN=function(n,e){A.useImperativeHandle(n.componentRef,function(){return{focus:function(){e.current&&e.current.focus()}}},[e])},oS=A.forwardRef(function(n,e){var t,r,i,o,s,a=Xu(HN,n),l=a.allowTouchBodyScroll,u=a.className,c=a.children,d=a.containerClassName,f=a.scrollableContentClassName,g=a.elementToFocusOnDismiss,m=a.firstFocusableSelector,y=a.focusTrapZoneProps,S=a.forceFocusInsideTrap,b=a.disableRestoreFocus,E=b===void 0?a.ignoreExternalFocusing:b,w=a.isBlocking,C=a.isAlert,T=a.isClickableOutsideFocusTrap,D=a.isDarkOverlay,k=a.onDismiss,M=a.layerProps,N=a.overlay,U=a.isOpen,ne=a.titleAriaId,oe=a.styles,ae=a.subtitleAriaId,te=a.theme,we=a.topOffsetFixed,J=a.responsiveMode,Q=a.onLayerDidMount,G=a.isModeless,re=a.dragOptions,ie=a.onDismissed,Ce=a.enableAriaHiddenSiblings,Te=a.popupProps,Oe=A.useRef(null),De=A.useRef(null),pt=Ti(De,y?.componentRef),He=A.useRef(null),fe=Ti(Oe,e),nt=GC(fe),me=Qu("ModalFocusTrapZone",y?.id),Qe=qu(),wt=nR(),ze=wt.setTimeout,bt=wt.clearTimeout,je=A.useState(U),mt=je[0],Ct=je[1],Vn=A.useState(U),ko=Vn[0],no=Vn[1],Ur=A.useState(la),Sn=Ur[0],ur=Ur[1],Fr=A.useState(),To=Fr[0],li=Fr[1],Kn=eR(!1),$n=Kn[0],Di=Kn[1],ui=Di.toggle,cr=Di.setFalse,Pe=ri(function(){return{onModalCloseTimer:0,allowTouchBodyScroll:l,scrollableContent:null,lastSetCoordinates:la,events:new _i({})}}),mn=(re||{}).keepInBounds,Pi=C??(w&&!G),ro=M===void 0?"":M.className,un=zN(oe,{theme:te,className:u,containerClassName:d,scrollableContentClassName:f,isOpen:U,isVisible:ko,hasBeenOpened:Pe.hasBeenOpened,modalRectangleTop:To,topOffsetFixed:we,isModeless:G,layerClassName:ro,windowInnerHeight:Qe?.innerHeight,isDefaultDragHandle:re&&!re.dragHandleSelector}),Fe=H(H({eventBubblingEnabled:!1},M),{onLayerDidMount:M&&M.onLayerDidMount?M.onLayerDidMount:Q,insertFirst:M?.insertFirst||G,className:un.layer}),ci=A.useCallback(function(le){le?Pe.allowTouchBodyScroll?rP(le,Pe.events):nP(le,Pe.events):Pe.events.off(Pe.scrollableContent),Pe.scrollableContent=le},[Pe]),Gn=function(){var le=He.current,de=le?.getBoundingClientRect();de&&(we&&li(de.top),mn&&(Pe.minPosition={x:-de.left,y:-de.top},Pe.maxPosition={x:de.left,y:de.top}))},Gt=A.useCallback(function(le,de){var Se=Pe.minPosition,et=Pe.maxPosition;return mn&&Se&&et&&(de=Math.max(Se[le],de),de=Math.min(et[le],de)),de},[mn,Pe]),ye=function(){var le;Pe.lastSetCoordinates=la,cr(),Pe.isInKeyboardMoveMode=!1,Ct(!1),ur(la),(le=Pe.disposeOnKeyUp)===null||le===void 0||le.call(Pe),ie?.()},io=A.useCallback(function(){cr(),Pe.isInKeyboardMoveMode=!1},[Pe,cr]),Mi=A.useCallback(function(le,de){ur(function(Se){return{x:Gt("x",Se.x+de.delta.x),y:Gt("y",Se.y+de.delta.y)}})},[Gt]),oo=A.useCallback(function(){De.current&&De.current.focus()},[]),Do=function(){var le=function(de){if(de.altKey&&de.ctrlKey&&de.keyCode===Re.space){de.preventDefault(),de.stopPropagation();return}var Se=de.altKey||de.keyCode===Re.escape;if($n&&Se&&cr(),Pe.isInKeyboardMoveMode&&(de.keyCode===Re.escape||de.keyCode===Re.enter)&&(Pe.isInKeyboardMoveMode=!1,de.preventDefault(),de.stopPropagation()),Pe.isInKeyboardMoveMode){var et=!0,Ie=jN(de);switch(de.keyCode){case Re.escape:ur(Pe.lastSetCoordinates);case Re.enter:{Pe.lastSetCoordinates=la;break}case Re.up:{ur(function(Me){return{x:Me.x,y:Gt("y",Me.y-Ie)}});break}case Re.down:{ur(function(Me){return{x:Me.x,y:Gt("y",Me.y+Ie)}});break}case Re.left:{ur(function(Me){return{x:Gt("x",Me.x-Ie),y:Me.y}});break}case Re.right:{ur(function(Me){return{x:Gt("x",Me.x+Ie),y:Me.y}});break}default:et=!1}et&&(de.preventDefault(),de.stopPropagation())}};Pe.lastSetCoordinates=Sn,cr(),Pe.isInKeyboardMoveMode=!0,Pe.events.on(Qe,"keydown",le,!0),Pe.disposeOnKeyDown=function(){Pe.events.off(Qe,"keydown",le,!0),Pe.disposeOnKeyDown=void 0}},Y=function(le){var de,Se;(de=y?.onBlur)===null||de===void 0||de.call(y,le),Pe.lastSetCoordinates=la,Pe.isInKeyboardMoveMode=!1,(Se=Pe.disposeOnKeyDown)===null||Se===void 0||Se.call(Pe)},Z=function(){var le=function(de){de.altKey&&de.ctrlKey&&de.keyCode===Re.space&&_r(Pe.scrollableContent,de.target)&&(ui(),de.preventDefault(),de.stopPropagation())};Pe.disposeOnKeyUp||(Pe.events.on(Qe,"keyup",le,!0),Pe.disposeOnKeyUp=function(){Pe.events.off(Qe,"keyup",le,!0),Pe.disposeOnKeyUp=void 0})};A.useEffect(function(){bt(Pe.onModalCloseTimer),U&&(requestAnimationFrame(function(){return ze(Gn,0)}),Ct(!0),re&&Z(),Pe.hasBeenOpened=!0,no(!0)),!U&&mt&&(Pe.onModalCloseTimer=ze(ye,parseFloat(iS)*1e3),no(!1))},[mt,U]),kC(function(){Pe.events.dispose(),Pe.onModalCloseTimer&&(bt(Pe.onModalCloseTimer),Pe.onModalCloseTimer=0)}),WN(a,De);var pe=A.createElement(Rs,H({},y,{id:me,ref:He,componentRef:pt,className:Nr(un.main,y?.className),elementToFocusOnDismiss:(t=y?.elementToFocusOnDismiss)!==null&&t!==void 0?t:g,isClickableOutsideFocusTrap:(r=y?.isClickableOutsideFocusTrap)!==null&&r!==void 0?r:G||T||!w,disableRestoreFocus:(i=y?.disableRestoreFocus)!==null&&i!==void 0?i:E,forceFocusInsideTrap:((o=y?.forceFocusInsideTrap)!==null&&o!==void 0?o:S)&&!G,firstFocusableSelector:y?.firstFocusableSelector||m,focusPreviouslyFocusedInnerElement:(s=y?.focusPreviouslyFocusedInnerElement)!==null&&s!==void 0?s:!0,onBlur:Pe.isInKeyboardMoveMode?Y:void 0}),re&&Pe.isInKeyboardMoveMode&&A.createElement("div",{className:un.keyboardMoveIconContainer},re.keyboardMoveIconProps?A.createElement(ds,H({},re.keyboardMoveIconProps)):A.createElement(ds,{iconName:"move",className:un.keyboardMoveIcon})),A.createElement("div",{ref:ci,className:un.scrollableContent,"data-is-scrollable":!0},re&&$n&&A.createElement(re.menu,{items:[{key:"move",text:re.moveMenuItemText,onClick:Do},{key:"close",text:re.closeMenuItemText,onClick:ye}],onDismiss:cr,alignTargetEdge:!0,coverTarget:!0,directionalHint:Ut.topLeftEdge,directionalHintFixed:!0,shouldFocusOnMount:!0,target:Pe.scrollableContent}),c));return mt&&nt>=(J||qs.small)&&A.createElement(NC,H({ref:fe},Fe),A.createElement(rv,H({role:Pi?"alertdialog":"dialog",ariaLabelledBy:ne,ariaDescribedBy:ae,onDismiss:k,shouldRestoreFocus:!E,enableAriaHiddenSiblings:Ce,"aria-modal":!G},Te),A.createElement("div",{className:un.root,role:G?void 0:"document"},!G&&A.createElement(NN,H({"aria-hidden":!0,isDarkThemed:D,onClick:w?void 0:k,allowTouchBodyScroll:l},N)),re?A.createElement(ON,{handleSelector:re.dragHandleSelector||"#".concat(me),preventDragSelector:"button",onStart:io,onDragChange:Mi,onStop:oo,position:Sn},pe):pe)))||null});oS.displayName="Modal";var sS=Un(oS,PN,void 0,{scope:"Modal",fields:["theme","styles","enableAriaHiddenSiblings"]});sS.displayName="Modal";var UN=Wn(),VN=function(n){Lt(e,n);function e(t){var r=n.call(this,t)||this;return vs(r),r}return e.prototype.render=function(){var t=this.props,r=t.className,i=t.styles,o=t.theme;return this._classNames=UN(i,{theme:o,className:r}),A.createElement("div",{className:this._classNames.actions},A.createElement("div",{className:this._classNames.actionsRight},this._renderChildrenAsActions()))},e.prototype._renderChildrenAsActions=function(){var t=this;return A.Children.map(this.props.children,function(r){return r?A.createElement("span",{className:t._classNames.action},r):null})},e}(A.Component),KN={actions:"ms-Dialog-actions",action:"ms-Dialog-action",actionsRight:"ms-Dialog-actionsRight"},$N=function(n){var e=n.className,t=n.theme,r=Ar(KN,t);return{actions:[r.actions,{position:"relative",width:"100%",minHeight:"24px",lineHeight:"24px",margin:"16px 0 0",fontSize:"0",selectors:{".ms-Button":{lineHeight:"normal",verticalAlign:"middle"}}},e],action:[r.action,{margin:"0 4px"}],actionsRight:[r.actionsRight,{alignItems:"center",display:"flex",fontSize:"0",justifyContent:"flex-end",marginRight:"-4px"}]}},Nu=Un(VN,$N,void 0,{scope:"DialogFooter"});Nu.displayName="DialogFooter";var GN=Wn(),qN=A.createElement(Nu,null).type,XN=function(n){Lt(e,n);function e(t){var r=n.call(this,t)||this;return vs(r),r}return e.prototype.render=function(){var t=this.props,r=t.showCloseButton,i=t.className,o=t.closeButtonAriaLabel,s=t.onDismiss,a=t.subTextId,l=t.subText,u=t.titleProps,c=u===void 0?{}:u,d=t.titleId,f=t.title,g=t.type,m=t.styles,y=t.theme,S=t.draggableHeaderClassName,b=GN(m,{theme:y,className:i,isLargeHeader:g===Qi.largeHeader,isClose:g===Qi.close,draggableHeaderClassName:S}),E=this._groupChildren(),w;return l&&(w=A.createElement("p",{className:b.subText,id:a},l)),A.createElement("div",{className:b.content},A.createElement("div",{className:b.header},A.createElement("div",H({id:d,role:"heading","aria-level":1},c,{className:Nr(b.title,c.className)}),f),A.createElement("div",{className:b.topButton},this.props.topButtonsProps.map(function(C,T){return A.createElement(wi,H({key:C.uniqueId||T},C))}),(g===Qi.close||r&&g!==Qi.largeHeader)&&A.createElement(wi,{className:b.button,iconProps:{iconName:"Cancel"},ariaLabel:o,onClick:s}))),A.createElement("div",{className:b.inner},A.createElement("div",{className:b.innerContent},w,E.contents),E.footers))},e.prototype._groupChildren=function(){var t={footers:[],contents:[]};return A.Children.map(this.props.children,function(r){typeof r=="object"&&r!==null&&r.type===qN?t.footers.push(r):t.contents.push(r)}),t},e.defaultProps={showCloseButton:!1,className:"",topButtonsProps:[],closeButtonAriaLabel:"Close"},e=sl([KC],e),e}(A.Component),YN={contentLgHeader:"ms-Dialog-lgHeader",close:"ms-Dialog--close",subText:"ms-Dialog-subText",header:"ms-Dialog-header",headerLg:"ms-Dialog--lgHeader",button:"ms-Dialog-button ms-Dialog-button--close",inner:"ms-Dialog-inner",content:"ms-Dialog-content",title:"ms-Dialog-title"},QN=function(n){var e,t,r,i=n.className,o=n.theme,s=n.isLargeHeader,a=n.isClose,l=n.hidden,u=n.isMultiline,c=n.draggableHeaderClassName,d=o.palette,f=o.fonts,g=o.effects,m=o.semanticColors,y=Ar(YN,o);return{content:[s&&[y.contentLgHeader,{borderTop:"4px solid ".concat(d.themePrimary)}],a&&y.close,{flexGrow:1,overflowY:"hidden"},i],subText:[y.subText,f.medium,{margin:"0 0 24px 0",color:m.bodySubtext,lineHeight:"1.5",wordWrap:"break-word",fontWeight:Tt.regular}],header:[y.header,{position:"relative",width:"100%",boxSizing:"border-box"},a&&y.close,c&&[c,{cursor:"move"}]],button:[y.button,l&&{selectors:{".ms-Icon.ms-Icon--Cancel":{color:m.buttonText,fontSize:mo.medium}}}],inner:[y.inner,{padding:"0 24px 24px",selectors:(e={},e["@media (min-width: ".concat(ip,"px) and (max-width: ").concat(op,"px)")]={padding:"0 16px 16px"},e)}],innerContent:[y.content,{position:"relative",width:"100%"}],title:[y.title,f.xLarge,{color:m.bodyText,margin:"0",minHeight:f.xLarge.fontSize,padding:"16px 46px 20px 24px",lineHeight:"normal",selectors:(t={},t["@media (min-width: ".concat(ip,"px) and (max-width: ").concat(op,"px)")]={padding:"16px 46px 16px 16px"},t)},s&&{color:m.menuHeader},u&&{fontSize:f.xxLarge.fontSize}],topButton:[{display:"flex",flexDirection:"row",flexWrap:"nowrap",position:"absolute",top:"0",right:"0",padding:"15px 15px 0 0",selectors:(r={"> *":{flex:"0 0 auto"},".ms-Dialog-button":{color:m.buttonText},".ms-Dialog-button:hover":{color:m.buttonTextHovered,borderRadius:g.roundedCorner2}},r["@media (min-width: ".concat(ip,"px) and (max-width: ").concat(op,"px)")]={padding:"15px 8px 0 0"},r)}]}},aS=Un(XN,QN,void 0,{scope:"DialogContent"});aS.displayName="DialogContent";var ZN=Wn(),JN={isDarkOverlay:!1,isBlocking:!1,className:"",containerClassName:"",topOffsetFixed:!1,enableAriaHiddenSiblings:!0},eB={type:Qi.normal,className:"",topButtonsProps:[]},tB=function(n){Lt(e,n);function e(t){var r=n.call(this,t)||this;return r._getSubTextId=function(){var i=r.props,o=i.ariaDescribedById,s=i.modalProps,a=i.dialogContentProps,l=i.subText,u=s&&s.subtitleAriaId||o;return u||(u=(a&&a.subText||l)&&r._defaultSubTextId),u},r._getTitleTextId=function(){var i=r.props,o=i.ariaLabelledById,s=i.modalProps,a=i.dialogContentProps,l=i.title,u=s&&s.titleAriaId||o;return u||(u=(a&&a.title||l)&&r._defaultTitleTextId),u},r._id=ni("Dialog"),r._defaultTitleTextId=r._id+"-title",r._defaultSubTextId=r._id+"-subText",r}return e.prototype.render=function(){var t,r,i,o=this.props,s=o.className,a=o.containerClassName,l=o.contentClassName,u=o.elementToFocusOnDismiss,c=o.firstFocusableSelector,d=o.forceFocusInsideTrap,f=o.styles,g=o.hidden,m=o.disableRestoreFocus,y=m===void 0?o.ignoreExternalFocusing:m,S=o.isBlocking,b=o.isClickableOutsideFocusTrap,E=o.isDarkOverlay,w=o.isOpen,C=w===void 0?!g:w,T=o.onDismiss,D=o.onDismissed,k=o.onLayerDidMount,M=o.responsiveMode,N=o.subText,U=o.theme,ne=o.title,oe=o.topButtonsProps,ae=o.type,te=o.minWidth,we=o.maxWidth,J=o.modalProps,Q=H({onLayerDidMount:k},J?.layerProps),G,re;J?.dragOptions&&!(!((t=J.dragOptions)===null||t===void 0)&&t.dragHandleSelector)&&(re=H({},J.dragOptions),G="ms-Dialog-draggable-header",re.dragHandleSelector=".".concat(G));var ie=H(H(H(H({},JN),{elementToFocusOnDismiss:u,firstFocusableSelector:c,forceFocusInsideTrap:d,disableRestoreFocus:y,isClickableOutsideFocusTrap:b,responsiveMode:M,className:s,containerClassName:a,isBlocking:S,isDarkOverlay:E,onDismissed:D}),J),{dragOptions:re,layerProps:Q,isOpen:C}),Ce=H(H(H({className:l,subText:N,title:ne,topButtonsProps:oe,type:ae},eB),o.dialogContentProps),{draggableHeaderClassName:G,titleProps:H({id:((r=o.dialogContentProps)===null||r===void 0?void 0:r.titleId)||this._defaultTitleTextId},(i=o.dialogContentProps)===null||i===void 0?void 0:i.titleProps)}),Te=ZN(f,{theme:U,className:ie.className,containerClassName:ie.containerClassName,hidden:g,dialogDefaultMinWidth:te,dialogDefaultMaxWidth:we});return A.createElement(sS,H({},ie,{className:Te.root,containerClassName:Te.main,onDismiss:T||ie.onDismiss,subtitleAriaId:this._getSubTextId(),titleAriaId:this._getTitleTextId()}),A.createElement(aS,H({subTextId:this._defaultSubTextId,showCloseButton:ie.isBlocking,onDismiss:T},Ce),o.children))},e.defaultProps={hidden:!0},e=sl([KC],e),e}(A.Component),nB={root:"ms-Dialog"},rB=function(n){var e,t=n.className,r=n.containerClassName,i=n.dialogDefaultMinWidth,o=i===void 0?"288px":i,s=n.dialogDefaultMaxWidth,a=s===void 0?"340px":s,l=n.hidden,u=n.theme,c=Ar(nB,u);return{root:[c.root,u.fonts.medium,t],main:[{width:o,outline:"3px solid transparent",selectors:(e={},e["@media (min-width: ".concat(vC,"px)")]={width:"auto",maxWidth:a,minWidth:o},e)},!l&&{display:"flex"},r]}},Yd=Un(tB,rB,void 0,{scope:"Dialog"});Yd.displayName="Dialog";function iB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons"',src:"url('".concat(n,"fabric-icons-a13498cf.woff') format('woff')")},icons:{GlobalNavButton:"",ChevronDown:"",ChevronUp:"",Edit:"",Add:"",Cancel:"",More:"",Settings:"",Mail:"",Filter:"",Search:"",Share:"",BlockedSite:"",FavoriteStar:"",FavoriteStarFill:"",CheckMark:"",Delete:"",ChevronLeft:"",ChevronRight:"",Calendar:"",Megaphone:"",Undo:"",Flag:"",Page:"",Pinned:"",View:"",Clear:"",Download:"",Upload:"",Folder:"",Sort:"",AlignRight:"",AlignLeft:"",Tag:"",AddFriend:"",Info:"",SortLines:"",List:"",CircleRing:"",Heart:"",HeartFill:"",Tiles:"",Embed:"",Glimmer:"",Ascending:"",Descending:"",SortUp:"",SortDown:"",SyncToPC:"",LargeGrid:"",SkypeCheck:"",SkypeClock:"",SkypeMinus:"",ClearFilter:"",Flow:"",StatusCircleCheckmark:"",MoreVertical:""}};gn(t,e)}function oB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-0"',src:"url('".concat(n,"fabric-icons-0-467ee27f.woff') format('woff')")},icons:{PageLink:"",CommentSolid:"",ChangeEntitlements:"",Installation:"",WebAppBuilderModule:"",WebAppBuilderFragment:"",WebAppBuilderSlot:"",BullseyeTargetEdit:"",WebAppBuilderFragmentCreate:"",PageData:"",PageHeaderEdit:"",ProductList:"",UnpublishContent:"",DependencyAdd:"",DependencyRemove:"",EntitlementPolicy:"",EntitlementRedemption:"",SchoolDataSyncLogo:"",PinSolid12:"",PinSolidOff12:"",AddLink:"",SharepointAppIcon16:"",DataflowsLink:"",TimePicker:"",UserWarning:"",ComplianceAudit:"",InternetSharing:"",Brightness:"",MapPin:"",Airplane:"",Tablet:"",QuickNote:"",Video:"",People:"",Phone:"",Pin:"",Shop:"",Stop:"",Link:"",AllApps:"",Zoom:"",ZoomOut:"",Microphone:"",Camera:"",Attach:"",Send:"",FavoriteList:"",PageSolid:"",Forward:"",Back:"",Refresh:"",Lock:"",ReportHacked:"",EMI:"",MiniLink:"",Blocked:"",ReadingMode:"",Favicon:"",Remove:"",Checkbox:"",CheckboxComposite:"",CheckboxFill:"",CheckboxIndeterminate:"",CheckboxCompositeReversed:"",BackToWindow:"",FullScreen:"",Print:"",Up:"",Down:"",OEM:"",Save:"",ReturnKey:"",Cloud:"",Flashlight:"",CommandPrompt:"",Sad:"",RealEstate:"",SIPMove:"",EraseTool:"",GripperTool:"",Dialpad:"",PageLeft:"",PageRight:"",MultiSelect:"",KeyboardClassic:"",Play:"",Pause:"",InkingTool:"",Emoji2:"",GripperBarHorizontal:"",System:"",Personalize:"",SearchAndApps:"",Globe:"",EaseOfAccess:"",ContactInfo:"",Unpin:"",Contact:"",Memo:"",IncomingCall:""}};gn(t,e)}function sB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-1"',src:"url('".concat(n,"fabric-icons-1-4d521695.woff') format('woff')")},icons:{Paste:"",WindowsLogo:"",Error:"",GripperBarVertical:"",Unlock:"",Slideshow:"",Trim:"",AutoEnhanceOn:"",AutoEnhanceOff:"",Color:"",SaveAs:"",Light:"",Filters:"",AspectRatio:"",Contrast:"",Redo:"",Crop:"",PhotoCollection:"",Album:"",Rotate:"",PanoIndicator:"",Translate:"",RedEye:"",ViewOriginal:"",ThumbnailView:"",Package:"",Telemarketer:"",Warning:"",Financial:"",Education:"",ShoppingCart:"",Train:"",Move:"",TouchPointer:"",Merge:"",TurnRight:"",Ferry:"",Highlight:"",PowerButton:"",Tab:"",Admin:"",TVMonitor:"",Speakers:"",Game:"",HorizontalTabKey:"",UnstackSelected:"",StackIndicator:"",Nav2DMapView:"",StreetsideSplitMinimize:"",Car:"",Bus:"",EatDrink:"",SeeDo:"",LocationCircle:"",Home:"",SwitcherStartEnd:"",ParkingLocation:"",IncidentTriangle:"",Touch:"",MapDirections:"",CaretHollow:"",CaretSolid:"",History:"",Location:"",MapLayers:"",SearchNearby:"",Work:"",Recent:"",Hotel:"",Bank:"",LocationDot:"",Dictionary:"",ChromeBack:"",FolderOpen:"",PinnedFill:"",RevToggleKey:"",USB:"",Previous:"",Next:"",Sync:"",Help:"",Emoji:"",MailForward:"",ClosePane:"",OpenPane:"",PreviewLink:"",ZoomIn:"",Bookmarks:"",Document:"",ProtectedDocument:"",OpenInNewWindow:"",MailFill:"",ViewAll:"",Switch:"",Rename:"",Go:"",Remote:"",SelectAll:"",Orientation:"",Import:""}};gn(t,e)}function aB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-2"',src:"url('".concat(n,"fabric-icons-2-63c99abf.woff') format('woff')")},icons:{Picture:"",ChromeClose:"",ShowResults:"",Message:"",CalendarDay:"",CalendarWeek:"",MailReplyAll:"",Read:"",Cut:"",PaymentCard:"",Copy:"",Important:"",MailReply:"",GotoToday:"",Font:"",FontColor:"",FolderFill:"",Permissions:"",DisableUpdates:"",Unfavorite:"",Italic:"",Underline:"",Bold:"",MoveToFolder:"",Dislike:"",Like:"",AlignCenter:"",OpenFile:"",ClearSelection:"",FontDecrease:"",FontIncrease:"",FontSize:"",CellPhone:"",RepeatOne:"",RepeatAll:"",Calculator:"",Library:"",PostUpdate:"",NewFolder:"",CalendarReply:"",UnsyncFolder:"",SyncFolder:"",BlockContact:"",Accept:"",BulletedList:"",Preview:"",News:"",Chat:"",Group:"",World:"",Comment:"",DockLeft:"",DockRight:"",Repair:"",Accounts:"",Street:"",RadioBullet:"",Stopwatch:"",Clock:"",WorldClock:"",AlarmClock:"",Photo:"",ActionCenter:"",Hospital:"",Timer:"",FullCircleMask:"",LocationFill:"",ChromeMinimize:"",ChromeRestore:"",Annotation:"",Fingerprint:"",Handwriting:"",ChromeFullScreen:"",Completed:"",Label:"",FlickDown:"",FlickUp:"",FlickLeft:"",FlickRight:"",MiniExpand:"",MiniContract:"",Streaming:"",MusicInCollection:"",OneDriveLogo:"",CompassNW:"",Code:"",LightningBolt:"",CalculatorMultiply:"",CalculatorAddition:"",CalculatorSubtract:"",CalculatorPercentage:"",CalculatorEqualTo:"",PrintfaxPrinterFile:"",StorageOptical:"",Communications:"",Headset:"",Health:"",Webcam2:"",FrontCamera:"",ChevronUpSmall:""}};gn(t,e)}function lB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-3"',src:"url('".concat(n,"fabric-icons-3-089e217a.woff') format('woff')")},icons:{ChevronDownSmall:"",ChevronLeftSmall:"",ChevronRightSmall:"",ChevronUpMed:"",ChevronDownMed:"",ChevronLeftMed:"",ChevronRightMed:"",Devices2:"",PC1:"",PresenceChickletVideo:"",Reply:"",HalfAlpha:"",ConstructionCone:"",DoubleChevronLeftMed:"",Volume0:"",Volume1:"",Volume2:"",Volume3:"",Chart:"",Robot:"",Manufacturing:"",LockSolid:"",FitPage:"",FitWidth:"",BidiLtr:"",BidiRtl:"",RightDoubleQuote:"",Sunny:"",CloudWeather:"",Cloudy:"",PartlyCloudyDay:"",PartlyCloudyNight:"",ClearNight:"",RainShowersDay:"",Rain:"",Thunderstorms:"",RainSnow:"",Snow:"",BlowingSnow:"",Frigid:"",Fog:"",Squalls:"",Duststorm:"",Unknown:"",Precipitation:"",Ribbon:"",AreaChart:"",Assign:"",FlowChart:"",CheckList:"",Diagnostic:"",Generate:"",LineChart:"",Equalizer:"",BarChartHorizontal:"",BarChartVertical:"",Freezing:"",FunnelChart:"",Processing:"",Quantity:"",ReportDocument:"",StackColumnChart:"",SnowShowerDay:"",HailDay:"",WorkFlow:"",HourGlass:"",StoreLogoMed20:"",TimeSheet:"",TriangleSolid:"",UpgradeAnalysis:"",VideoSolid:"",RainShowersNight:"",SnowShowerNight:"",Teamwork:"",HailNight:"",PeopleAdd:"",Glasses:"",DateTime2:"",Shield:"",Header1:"",PageAdd:"",NumberedList:"",PowerBILogo:"",Info2:"",MusicInCollectionFill:"",Asterisk:"",ErrorBadge:"",CircleFill:"",Record2:"",AllAppsMirrored:"",BookmarksMirrored:"",BulletedListMirrored:"",CaretHollowMirrored:"",CaretSolidMirrored:"",ChromeBackMirrored:"",ClearSelectionMirrored:"",ClosePaneMirrored:"",DockLeftMirrored:"",DoubleChevronLeftMedMirrored:"",GoMirrored:""}};gn(t,e)}function uB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-4"',src:"url('".concat(n,"fabric-icons-4-a656cc0a.woff') format('woff')")},icons:{HelpMirrored:"",ImportMirrored:"",ImportAllMirrored:"",ListMirrored:"",MailForwardMirrored:"",MailReplyMirrored:"",MailReplyAllMirrored:"",MiniContractMirrored:"",MiniExpandMirrored:"",OpenPaneMirrored:"",ParkingLocationMirrored:"",SendMirrored:"",ShowResultsMirrored:"",ThumbnailViewMirrored:"",Media:"",Devices3:"",Focus:"",VideoLightOff:"",Lightbulb:"",StatusTriangle:"",VolumeDisabled:"",Puzzle:"",EmojiNeutral:"",EmojiDisappointed:"",HomeSolid:"",Ringer:"",PDF:"",HeartBroken:"",StoreLogo16:"",MultiSelectMirrored:"",Broom:"",AddToShoppingList:"",Cocktails:"",Wines:"",Articles:"",Cycling:"",DietPlanNotebook:"",Pill:"",ExerciseTracker:"",HandsFree:"",Medical:"",Running:"",Weights:"",Trackers:"",AddNotes:"",AllCurrency:"",BarChart4:"",CirclePlus:"",Coffee:"",Cotton:"",Market:"",Money:"",PieDouble:"",PieSingle:"",RemoveFilter:"",Savings:"",Sell:"",StockDown:"",StockUp:"",Lamp:"",Source:"",MSNVideos:"",Cricket:"",Golf:"",Baseball:"",Soccer:"",MoreSports:"",AutoRacing:"",CollegeHoops:"",CollegeFootball:"",ProFootball:"",ProHockey:"",Rugby:"",SubstitutionsIn:"",Tennis:"",Arrivals:"",Design:"",Website:"",Drop:"",HistoricalWeather:"",SkiResorts:"",Snowflake:"",BusSolid:"",FerrySolid:"",AirplaneSolid:"",TrainSolid:"",Ticket:"",WifiWarning4:"",Devices4:"",AzureLogo:"",BingLogo:"",MSNLogo:"",OutlookLogoInverse:"",OfficeLogo:"",SkypeLogo:"",Door:"",EditMirrored:"",GiftCard:"",DoubleBookmark:"",StatusErrorFull:""}};gn(t,e)}function cB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-5"',src:"url('".concat(n,"fabric-icons-5-f95ba260.woff') format('woff')")},icons:{Certificate:"",FastForward:"",Rewind:"",Photo2:"",OpenSource:"",Movers:"",CloudDownload:"",Family:"",WindDirection:"",Bug:"",SiteScan:"",BrowserScreenShot:"",F12DevTools:"",CSS:"",JS:"",DeliveryTruck:"",ReminderPerson:"",ReminderGroup:"",ReminderTime:"",TabletMode:"",Umbrella:"",NetworkTower:"",CityNext:"",CityNext2:"",Section:"",OneNoteLogoInverse:"",ToggleFilled:"",ToggleBorder:"",SliderThumb:"",ToggleThumb:"",Documentation:"",Badge:"",Giftbox:"",VisualStudioLogo:"",HomeGroup:"",ExcelLogoInverse:"",WordLogoInverse:"",PowerPointLogoInverse:"",Cafe:"",SpeedHigh:"",Commitments:"",ThisPC:"",MusicNote:"",MicOff:"",PlaybackRate1x:"",EdgeLogo:"",CompletedSolid:"",AlbumRemove:"",MessageFill:"",TabletSelected:"",MobileSelected:"",LaptopSelected:"",TVMonitorSelected:"",DeveloperTools:"",Shapes:"",InsertTextBox:"",LowerBrightness:"",WebComponents:"",OfflineStorage:"",DOM:"",CloudUpload:"",ScrollUpDown:"",DateTime:"",Event:"",Cake:"",Org:"",PartyLeader:"",DRM:"",CloudAdd:"",AppIconDefault:"",Photo2Add:"",Photo2Remove:"",Calories:"",POI:"",AddTo:"",RadioBtnOff:"",RadioBtnOn:"",ExploreContent:"",Product:"",ProgressLoopInner:"",ProgressLoopOuter:"",Blocked2:"",FangBody:"",Toolbox:"",PageHeader:"",ChatInviteFriend:"",Brush:"",Shirt:"",Crown:"",Diamond:"",ScaleUp:"",QRCode:"",Feedback:"",SharepointLogoInverse:"",YammerLogo:"",Hide:"",Uneditable:"",ReturnToSession:"",OpenFolderHorizontal:"",CalendarMirrored:""}};gn(t,e)}function dB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-6"',src:"url('".concat(n,"fabric-icons-6-ef6fd590.woff') format('woff')")},icons:{SwayLogoInverse:"",OutOfOffice:"",Trophy:"",ReopenPages:"",EmojiTabSymbols:"",AADLogo:"",AccessLogo:"",AdminALogoInverse32:"",AdminCLogoInverse32:"",AdminDLogoInverse32:"",AdminELogoInverse32:"",AdminLLogoInverse32:"",AdminMLogoInverse32:"",AdminOLogoInverse32:"",AdminPLogoInverse32:"",AdminSLogoInverse32:"",AdminYLogoInverse32:"",DelveLogoInverse:"",ExchangeLogoInverse:"",LyncLogo:"",OfficeVideoLogoInverse:"",SocialListeningLogo:"",VisioLogoInverse:"",Balloons:"",Cat:"",MailAlert:"",MailCheck:"",MailLowImportance:"",MailPause:"",MailRepeat:"",SecurityGroup:"",Table:"",VoicemailForward:"",VoicemailReply:"",Waffle:"",RemoveEvent:"",EventInfo:"",ForwardEvent:"",WipePhone:"",AddOnlineMeeting:"",JoinOnlineMeeting:"",RemoveLink:"",PeopleBlock:"",PeopleRepeat:"",PeopleAlert:"",PeoplePause:"",TransferCall:"",AddPhone:"",UnknownCall:"",NoteReply:"",NoteForward:"",NotePinned:"",RemoveOccurrence:"",Timeline:"",EditNote:"",CircleHalfFull:"",Room:"",Unsubscribe:"",Subscribe:"",HardDrive:"",RecurringTask:"",TaskManager:"",TaskManagerMirrored:"",Combine:"",Split:"",DoubleChevronUp:"",DoubleChevronLeft:"",DoubleChevronRight:"",TextBox:"",TextField:"",NumberField:"",Dropdown:"",PenWorkspace:"",BookingsLogo:"",ClassNotebookLogoInverse:"",DelveAnalyticsLogo:"",DocsLogoInverse:"",Dynamics365Logo:"",DynamicSMBLogo:"",OfficeAssistantLogo:"",OfficeStoreLogo:"",OneNoteEduLogoInverse:"",PlannerLogo:"",PowerApps:"",Suitcase:"",ProjectLogoInverse:"",CaretLeft8:"",CaretRight8:"",CaretUp8:"",CaretDown8:"",CaretLeftSolid8:"",CaretRightSolid8:"",CaretUpSolid8:"",CaretDownSolid8:"",ClearFormatting:"",Superscript:"",Subscript:"",Strikethrough:"",Export:"",ExportMirrored:""}};gn(t,e)}function hB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-7"',src:"url('".concat(n,"fabric-icons-7-2b97bb99.woff') format('woff')")},icons:{SingleBookmark:"",SingleBookmarkSolid:"",DoubleChevronDown:"",FollowUser:"",ReplyAll:"",WorkforceManagement:"",RecruitmentManagement:"",Questionnaire:"",ManagerSelfService:"",ProductionFloorManagement:"",ProductRelease:"",ProductVariant:"",ReplyMirrored:"",ReplyAllMirrored:"",Medal:"",AddGroup:"",QuestionnaireMirrored:"",CloudImportExport:"",TemporaryUser:"",CaretSolid16:"",GroupedDescending:"",GroupedAscending:"",AwayStatus:"",MyMoviesTV:"",GenericScan:"",AustralianRules:"",WifiEthernet:"",TrackersMirrored:"",DateTimeMirrored:"",StopSolid:"",DoubleChevronUp12:"",DoubleChevronDown12:"",DoubleChevronLeft12:"",DoubleChevronRight12:"",CalendarAgenda:"",ConnectVirtualMachine:"",AddEvent:"",AssetLibrary:"",DataConnectionLibrary:"",DocLibrary:"",FormLibrary:"",FormLibraryMirrored:"",ReportLibrary:"",ReportLibraryMirrored:"",ContactCard:"",CustomList:"",CustomListMirrored:"",IssueTracking:"",IssueTrackingMirrored:"",PictureLibrary:"",OfficeAddinsLogo:"",OfflineOneDriveParachute:"",OfflineOneDriveParachuteDisabled:"",TriangleSolidUp12:"",TriangleSolidDown12:"",TriangleSolidLeft12:"",TriangleSolidRight12:"",TriangleUp12:"",TriangleDown12:"",TriangleLeft12:"",TriangleRight12:"",ArrowUpRight8:"",ArrowDownRight8:"",DocumentSet:"",GoToDashboard:"",DelveAnalytics:"",ArrowUpRightMirrored8:"",ArrowDownRightMirrored8:"",CompanyDirectory:"",OpenEnrollment:"",CompanyDirectoryMirrored:"",OneDriveAdd:"",ProfileSearch:"",Header2:"",Header3:"",Header4:"",RingerSolid:"",Eyedropper:"",MarketDown:"",CalendarWorkWeek:"",SidePanel:"",GlobeFavorite:"",CaretTopLeftSolid8:"",CaretTopRightSolid8:"",ViewAll2:"",DocumentReply:"",PlayerSettings:"",ReceiptForward:"",ReceiptReply:"",ReceiptCheck:"",Fax:"",RecurringEvent:"",ReplyAlt:"",ReplyAllAlt:"",EditStyle:"",EditMail:"",Lifesaver:"",LifesaverLock:"",InboxCheck:"",FolderSearch:""}};gn(t,e)}function fB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-8"',src:"url('".concat(n,"fabric-icons-8-6fdf1528.woff') format('woff')")},icons:{CollapseMenu:"",ExpandMenu:"",Boards:"",SunAdd:"",SunQuestionMark:"",LandscapeOrientation:"",DocumentSearch:"",PublicCalendar:"",PublicContactCard:"",PublicEmail:"",PublicFolder:"",WordDocument:"",PowerPointDocument:"",ExcelDocument:"",GroupedList:"",ClassroomLogo:"",Sections:"",EditPhoto:"",Starburst:"",ShareiOS:"",AirTickets:"",PencilReply:"",Tiles2:"",SkypeCircleCheck:"",SkypeCircleClock:"",SkypeCircleMinus:"",SkypeMessage:"",ClosedCaption:"",ATPLogo:"",OfficeFormsLogoInverse:"",RecycleBin:"",EmptyRecycleBin:"",Hide2:"",Breadcrumb:"",BirthdayCake:"",TimeEntry:"",CRMProcesses:"",PageEdit:"",PageArrowRight:"",PageRemove:"",Database:"",DataManagementSettings:"",CRMServices:"",EditContact:"",ConnectContacts:"",AppIconDefaultAdd:"",AppIconDefaultList:"",ActivateOrders:"",DeactivateOrders:"",ProductCatalog:"",ScatterChart:"",AccountActivity:"",DocumentManagement:"",CRMReport:"",KnowledgeArticle:"",Relationship:"",HomeVerify:"",ZipFolder:"",SurveyQuestions:"",TextDocument:"",TextDocumentShared:"",PageCheckedOut:"",PageShared:"",SaveAndClose:"",Script:"",Archive:"",ActivityFeed:"",Compare:"",EventDate:"",ArrowUpRight:"",CaretRight:"",SetAction:"",ChatBot:"",CaretSolidLeft:"",CaretSolidDown:"",CaretSolidRight:"",CaretSolidUp:"",PowerAppsLogo:"",PowerApps2Logo:"",SearchIssue:"",SearchIssueMirrored:"",FabricAssetLibrary:"",FabricDataConnectionLibrary:"",FabricDocLibrary:"",FabricFormLibrary:"",FabricFormLibraryMirrored:"",FabricReportLibrary:"",FabricReportLibraryMirrored:"",FabricPublicFolder:"",FabricFolderSearch:"",FabricMovetoFolder:"",FabricUnsyncFolder:"",FabricSyncFolder:"",FabricOpenFolderHorizontal:"",FabricFolder:"",FabricFolderFill:"",FabricNewFolder:"",FabricPictureLibrary:"",PhotoVideoMedia:"",AddFavorite:""}};gn(t,e)}function pB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-9"',src:"url('".concat(n,"fabric-icons-9-c6162b42.woff') format('woff')")},icons:{AddFavoriteFill:"",BufferTimeBefore:"",BufferTimeAfter:"",BufferTimeBoth:"",PublishContent:"",ClipboardList:"",ClipboardListMirrored:"",CannedChat:"",SkypeForBusinessLogo:"",TabCenter:"",PageCheckedin:"",PageList:"",ReadOutLoud:"",CaretBottomLeftSolid8:"",CaretBottomRightSolid8:"",FolderHorizontal:"",MicrosoftStaffhubLogo:"",GiftboxOpen:"",StatusCircleOuter:"",StatusCircleInner:"",StatusCircleRing:"",StatusTriangleOuter:"",StatusTriangleInner:"",StatusTriangleExclamation:"",StatusCircleExclamation:"",StatusCircleErrorX:"",StatusCircleInfo:"",StatusCircleBlock:"",StatusCircleBlock2:"",StatusCircleQuestionMark:"",StatusCircleSync:"",Toll:"",ExploreContentSingle:"",CollapseContent:"",CollapseContentSingle:"",InfoSolid:"",GroupList:"",ProgressRingDots:"",CaloriesAdd:"",BranchFork:"",MuteChat:"",AddHome:"",AddWork:"",MobileReport:"",ScaleVolume:"",HardDriveGroup:"",FastMode:"",ToggleLeft:"",ToggleRight:"",TriangleShape:"",RectangleShape:"",CubeShape:"",Trophy2:"",BucketColor:"",BucketColorFill:"",Taskboard:"",SingleColumn:"",DoubleColumn:"",TripleColumn:"",ColumnLeftTwoThirds:"",ColumnRightTwoThirds:"",AccessLogoFill:"",AnalyticsLogo:"",AnalyticsQuery:"",NewAnalyticsQuery:"",AnalyticsReport:"",WordLogo:"",WordLogoFill:"",ExcelLogo:"",ExcelLogoFill:"",OneNoteLogo:"",OneNoteLogoFill:"",OutlookLogo:"",OutlookLogoFill:"",PowerPointLogo:"",PowerPointLogoFill:"",PublisherLogo:"",PublisherLogoFill:"",ScheduleEventAction:"",FlameSolid:"",ServerProcesses:"",Server:"",SaveAll:"",LinkedInLogo:"",Decimals:"",SidePanelMirrored:"",ProtectRestrict:"",Blog:"",UnknownMirrored:"",PublicContactCardMirrored:"",GridViewSmall:"",GridViewMedium:"",GridViewLarge:"",Step:"",StepInsert:"",StepShared:"",StepSharedAdd:"",StepSharedInsert:"",ViewDashboard:"",ViewList:""}};gn(t,e)}function gB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-10"',src:"url('".concat(n,"fabric-icons-10-c4ded8e4.woff') format('woff')")},icons:{ViewListGroup:"",ViewListTree:"",TriggerAuto:"",TriggerUser:"",PivotChart:"",StackedBarChart:"",StackedLineChart:"",BuildQueue:"",BuildQueueNew:"",UserFollowed:"",ContactLink:"",Stack:"",Bullseye:"",VennDiagram:"",FiveTileGrid:"",FocalPoint:"",Insert:"",RingerRemove:"",TeamsLogoInverse:"",TeamsLogo:"",TeamsLogoFill:"",SkypeForBusinessLogoFill:"",SharepointLogo:"",SharepointLogoFill:"",DelveLogo:"",DelveLogoFill:"",OfficeVideoLogo:"",OfficeVideoLogoFill:"",ExchangeLogo:"",ExchangeLogoFill:"",Signin:"",DocumentApproval:"",CloneToDesktop:"",InstallToDrive:"",Blur:"",Build:"",ProcessMetaTask:"",BranchFork2:"",BranchLocked:"",BranchCommit:"",BranchCompare:"",BranchMerge:"",BranchPullRequest:"",BranchSearch:"",BranchShelveset:"",RawSource:"",MergeDuplicate:"",RowsGroup:"",RowsChild:"",Deploy:"",Redeploy:"",ServerEnviroment:"",VisioDiagram:"",HighlightMappedShapes:"",TextCallout:"",IconSetsFlag:"",VisioLogo:"",VisioLogoFill:"",VisioDocument:"",TimelineProgress:"",TimelineDelivery:"",Backlog:"",TeamFavorite:"",TaskGroup:"",TaskGroupMirrored:"",ScopeTemplate:"",AssessmentGroupTemplate:"",NewTeamProject:"",CommentAdd:"",CommentNext:"",CommentPrevious:"",ShopServer:"",LocaleLanguage:"",QueryList:"",UserSync:"",UserPause:"",StreamingOff:"",ArrowTallUpLeft:"",ArrowTallUpRight:"",ArrowTallDownLeft:"",ArrowTallDownRight:"",FieldEmpty:"",FieldFilled:"",FieldChanged:"",FieldNotChanged:"",RingerOff:"",PlayResume:"",BulletedList2:"",BulletedList2Mirrored:"",ImageCrosshair:"",GitGraph:"",Repo:"",RepoSolid:"",FolderQuery:"",FolderList:"",FolderListMirrored:"",LocationOutline:"",POISolid:"",CalculatorNotEqualTo:"",BoxSubtractSolid:""}};gn(t,e)}function mB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-11"',src:"url('".concat(n,"fabric-icons-11-2a8393d6.woff') format('woff')")},icons:{BoxAdditionSolid:"",BoxMultiplySolid:"",BoxPlaySolid:"",BoxCheckmarkSolid:"",CirclePauseSolid:"",CirclePause:"",MSNVideosSolid:"",CircleStopSolid:"",CircleStop:"",NavigateBack:"",NavigateBackMirrored:"",NavigateForward:"",NavigateForwardMirrored:"",UnknownSolid:"",UnknownMirroredSolid:"",CircleAddition:"",CircleAdditionSolid:"",FilePDB:"",FileTemplate:"",FileSQL:"",FileJAVA:"",FileASPX:"",FileCSS:"",FileSass:"",FileLess:"",FileHTML:"",JavaScriptLanguage:"",CSharpLanguage:"",CSharp:"",VisualBasicLanguage:"",VB:"",CPlusPlusLanguage:"",CPlusPlus:"",FSharpLanguage:"",FSharp:"",TypeScriptLanguage:"",PythonLanguage:"",PY:"",CoffeeScript:"",MarkDownLanguage:"",FullWidth:"",FullWidthEdit:"",Plug:"",PlugSolid:"",PlugConnected:"",PlugDisconnected:"",UnlockSolid:"",Variable:"",Parameter:"",CommentUrgent:"",Storyboard:"",DiffInline:"",DiffSideBySide:"",ImageDiff:"",ImagePixel:"",FileBug:"",FileCode:"",FileComment:"",BusinessHoursSign:"",FileImage:"",FileSymlink:"",AutoFillTemplate:"",WorkItem:"",WorkItemBug:"",LogRemove:"",ColumnOptions:"",Packages:"",BuildIssue:"",AssessmentGroup:"",VariableGroup:"",FullHistory:"",Wheelchair:"",SingleColumnEdit:"",DoubleColumnEdit:"",TripleColumnEdit:"",ColumnLeftTwoThirdsEdit:"",ColumnRightTwoThirdsEdit:"",StreamLogo:"",PassiveAuthentication:"",AlertSolid:"",MegaphoneSolid:"",TaskSolid:"",ConfigurationSolid:"",BugSolid:"",CrownSolid:"",Trophy2Solid:"",QuickNoteSolid:"",ConstructionConeSolid:"",PageListSolid:"",PageListMirroredSolid:"",StarburstSolid:"",ReadingModeSolid:"",SadSolid:"",HealthSolid:"",ShieldSolid:"",GiftBoxSolid:"",ShoppingCartSolid:"",MailSolid:"",ChatSolid:"",RibbonSolid:""}};gn(t,e)}function vB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-12"',src:"url('".concat(n,"fabric-icons-12-7e945a1e.woff') format('woff')")},icons:{FinancialSolid:"",FinancialMirroredSolid:"",HeadsetSolid:"",PermissionsSolid:"",ParkingSolid:"",ParkingMirroredSolid:"",DiamondSolid:"",AsteriskSolid:"",OfflineStorageSolid:"",BankSolid:"",DecisionSolid:"",Parachute:"",ParachuteSolid:"",FiltersSolid:"",ColorSolid:"",ReviewSolid:"",ReviewRequestSolid:"",ReviewRequestMirroredSolid:"",ReviewResponseSolid:"",FeedbackRequestSolid:"",FeedbackRequestMirroredSolid:"",FeedbackResponseSolid:"",WorkItemBar:"",WorkItemBarSolid:"",Separator:"",NavigateExternalInline:"",PlanView:"",TimelineMatrixView:"",EngineeringGroup:"",ProjectCollection:"",CaretBottomRightCenter8:"",CaretBottomLeftCenter8:"",CaretTopRightCenter8:"",CaretTopLeftCenter8:"",DonutChart:"",ChevronUnfold10:"",ChevronFold10:"",DoubleChevronDown8:"",DoubleChevronUp8:"",DoubleChevronLeft8:"",DoubleChevronRight8:"",ChevronDownEnd6:"",ChevronUpEnd6:"",ChevronLeftEnd6:"",ChevronRightEnd6:"",ContextMenu:"",AzureAPIManagement:"",AzureServiceEndpoint:"",VSTSLogo:"",VSTSAltLogo1:"",VSTSAltLogo2:"",FileTypeSolution:"",WordLogoInverse16:"",WordLogo16:"",WordLogoFill16:"",PowerPointLogoInverse16:"",PowerPointLogo16:"",PowerPointLogoFill16:"",ExcelLogoInverse16:"",ExcelLogo16:"",ExcelLogoFill16:"",OneNoteLogoInverse16:"",OneNoteLogo16:"",OneNoteLogoFill16:"",OutlookLogoInverse16:"",OutlookLogo16:"",OutlookLogoFill16:"",PublisherLogoInverse16:"",PublisherLogo16:"",PublisherLogoFill16:"",VisioLogoInverse16:"",VisioLogo16:"",VisioLogoFill16:"",TestBeaker:"",TestBeakerSolid:"",TestExploreSolid:"",TestAutoSolid:"",TestUserSolid:"",TestImpactSolid:"",TestPlan:"",TestStep:"",TestParameter:"",TestSuite:"",TestCase:"",Sprint:"",SignOut:"",TriggerApproval:"",Rocket:"",AzureKeyVault:"",Onboarding:"",Transition:"",LikeSolid:"",DislikeSolid:"",CRMCustomerInsightsApp:"",EditCreate:"",PlayReverseResume:"",PlayReverse:"",SearchData:"",UnSetColor:"",DeclineCall:""}};gn(t,e)}function yB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-13"',src:"url('".concat(n,"fabric-icons-13-c3989a02.woff') format('woff')")},icons:{RectangularClipping:"",TeamsLogo16:"",TeamsLogoFill16:"",Spacer:"",SkypeLogo16:"",SkypeForBusinessLogo16:"",SkypeForBusinessLogoFill16:"",FilterSolid:"",MailUndelivered:"",MailTentative:"",MailTentativeMirrored:"",MailReminder:"",ReceiptUndelivered:"",ReceiptTentative:"",ReceiptTentativeMirrored:"",Inbox:"",IRMReply:"",IRMReplyMirrored:"",IRMForward:"",IRMForwardMirrored:"",VoicemailIRM:"",EventAccepted:"",EventTentative:"",EventTentativeMirrored:"",EventDeclined:"",IDBadge:"",BackgroundColor:"",OfficeFormsLogoInverse16:"",OfficeFormsLogo:"",OfficeFormsLogoFill:"",OfficeFormsLogo16:"",OfficeFormsLogoFill16:"",OfficeFormsLogoInverse24:"",OfficeFormsLogo24:"",OfficeFormsLogoFill24:"",PageLock:"",NotExecuted:"",NotImpactedSolid:"",FieldReadOnly:"",FieldRequired:"",BacklogBoard:"",ExternalBuild:"",ExternalTFVC:"",ExternalXAML:"",IssueSolid:"",DefectSolid:"",LadybugSolid:"",NugetLogo:"",TFVCLogo:"",ProjectLogo32:"",ProjectLogoFill32:"",ProjectLogo16:"",ProjectLogoFill16:"",SwayLogo32:"",SwayLogoFill32:"",SwayLogo16:"",SwayLogoFill16:"",ClassNotebookLogo32:"",ClassNotebookLogoFill32:"",ClassNotebookLogo16:"",ClassNotebookLogoFill16:"",ClassNotebookLogoInverse32:"",ClassNotebookLogoInverse16:"",StaffNotebookLogo32:"",StaffNotebookLogoFill32:"",StaffNotebookLogo16:"",StaffNotebookLogoFill16:"",StaffNotebookLogoInverted32:"",StaffNotebookLogoInverted16:"",KaizalaLogo:"",TaskLogo:"",ProtectionCenterLogo32:"",GallatinLogo:"",Globe2:"",Guitar:"",Breakfast:"",Brunch:"",BeerMug:"",Vacation:"",Teeth:"",Taxi:"",Chopsticks:"",SyncOccurence:"",UnsyncOccurence:"",GIF:"",PrimaryCalendar:"",SearchCalendar:"",VideoOff:"",MicrosoftFlowLogo:"",BusinessCenterLogo:"",ToDoLogoBottom:"",ToDoLogoTop:"",EditSolid12:"",EditSolidMirrored12:"",UneditableSolid12:"",UneditableSolidMirrored12:"",UneditableMirrored:"",AdminALogo32:"",AdminALogoFill32:"",ToDoLogoInverse:""}};gn(t,e)}function bB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-14"',src:"url('".concat(n,"fabric-icons-14-5cf58db8.woff') format('woff')")},icons:{Snooze:"",WaffleOffice365:"",ImageSearch:"",NewsSearch:"",VideoSearch:"",R:"",FontColorA:"",FontColorSwatch:"",LightWeight:"",NormalWeight:"",SemiboldWeight:"",GroupObject:"",UngroupObject:"",AlignHorizontalLeft:"",AlignHorizontalCenter:"",AlignHorizontalRight:"",AlignVerticalTop:"",AlignVerticalCenter:"",AlignVerticalBottom:"",HorizontalDistributeCenter:"",VerticalDistributeCenter:"",Ellipse:"",Line:"",Octagon:"",Hexagon:"",Pentagon:"",RightTriangle:"",HalfCircle:"",QuarterCircle:"",ThreeQuarterCircle:"","6PointStar":"","12PointStar":"",ArrangeBringToFront:"",ArrangeSendToBack:"",ArrangeSendBackward:"",ArrangeBringForward:"",BorderDash:"",BorderDot:"",LineStyle:"",LineThickness:"",WindowEdit:"",HintText:"",MediaAdd:"",AnchorLock:"",AutoHeight:"",ChartSeries:"",ChartXAngle:"",ChartYAngle:"",Combobox:"",LineSpacing:"",Padding:"",PaddingTop:"",PaddingBottom:"",PaddingLeft:"",PaddingRight:"",NavigationFlipper:"",AlignJustify:"",TextOverflow:"",VisualsFolder:"",VisualsStore:"",PictureCenter:"",PictureFill:"",PicturePosition:"",PictureStretch:"",PictureTile:"",Slider:"",SliderHandleSize:"",DefaultRatio:"",NumberSequence:"",GUID:"",ReportAdd:"",DashboardAdd:"",MapPinSolid:"",WebPublish:"",PieSingleSolid:"",BlockedSolid:"",DrillDown:"",DrillDownSolid:"",DrillExpand:"",DrillShow:"",SpecialEvent:"",OneDriveFolder16:"",FunctionalManagerDashboard:"",BIDashboard:"",CodeEdit:"",RenewalCurrent:"",RenewalFuture:"",SplitObject:"",BulkUpload:"",DownloadDocument:"",GreetingCard:"",Flower:"",WaitlistConfirm:"",WaitlistConfirmMirrored:"",LaptopSecure:"",DragObject:"",EntryView:"",EntryDecline:"",ContactCardSettings:"",ContactCardSettingsMirrored:""}};gn(t,e)}function EB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-15"',src:"url('".concat(n,"fabric-icons-15-3807251b.woff') format('woff')")},icons:{CalendarSettings:"",CalendarSettingsMirrored:"",HardDriveLock:"",HardDriveUnlock:"",AccountManagement:"",ReportWarning:"",TransitionPop:"",TransitionPush:"",TransitionEffect:"",LookupEntities:"",ExploreData:"",AddBookmark:"",SearchBookmark:"",DrillThrough:"",MasterDatabase:"",CertifiedDatabase:"",MaximumValue:"",MinimumValue:"",VisualStudioIDELogo32:"",PasteAsText:"",PasteAsCode:"",BrowserTab:"",BrowserTabScreenshot:"",DesktopScreenshot:"",FileYML:"",ClipboardSolid:"",FabricUserFolder:"",FabricNetworkFolder:"",BullseyeTarget:"",AnalyticsView:"",Video360Generic:"",Untag:"",Leave:"",Trending12:"",Blocked12:"",Warning12:"",CheckedOutByOther12:"",CheckedOutByYou12:"",CircleShapeSolid:"",SquareShapeSolid:"",TriangleShapeSolid:"",DropShapeSolid:"",RectangleShapeSolid:"",ZoomToFit:"",InsertColumnsLeft:"",InsertColumnsRight:"",InsertRowsAbove:"",InsertRowsBelow:"",DeleteColumns:"",DeleteRows:"",DeleteRowsMirrored:"",DeleteTable:"",AccountBrowser:"",VersionControlPush:"",StackedColumnChart2:"",TripleColumnWide:"",QuadColumn:"",WhiteBoardApp16:"",WhiteBoardApp32:"",PinnedSolid:"",InsertSignatureLine:"",ArrangeByFrom:"",Phishing:"",CreateMailRule:"",PublishCourse:"",DictionaryRemove:"",UserRemove:"",UserEvent:"",Encryption:"",PasswordField:"",OpenInNewTab:"",Hide3:"",VerifiedBrandSolid:"",MarkAsProtected:"",AuthenticatorApp:"",WebTemplate:"",DefenderTVM:"",MedalSolid:"",D365TalentLearn:"",D365TalentInsight:"",D365TalentHRCore:"",BacklogList:"",ButtonControl:"",TableGroup:"",MountainClimbing:"",TagUnknown:"",TagUnknownMirror:"",TagUnknown12:"",TagUnknown12Mirror:"",Link12:"",Presentation:"",Presentation12:"",Lock12:"",BuildDefinition:"",ReleaseDefinition:"",SaveTemplate:"",UserGauge:"",BlockedSiteSolid12:"",TagSolid:"",OfficeChat:""}};gn(t,e)}function _B(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-16"',src:"url('".concat(n,"fabric-icons-16-9cf93f3b.woff') format('woff')")},icons:{OfficeChatSolid:"",MailSchedule:"",WarningSolid:"",Blocked2Solid:"",SkypeCircleArrow:"",SkypeArrow:"",SyncStatus:"",SyncStatusSolid:"",ProjectDocument:"",ToDoLogoOutline:"",VisioOnlineLogoFill32:"",VisioOnlineLogo32:"",VisioOnlineLogoCloud32:"",VisioDiagramSync:"",Event12:"",EventDateMissed12:"",UserOptional:"",ResponsesMenu:"",DoubleDownArrow:"",DistributeDown:"",BookmarkReport:"",FilterSettings:"",GripperDotsVertical:"",MailAttached:"",AddIn:"",LinkedDatabase:"",TableLink:"",PromotedDatabase:"",BarChartVerticalFilter:"",BarChartVerticalFilterSolid:"",MicOff2:"",MicrosoftTranslatorLogo:"",ShowTimeAs:"",FileRequest:"",WorkItemAlert:"",PowerBILogo16:"",PowerBILogoBackplate16:"",BulletedListText:"",BulletedListBullet:"",BulletedListTextMirrored:"",BulletedListBulletMirrored:"",NumberedListText:"",NumberedListNumber:"",NumberedListTextMirrored:"",NumberedListNumberMirrored:"",RemoveLinkChain:"",RemoveLinkX:"",FabricTextHighlight:"",ClearFormattingA:"",ClearFormattingEraser:"",Photo2Fill:"",IncreaseIndentText:"",IncreaseIndentArrow:"",DecreaseIndentText:"",DecreaseIndentArrow:"",IncreaseIndentTextMirrored:"",IncreaseIndentArrowMirrored:"",DecreaseIndentTextMirrored:"",DecreaseIndentArrowMirrored:"",CheckListText:"",CheckListCheck:"",CheckListTextMirrored:"",CheckListCheckMirrored:"",NumberSymbol:"",Coupon:"",VerifiedBrand:"",ReleaseGate:"",ReleaseGateCheck:"",ReleaseGateError:"",M365InvoicingLogo:"",RemoveFromShoppingList:"",ShieldAlert:"",FabricTextHighlightComposite:"",Dataflows:"",GenericScanFilled:"",DiagnosticDataBarTooltip:"",SaveToMobile:"",Orientation2:"",ScreenCast:"",ShowGrid:"",SnapToGrid:"",ContactList:"",NewMail:"",EyeShadow:"",FabricFolderConfirm:"",InformationBarriers:"",CommentActive:"",ColumnVerticalSectionEdit:"",WavingHand:"",ShakeDevice:"",SmartGlassRemote:"",Rotate90Clockwise:"",Rotate90CounterClockwise:"",CampaignTemplate:"",ChartTemplate:"",PageListFilter:"",SecondaryNav:"",ColumnVerticalSection:"",SkypeCircleSlash:"",SkypeSlash:""}};gn(t,e)}function wB(n,e){n===void 0&&(n="");var t={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-17"',src:"url('".concat(n,"fabric-icons-17-0c4ed701.woff') format('woff')")},icons:{CustomizeToolbar:"",DuplicateRow:"",RemoveFromTrash:"",MailOptions:"",Childof:"",Footer:"",Header:"",BarChartVerticalFill:"",StackedColumnChart2Fill:"",PlainText:"",AccessibiltyChecker:"",DatabaseSync:"",ReservationOrders:"",TabOneColumn:"",TabTwoColumn:"",TabThreeColumn:"",BulletedTreeList:"",MicrosoftTranslatorLogoGreen:"",MicrosoftTranslatorLogoBlue:"",InternalInvestigation:"",AddReaction:"",ContactHeart:"",VisuallyImpaired:"",EventToDoLogo:"",Variable2:"",ModelingView:"",DisconnectVirtualMachine:"",ReportLock:"",Uneditable2:"",Uneditable2Mirrored:"",BarChartVerticalEdit:"",GlobalNavButtonActive:"",PollResults:"",Rerun:"",QandA:"",QandAMirror:"",BookAnswers:"",AlertSettings:"",TrimStart:"",TrimEnd:"",TableComputed:"",DecreaseIndentLegacy:"",IncreaseIndentLegacy:"",SizeLegacy:""}};gn(t,e)}var CB=function(){xs("trash","delete"),xs("onedrive","onedrivelogo"),xs("alertsolid12","eventdatemissed12"),xs("sixpointstar","6pointstar"),xs("twelvepointstar","12pointstar"),xs("toggleon","toggleleft"),xs("toggleoff","toggleright")};Km("@fluentui/font-icons-mdl2","8.5.71");var SB="".concat(AI,"/assets/icons/"),ua=Ft();function xB(n,e){var t,r;n===void 0&&(n=((t=ua?.FabricConfig)===null||t===void 0?void 0:t.iconBaseUrl)||((r=ua?.FabricConfig)===null||r===void 0?void 0:r.fontBaseUrl)||SB),[iB,oB,sB,aB,lB,uB,cB,dB,hB,fB,pB,gB,mB,vB,yB,bB,EB,_B,wB].forEach(function(i){return i(n,e)}),CB()}var lS="SearchBox",AB={root:{height:"auto"},icon:{fontSize:"12px"}},FB={iconName:"Clear"},kB={ariaLabel:"Clear text"},TB=Wn(),DB=function(n,e,t){A.useImperativeHandle(n,function(){return{focus:function(){var r;return(r=e.current)===null||r===void 0?void 0:r.focus()},blur:function(){var r;return(r=e.current)===null||r===void 0?void 0:r.blur()},hasFocus:function(){return t}}},[e,t])},uS=A.forwardRef(function(n,e){var t=n.ariaLabel,r=n.className,i=n.defaultValue,o=i===void 0?"":i,s=n.disabled,a=n.underlined,l=n.styles,u=n.labelText,c=n.placeholder,d=c===void 0?u:c,f=n.theme,g=n.clearButtonProps,m=g===void 0?kB:g,y=n.disableAnimation,S=y===void 0?!1:y,b=n.showIcon,E=b===void 0?!1:b,w=n.onClear,C=n.onBlur,T=n.onEscape,D=n.onSearch,k=n.onKeyDown,M=n.iconProps,N=n.role,U=n.onChange,ne=n.onChanged,oe=A.useState(!1),ae=oe[0],te=oe[1],we=A.useRef(void 0),J=tR(n.value,o,function(je,mt){je&&je.timeStamp===we.current||(we.current=je?.timeStamp,U?.(je,mt),ne?.(mt))}),Q=J[0],G=J[1],re=String(Q),ie=A.useRef(null),Ce=A.useRef(null),Te=Ti(ie,e),Oe=Qu(lS,n.id),De=m.onClick,pt=TB(l,{theme:f,className:r,underlined:a,hasFocus:ae,disabled:s,hasInput:re.length>0,disableAnimation:S,showIcon:E}),He=an(n,qP,["className","placeholder","onFocus","onBlur","value","role"]),fe=A.useCallback(function(je){var mt;w?.(je),je.defaultPrevented||(G(""),(mt=Ce.current)===null||mt===void 0||mt.focus(),je.stopPropagation(),je.preventDefault())},[w,G]),nt=A.useCallback(function(je){De?.(je),je.defaultPrevented||fe(je)},[De,fe]),me=function(je){var mt;te(!0),(mt=n.onFocus)===null||mt===void 0||mt.call(n,je)},Qe=function(){Ce.current&&(Ce.current.focus(),Ce.current.selectionStart=Ce.current.selectionEnd=0)},wt=A.useCallback(function(je){te(!1),C?.(je)},[C]),ze=function(je){G(je.target.value,je)},bt=function(je){switch(je.which){case Re.escape:T?.(je),re&&!je.defaultPrevented&&fe(je);break;case Re.enter:D&&(D(re),je.preventDefault(),je.stopPropagation());break;default:k?.(je),je.defaultPrevented&&je.stopPropagation();break}};return DB(n.componentRef,Ce,ae),A.createElement("div",{role:N,ref:Te,className:pt.root,onFocusCapture:me},A.createElement("div",{className:pt.iconContainer,onClick:Qe,"aria-hidden":!0},A.createElement(ds,H({iconName:"Search"},M,{className:pt.icon}))),A.createElement("input",H({},He,{id:Oe,className:pt.field,placeholder:d,onChange:ze,onInput:ze,onBlur:wt,onKeyDown:bt,value:re,disabled:s,role:"searchbox","aria-label":t,ref:Ce})),re.length>0&&A.createElement("div",{className:pt.clearButton},A.createElement(wi,H({onBlur:wt,styles:AB,iconProps:FB},m,{onClick:nt}))))});uS.displayName=lS;var PB={root:"ms-SearchBox",iconContainer:"ms-SearchBox-iconContainer",icon:"ms-SearchBox-icon",clearButton:"ms-SearchBox-clearButton",field:"ms-SearchBox-field"};function MB(n){var e,t,r,i,o,s=n.theme,a=n.underlined,l=n.disabled,u=n.hasFocus,c=n.className,d=n.hasInput,f=n.disableAnimation,g=n.showIcon,m=s.palette,y=s.fonts,S=s.semanticColors,b=s.effects,E=Ar(PB,s),w={color:S.inputPlaceholderText,opacity:1},C=m.neutralSecondary,T=m.neutralPrimary,D=m.neutralLighter,k=m.neutralLighter,M=m.neutralLighter;return{root:[E.root,y.medium,rb,{color:S.inputText,backgroundColor:S.inputBackground,display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"stretch",padding:"1px 0 1px 4px",borderRadius:b.roundedCorner2,border:"1px solid ".concat(S.inputBorder),height:32,selectors:(e={},e[Ke]={borderColor:"WindowText"},e[":hover"]={borderColor:S.inputBorderHovered,selectors:(t={},t[Ke]={borderColor:"Highlight"},t)},e[":hover .".concat(E.iconContainer)]={color:S.inputIconHovered},e)},!u&&d&&{selectors:(r={},r[":hover .".concat(E.iconContainer)]={width:4},r[":hover .".concat(E.icon)]={opacity:0,pointerEvents:"none"},r)},u&&["is-active",{position:"relative"},hI(S.inputFocusBorderAlt,a?0:b.roundedCorner2,a?"borderBottom":"border")],g&&[{selectors:(i={},i[":hover .".concat(E.iconContainer)]={width:32},i[":hover .".concat(E.icon)]={opacity:1},i)}],l&&["is-disabled",{borderColor:D,backgroundColor:M,pointerEvents:"none",cursor:"default",selectors:(o={},o[Ke]={borderColor:"GrayText"},o)}],a&&["is-underlined",{borderWidth:"0 0 1px 0",borderRadius:0,padding:"1px 0 1px 8px"}],a&&l&&{backgroundColor:"transparent"},d&&"can-clear",c],iconContainer:[E.iconContainer,{display:"flex",flexDirection:"column",justifyContent:"center",flexShrink:0,fontSize:16,width:32,textAlign:"center",color:S.inputIcon,cursor:"text"},u&&{width:4},l&&{color:S.inputIconDisabled},!f&&{transition:"width ".concat(Sg.durationValue1)},g&&u&&{width:32}],icon:[E.icon,{opacity:1},u&&{opacity:0,pointerEvents:"none"},!f&&{transition:"opacity ".concat(Sg.durationValue1," 0s")},g&&u&&{opacity:1}],clearButton:[E.clearButton,{display:"flex",flexDirection:"row",alignItems:"stretch",cursor:"pointer",flexBasis:"32px",flexShrink:0,padding:0,margin:"-1px 0px",selectors:{"&:hover .ms-Button":{backgroundColor:k},"&:hover .ms-Button-icon":{color:T},".ms-Button":{borderRadius:ir(s)?"1px 0 0 1px":"0 1px 1px 0"},".ms-Button-icon":{color:C}}}],field:[E.field,rb,xI(w),{backgroundColor:"transparent",border:"none",outline:"none",fontWeight:"inherit",fontFamily:"inherit",fontSize:"inherit",color:S.inputText,flex:"1 1 0px",minWidth:"0px",overflow:"hidden",textOverflow:"ellipsis",paddingBottom:.5,selectors:{"::-ms-clear":{display:"none"}}},l&&{color:S.disabledText}]}}var IB=Un(uS,MB,void 0,{scope:"SearchBox"});const RB={iconName:"Undo"},LB={iconName:"Redo"},NB={iconName:"History"},BB={iconName:"Info"},ca={root:{background:"transparent",color:"#cfd8e3",padding:4,border:"none",minWidth:28,height:28},rootHovered:{background:"rgba(255,255,255,0.08)",color:"#ffffff"},rootPressed:{background:"rgba(255,255,255,0.12)",color:"#ffffff"},rootDisabled:{background:"transparent",color:"rgba(255,255,255,0.3)"},icon:{color:"inherit",fontSize:16},menuIcon:{color:"inherit"},flexContainer:{gap:0}},OB=({setPdfScaleValue:n,toggleHighlightPen:e,undo:t,redo:r,canUndo:i,canRedo:o,searchQuery:s,onChangeSearch:a,onSearchNext:l,onSearchPrev:u,onClearSearch:c,searchPos:d,searchTotal:f,onShowInfo:g,onToggleHistory:m})=>{const[y,S]=A.useState(null),[b,E]=A.useState(!1),w=()=>{y?y<4&&(n(y+.1),S(y+.1)):(n(1),S(1))},C=()=>{y?y>.2&&(n(y-.1),S(y-.1)):(n(1),S(1))};return $.jsxs("div",{className:"app-toolbar",style:{height:41,display:"flex",alignItems:"center",gap:12,padding:"0 12px",borderBottom:"1px solid #2b2f36",background:"#2b2f36",color:"#e5e7eb"},children:[$.jsxs("div",{className:"ZoomControls",children:[$.jsx("button",{title:"Zoom in",onClick:w,children:"+"}),$.jsx("button",{title:"Zoom out",onClick:C,children:"-"}),y?`${(y*100).toFixed(0)}%`:"Auto"]}),$.jsx("button",{title:"Toggle Redaction Tool",className:`HighlightButton ${b?"active":""}`,onClick:()=>{e(),E(!b)},children:"Toggle Redactions"}),$.jsx("div",{style:{flex:1}}),$.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[$.jsx(IB,{styles:{root:{width:220,background:"rgba(255,255,255,0.08)",borderRadius:4},field:{color:"#e5e7eb"},icon:{color:"#cfd8e3"},clearButton:{color:"#cfd8e3"}},placeholder:"Search highlights",value:s,onChange:(T,D)=>a(D??""),onClear:c,onSearch:l,onKeyDown:T=>{T.key==="Enter"&&T.shiftKey?(T.preventDefault(),u()):T.key==="Escape"&&c()}}),$.jsxs("span",{style:{color:"#cfd8e3",fontSize:12,minWidth:46,textAlign:"right"},children:[d," / ",f]}),$.jsx(Vo,{content:"Previous (Shift+Enter / Shift+F3)",children:$.jsx(wi,{styles:ca,iconProps:{iconName:"ChevronUp"},ariaLabel:"Previous result",onClick:u,disabled:f===0})}),$.jsx(Vo,{content:"Next (Enter / F3)",children:$.jsx(wi,{styles:ca,iconProps:{iconName:"ChevronDown"},ariaLabel:"Next result",onClick:l,disabled:f===0})})]}),$.jsx("div",{style:{flex:1}}),$.jsx(Vo,{content:"Undo (Ctrl+Z)",children:$.jsx(wi,{styles:ca,iconProps:RB,ariaLabel:"Undo",onClick:t,disabled:!i})}),$.jsx(Vo,{content:"Redo (Ctrl+Shift+Z)",children:$.jsx(wi,{styles:ca,iconProps:LB,ariaLabel:"Redo",onClick:r,disabled:!o})}),$.jsx(Vo,{content:"History timeline (Ctrl+Shift+H)",children:$.jsx(wi,{styles:ca,iconProps:NB,ariaLabel:"History",onClick:m})}),$.jsx(Vo,{content:"Info",children:$.jsx(wi,{styles:ca,iconProps:BB,ariaLabel:"Info",onClick:g})})]})},HB=n=>(n??"").trim().replace(/\s+/g," ").toLowerCase(),zB=n=>{const e=n.content?.text?.trim();if(e&&e.length>0)return e;const t=n.position?.boundingRect?.pageNumber;return`(No text)${t?`  Page ${t}`:""}`},Bl={compactAction:{root:{height:28,padding:"0 6px",minWidth:0}},compactIcon:{root:{height:28,width:28,padding:0},rootHovered:{background:"rgba(0,0,0,0.04)"},rootPressed:{background:"rgba(0,0,0,0.08)"}},dangerIcon:{root:{color:"#a80000"},rootHovered:{background:"rgba(168,0,0,0.08)"},rootPressed:{background:"rgba(168,0,0,0.16)"}}},jB=({all:n,active:e,onToggleGroup:t,toggleSingle:r,onApplyAllGroup:i,onRemoveHighlight:o,onRemoveGroup:s})=>{const a=Ts.useMemo(()=>{const D=new Map;for(const k of n){const M=k.content?.text??"",N=HB(M)||"__no_text__",U=zB(k),ne=D.get(N);ne?ne.items.push(k):D.set(N,{key:N,label:U,items:[k]})}return[...D.values()]},[n]),l=Ts.useMemo(()=>new Set(e.map(D=>D.id)),[e]),[u,c]=A.useState({}),d=D=>c(k=>({...k,[D]:!k[D]})),[f,g]=A.useState(0);A.useEffect(()=>{if(a.length===0){g(0);return}f>=a.length&&g(a.length-1)},[a,f]);const m=A.useCallback(D=>{if(a.length===0)return;const k=D.key,M=a[f];if(k==="ArrowDown"&&(D.preventDefault(),g(N=>Math.min(N+1,a.length-1))),k==="ArrowUp"&&(D.preventDefault(),g(N=>Math.max(N-1,0))),k===" "||k==="Enter"){D.preventDefault();const N=M.items.some(U=>!l.has(U.id));t(M.items,N)}if(k.toLowerCase()==="o"&&(D.preventDefault(),d(M.key)),k.toLowerCase()==="e"){D.preventDefault();const N={};for(const U of a)N[U.key]=!0;c(N)}if(k.toLowerCase()==="c"){D.preventDefault();const N={};for(const U of a)N[U.key]=!1;c(N)}},[a,f,l,t]);A.useEffect(()=>(window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)),[m]);const[y,S]=A.useState(!1),[b,E]=A.useState(null),w=D=>{E(D),S(!0)},C=()=>{S(!1),E(null)},T=()=>{b&&s(b.items),C()};return a.length===0?$.jsx("div",{style:{opacity:.6},children:"No redactions yet."}):$.jsxs("div",{children:[a.map((D,k)=>{const M=D.items.length,N=D.items.filter(te=>l.has(te.id)).length,U=M>0&&N===M,ne=N>0&&N<M,oe=k===f,ae=`group-checkbox-${D.key}`;return $.jsxs("div",{style:{borderRadius:4,padding:oe?"4px":0,background:oe?"rgba(0, 120, 212, 0.15)":"transparent"},children:[$.jsxs("div",{className:"sidebar-highlight-item",style:{display:"flex",alignItems:"center",gap:8,width:"100%"},title:D.label,children:[$.jsx("input",{id:ae,type:"checkbox",checked:U,"aria-checked":ne?"mixed":U,ref:te=>{te&&(te.indeterminate=ne)},onClick:te=>te.stopPropagation(),onChange:te=>t(D.items,te.target.checked)}),$.jsx("label",{htmlFor:ae,onClick:te=>te.stopPropagation(),style:{cursor:"pointer",userSelect:"none"},"aria-label":`Select/deselect all for ${D.label}`}),$.jsx("button",{type:"button",onClick:te=>{te.preventDefault(),te.stopPropagation(),d(D.key)},"aria-expanded":!!u[D.key],"aria-controls":`group-panel-${D.key}`,className:"sidebar-disclosure",style:{border:"none",background:"transparent",cursor:"pointer",padding:0,width:18},title:u[D.key]?"Collapse group":"Expand group",children:u[D.key]?"":""}),$.jsx("span",{className:"sidebar-highlight-text",onClick:te=>{te.preventDefault(),te.stopPropagation(),d(D.key)},style:{cursor:"pointer",userSelect:"none"},children:D.label}),M>1&&$.jsxs("span",{style:{fontSize:11,opacity:.7,marginLeft:2},children:["",M]}),$.jsx("span",{style:{flex:1}}),$.jsx(kN,{styles:Bl.compactAction,iconProps:{iconName:"CheckMark"},title:"Apply this redaction to all instances of this text","aria-label":`Apply all redactions for ${D.label}`,onClick:te=>{te.preventDefault(),te.stopPropagation(),i(D.items)},style:{marginRight:6},children:"Apply To All"}),$.jsx(Vo,{content:"Remove all redactions in this group",styles:{root:{display:"inline-flex"}},children:$.jsx(wi,{"aria-label":"Remove all redactions in this group",title:"Remove all redactions in this group",styles:{...Bl.compactIcon,...Bl.dangerIcon},iconProps:{iconName:"Delete"},onClick:te=>{te.preventDefault(),te.stopPropagation(),w(D)}})})]}),u[D.key]&&$.jsx("div",{id:`group-panel-${D.key}`,style:{marginLeft:28,marginTop:2},children:D.items.map((te,we)=>{const J=l.has(te.id);return $.jsxs("label",{className:"sidebar-highlight-item",style:{padding:"2px 0",alignItems:"center",display:"flex",gap:8},title:te.content?.text,onClick:Q=>Q.stopPropagation(),children:[$.jsx("input",{type:"checkbox",checked:J,onChange:Q=>r(te,Q.target.checked)}),$.jsxs("div",{className:"sidebar-row__content",style:{display:"flex",alignItems:"center",gap:8,flex:1,minWidth:0},children:[$.jsxs("span",{className:"sidebar-row__title",style:{fontSize:12,whiteSpace:"nowrap"},children:["Redaction ",we+1,"  Page ",te.position.boundingRect.pageNumber]}),$.jsx("span",{style:{flex:1}}),$.jsx(Vo,{content:"Remove this redaction",children:$.jsx(wi,{"aria-label":"Remove this redaction",title:"Remove this redaction",styles:{...Bl.compactIcon,...Bl.dangerIcon},iconProps:{iconName:"Delete"},onClick:Q=>{Q.preventDefault(),Q.stopPropagation(),o(te)}})})]})]},te.id)})})]},D.key)}),$.jsx(Yd,{hidden:!y,onDismiss:C,dialogContentProps:{type:Qi.normal,title:"Remove all redactions in this group?",closeButtonAriaLabel:"Close",subText:b?`This will permanently remove ${b.items.length} redaction(s) for ${b.label}.`:"This will permanently remove all redactions in the selected group."},modalProps:{isBlocking:!0},children:$.jsxs(Nu,{children:[$.jsx(Dg,{onClick:T,text:"Remove group"}),$.jsx(Ls,{onClick:C,text:"Cancel"})]})})]})},WB=({uploadedPdfs:n,currentPdfId:e,setCurrentPdfId:t,allHighlights:r,currentHighlights:i,toggleHighlightCheckbox:o,handlePdfUpload:s,removePdf:a,onApplyAllGroup:l,onRemoveHighlight:u,onRemoveGroup:c,onToggleGroup:d,highlights:f,resetHighlights:g,resetEverything:m,toggleDocument:y})=>{const[S,b]=A.useState({documents:!0,highlights:!0}),[E,w]=A.useState(!1),[C,T]=A.useState(null),D=oe=>{T(oe),w(!0)},k=()=>{T(null),w(!1)},M=()=>{C&&a(C.id),k()},[N,U]=A.useState(!1),ne=oe=>b(ae=>({...ae,[oe]:!ae[oe]}));return $.jsxs("div",{className:"sidebar",style:{width:"25vw",maxWidth:"500px"},children:[$.jsxs("div",{className:"description",style:{padding:"1rem"},children:[$.jsx("h2",{style:{marginBottom:"1rem"},children:"Somerset Council Redaction Tool"}),$.jsx("p",{style:{fontSize:"0.7rem"},children:"https://github.com/drpollylang/contextual-redactor-application"})]}),$.jsxs("div",{style:{padding:".5rem",borderBottom:"1px solid #eee",display:"flex",justifyContent:"center"},children:[$.jsx(Ls,{text:"Upload PDF",iconProps:{iconName:"Upload"},onClick:()=>document.getElementById("pdf-upload-input")?.click()}),$.jsx("input",{id:"pdf-upload-input",type:"file",accept:"application/pdf",style:{display:"none"},onChange:oe=>{const ae=oe.target.files?.[0];ae&&s(ae),oe.currentTarget.value=""}})]}),$.jsxs("div",{style:{borderBottom:"1px solid #eee"},children:[$.jsxs("div",{onClick:()=>ne("documents"),className:"sidebar-section-header",children:["Documents ",S.documents?"":""]}),S.documents&&$.jsx("div",{className:"sidebar-section-content",style:{maxHeight:"25vh"},children:n.length===0?$.jsx("div",{style:{opacity:.6},children:"No documents uploaded."}):n.map(oe=>{const ae=oe.id===e;return $.jsxs("div",{className:`sidebar-document${ae?" active":""}`,title:oe.name,style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[$.jsx("div",{style:{flex:1,cursor:"pointer"},onClick:()=>t(oe.id),children:oe.name}),$.jsx(Ls,{iconProps:{iconName:"Delete"},title:"Remove this document",styles:{root:{minWidth:32,padding:0}},onClick:te=>{te.stopPropagation(),D(oe)}})]},oe.id)})})]}),$.jsxs("div",{style:{borderBottom:"1px solid #eee"},children:[$.jsxs("div",{onClick:()=>ne("highlights"),className:"sidebar-section-header",children:["Redactions ",S.highlights?"":""]}),S.highlights&&$.jsx("div",{className:"sidebar-section-content",style:{maxHeight:"35vh"},children:e?$.jsx(jB,{all:r[e]??[],active:i,onToggleGroup:d,toggleSingle:o,onApplyAllGroup:l,onRemoveHighlight:u,onRemoveGroup:c}):$.jsx("div",{style:{opacity:.6},children:"Open a document to see redactions."})})]}),i.length>0&&$.jsx("div",{style:{padding:".5rem"},children:$.jsx("button",{onClick:g,className:"sidebar__reset",children:"Reset redactions"})}),$.jsx("div",{style:{padding:".5rem",marginTop:i.length>0?"-0.5rem":0},children:$.jsx("button",{onClick:()=>U(!0),className:"sidebar__clear",style:{marginTop:"6px"},children:"Delete All Redactions & Clear History"})}),$.jsx(Yd,{hidden:!E,onDismiss:k,dialogContentProps:{type:Qi.normal,title:"Delete this document?",subText:C?`This will permanently delete "${C.name}" and all associated redactions from the app.`:""},modalProps:{isBlocking:!0},children:$.jsxs(Nu,{children:[$.jsx(Dg,{onClick:M,text:"Delete document"}),$.jsx(Ls,{onClick:k,text:"Cancel"})]})}),$.jsx(Yd,{hidden:!N,onDismiss:()=>U(!1),dialogContentProps:{type:Qi.normal,title:"Delete All Redactions?",closeButtonAriaLabel:"Close",subText:"This will permanently delete all redactions for this document and clear the entire undo/redo history. This action cannot be undone."},modalProps:{isBlocking:!0},children:$.jsxs(Nu,{children:[$.jsx(Dg,{onClick:()=>{m(),U(!1)},text:"Delete everything"}),$.jsx(Ls,{onClick:()=>U(!1),text:"Cancel"})]})})]})},UB=n=>new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),VB=({entries:n,currentIndex:e,onJump:t,onClose:r})=>$.jsxs("div",{style:{position:"fixed",right:12,top:56,bottom:12,width:420,background:"#ffffff",border:"1px solid #e5e7eb",borderRadius:8,boxShadow:"0 8px 24px rgba(0,0,0,0.12)",zIndex:9999,display:"flex",flexDirection:"column"},children:[$.jsxs("div",{style:{padding:"10px 12px",borderBottom:"1px solid #eee",display:"flex",alignItems:"center",gap:8},children:[$.jsx("strong",{children:"History Timeline"}),$.jsxs("span",{style:{opacity:.6,fontSize:12},children:["(",n.length," events)"]}),$.jsx("span",{style:{marginLeft:"auto"}}),$.jsx("button",{onClick:r,style:{background:"transparent",border:"none",cursor:"pointer"},title:"Close",children:""})]}),$.jsx("div",{style:{overflowY:"auto",padding:"8px 6px"},children:n.length===0?$.jsx("div",{style:{padding:12,opacity:.6},children:"No history yet."}):n.map((i,o)=>{const s=o===e,a=i.counts.nextActive-i.counts.prevActive,l=i.counts.nextAll-i.counts.prevAll,u=a===0?"0":a>0?`+${a}`:`${a}`,c=l===0?"0":l>0?`+${l}`:`${l}`;return $.jsxs("div",{onClick:()=>t(o),style:{borderRadius:6,padding:"8px 10px",margin:"6px 6px",border:s?"1px solid #0078d4":"1px solid #eee",background:s?"rgba(0,120,212,0.10)":"#fff",cursor:"pointer"},title:i.note,children:[$.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[$.jsx("span",{style:{fontFamily:"monospace",fontSize:11,opacity:.7},children:UB(i.ts)}),$.jsx("strong",{style:{fontSize:13},children:i.action}),$.jsxs("span",{style:{marginLeft:"auto",fontSize:11,opacity:.8},children:["Active: ",i.counts.prevActive,"  ",i.counts.nextActive," (",u,")","  ","All: ",i.counts.prevAll,"  ",i.counts.nextAll," (",c,")"]})]}),i.note&&$.jsx("div",{style:{fontSize:11,opacity:.65,marginTop:2},children:i.note})]},i.id)})})]});var cS={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(ha,function(){var t=function(h,p){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(v[x]=_[x])})(h,p)},r=function(){return(r=Object.assign||function(h){for(var p,v=1,_=arguments.length;v<_;v++)for(var x in p=arguments[v])Object.prototype.hasOwnProperty.call(p,x)&&(h[x]=p[x]);return h}).apply(this,arguments)};function i(h,p,v){for(var _,x=0,F=p.length;x<F;x++)!_&&x in p||((_=_||Array.prototype.slice.call(p,0,x))[x]=p[x]);return h.concat(_||Array.prototype.slice.call(p))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ha,s=Object.keys,a=Array.isArray;function l(h,p){return typeof p!="object"||s(p).forEach(function(v){h[v]=p[v]}),h}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var u=Object.getPrototypeOf,c={}.hasOwnProperty;function d(h,p){return c.call(h,p)}function f(h,p){typeof p=="function"&&(p=p(u(h))),(typeof Reflect>"u"?s:Reflect.ownKeys)(p).forEach(function(v){m(h,v,p[v])})}var g=Object.defineProperty;function m(h,p,v,_){g(h,p,l(v&&d(v,"get")&&typeof v.get=="function"?{get:v.get,set:v.set,configurable:!0}:{value:v,configurable:!0,writable:!0},_))}function y(h){return{from:function(p){return h.prototype=Object.create(p.prototype),m(h.prototype,"constructor",h),{extend:f.bind(null,h.prototype)}}}}var S=Object.getOwnPropertyDescriptor,b=[].slice;function E(h,p,v){return b.call(h,p,v)}function w(h,p){return p(h)}function C(h){if(!h)throw new Error("Assertion Failed")}function T(h){o.setImmediate?setImmediate(h):setTimeout(h,0)}function D(h,p){if(typeof p=="string"&&d(h,p))return h[p];if(!p)return h;if(typeof p!="string"){for(var v=[],_=0,x=p.length;_<x;++_){var F=D(h,p[_]);v.push(F)}return v}var P=p.indexOf(".");if(P!==-1){var I=h[p.substr(0,P)];return I==null?void 0:D(I,p.substr(P+1))}}function k(h,p,v){if(h&&p!==void 0&&!("isFrozen"in Object&&Object.isFrozen(h)))if(typeof p!="string"&&"length"in p){C(typeof v!="string"&&"length"in v);for(var _=0,x=p.length;_<x;++_)k(h,p[_],v[_])}else{var F,P,I=p.indexOf(".");I!==-1?(F=p.substr(0,I),(P=p.substr(I+1))===""?v===void 0?a(h)&&!isNaN(parseInt(F))?h.splice(F,1):delete h[F]:h[F]=v:k(I=!(I=h[F])||!d(h,F)?h[F]={}:I,P,v)):v===void 0?a(h)&&!isNaN(parseInt(p))?h.splice(p,1):delete h[p]:h[p]=v}}function M(h){var p,v={};for(p in h)d(h,p)&&(v[p]=h[p]);return v}var N=[].concat;function U(h){return N.apply([],h)}var Kn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(U([8,16,32,64].map(function(h){return["Int","Uint","Float"].map(function(p){return p+h+"Array"})}))).filter(function(h){return o[h]}),ne=new Set(Kn.map(function(h){return o[h]})),oe=null;function ae(h){return oe=new WeakMap,h=function p(v){if(!v||typeof v!="object")return v;var _=oe.get(v);if(_)return _;if(a(v)){_=[],oe.set(v,_);for(var x=0,F=v.length;x<F;++x)_.push(p(v[x]))}else if(ne.has(v.constructor))_=v;else{var P,I=u(v);for(P in _=I===Object.prototype?{}:Object.create(I),oe.set(v,_),v)d(v,P)&&(_[P]=p(v[P]))}return _}(h),oe=null,h}var te={}.toString;function we(h){return te.call(h).slice(8,-1)}var J=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Q=typeof J=="symbol"?function(h){var p;return h!=null&&(p=h[J])&&p.apply(h)}:function(){return null};function G(h,p){return p=h.indexOf(p),0<=p&&h.splice(p,1),0<=p}var re={};function ie(h){var p,v,_,x;if(arguments.length===1){if(a(h))return h.slice();if(this===re&&typeof h=="string")return[h];if(x=Q(h)){for(v=[];!(_=x.next()).done;)v.push(_.value);return v}if(h==null)return[h];if(typeof(p=h.length)!="number")return[h];for(v=new Array(p);p--;)v[p]=h[p];return v}for(p=arguments.length,v=new Array(p);p--;)v[p]=arguments[p];return v}var Ce=typeof Symbol<"u"?function(h){return h[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},li=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Kr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(li),Te={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Oe(h,p){this.name=h,this.message=p}function De(h,p){return h+". Errors: "+Object.keys(p).map(function(v){return p[v].toString()}).filter(function(v,_,x){return x.indexOf(v)===_}).join(`
`)}function pt(h,p,v,_){this.failures=p,this.failedKeys=_,this.successCount=v,this.message=De(h,p)}function He(h,p){this.name="BulkError",this.failures=Object.keys(p).map(function(v){return p[v]}),this.failuresByPos=p,this.message=De(h,this.failures)}y(Oe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),y(pt).from(Oe),y(He).from(Oe);var fe=Kr.reduce(function(h,p){return h[p]=p+"Error",h},{}),nt=Oe,me=Kr.reduce(function(h,p){var v=p+"Error";function _(x,F){this.name=v,x?typeof x=="string"?(this.message="".concat(x).concat(F?`
 `+F:""),this.inner=F||null):typeof x=="object"&&(this.message="".concat(x.name," ").concat(x.message),this.inner=x):(this.message=Te[p]||v,this.inner=null)}return y(_).from(nt),h[p]=_,h},{});me.Syntax=SyntaxError,me.Type=TypeError,me.Range=RangeError;var Qe=li.reduce(function(h,p){return h[p+"Error"]=me[p],h},{}),wt=Kr.reduce(function(h,p){return["Syntax","Type","Range"].indexOf(p)===-1&&(h[p+"Error"]=me[p]),h},{});function ze(){}function bt(h){return h}function je(h,p){return h==null||h===bt?p:function(v){return p(h(v))}}function mt(h,p){return function(){h.apply(this,arguments),p.apply(this,arguments)}}function Ct(h,p){return h===ze?p:function(){var v=h.apply(this,arguments);v!==void 0&&(arguments[0]=v);var _=this.onsuccess,x=this.onerror;this.onsuccess=null,this.onerror=null;var F=p.apply(this,arguments);return _&&(this.onsuccess=this.onsuccess?mt(_,this.onsuccess):_),x&&(this.onerror=this.onerror?mt(x,this.onerror):x),F!==void 0?F:v}}function Vn(h,p){return h===ze?p:function(){h.apply(this,arguments);var v=this.onsuccess,_=this.onerror;this.onsuccess=this.onerror=null,p.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?mt(v,this.onsuccess):v),_&&(this.onerror=this.onerror?mt(_,this.onerror):_)}}function ko(h,p){return h===ze?p:function(v){var _=h.apply(this,arguments);l(v,_);var x=this.onsuccess,F=this.onerror;return this.onsuccess=null,this.onerror=null,v=p.apply(this,arguments),x&&(this.onsuccess=this.onsuccess?mt(x,this.onsuccess):x),F&&(this.onerror=this.onerror?mt(F,this.onerror):F),_===void 0?v===void 0?void 0:v:l(_,v)}}function no(h,p){return h===ze?p:function(){return p.apply(this,arguments)!==!1&&h.apply(this,arguments)}}function Ur(h,p){return h===ze?p:function(){var v=h.apply(this,arguments);if(v&&typeof v.then=="function"){for(var _=this,x=arguments.length,F=new Array(x);x--;)F[x]=arguments[x];return v.then(function(){return p.apply(_,F)})}return p.apply(this,arguments)}}wt.ModifyError=pt,wt.DexieError=Oe,wt.BulkError=He;var Sn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ur(h){Sn=h}var Fr={},To=100,Kn=typeof Promise>"u"?[]:function(){var h=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[h,u(h),h];var p=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[p,u(p),h]}(),li=Kn[0],Kr=Kn[1],Kn=Kn[2],Kr=Kr&&Kr.then,$n=li&&li.constructor,Di=!!Kn,ui=function(h,p){ci.push([h,p]),Pe&&(queueMicrotask(pe),Pe=!1)},cr=!0,Pe=!0,mn=[],Pi=[],ro=bt,un={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ze,pgp:!1,env:{},finalize:ze},Fe=un,ci=[],Gn=0,Gt=[];function ye(h){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var p=this._PSD=Fe;if(typeof h!="function"){if(h!==Fr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&oo(this,this._value))}this._state=null,this._value=null,++p.ref,function v(_,x){try{x(function(F){if(_._state===null){if(F===_)throw new TypeError("A promise cannot be resolved with itself.");var P=_._lib&&le();F&&typeof F.then=="function"?v(_,function(I,L){F instanceof ye?F._then(I,L):F.then(I,L)}):(_._state=!0,_._value=F,Do(_)),P&&de()}},oo.bind(null,_))}catch(F){oo(_,F)}}(this,h)}var io={get:function(){var h=Fe,p=Vr;function v(_,x){var F=this,P=!h.global&&(h!==Fe||p!==Vr),I=P&&!qe(),L=new ye(function(B,W){Y(F,new Mi(Mt(_,h,P,I),Mt(x,h,P,I),B,W,h))});return this._consoleTask&&(L._consoleTask=this._consoleTask),L}return v.prototype=Fr,v},set:function(h){m(this,"then",h&&h.prototype===Fr?io:{get:function(){return h},set:io.set})}};function Mi(h,p,v,_,x){this.onFulfilled=typeof h=="function"?h:null,this.onRejected=typeof p=="function"?p:null,this.resolve=v,this.reject=_,this.psd=x}function oo(h,p){var v,_;Pi.push(p),h._state===null&&(v=h._lib&&le(),p=ro(p),h._state=!1,h._value=p,_=h,mn.some(function(x){return x._value===_._value})||mn.push(_),Do(h),v&&de())}function Do(h){var p=h._listeners;h._listeners=[];for(var v=0,_=p.length;v<_;++v)Y(h,p[v]);var x=h._PSD;--x.ref||x.finalize(),Gn===0&&(++Gn,ui(function(){--Gn==0&&Se()},[]))}function Y(h,p){if(h._state!==null){var v=h._state?p.onFulfilled:p.onRejected;if(v===null)return(h._state?p.resolve:p.reject)(h._value);++p.psd.ref,++Gn,ui(Z,[v,h,p])}else h._listeners.push(p)}function Z(h,p,v){try{var _,x=p._value;!p._state&&Pi.length&&(Pi=[]),_=Sn&&p._consoleTask?p._consoleTask.run(function(){return h(x)}):h(x),p._state||Pi.indexOf(x)!==-1||function(F){for(var P=mn.length;P;)if(mn[--P]._value===F._value)return mn.splice(P,1)}(p),v.resolve(_)}catch(F){v.reject(F)}finally{--Gn==0&&Se(),--v.psd.ref||v.psd.finalize()}}function pe(){ct(un,function(){le()&&de()})}function le(){var h=cr;return Pe=cr=!1,h}function de(){var h,p,v;do for(;0<ci.length;)for(h=ci,ci=[],v=h.length,p=0;p<v;++p){var _=h[p];_[0].apply(null,_[1])}while(0<ci.length);Pe=cr=!0}function Se(){var h=mn;mn=[],h.forEach(function(_){_._PSD.onunhandled.call(null,_._value,_)});for(var p=Gt.slice(0),v=p.length;v;)p[--v]()}function et(h){return new ye(Fr,!1,h)}function Ie(h,p){var v=Fe;return function(){var _=le(),x=Fe;try{return Ve(v,!0),h.apply(this,arguments)}catch(F){p&&p(F)}finally{Ve(x,!1),_&&de()}}}f(ye.prototype,{then:io,_then:function(h,p){Y(this,new Mi(null,null,h,p,Fe))},catch:function(h){if(arguments.length===1)return this.then(null,h);var p=h,v=arguments[1];return typeof p=="function"?this.then(null,function(_){return(_ instanceof p?v:et)(_)}):this.then(null,function(_){return(_&&_.name===p?v:et)(_)})},finally:function(h){return this.then(function(p){return ye.resolve(h()).then(function(){return p})},function(p){return ye.resolve(h()).then(function(){return et(p)})})},timeout:function(h,p){var v=this;return h<1/0?new ye(function(_,x){var F=setTimeout(function(){return x(new me.Timeout(p))},h);v.then(_,x).finally(clearTimeout.bind(null,F))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&m(ye.prototype,Symbol.toStringTag,"Dexie.Promise"),un.env=jt(),f(ye,{all:function(){var h=ie.apply(null,arguments).map(ft);return new ye(function(p,v){h.length===0&&p([]);var _=h.length;h.forEach(function(x,F){return ye.resolve(x).then(function(P){h[F]=P,--_||p(h)},v)})})},resolve:function(h){return h instanceof ye?h:h&&typeof h.then=="function"?new ye(function(p,v){h.then(p,v)}):new ye(Fr,!0,h)},reject:et,race:function(){var h=ie.apply(null,arguments).map(ft);return new ye(function(p,v){h.map(function(_){return ye.resolve(_).then(p,v)})})},PSD:{get:function(){return Fe},set:function(h){return Fe=h}},totalEchoes:{get:function(){return Vr}},newPSD:Be,usePSD:ct,scheduler:{get:function(){return ui},set:function(h){ui=h}},rejectionMapper:{get:function(){return ro},set:function(h){ro=h}},follow:function(h,p){return new ye(function(v,_){return Be(function(x,F){var P=Fe;P.unhandleds=[],P.onunhandled=F,P.finalize=mt(function(){var I,L=this;I=function(){L.unhandleds.length===0?x():F(L.unhandleds[0])},Gt.push(function B(){I(),Gt.splice(Gt.indexOf(B),1)}),++Gn,ui(function(){--Gn==0&&Se()},[])},P.finalize),h()},p,v,_)})}}),$n&&($n.allSettled&&m(ye,"allSettled",function(){var h=ie.apply(null,arguments).map(ft);return new ye(function(p){h.length===0&&p([]);var v=h.length,_=new Array(v);h.forEach(function(x,F){return ye.resolve(x).then(function(P){return _[F]={status:"fulfilled",value:P}},function(P){return _[F]={status:"rejected",reason:P}}).then(function(){return--v||p(_)})})})}),$n.any&&typeof AggregateError<"u"&&m(ye,"any",function(){var h=ie.apply(null,arguments).map(ft);return new ye(function(p,v){h.length===0&&v(new AggregateError([]));var _=h.length,x=new Array(_);h.forEach(function(F,P){return ye.resolve(F).then(function(I){return p(I)},function(I){x[P]=I,--_||v(new AggregateError(x))})})})}),$n.withResolvers&&(ye.withResolvers=$n.withResolvers));var Me={awaits:0,echoes:0,id:0},Pt=0,en=[],dr=0,Vr=0,ue=0;function Be(h,p,v,_){var x=Fe,F=Object.create(x);return F.parent=x,F.ref=0,F.global=!1,F.id=++ue,un.env,F.env=Di?{Promise:ye,PromiseProp:{value:ye,configurable:!0,writable:!0},all:ye.all,race:ye.race,allSettled:ye.allSettled,any:ye.any,resolve:ye.resolve,reject:ye.reject}:{},p&&l(F,p),++x.ref,F.finalize=function(){--this.parent.ref||this.parent.finalize()},_=ct(F,h,v,_),F.ref===0&&F.finalize(),_}function $e(){return Me.id||(Me.id=++Pt),++Me.awaits,Me.echoes+=To,Me.id}function qe(){return!!Me.awaits&&(--Me.awaits==0&&(Me.id=0),Me.echoes=Me.awaits*To,!0)}function ft(h){return Me.echoes&&h&&h.constructor===$n?($e(),h.then(function(p){return qe(),p},function(p){return qe(),ut(p)})):h}function tn(){var h=en[en.length-1];en.pop(),Ve(h,!1)}function Ve(h,p){var v,_=Fe;(p?!Me.echoes||dr++&&h===Fe:!dr||--dr&&h===Fe)||queueMicrotask(p?function(x){++Vr,Me.echoes&&--Me.echoes!=0||(Me.echoes=Me.awaits=Me.id=0),en.push(Fe),Ve(x,!0)}.bind(null,h):tn),h!==Fe&&(Fe=h,_===un&&(un.env=jt()),Di&&(v=un.env.Promise,p=h.env,(_.global||h.global)&&(Object.defineProperty(o,"Promise",p.PromiseProp),v.all=p.all,v.race=p.race,v.resolve=p.resolve,v.reject=p.reject,p.allSettled&&(v.allSettled=p.allSettled),p.any&&(v.any=p.any))))}function jt(){var h=o.Promise;return Di?{Promise:h,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:h.all,race:h.race,allSettled:h.allSettled,any:h.any,resolve:h.resolve,reject:h.reject}:{}}function ct(h,p,v,_,x){var F=Fe;try{return Ve(h,!0),p(v,_,x)}finally{Ve(F,!1)}}function Mt(h,p,v,_){return typeof h!="function"?h:function(){var x=Fe;v&&$e(),Ve(p,!0);try{return h.apply(this,arguments)}finally{Ve(x,!1),_&&queueMicrotask(qe)}}}function qt(h){Promise===$n&&Me.echoes===0?dr===0?h():enqueueNativeMicroTask(h):setTimeout(h,0)}(""+Kr).indexOf("[native code]")===-1&&($e=qe=ze);var ut=ye.reject,qn="",Wt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",hr="String expected.",Xt=[],Po="__dbnames",Es="readonly",Js="readwrite";function so(h,p){return h?p?function(){return h.apply(this,arguments)&&p.apply(this,arguments)}:h:p}var dv={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Zu(h){return typeof h!="string"||/\./.test(h)?function(p){return p}:function(p){return p[h]===void 0&&h in p&&delete(p=ae(p))[h],p}}function hv(){throw me.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function at(h,p){try{var v=fv(h),_=fv(p);if(v!==_)return v==="Array"?1:_==="Array"?-1:v==="binary"?1:_==="binary"?-1:v==="string"?1:_==="string"?-1:v==="Date"?1:_!=="Date"?NaN:-1;switch(v){case"number":case"Date":case"string":return p<h?1:h<p?-1:0;case"binary":return function(x,F){for(var P=x.length,I=F.length,L=P<I?P:I,B=0;B<L;++B)if(x[B]!==F[B])return x[B]<F[B]?-1:1;return P===I?0:P<I?-1:1}(pv(h),pv(p));case"Array":return function(x,F){for(var P=x.length,I=F.length,L=P<I?P:I,B=0;B<L;++B){var W=at(x[B],F[B]);if(W!==0)return W}return P===I?0:P<I?-1:1}(h,p)}}catch{}return NaN}function fv(h){var p=typeof h;return p!="object"?p:ArrayBuffer.isView(h)?"binary":(h=we(h),h==="ArrayBuffer"?"binary":h)}function pv(h){return h instanceof Uint8Array?h:ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h)}function Ju(h,p,v){var _=h.schema.yProps;return _?(p&&0<v.numFailures&&(p=p.filter(function(x,F){return!v.failures[F]})),Promise.all(_.map(function(x){return x=x.updatesTable,p?h.db.table(x).where("k").anyOf(p).delete():h.db.table(x).clear()})).then(function(){return v})):v}var cl=(gv.prototype.execute=function(h){var p=this["@@propmod"];if(p.add!==void 0){var v=p.add;if(a(v))return i(i([],a(h)?h:[],!0),v).sort();if(typeof v=="number")return(Number(h)||0)+v;if(typeof v=="bigint")try{return BigInt(h)+v}catch{return BigInt(0)+v}throw new TypeError("Invalid term ".concat(v))}if(p.remove!==void 0){var _=p.remove;if(a(_))return a(h)?h.filter(function(x){return!_.includes(x)}).sort():[];if(typeof _=="number")return Number(h)-_;if(typeof _=="bigint")try{return BigInt(h)-_}catch{return BigInt(0)-_}throw new TypeError("Invalid subtrahend ".concat(_))}return v=(v=p.replacePrefix)===null||v===void 0?void 0:v[0],v&&typeof h=="string"&&h.startsWith(v)?p.replacePrefix[1]+h.substring(v.length):h},gv);function gv(h){this["@@propmod"]=h}function mv(h,p){for(var v=s(p),_=v.length,x=!1,F=0;F<_;++F){var P=v[F],I=p[P],L=D(h,P);I instanceof cl?(k(h,P,I.execute(L)),x=!0):L!==I&&(k(h,P,I),x=!0)}return x}var vv=(St.prototype._trans=function(h,p,v){var _=this._tx||Fe.trans,x=this.name,F=Sn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(h==="readonly"?"read":"write"," ").concat(this.name));function P(B,W,R){if(!R.schema[x])throw new me.NotFound("Table "+x+" not part of transaction");return p(R.idbtrans,R)}var I=le();try{var L=_&&_.db._novip===this.db._novip?_===Fe.trans?_._promise(h,P,v):Be(function(){return _._promise(h,P,v)},{trans:_,transless:Fe.transless||Fe}):function B(W,R,K,O){if(W.idbdb&&(W._state.openComplete||Fe.letThrough||W._vip)){var z=W._createTransaction(R,K,W._dbSchema);try{z.create(),W._state.PR1398_maxLoop=3}catch(j){return j.name===fe.InvalidState&&W.isOpen()&&0<--W._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),W.close({disableAutoOpen:!1}),W.open().then(function(){return B(W,R,K,O)})):ut(j)}return z._promise(R,function(j,V){return Be(function(){return Fe.trans=z,O(j,V,z)})}).then(function(j){if(R==="readwrite")try{z.idbtrans.commit()}catch{}return R==="readonly"?j:z._completion.then(function(){return j})})}if(W._state.openComplete)return ut(new me.DatabaseClosed(W._state.dbOpenError));if(!W._state.isBeingOpened){if(!W._state.autoOpen)return ut(new me.DatabaseClosed);W.open().catch(ze)}return W._state.dbReadyPromise.then(function(){return B(W,R,K,O)})}(this.db,h,[this.name],P);return F&&(L._consoleTask=F,L=L.catch(function(B){return console.trace(B),ut(B)})),L}finally{I&&de()}},St.prototype.get=function(h,p){var v=this;return h&&h.constructor===Object?this.where(h).first(p):h==null?ut(new me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(_){return v.core.get({trans:_,key:h}).then(function(x){return v.hook.reading.fire(x)})}).then(p)},St.prototype.where=function(h){if(typeof h=="string")return new this.db.WhereClause(this,h);if(a(h))return new this.db.WhereClause(this,"[".concat(h.join("+"),"]"));var p=s(h);if(p.length===1)return this.where(p[0]).equals(h[p[0]]);var v=this.schema.indexes.concat(this.schema.primKey).filter(function(I){if(I.compound&&p.every(function(B){return 0<=I.keyPath.indexOf(B)})){for(var L=0;L<p.length;++L)if(p.indexOf(I.keyPath[L])===-1)return!1;return!0}return!1}).sort(function(I,L){return I.keyPath.length-L.keyPath.length})[0];if(v&&this.db._maxKey!==qn){var F=v.keyPath.slice(0,p.length);return this.where(F).equals(F.map(function(L){return h[L]}))}!v&&Sn&&console.warn("The query ".concat(JSON.stringify(h)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(p.join("+"),"]"));var _=this.schema.idxByName;function x(I,L){return at(I,L)===0}var P=p.reduce(function(R,L){var B=R[0],W=R[1],R=_[L],K=h[L];return[B||R,B||!R?so(W,R&&R.multi?function(O){return O=D(O,L),a(O)&&O.some(function(z){return x(K,z)})}:function(O){return x(K,D(O,L))}):W]},[null,null]),F=P[0],P=P[1];return F?this.where(F.name).equals(h[F.keyPath]).filter(P):v?this.filter(P):this.where(p).equals("")},St.prototype.filter=function(h){return this.toCollection().and(h)},St.prototype.count=function(h){return this.toCollection().count(h)},St.prototype.offset=function(h){return this.toCollection().offset(h)},St.prototype.limit=function(h){return this.toCollection().limit(h)},St.prototype.each=function(h){return this.toCollection().each(h)},St.prototype.toArray=function(h){return this.toCollection().toArray(h)},St.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},St.prototype.orderBy=function(h){return new this.db.Collection(new this.db.WhereClause(this,a(h)?"[".concat(h.join("+"),"]"):h))},St.prototype.reverse=function(){return this.toCollection().reverse()},St.prototype.mapToClass=function(h){var p,v=this.db,_=this.name;function x(){return p!==null&&p.apply(this,arguments)||this}(this.schema.mappedClass=h).prototype instanceof hv&&(function(L,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function W(){this.constructor=L}t(L,B),L.prototype=B===null?Object.create(B):(W.prototype=B.prototype,new W)}(x,p=h),Object.defineProperty(x.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),x.prototype.table=function(){return _},h=x);for(var F=new Set,P=h.prototype;P;P=u(P))Object.getOwnPropertyNames(P).forEach(function(L){return F.add(L)});function I(L){if(!L)return L;var B,W=Object.create(h.prototype);for(B in L)if(!F.has(B))try{W[B]=L[B]}catch{}return W}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=I,this.hook("reading",I),h},St.prototype.defineClass=function(){return this.mapToClass(function(h){l(this,h)})},St.prototype.add=function(h,p){var v=this,_=this.schema.primKey,x=_.auto,F=_.keyPath,P=h;return F&&x&&(P=Zu(F)(h)),this._trans("readwrite",function(I){return v.core.mutate({trans:I,type:"add",keys:p!=null?[p]:null,values:[P]})}).then(function(I){return I.numFailures?ye.reject(I.failures[0]):I.lastResult}).then(function(I){if(F)try{k(h,F,I)}catch{}return I})},St.prototype.upsert=function(h,p){var v=this,_=this.schema.primKey.keyPath;return this._trans("readwrite",function(x){return v.core.get({trans:x,key:h}).then(function(F){var P=F??{};return mv(P,p),_&&k(P,_,h),v.core.mutate({trans:x,type:"put",values:[P],keys:[h],upsert:!0,updates:{keys:[h],changeSpecs:[p]}}).then(function(I){return I.numFailures?ye.reject(I.failures[0]):!!F})})})},St.prototype.update=function(h,p){return typeof h!="object"||a(h)?this.where(":id").equals(h).modify(p):(h=D(h,this.schema.primKey.keyPath),h===void 0?ut(new me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(h).modify(p))},St.prototype.put=function(h,p){var v=this,_=this.schema.primKey,x=_.auto,F=_.keyPath,P=h;return F&&x&&(P=Zu(F)(h)),this._trans("readwrite",function(I){return v.core.mutate({trans:I,type:"put",values:[P],keys:p!=null?[p]:null})}).then(function(I){return I.numFailures?ye.reject(I.failures[0]):I.lastResult}).then(function(I){if(F)try{k(h,F,I)}catch{}return I})},St.prototype.delete=function(h){var p=this;return this._trans("readwrite",function(v){return p.core.mutate({trans:v,type:"delete",keys:[h]}).then(function(_){return Ju(p,[h],_)}).then(function(_){return _.numFailures?ye.reject(_.failures[0]):void 0})})},St.prototype.clear=function(){var h=this;return this._trans("readwrite",function(p){return h.core.mutate({trans:p,type:"deleteRange",range:dv}).then(function(v){return Ju(h,null,v)})}).then(function(p){return p.numFailures?ye.reject(p.failures[0]):void 0})},St.prototype.bulkGet=function(h){var p=this;return this._trans("readonly",function(v){return p.core.getMany({keys:h,trans:v}).then(function(_){return _.map(function(x){return p.hook.reading.fire(x)})})})},St.prototype.bulkAdd=function(h,p,v){var _=this,x=Array.isArray(p)?p:void 0,F=(v=v||(x?void 0:p))?v.allKeys:void 0;return this._trans("readwrite",function(P){var B=_.schema.primKey,I=B.auto,B=B.keyPath;if(B&&x)throw new me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(x&&x.length!==h.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var L=h.length,B=B&&I?h.map(Zu(B)):h;return _.core.mutate({trans:P,type:"add",keys:x,values:B,wantResults:F}).then(function(z){var R=z.numFailures,K=z.results,O=z.lastResult,z=z.failures;if(R===0)return F?K:O;throw new He("".concat(_.name,".bulkAdd(): ").concat(R," of ").concat(L," operations failed"),z)})})},St.prototype.bulkPut=function(h,p,v){var _=this,x=Array.isArray(p)?p:void 0,F=(v=v||(x?void 0:p))?v.allKeys:void 0;return this._trans("readwrite",function(P){var B=_.schema.primKey,I=B.auto,B=B.keyPath;if(B&&x)throw new me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(x&&x.length!==h.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var L=h.length,B=B&&I?h.map(Zu(B)):h;return _.core.mutate({trans:P,type:"put",keys:x,values:B,wantResults:F}).then(function(z){var R=z.numFailures,K=z.results,O=z.lastResult,z=z.failures;if(R===0)return F?K:O;throw new He("".concat(_.name,".bulkPut(): ").concat(R," of ").concat(L," operations failed"),z)})})},St.prototype.bulkUpdate=function(h){var p=this,v=this.core,_=h.map(function(P){return P.key}),x=h.map(function(P){return P.changes}),F=[];return this._trans("readwrite",function(P){return v.getMany({trans:P,keys:_,cache:"clone"}).then(function(I){var L=[],B=[];h.forEach(function(R,K){var O=R.key,z=R.changes,j=I[K];if(j){for(var V=0,q=Object.keys(z);V<q.length;V++){var X=q[V],ee=z[X];if(X===p.schema.primKey.keyPath){if(at(ee,O)!==0)throw new me.Constraint("Cannot update primary key in bulkUpdate()")}else k(j,X,ee)}F.push(K),L.push(O),B.push(j)}});var W=L.length;return v.mutate({trans:P,type:"put",keys:L,values:B,updates:{keys:_,changeSpecs:x}}).then(function(R){var K=R.numFailures,O=R.failures;if(K===0)return W;for(var z=0,j=Object.keys(O);z<j.length;z++){var V,q=j[z],X=F[Number(q)];X!=null&&(V=O[q],delete O[q],O[X]=V)}throw new He("".concat(p.name,".bulkUpdate(): ").concat(K," of ").concat(W," operations failed"),O)})})})},St.prototype.bulkDelete=function(h){var p=this,v=h.length;return this._trans("readwrite",function(_){return p.core.mutate({trans:_,type:"delete",keys:h}).then(function(x){return Ju(p,h,x)})}).then(function(P){var x=P.numFailures,F=P.lastResult,P=P.failures;if(x===0)return F;throw new He("".concat(p.name,".bulkDelete(): ").concat(x," of ").concat(v," operations failed"),P)})},St);function St(){}function dl(h){function p(P,I){if(I){for(var L=arguments.length,B=new Array(L-1);--L;)B[L-1]=arguments[L];return v[P].subscribe.apply(null,B),h}if(typeof P=="string")return v[P]}var v={};p.addEventType=F;for(var _=1,x=arguments.length;_<x;++_)F(arguments[_]);return p;function F(P,I,L){if(typeof P!="object"){var B;I=I||no;var W={subscribers:[],fire:L=L||ze,subscribe:function(R){W.subscribers.indexOf(R)===-1&&(W.subscribers.push(R),W.fire=I(W.fire,R))},unsubscribe:function(R){W.subscribers=W.subscribers.filter(function(K){return K!==R}),W.fire=W.subscribers.reduce(I,L)}};return v[P]=p[P]=W}s(B=P).forEach(function(R){var K=B[R];if(a(K))F(R,B[R][0],B[R][1]);else{if(K!=="asap")throw new me.InvalidArgument("Invalid event config");var O=F(R,bt,function(){for(var z=arguments.length,j=new Array(z);z--;)j[z]=arguments[z];O.subscribers.forEach(function(V){T(function(){V.apply(null,j)})})})}})}}function hl(h,p){return y(p).from({prototype:h}),p}function ea(h,p){return!(h.filter||h.algorithm||h.or)&&(p?h.justLimit:!h.replayFilter)}function Bh(h,p){h.filter=so(h.filter,p)}function Oh(h,p,v){var _=h.replayFilter;h.replayFilter=_?function(){return so(_(),p())}:p,h.justLimit=v&&!_}function ec(h,p){if(h.isPrimKey)return p.primaryKey;var v=p.getIndexByKeyPath(h.index);if(!v)throw new me.Schema("KeyPath "+h.index+" on object store "+p.name+" is not indexed");return v}function yv(h,p,v){var _=ec(h,p.schema);return p.openCursor({trans:v,values:!h.keysOnly,reverse:h.dir==="prev",unique:!!h.unique,query:{index:_,range:h.range}})}function tc(h,p,v,_){var x=h.replayFilter?so(h.filter,h.replayFilter()):h.filter;if(h.or){var F={},P=function(I,L,B){var W,R;x&&!x(L,B,function(K){return L.stop(K)},function(K){return L.fail(K)})||((R=""+(W=L.primaryKey))=="[object ArrayBuffer]"&&(R=""+new Uint8Array(W)),d(F,R)||(F[R]=!0,p(I,L,B)))};return Promise.all([h.or._iterate(P,v),bv(yv(h,_,v),h.algorithm,P,!h.keysOnly&&h.valueMapper)])}return bv(yv(h,_,v),so(h.algorithm,x),p,!h.keysOnly&&h.valueMapper)}function bv(h,p,v,_){var x=Ie(_?function(F,P,I){return v(_(F),P,I)}:v);return h.then(function(F){if(F)return F.start(function(){var P=function(){return F.continue()};p&&!p(F,function(I){return P=I},function(I){F.stop(I),P=ze},function(I){F.fail(I),P=ze})||x(F.value,F,function(I){return P=I}),P()})})}var dS=(ht.prototype._read=function(h,p){var v=this._ctx;return v.error?v.table._trans(null,ut.bind(null,v.error)):v.table._trans("readonly",h).then(p)},ht.prototype._write=function(h){var p=this._ctx;return p.error?p.table._trans(null,ut.bind(null,p.error)):p.table._trans("readwrite",h,"locked")},ht.prototype._addAlgorithm=function(h){var p=this._ctx;p.algorithm=so(p.algorithm,h)},ht.prototype._iterate=function(h,p){return tc(this._ctx,h,p,this._ctx.table.core)},ht.prototype.clone=function(h){var p=Object.create(this.constructor.prototype),v=Object.create(this._ctx);return h&&l(v,h),p._ctx=v,p},ht.prototype.raw=function(){return this._ctx.valueMapper=null,this},ht.prototype.each=function(h){var p=this._ctx;return this._read(function(v){return tc(p,h,v,p.table.core)})},ht.prototype.count=function(h){var p=this;return this._read(function(v){var _=p._ctx,x=_.table.core;if(ea(_,!0))return x.count({trans:v,query:{index:ec(_,x.schema),range:_.range}}).then(function(P){return Math.min(P,_.limit)});var F=0;return tc(_,function(){return++F,!1},v,x).then(function(){return F})}).then(h)},ht.prototype.sortBy=function(h,p){var v=h.split(".").reverse(),_=v[0],x=v.length-1;function F(L,B){return B?F(L[v[B]],B-1):L[_]}var P=this._ctx.dir==="next"?1:-1;function I(L,B){return at(F(L,x),F(B,x))*P}return this.toArray(function(L){return L.sort(I)}).then(p)},ht.prototype.toArray=function(h){var p=this;return this._read(function(v){var _=p._ctx;if(_.dir==="next"&&ea(_,!0)&&0<_.limit){var x=_.valueMapper,F=ec(_,_.table.core.schema);return _.table.core.query({trans:v,limit:_.limit,values:!0,query:{index:F,range:_.range}}).then(function(I){return I=I.result,x?I.map(x):I})}var P=[];return tc(_,function(I){return P.push(I)},v,_.table.core).then(function(){return P})},h)},ht.prototype.offset=function(h){var p=this._ctx;return h<=0||(p.offset+=h,ea(p)?Oh(p,function(){var v=h;return function(_,x){return v===0||(v===1?--v:x(function(){_.advance(v),v=0}),!1)}}):Oh(p,function(){var v=h;return function(){return--v<0}})),this},ht.prototype.limit=function(h){return this._ctx.limit=Math.min(this._ctx.limit,h),Oh(this._ctx,function(){var p=h;return function(v,_,x){return--p<=0&&_(x),0<=p}},!0),this},ht.prototype.until=function(h,p){return Bh(this._ctx,function(v,_,x){return!h(v.value)||(_(x),p)}),this},ht.prototype.first=function(h){return this.limit(1).toArray(function(p){return p[0]}).then(h)},ht.prototype.last=function(h){return this.reverse().first(h)},ht.prototype.filter=function(h){var p;return Bh(this._ctx,function(v){return h(v.value)}),(p=this._ctx).isMatch=so(p.isMatch,h),this},ht.prototype.and=function(h){return this.filter(h)},ht.prototype.or=function(h){return new this.db.WhereClause(this._ctx.table,h,this)},ht.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ht.prototype.desc=function(){return this.reverse()},ht.prototype.eachKey=function(h){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(v,_){h(_.key,_)})},ht.prototype.eachUniqueKey=function(h){return this._ctx.unique="unique",this.eachKey(h)},ht.prototype.eachPrimaryKey=function(h){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(v,_){h(_.primaryKey,_)})},ht.prototype.keys=function(h){var p=this._ctx;p.keysOnly=!p.isMatch;var v=[];return this.each(function(_,x){v.push(x.key)}).then(function(){return v}).then(h)},ht.prototype.primaryKeys=function(h){var p=this._ctx;if(p.dir==="next"&&ea(p,!0)&&0<p.limit)return this._read(function(_){var x=ec(p,p.table.core.schema);return p.table.core.query({trans:_,values:!1,limit:p.limit,query:{index:x,range:p.range}})}).then(function(_){return _.result}).then(h);p.keysOnly=!p.isMatch;var v=[];return this.each(function(_,x){v.push(x.primaryKey)}).then(function(){return v}).then(h)},ht.prototype.uniqueKeys=function(h){return this._ctx.unique="unique",this.keys(h)},ht.prototype.firstKey=function(h){return this.limit(1).keys(function(p){return p[0]}).then(h)},ht.prototype.lastKey=function(h){return this.reverse().firstKey(h)},ht.prototype.distinct=function(){var h=this._ctx,h=h.index&&h.table.schema.idxByName[h.index];if(!h||!h.multi)return this;var p={};return Bh(this._ctx,function(x){var _=x.primaryKey.toString(),x=d(p,_);return p[_]=!0,!x}),this},ht.prototype.modify=function(h){var p=this,v=this._ctx;return this._write(function(_){var x=typeof h=="function"?h:function(j){return mv(j,h)},F=v.table.core,B=F.schema.primaryKey,P=B.outbound,I=B.extractKey,L=200,B=p.db._options.modifyChunkSize;B&&(L=typeof B=="object"?B[F.name]||B["*"]||200:B);function W(j,X){var q=X.failures,X=X.numFailures;K+=j-X;for(var ee=0,se=s(q);ee<se.length;ee++){var ge=se[ee];R.push(q[ge])}}var R=[],K=0,O=[],z=h===Ev;return p.clone().primaryKeys().then(function(j){function V(X){var ee=Math.min(L,j.length-X),se=j.slice(X,X+ee);return(z?Promise.resolve([]):F.getMany({trans:_,keys:se,cache:"immutable"})).then(function(ge){var Ee=[],he=[],ve=P?[]:null,_e=z?se:[];if(!z)for(var be=0;be<ee;++be){var xe=ge[be],Ye={value:ae(xe),primKey:j[X+be]};x.call(Ye,Ye.value,Ye)!==!1&&(Ye.value==null?_e.push(j[X+be]):P||at(I(xe),I(Ye.value))===0?(he.push(Ye.value),P&&ve.push(j[X+be])):(_e.push(j[X+be]),Ee.push(Ye.value)))}return Promise.resolve(0<Ee.length&&F.mutate({trans:_,type:"add",values:Ee}).then(function(tt){for(var rt in tt.failures)_e.splice(parseInt(rt),1);W(Ee.length,tt)})).then(function(){return(0<he.length||q&&typeof h=="object")&&F.mutate({trans:_,type:"put",keys:ve,values:he,criteria:q,changeSpec:typeof h!="function"&&h,isAdditionalChunk:0<X}).then(function(tt){return W(he.length,tt)})}).then(function(){return(0<_e.length||q&&z)&&F.mutate({trans:_,type:"delete",keys:_e,criteria:q,isAdditionalChunk:0<X}).then(function(tt){return Ju(v.table,_e,tt)}).then(function(tt){return W(_e.length,tt)})}).then(function(){return j.length>X+ee&&V(X+L)})})}var q=ea(v)&&v.limit===1/0&&(typeof h!="function"||z)&&{index:v.index,range:v.range};return V(0).then(function(){if(0<R.length)throw new pt("Error modifying one or more objects",R,K,O);return j.length})})})},ht.prototype.delete=function(){var h=this._ctx,p=h.range;return!ea(h)||h.table.schema.yProps||!h.isPrimKey&&p.type!==3?this.modify(Ev):this._write(function(v){var _=h.table.core.schema.primaryKey,x=p;return h.table.core.count({trans:v,query:{index:_,range:x}}).then(function(F){return h.table.core.mutate({trans:v,type:"deleteRange",range:x}).then(function(L){var I=L.failures,L=L.numFailures;if(L)throw new pt("Could not delete some values",Object.keys(I).map(function(B){return I[B]}),F-L);return F-L})})})},ht);function ht(){}var Ev=function(h,p){return p.value=null};function hS(h,p){return h<p?-1:h===p?0:1}function fS(h,p){return p<h?-1:h===p?0:1}function kr(h,p,v){return h=h instanceof wv?new h.Collection(h):h,h._ctx.error=new(v||TypeError)(p),h}function ta(h){return new h.Collection(h,function(){return _v("")}).limit(0)}function nc(h,p,v,_){var x,F,P,I,L,B,W,R=v.length;if(!v.every(function(z){return typeof z=="string"}))return kr(h,hr);function K(z){x=z==="next"?function(V){return V.toUpperCase()}:function(V){return V.toLowerCase()},F=z==="next"?function(V){return V.toLowerCase()}:function(V){return V.toUpperCase()},P=z==="next"?hS:fS;var j=v.map(function(V){return{lower:F(V),upper:x(V)}}).sort(function(V,q){return P(V.lower,q.lower)});I=j.map(function(V){return V.upper}),L=j.map(function(V){return V.lower}),W=(B=z)==="next"?"":_}K("next"),h=new h.Collection(h,function(){return Mo(I[0],L[R-1]+_)}),h._ondirectionchange=function(z){K(z)};var O=0;return h._addAlgorithm(function(z,j,V){var q=z.key;if(typeof q!="string")return!1;var X=F(q);if(p(X,L,O))return!0;for(var ee=null,se=O;se<R;++se){var ge=function(Ee,he,ve,_e,be,xe){for(var Ye=Math.min(Ee.length,_e.length),tt=-1,rt=0;rt<Ye;++rt){var Tr=he[rt];if(Tr!==_e[rt])return be(Ee[rt],ve[rt])<0?Ee.substr(0,rt)+ve[rt]+ve.substr(rt+1):be(Ee[rt],_e[rt])<0?Ee.substr(0,rt)+_e[rt]+ve.substr(rt+1):0<=tt?Ee.substr(0,tt)+he[tt]+ve.substr(tt+1):null;be(Ee[rt],Tr)<0&&(tt=rt)}return Ye<_e.length&&xe==="next"?Ee+ve.substr(Ee.length):Ye<Ee.length&&xe==="prev"?Ee.substr(0,ve.length):tt<0?null:Ee.substr(0,tt)+_e[tt]+ve.substr(tt+1)}(q,X,I[se],L[se],P,B);ge===null&&ee===null?O=se+1:(ee===null||0<P(ee,ge))&&(ee=ge)}return j(ee!==null?function(){z.continue(ee+W)}:V),!1}),h}function Mo(h,p,v,_){return{type:2,lower:h,upper:p,lowerOpen:v,upperOpen:_}}function _v(h){return{type:1,lower:h,upper:h}}var wv=(Object.defineProperty(vn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),vn.prototype.between=function(h,p,v,_){v=v!==!1,_=_===!0;try{return 0<this._cmp(h,p)||this._cmp(h,p)===0&&(v||_)&&(!v||!_)?ta(this):new this.Collection(this,function(){return Mo(h,p,!v,!_)})}catch{return kr(this,Wt)}},vn.prototype.equals=function(h){return h==null?kr(this,Wt):new this.Collection(this,function(){return _v(h)})},vn.prototype.above=function(h){return h==null?kr(this,Wt):new this.Collection(this,function(){return Mo(h,void 0,!0)})},vn.prototype.aboveOrEqual=function(h){return h==null?kr(this,Wt):new this.Collection(this,function(){return Mo(h,void 0,!1)})},vn.prototype.below=function(h){return h==null?kr(this,Wt):new this.Collection(this,function(){return Mo(void 0,h,!1,!0)})},vn.prototype.belowOrEqual=function(h){return h==null?kr(this,Wt):new this.Collection(this,function(){return Mo(void 0,h)})},vn.prototype.startsWith=function(h){return typeof h!="string"?kr(this,hr):this.between(h,h+qn,!0,!0)},vn.prototype.startsWithIgnoreCase=function(h){return h===""?this.startsWith(h):nc(this,function(p,v){return p.indexOf(v[0])===0},[h],qn)},vn.prototype.equalsIgnoreCase=function(h){return nc(this,function(p,v){return p===v[0]},[h],"")},vn.prototype.anyOfIgnoreCase=function(){var h=ie.apply(re,arguments);return h.length===0?ta(this):nc(this,function(p,v){return v.indexOf(p)!==-1},h,"")},vn.prototype.startsWithAnyOfIgnoreCase=function(){var h=ie.apply(re,arguments);return h.length===0?ta(this):nc(this,function(p,v){return v.some(function(_){return p.indexOf(_)===0})},h,qn)},vn.prototype.anyOf=function(){var h=this,p=ie.apply(re,arguments),v=this._cmp;try{p.sort(v)}catch{return kr(this,Wt)}if(p.length===0)return ta(this);var _=new this.Collection(this,function(){return Mo(p[0],p[p.length-1])});_._ondirectionchange=function(F){v=F==="next"?h._ascending:h._descending,p.sort(v)};var x=0;return _._addAlgorithm(function(F,P,I){for(var L=F.key;0<v(L,p[x]);)if(++x===p.length)return P(I),!1;return v(L,p[x])===0||(P(function(){F.continue(p[x])}),!1)}),_},vn.prototype.notEqual=function(h){return this.inAnyRange([[-1/0,h],[h,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},vn.prototype.noneOf=function(){var h=ie.apply(re,arguments);if(h.length===0)return new this.Collection(this);try{h.sort(this._ascending)}catch{return kr(this,Wt)}var p=h.reduce(function(v,_){return v?v.concat([[v[v.length-1][1],_]]):[[-1/0,_]]},null);return p.push([h[h.length-1],this.db._maxKey]),this.inAnyRange(p,{includeLowers:!1,includeUppers:!1})},vn.prototype.inAnyRange=function(q,p){var v=this,_=this._cmp,x=this._ascending,F=this._descending,P=this._min,I=this._max;if(q.length===0)return ta(this);if(!q.every(function(X){return X[0]!==void 0&&X[1]!==void 0&&x(X[0],X[1])<=0}))return kr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",me.InvalidArgument);var L=!p||p.includeLowers!==!1,B=p&&p.includeUppers===!0,W,R=x;function K(X,ee){return R(X[0],ee[0])}try{(W=q.reduce(function(X,ee){for(var se=0,ge=X.length;se<ge;++se){var Ee=X[se];if(_(ee[0],Ee[1])<0&&0<_(ee[1],Ee[0])){Ee[0]=P(Ee[0],ee[0]),Ee[1]=I(Ee[1],ee[1]);break}}return se===ge&&X.push(ee),X},[])).sort(K)}catch{return kr(this,Wt)}var O=0,z=B?function(X){return 0<x(X,W[O][1])}:function(X){return 0<=x(X,W[O][1])},j=L?function(X){return 0<F(X,W[O][0])}:function(X){return 0<=F(X,W[O][0])},V=z,q=new this.Collection(this,function(){return Mo(W[0][0],W[W.length-1][1],!L,!B)});return q._ondirectionchange=function(X){R=X==="next"?(V=z,x):(V=j,F),W.sort(K)},q._addAlgorithm(function(X,ee,se){for(var ge,Ee=X.key;V(Ee);)if(++O===W.length)return ee(se),!1;return!z(ge=Ee)&&!j(ge)||(v._cmp(Ee,W[O][1])===0||v._cmp(Ee,W[O][0])===0||ee(function(){R===x?X.continue(W[O][0]):X.continue(W[O][1])}),!1)}),q},vn.prototype.startsWithAnyOf=function(){var h=ie.apply(re,arguments);return h.every(function(p){return typeof p=="string"})?h.length===0?ta(this):this.inAnyRange(h.map(function(p){return[p,p+qn]})):kr(this,"startsWithAnyOf() only works with strings")},vn);function vn(){}function Ii(h){return Ie(function(p){return fl(p),h(p.target.error),!1})}function fl(h){h.stopPropagation&&h.stopPropagation(),h.preventDefault&&h.preventDefault()}var pl="storagemutated",Hh="x-storagemutated-1",Io=dl(null,pl),pS=(Ri.prototype._lock=function(){return C(!Fe.global),++this._reculock,this._reculock!==1||Fe.global||(Fe.lockOwnerFor=this),this},Ri.prototype._unlock=function(){if(C(!Fe.global),--this._reculock==0)for(Fe.global||(Fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var h=this._blockedFuncs.shift();try{ct(h[1],h[0])}catch{}}return this},Ri.prototype._locked=function(){return this._reculock&&Fe.lockOwnerFor!==this},Ri.prototype.create=function(h){var p=this;if(!this.mode)return this;var v=this.db.idbdb,_=this.db._state.dbOpenError;if(C(!this.idbtrans),!h&&!v)switch(_&&_.name){case"DatabaseClosedError":throw new me.DatabaseClosed(_);case"MissingAPIError":throw new me.MissingAPI(_.message,_);default:throw new me.OpenFailed(_)}if(!this.active)throw new me.TransactionInactive;return C(this._completion._state===null),(h=this.idbtrans=h||(this.db.core||v).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ie(function(x){fl(x),p._reject(h.error)}),h.onabort=Ie(function(x){fl(x),p.active&&p._reject(new me.Abort(h.error)),p.active=!1,p.on("abort").fire(x)}),h.oncomplete=Ie(function(){p.active=!1,p._resolve(),"mutatedParts"in h&&Io.storagemutated.fire(h.mutatedParts)}),this},Ri.prototype._promise=function(h,p,v){var _=this;if(h==="readwrite"&&this.mode!=="readwrite")return ut(new me.ReadOnly("Transaction is readonly"));if(!this.active)return ut(new me.TransactionInactive);if(this._locked())return new ye(function(F,P){_._blockedFuncs.push([function(){_._promise(h,p,v).then(F,P)},Fe])});if(v)return Be(function(){var F=new ye(function(P,I){_._lock();var L=p(P,I,_);L&&L.then&&L.then(P,I)});return F.finally(function(){return _._unlock()}),F._lib=!0,F});var x=new ye(function(F,P){var I=p(F,P,_);I&&I.then&&I.then(F,P)});return x._lib=!0,x},Ri.prototype._root=function(){return this.parent?this.parent._root():this},Ri.prototype.waitFor=function(h){var p,v=this._root(),_=ye.resolve(h);v._waitingFor?v._waitingFor=v._waitingFor.then(function(){return _}):(v._waitingFor=_,v._waitingQueue=[],p=v.idbtrans.objectStore(v.storeNames[0]),function F(){for(++v._spinCount;v._waitingQueue.length;)v._waitingQueue.shift()();v._waitingFor&&(p.get(-1/0).onsuccess=F)}());var x=v._waitingFor;return new ye(function(F,P){_.then(function(I){return v._waitingQueue.push(Ie(F.bind(null,I)))},function(I){return v._waitingQueue.push(Ie(P.bind(null,I)))}).finally(function(){v._waitingFor===x&&(v._waitingFor=null)})})},Ri.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new me.Abort))},Ri.prototype.table=function(h){var p=this._memoizedTables||(this._memoizedTables={});if(d(p,h))return p[h];var v=this.schema[h];if(!v)throw new me.NotFound("Table "+h+" not part of transaction");return v=new this.db.Table(h,v,this),v.core=this.db.core.table(h),p[h]=v},Ri);function Ri(){}function zh(h,p,v,_,x,F,P,I){return{name:h,keyPath:p,unique:v,multi:_,auto:x,compound:F,src:(v&&!P?"&":"")+(_?"*":"")+(x?"++":"")+Cv(p),type:I}}function Cv(h){return typeof h=="string"?h:h?"["+[].join.call(h,"+")+"]":""}function jh(h,p,v){return{name:h,primKey:p,indexes:v,mappedClass:null,idxByName:(_=function(x){return[x.name,x]},v.reduce(function(x,F,P){return P=_(F,P),P&&(x[P[0]]=P[1]),x},{}))};var _}var gl=function(h){try{return h.only([[]]),gl=function(){return[[]]},[[]]}catch{return gl=function(){return qn},qn}};function Wh(h){return h==null?function(){}:typeof h=="string"?(p=h).split(".").length===1?function(v){return v[p]}:function(v){return D(v,p)}:function(v){return D(v,h)};var p}function Sv(h){return[].slice.call(h)}var gS=0;function ml(h){return h==null?":id":typeof h=="string"?h:"[".concat(h.join("+"),"]")}function mS(h,p,L){function _(V){if(V.type===3)return null;if(V.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var O=V.lower,z=V.upper,j=V.lowerOpen,V=V.upperOpen;return O===void 0?z===void 0?null:p.upperBound(z,!!V):z===void 0?p.lowerBound(O,!!j):p.bound(O,z,!!j,!!V)}function x(K){var O,z=K.name;return{name:z,schema:K,mutate:function(j){var V=j.trans,q=j.type,X=j.keys,ee=j.values,se=j.range;return new Promise(function(ge,Ee){ge=Ie(ge);var he=V.objectStore(z),ve=he.keyPath==null,_e=q==="put"||q==="add";if(!_e&&q!=="delete"&&q!=="deleteRange")throw new Error("Invalid operation type: "+q);var be,xe=(X||ee||{length:1}).length;if(X&&ee&&X.length!==ee.length)throw new Error("Given keys array must have same length as given values array.");if(xe===0)return ge({numFailures:0,failures:{},results:[],lastResult:void 0});function Ye(Xn){++Tr,fl(Xn)}var tt=[],rt=[],Tr=0;if(q==="deleteRange"){if(se.type===4)return ge({numFailures:Tr,failures:rt,results:[],lastResult:void 0});se.type===3?tt.push(be=he.clear()):tt.push(be=he.delete(_(se)))}else{var ve=_e?ve?[ee,X]:[ee,null]:[X,null],Xe=ve[0],Tn=ve[1];if(_e)for(var Dn=0;Dn<xe;++Dn)tt.push(be=Tn&&Tn[Dn]!==void 0?he[q](Xe[Dn],Tn[Dn]):he[q](Xe[Dn])),be.onerror=Ye;else for(Dn=0;Dn<xe;++Dn)tt.push(be=he[q](Xe[Dn])),be.onerror=Ye}function pc(Xn){Xn=Xn.target.result,tt.forEach(function(Cs,af){return Cs.error!=null&&(rt[af]=Cs.error)}),ge({numFailures:Tr,failures:rt,results:q==="delete"?X:tt.map(function(Cs){return Cs.result}),lastResult:Xn})}be.onerror=function(Xn){Ye(Xn),pc(Xn)},be.onsuccess=pc})},getMany:function(j){var V=j.trans,q=j.keys;return new Promise(function(X,ee){X=Ie(X);for(var se,ge=V.objectStore(z),Ee=q.length,he=new Array(Ee),ve=0,_e=0,be=function(tt){tt=tt.target,he[tt._pos]=tt.result,++_e===ve&&X(he)},xe=Ii(ee),Ye=0;Ye<Ee;++Ye)q[Ye]!=null&&((se=ge.get(q[Ye]))._pos=Ye,se.onsuccess=be,se.onerror=xe,++ve);ve===0&&X(he)})},get:function(j){var V=j.trans,q=j.key;return new Promise(function(X,ee){X=Ie(X);var se=V.objectStore(z).get(q);se.onsuccess=function(ge){return X(ge.target.result)},se.onerror=Ii(ee)})},query:(O=B,function(j){return new Promise(function(V,q){V=Ie(V);var X,ee,se,ve=j.trans,ge=j.values,Ee=j.limit,be=j.query,he=Ee===1/0?void 0:Ee,_e=be.index,be=be.range,ve=ve.objectStore(z),_e=_e.isPrimaryKey?ve:ve.index(_e.name),be=_(be);if(Ee===0)return V({result:[]});O?((he=ge?_e.getAll(be,he):_e.getAllKeys(be,he)).onsuccess=function(xe){return V({result:xe.target.result})},he.onerror=Ii(q)):(X=0,ee=!ge&&"openKeyCursor"in _e?_e.openKeyCursor(be):_e.openCursor(be),se=[],ee.onsuccess=function(xe){var Ye=ee.result;return Ye?(se.push(ge?Ye.value:Ye.primaryKey),++X===Ee?V({result:se}):void Ye.continue()):V({result:se})},ee.onerror=Ii(q))})}),openCursor:function(j){var V=j.trans,q=j.values,X=j.query,ee=j.reverse,se=j.unique;return new Promise(function(ge,Ee){ge=Ie(ge);var _e=X.index,he=X.range,ve=V.objectStore(z),ve=_e.isPrimaryKey?ve:ve.index(_e.name),_e=ee?se?"prevunique":"prev":se?"nextunique":"next",be=!q&&"openKeyCursor"in ve?ve.openKeyCursor(_(he),_e):ve.openCursor(_(he),_e);be.onerror=Ii(Ee),be.onsuccess=Ie(function(xe){var Ye,tt,rt,Tr,Xe=be.result;Xe?(Xe.___id=++gS,Xe.done=!1,Ye=Xe.continue.bind(Xe),tt=(tt=Xe.continuePrimaryKey)&&tt.bind(Xe),rt=Xe.advance.bind(Xe),Tr=function(){throw new Error("Cursor not stopped")},Xe.trans=V,Xe.stop=Xe.continue=Xe.continuePrimaryKey=Xe.advance=function(){throw new Error("Cursor not started")},Xe.fail=Ie(Ee),Xe.next=function(){var Tn=this,Dn=1;return this.start(function(){return Dn--?Tn.continue():Tn.stop()}).then(function(){return Tn})},Xe.start=function(Tn){function Dn(){if(be.result)try{Tn()}catch(Xn){Xe.fail(Xn)}else Xe.done=!0,Xe.start=function(){throw new Error("Cursor behind last entry")},Xe.stop()}var pc=new Promise(function(Xn,Cs){Xn=Ie(Xn),be.onerror=Ii(Cs),Xe.fail=Cs,Xe.stop=function(af){Xe.stop=Xe.continue=Xe.continuePrimaryKey=Xe.advance=Tr,Xn(af)}});return be.onsuccess=Ie(function(Xn){be.onsuccess=Dn,Dn()}),Xe.continue=Ye,Xe.continuePrimaryKey=tt,Xe.advance=rt,Dn(),pc},ge(Xe)):ge(null)},Ee)})},count:function(j){var V=j.query,q=j.trans,X=V.index,ee=V.range;return new Promise(function(se,ge){var Ee=q.objectStore(z),he=X.isPrimaryKey?Ee:Ee.index(X.name),Ee=_(ee),he=Ee?he.count(Ee):he.count();he.onsuccess=Ie(function(ve){return se(ve.target.result)}),he.onerror=Ii(ge)})}}}var F,P,I,W=(P=L,I=Sv((F=h).objectStoreNames),{schema:{name:F.name,tables:I.map(function(K){return P.objectStore(K)}).map(function(K){var O=K.keyPath,V=K.autoIncrement,z=a(O),j={},V={name:K.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:O==null,compound:z,keyPath:O,autoIncrement:V,unique:!0,extractKey:Wh(O)},indexes:Sv(K.indexNames).map(function(q){return K.index(q)}).map(function(se){var X=se.name,ee=se.unique,ge=se.multiEntry,se=se.keyPath,ge={name:X,compound:a(se),keyPath:se,unique:ee,multiEntry:ge,extractKey:Wh(se)};return j[ml(se)]=ge}),getIndexByKeyPath:function(q){return j[ml(q)]}};return j[":id"]=V.primaryKey,O!=null&&(j[ml(O)]=V.primaryKey),V})},hasGetAll:0<I.length&&"getAll"in P.objectStore(I[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),L=W.schema,B=W.hasGetAll,W=L.tables.map(x),R={};return W.forEach(function(K){return R[K.name]=K}),{stack:"dbcore",transaction:h.transaction.bind(h),table:function(K){if(!R[K])throw new Error("Table '".concat(K,"' not found"));return R[K]},MIN_KEY:-1/0,MAX_KEY:gl(p),schema:L}}function vS(h,p,v,_){var x=v.IDBKeyRange;return v.indexedDB,{dbcore:(_=mS(p,x,_),h.dbcore.reduce(function(F,P){return P=P.create,r(r({},F),P(F))},_))}}function rc(h,_){var v=_.db,_=vS(h._middlewares,v,h._deps,_);h.core=_.dbcore,h.tables.forEach(function(x){var F=x.name;h.core.schema.tables.some(function(P){return P.name===F})&&(x.core=h.core.table(F),h[F]instanceof h.Table&&(h[F].core=x.core))})}function ic(h,p,v,_){v.forEach(function(x){var F=_[x];p.forEach(function(P){var I=function L(B,W){return S(B,W)||(B=u(B))&&L(B,W)}(P,x);(!I||"value"in I&&I.value===void 0)&&(P===h.Transaction.prototype||P instanceof h.Transaction?m(P,x,{get:function(){return this.table(x)},set:function(L){g(this,x,{value:L,writable:!0,configurable:!0,enumerable:!0})}}):P[x]=new h.Table(x,F))})})}function Uh(h,p){p.forEach(function(v){for(var _ in v)v[_]instanceof h.Table&&delete v[_]})}function yS(h,p){return h._cfg.version-p._cfg.version}function bS(h,p,v,_){var x=h._dbSchema;v.objectStoreNames.contains("$meta")&&!x.$meta&&(x.$meta=jh("$meta",Av("")[0],[]),h._storeNames.push("$meta"));var F=h._createTransaction("readwrite",h._storeNames,x);F.create(v),F._completion.catch(_);var P=F._reject.bind(F),I=Fe.transless||Fe;Be(function(){return Fe.trans=F,Fe.transless=I,p!==0?(rc(h,v),B=p,((L=F).storeNames.includes("$meta")?L.table("$meta").get("version").then(function(W){return W??B}):ye.resolve(B)).then(function(W){return K=W,O=F,z=v,j=[],W=(R=h)._versions,V=R._dbSchema=sc(0,R.idbdb,z),(W=W.filter(function(q){return q._cfg.version>=K})).length!==0?(W.forEach(function(q){j.push(function(){var X=V,ee=q._cfg.dbschema;ac(R,X,z),ac(R,ee,z),V=R._dbSchema=ee;var se=Vh(X,ee);se.add.forEach(function(_e){Kh(z,_e[0],_e[1].primKey,_e[1].indexes)}),se.change.forEach(function(_e){if(_e.recreate)throw new me.Upgrade("Not yet support for changing primary key");var be=z.objectStore(_e.name);_e.add.forEach(function(xe){return oc(be,xe)}),_e.change.forEach(function(xe){be.deleteIndex(xe.name),oc(be,xe)}),_e.del.forEach(function(xe){return be.deleteIndex(xe)})});var ge=q._cfg.contentUpgrade;if(ge&&q._cfg.version>K){rc(R,z),O._memoizedTables={};var Ee=M(ee);se.del.forEach(function(_e){Ee[_e]=X[_e]}),Uh(R,[R.Transaction.prototype]),ic(R,[R.Transaction.prototype],s(Ee),Ee),O.schema=Ee;var he,ve=Ce(ge);return ve&&$e(),se=ye.follow(function(){var _e;(he=ge(O))&&ve&&(_e=qe.bind(null,null),he.then(_e,_e))}),he&&typeof he.then=="function"?ye.resolve(he):se.then(function(){return he})}}),j.push(function(X){var ee,se,ge=q._cfg.dbschema;ee=ge,se=X,[].slice.call(se.db.objectStoreNames).forEach(function(Ee){return ee[Ee]==null&&se.db.deleteObjectStore(Ee)}),Uh(R,[R.Transaction.prototype]),ic(R,[R.Transaction.prototype],R._storeNames,R._dbSchema),O.schema=R._dbSchema}),j.push(function(X){R.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(R.idbdb.version/10)===q._cfg.version?(R.idbdb.deleteObjectStore("$meta"),delete R._dbSchema.$meta,R._storeNames=R._storeNames.filter(function(ee){return ee!=="$meta"})):X.objectStore("$meta").put(q._cfg.version,"version"))})}),function q(){return j.length?ye.resolve(j.shift()(O.idbtrans)).then(q):ye.resolve()}().then(function(){xv(V,z)})):ye.resolve();var R,K,O,z,j,V}).catch(P)):(s(x).forEach(function(W){Kh(v,W,x[W].primKey,x[W].indexes)}),rc(h,v),void ye.follow(function(){return h.on.populate.fire(F)}).catch(P));var L,B})}function ES(h,p){xv(h._dbSchema,p),p.db.version%10!=0||p.objectStoreNames.contains("$meta")||p.db.createObjectStore("$meta").add(Math.ceil(p.db.version/10-1),"version");var v=sc(0,h.idbdb,p);ac(h,h._dbSchema,p);for(var _=0,x=Vh(v,h._dbSchema).change;_<x.length;_++){var F=function(P){if(P.change.length||P.recreate)return console.warn("Unable to patch indexes of table ".concat(P.name," because it has changes on the type of index or primary key.")),{value:void 0};var I=p.objectStore(P.name);P.add.forEach(function(L){Sn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(P.name,".").concat(L.src)),oc(I,L)})}(x[_]);if(typeof F=="object")return F.value}}function Vh(h,p){var v,_={del:[],add:[],change:[]};for(v in h)p[v]||_.del.push(v);for(v in p){var x=h[v],F=p[v];if(x){var P={name:v,def:F,recreate:!1,del:[],add:[],change:[]};if(""+(x.primKey.keyPath||"")!=""+(F.primKey.keyPath||"")||x.primKey.auto!==F.primKey.auto)P.recreate=!0,_.change.push(P);else{var I=x.idxByName,L=F.idxByName,B=void 0;for(B in I)L[B]||P.del.push(B);for(B in L){var W=I[B],R=L[B];W?W.src!==R.src&&P.change.push(R):P.add.push(R)}(0<P.del.length||0<P.add.length||0<P.change.length)&&_.change.push(P)}}else _.add.push([v,F])}return _}function Kh(h,p,v,_){var x=h.db.createObjectStore(p,v.keyPath?{keyPath:v.keyPath,autoIncrement:v.auto}:{autoIncrement:v.auto});return _.forEach(function(F){return oc(x,F)}),x}function xv(h,p){s(h).forEach(function(v){p.db.objectStoreNames.contains(v)||(Sn&&console.debug("Dexie: Creating missing table",v),Kh(p,v,h[v].primKey,h[v].indexes))})}function oc(h,p){h.createIndex(p.name,p.keyPath,{unique:p.unique,multiEntry:p.multi})}function sc(h,p,v){var _={};return E(p.objectStoreNames,0).forEach(function(x){for(var F=v.objectStore(x),P=zh(Cv(B=F.keyPath),B||"",!0,!1,!!F.autoIncrement,B&&typeof B!="string",!0),I=[],L=0;L<F.indexNames.length;++L){var W=F.index(F.indexNames[L]),B=W.keyPath,W=zh(W.name,B,!!W.unique,!!W.multiEntry,!1,B&&typeof B!="string",!1);I.push(W)}_[x]=jh(x,P,I)}),_}function ac(h,p,v){for(var _=v.db.objectStoreNames,x=0;x<_.length;++x){var F=_[x],P=v.objectStore(F);h._hasGetAll="getAll"in P;for(var I=0;I<P.indexNames.length;++I){var L=P.indexNames[I],B=P.index(L).keyPath,W=typeof B=="string"?B:"["+E(B).join("+")+"]";!p[F]||(B=p[F].idxByName[W])&&(B.name=L,delete p[F].idxByName[W],p[F].idxByName[L]=B)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(h._hasGetAll=!1)}function Av(h){return h.split(",").map(function(p,v){var F=p.split(":"),_=(x=F[1])===null||x===void 0?void 0:x.trim(),x=(p=F[0].trim()).replace(/([&*]|\+\+)/g,""),F=/^\[/.test(x)?x.match(/^\[(.*)\]$/)[1].split("+"):x;return zh(x,F||null,/\&/.test(p),/\*/.test(p),/\+\+/.test(p),a(F),v===0,_)})}var _S=(na.prototype._createTableSchema=jh,na.prototype._parseIndexSyntax=Av,na.prototype._parseStoresSpec=function(h,p){var v=this;s(h).forEach(function(_){if(h[_]!==null){var x=v._parseIndexSyntax(h[_]),F=x.shift();if(!F)throw new me.Schema("Invalid schema for table "+_+": "+h[_]);if(F.unique=!0,F.multi)throw new me.Schema("Primary key cannot be multiEntry*");x.forEach(function(P){if(P.auto)throw new me.Schema("Only primary key can be marked as autoIncrement (++)");if(!P.keyPath)throw new me.Schema("Index must have a name and cannot be an empty string")}),x=v._createTableSchema(_,F,x),p[_]=x}})},na.prototype.stores=function(v){var p=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,v):v;var v=p._versions,_={},x={};return v.forEach(function(F){l(_,F._cfg.storesSource),x=F._cfg.dbschema={},F._parseStoresSpec(_,x)}),p._dbSchema=x,Uh(p,[p._allTables,p,p.Transaction.prototype]),ic(p,[p._allTables,p,p.Transaction.prototype,this._cfg.tables],s(x),x),p._storeNames=s(x),this},na.prototype.upgrade=function(h){return this._cfg.contentUpgrade=Ur(this._cfg.contentUpgrade||ze,h),this},na);function na(){}function $h(h,p){var v=h._dbNamesDB;return v||(v=h._dbNamesDB=new ao(Po,{addons:[],indexedDB:h,IDBKeyRange:p})).version(1).stores({dbnames:"name"}),v.table("dbnames")}function Gh(h){return h&&typeof h.databases=="function"}function qh(h){return Be(function(){return Fe.letThrough=!0,h()})}function Xh(h){return!("from"in h)}var kn=function(h,p){if(!this){var v=new kn;return h&&"d"in h&&l(v,h),v}l(this,arguments.length?{d:1,from:h,to:1<arguments.length?p:h}:{d:0})};function vl(h,p,v){var _=at(p,v);if(!isNaN(_)){if(0<_)throw RangeError();if(Xh(h))return l(h,{from:p,to:v,d:1});var x=h.l,_=h.r;if(at(v,h.from)<0)return x?vl(x,p,v):h.l={from:p,to:v,d:1,l:null,r:null},kv(h);if(0<at(p,h.to))return _?vl(_,p,v):h.r={from:p,to:v,d:1,l:null,r:null},kv(h);at(p,h.from)<0&&(h.from=p,h.l=null,h.d=_?_.d+1:1),0<at(v,h.to)&&(h.to=v,h.r=null,h.d=h.l?h.l.d+1:1),v=!h.r,x&&!h.l&&yl(h,x),_&&v&&yl(h,_)}}function yl(h,p){Xh(p)||function v(_,L){var F=L.from,P=L.to,I=L.l,L=L.r;vl(_,F,P),I&&v(_,I),L&&v(_,L)}(h,p)}function Fv(h,p){var v=lc(p),_=v.next();if(_.done)return!1;for(var x=_.value,F=lc(h),P=F.next(x.from),I=P.value;!_.done&&!P.done;){if(at(I.from,x.to)<=0&&0<=at(I.to,x.from))return!0;at(x.from,I.from)<0?x=(_=v.next(I.from)).value:I=(P=F.next(x.from)).value}return!1}function lc(h){var p=Xh(h)?null:{s:0,n:h};return{next:function(v){for(var _=0<arguments.length;p;)switch(p.s){case 0:if(p.s=1,_)for(;p.n.l&&at(v,p.n.from)<0;)p={up:p,n:p.n.l,s:1};else for(;p.n.l;)p={up:p,n:p.n.l,s:1};case 1:if(p.s=2,!_||at(v,p.n.to)<=0)return{value:p.n,done:!1};case 2:if(p.n.r){p.s=3,p={up:p,n:p.n.r,s:0};continue}case 3:p=p.up}return{done:!0}}}}function kv(h){var p,v,_=(((p=h.r)===null||p===void 0?void 0:p.d)||0)-(((v=h.l)===null||v===void 0?void 0:v.d)||0),x=1<_?"r":_<-1?"l":"";x&&(p=x=="r"?"l":"r",v=r({},h),_=h[x],h.from=_.from,h.to=_.to,h[x]=_[x],v[x]=_[p],(h[p]=v).d=Tv(v)),h.d=Tv(h)}function Tv(v){var p=v.r,v=v.l;return(p?v?Math.max(p.d,v.d):p.d:v?v.d:0)+1}function uc(h,p){return s(p).forEach(function(v){h[v]?yl(h[v],p[v]):h[v]=function _(x){var F,P,I={};for(F in x)d(x,F)&&(P=x[F],I[F]=!P||typeof P!="object"||ne.has(P.constructor)?P:_(P));return I}(p[v])}),h}function Yh(h,p){return h.all||p.all||Object.keys(h).some(function(v){return p[v]&&Fv(p[v],h[v])})}f(kn.prototype,((Kr={add:function(h){return yl(this,h),this},addKey:function(h){return vl(this,h,h),this},addKeys:function(h){var p=this;return h.forEach(function(v){return vl(p,v,v)}),this},hasKey:function(h){var p=lc(this).next(h).value;return p&&at(p.from,h)<=0&&0<=at(p.to,h)}})[J]=function(){return lc(this)},Kr));var _s={},Qh={},Zh=!1;function cc(h){uc(Qh,h),Zh||(Zh=!0,setTimeout(function(){Zh=!1,Jh(Qh,!(Qh={}))},0))}function Jh(h,p){p===void 0&&(p=!1);var v=new Set;if(h.all)for(var _=0,x=Object.values(_s);_<x.length;_++)Dv(P=x[_],h,v,p);else for(var F in h){var P,I=/^idb\:\/\/(.*)\/(.*)\//.exec(F);I&&(F=I[1],I=I[2],(P=_s["idb://".concat(F,"/").concat(I)])&&Dv(P,h,v,p))}v.forEach(function(L){return L()})}function Dv(h,p,v,_){for(var x=[],F=0,P=Object.entries(h.queries.query);F<P.length;F++){for(var I=P[F],L=I[0],B=[],W=0,R=I[1];W<R.length;W++){var K=R[W];Yh(p,K.obsSet)?K.subscribers.forEach(function(V){return v.add(V)}):_&&B.push(K)}_&&x.push([L,B])}if(_)for(var O=0,z=x;O<z.length;O++){var j=z[O],L=j[0],B=j[1];h.queries.query[L]=B}}function wS(h){var p=h._state,v=h._deps.indexedDB;if(p.isBeingOpened||h.idbdb)return p.dbReadyPromise.then(function(){return p.dbOpenError?ut(p.dbOpenError):h});p.isBeingOpened=!0,p.dbOpenError=null,p.openComplete=!1;var _=p.openCanceller,x=Math.round(10*h.verno),F=!1;function P(){if(p.openCanceller!==_)throw new me.DatabaseClosed("db.open() was cancelled")}function I(){return new ye(function(K,O){if(P(),!v)throw new me.MissingAPI;var z=h.name,j=p.autoSchema||!x?v.open(z):v.open(z,x);if(!j)throw new me.MissingAPI;j.onerror=Ii(O),j.onblocked=Ie(h._fireOnBlocked),j.onupgradeneeded=Ie(function(V){var q;W=j.transaction,p.autoSchema&&!h._options.allowEmptyDB?(j.onerror=fl,W.abort(),j.result.close(),(q=v.deleteDatabase(z)).onsuccess=q.onerror=Ie(function(){O(new me.NoSuchDatabase("Database ".concat(z," doesnt exist")))})):(W.onerror=Ii(O),V=V.oldVersion>Math.pow(2,62)?0:V.oldVersion,R=V<1,h.idbdb=j.result,F&&ES(h,W),bS(h,V/10,W,O))},O),j.onsuccess=Ie(function(){W=null;var V,q,X,ee,se,ge=h.idbdb=j.result,Ee=E(ge.objectStoreNames);if(0<Ee.length)try{var he=ge.transaction((ee=Ee).length===1?ee[0]:ee,"readonly");if(p.autoSchema)q=ge,X=he,(V=h).verno=q.version/10,X=V._dbSchema=sc(0,q,X),V._storeNames=E(q.objectStoreNames,0),ic(V,[V._allTables],s(X),X);else if(ac(h,h._dbSchema,he),((se=Vh(sc(0,(se=h).idbdb,he),se._dbSchema)).add.length||se.change.some(function(ve){return ve.add.length||ve.change.length}))&&!F)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ge.close(),x=ge.version+1,F=!0,K(I());rc(h,he)}catch{}Xt.push(h),ge.onversionchange=Ie(function(ve){p.vcFired=!0,h.on("versionchange").fire(ve)}),ge.onclose=Ie(function(){h.close({disableAutoOpen:!1})}),R&&(se=h._deps,he=z,ge=se.indexedDB,se=se.IDBKeyRange,Gh(ge)||he===Po||$h(ge,se).put({name:he}).catch(ze)),K()},O)}).catch(function(K){switch(K?.name){case"UnknownError":if(0<p.PR1398_maxLoop)return p.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),I();break;case"VersionError":if(0<x)return x=0,I()}return ye.reject(K)})}var L,B=p.dbReadyResolve,W=null,R=!1;return ye.race([_,(typeof navigator>"u"?ye.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(K){function O(){return indexedDB.databases().finally(K)}L=setInterval(O,100),O()}).finally(function(){return clearInterval(L)}):Promise.resolve()).then(I)]).then(function(){return P(),p.onReadyBeingFired=[],ye.resolve(qh(function(){return h.on.ready.fire(h.vip)})).then(function K(){if(0<p.onReadyBeingFired.length){var O=p.onReadyBeingFired.reduce(Ur,ze);return p.onReadyBeingFired=[],ye.resolve(qh(function(){return O(h.vip)})).then(K)}})}).finally(function(){p.openCanceller===_&&(p.onReadyBeingFired=null,p.isBeingOpened=!1)}).catch(function(K){p.dbOpenError=K;try{W&&W.abort()}catch{}return _===p.openCanceller&&h._close(),ut(K)}).finally(function(){p.openComplete=!0,B()}).then(function(){var K;return R&&(K={},h.tables.forEach(function(O){O.schema.indexes.forEach(function(z){z.name&&(K["idb://".concat(h.name,"/").concat(O.name,"/").concat(z.name)]=new kn(-1/0,[[[]]]))}),K["idb://".concat(h.name,"/").concat(O.name,"/")]=K["idb://".concat(h.name,"/").concat(O.name,"/:dels")]=new kn(-1/0,[[[]]])}),Io(pl).fire(K),Jh(K,!0)),h})}function ef(h){function p(F){return h.next(F)}var v=x(p),_=x(function(F){return h.throw(F)});function x(F){return function(L){var I=F(L),L=I.value;return I.done?L:L&&typeof L.then=="function"?L.then(v,_):a(L)?Promise.all(L).then(v,_):v(L)}}return x(p)()}function dc(h,p,v){for(var _=a(h)?h.slice():[h],x=0;x<v;++x)_.push(p);return _}var CS={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(h){return r(r({},h),{table:function(p){var v=h.table(p),_=v.schema,x={},F=[];function P(R,K,O){var z=ml(R),j=x[z]=x[z]||[],V=R==null?0:typeof R=="string"?1:R.length,q=0<K,q=r(r({},O),{name:q?"".concat(z,"(virtual-from:").concat(O.name,")"):O.name,lowLevelIndex:O,isVirtual:q,keyTail:K,keyLength:V,extractKey:Wh(R),unique:!q&&O.unique});return j.push(q),q.isPrimaryKey||F.push(q),1<V&&P(V===2?R[0]:R.slice(0,V-1),K+1,O),j.sort(function(X,ee){return X.keyTail-ee.keyTail}),q}p=P(_.primaryKey.keyPath,0,_.primaryKey),x[":id"]=[p];for(var I=0,L=_.indexes;I<L.length;I++){var B=L[I];P(B.keyPath,0,B)}function W(R){var K,O=R.query.index;return O.isVirtual?r(r({},R),{query:{index:O.lowLevelIndex,range:(K=R.query.range,O=O.keyTail,{type:K.type===1?2:K.type,lower:dc(K.lower,K.lowerOpen?h.MAX_KEY:h.MIN_KEY,O),lowerOpen:!0,upper:dc(K.upper,K.upperOpen?h.MIN_KEY:h.MAX_KEY,O),upperOpen:!0})}}):R}return r(r({},v),{schema:r(r({},_),{primaryKey:p,indexes:F,getIndexByKeyPath:function(R){return(R=x[ml(R)])&&R[0]}}),count:function(R){return v.count(W(R))},query:function(R){return v.query(W(R))},openCursor:function(R){var K=R.query.index,O=K.keyTail,z=K.isVirtual,j=K.keyLength;return z?v.openCursor(W(R)).then(function(q){return q&&V(q)}):v.openCursor(R);function V(q){return Object.create(q,{continue:{value:function(X){X!=null?q.continue(dc(X,R.reverse?h.MAX_KEY:h.MIN_KEY,O)):R.unique?q.continue(q.key.slice(0,j).concat(R.reverse?h.MIN_KEY:h.MAX_KEY,O)):q.continue()}},continuePrimaryKey:{value:function(X,ee){q.continuePrimaryKey(dc(X,h.MAX_KEY,O),ee)}},primaryKey:{get:function(){return q.primaryKey}},key:{get:function(){var X=q.key;return j===1?X[0]:X.slice(0,j)}},value:{get:function(){return q.value}}})}}})}})}};function tf(h,p,v,_){return v=v||{},_=_||"",s(h).forEach(function(x){var F,P,I;d(p,x)?(F=h[x],P=p[x],typeof F=="object"&&typeof P=="object"&&F&&P?(I=we(F))!==we(P)?v[_+x]=p[x]:I==="Object"?tf(F,P,v,_+x+"."):F!==P&&(v[_+x]=p[x]):F!==P&&(v[_+x]=p[x])):v[_+x]=void 0}),s(p).forEach(function(x){d(h,x)||(v[_+x]=p[x])}),v}function nf(h,p){return p.type==="delete"?p.keys:p.keys||p.values.map(h.extractKey)}var SS={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(h){return r(r({},h),{table:function(p){var v=h.table(p),_=v.schema.primaryKey;return r(r({},v),{mutate:function(x){var F=Fe.trans,P=F.table(p).hook,I=P.deleting,L=P.creating,B=P.updating;switch(x.type){case"add":if(L.fire===ze)break;return F._promise("readwrite",function(){return W(x)},!0);case"put":if(L.fire===ze&&B.fire===ze)break;return F._promise("readwrite",function(){return W(x)},!0);case"delete":if(I.fire===ze)break;return F._promise("readwrite",function(){return W(x)},!0);case"deleteRange":if(I.fire===ze)break;return F._promise("readwrite",function(){return function R(K,O,z){return v.query({trans:K,values:!1,query:{index:_,range:O},limit:z}).then(function(j){var V=j.result;return W({type:"delete",keys:V,trans:K}).then(function(q){return 0<q.numFailures?Promise.reject(q.failures[0]):V.length<z?{failures:[],numFailures:0,lastResult:void 0}:R(K,r(r({},O),{lower:V[V.length-1],lowerOpen:!0}),z)})})}(x.trans,x.range,1e4)},!0)}return v.mutate(x);function W(R){var K,O,z,j=Fe.trans,V=R.keys||nf(_,R);if(!V)throw new Error("Keys missing");return(R=R.type==="add"||R.type==="put"?r(r({},R),{keys:V}):r({},R)).type!=="delete"&&(R.values=i([],R.values)),R.keys&&(R.keys=i([],R.keys)),K=v,z=V,((O=R).type==="add"?Promise.resolve([]):K.getMany({trans:O.trans,keys:z,cache:"immutable"})).then(function(q){var X=V.map(function(ee,se){var ge,Ee,he,ve=q[se],_e={onerror:null,onsuccess:null};return R.type==="delete"?I.fire.call(_e,ee,ve,j):R.type==="add"||ve===void 0?(ge=L.fire.call(_e,ee,R.values[se],j),ee==null&&ge!=null&&(R.keys[se]=ee=ge,_.outbound||k(R.values[se],_.keyPath,ee))):(ge=tf(ve,R.values[se]),(Ee=B.fire.call(_e,ge,ee,ve,j))&&(he=R.values[se],Object.keys(Ee).forEach(function(be){d(he,be)?he[be]=Ee[be]:k(he,be,Ee[be])}))),_e});return v.mutate(R).then(function(ee){for(var se=ee.failures,ge=ee.results,Ee=ee.numFailures,ee=ee.lastResult,he=0;he<V.length;++he){var ve=(ge||V)[he],_e=X[he];ve==null?_e.onerror&&_e.onerror(se[he]):_e.onsuccess&&_e.onsuccess(R.type==="put"&&q[he]?R.values[he]:ve)}return{failures:se,results:ge,numFailures:Ee,lastResult:ee}}).catch(function(ee){return X.forEach(function(se){return se.onerror&&se.onerror(ee)}),Promise.reject(ee)})})}}})}})}};function Pv(h,p,v){try{if(!p||p.keys.length<h.length)return null;for(var _=[],x=0,F=0;x<p.keys.length&&F<h.length;++x)at(p.keys[x],h[F])===0&&(_.push(v?ae(p.values[x]):p.values[x]),++F);return _.length===h.length?_:null}catch{return null}}var xS={stack:"dbcore",level:-1,create:function(h){return{table:function(p){var v=h.table(p);return r(r({},v),{getMany:function(_){if(!_.cache)return v.getMany(_);var x=Pv(_.keys,_.trans._cache,_.cache==="clone");return x?ye.resolve(x):v.getMany(_).then(function(F){return _.trans._cache={keys:_.keys,values:_.cache==="clone"?ae(F):F},F})},mutate:function(_){return _.type!=="add"&&(_.trans._cache=null),v.mutate(_)}})}}}};function Mv(h,p){return h.trans.mode==="readonly"&&!!h.subscr&&!h.trans.explicit&&h.trans.db._options.cache!=="disabled"&&!p.schema.primaryKey.outbound}function Iv(h,p){switch(h){case"query":return p.values&&!p.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var AS={stack:"dbcore",level:0,name:"Observability",create:function(h){var p=h.schema.name,v=new kn(h.MIN_KEY,h.MAX_KEY);return r(r({},h),{transaction:function(_,x,F){if(Fe.subscr&&x!=="readonly")throw new me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Fe.querier));return h.transaction(_,x,F)},table:function(_){var x=h.table(_),F=x.schema,P=F.primaryKey,R=F.indexes,I=P.extractKey,L=P.outbound,B=P.autoIncrement&&R.filter(function(O){return O.compound&&O.keyPath.includes(P.keyPath)}),W=r(r({},x),{mutate:function(O){function z(be){return be="idb://".concat(p,"/").concat(_,"/").concat(be),ee[be]||(ee[be]=new kn)}var j,V,q,X=O.trans,ee=O.mutatedParts||(O.mutatedParts={}),se=z(""),ge=z(":dels"),Ee=O.type,_e=O.type==="deleteRange"?[O.range]:O.type==="delete"?[O.keys]:O.values.length<50?[nf(P,O).filter(function(be){return be}),O.values]:[],he=_e[0],ve=_e[1],_e=O.trans._cache;return a(he)?(se.addKeys(he),(_e=Ee==="delete"||he.length===ve.length?Pv(he,_e):null)||ge.addKeys(he),(_e||ve)&&(j=z,V=_e,q=ve,F.indexes.forEach(function(be){var xe=j(be.name||"");function Ye(rt){return rt!=null?be.extractKey(rt):null}function tt(rt){return be.multiEntry&&a(rt)?rt.forEach(function(Tr){return xe.addKey(Tr)}):xe.addKey(rt)}(V||q).forEach(function(rt,Tn){var Xe=V&&Ye(V[Tn]),Tn=q&&Ye(q[Tn]);at(Xe,Tn)!==0&&(Xe!=null&&tt(Xe),Tn!=null&&tt(Tn))})}))):he?(ve={from:(ve=he.lower)!==null&&ve!==void 0?ve:h.MIN_KEY,to:(ve=he.upper)!==null&&ve!==void 0?ve:h.MAX_KEY},ge.add(ve),se.add(ve)):(se.add(v),ge.add(v),F.indexes.forEach(function(be){return z(be.name).add(v)})),x.mutate(O).then(function(be){return!he||O.type!=="add"&&O.type!=="put"||(se.addKeys(be.results),B&&B.forEach(function(xe){for(var Ye=O.values.map(function(Xe){return xe.extractKey(Xe)}),tt=xe.keyPath.findIndex(function(Xe){return Xe===P.keyPath}),rt=0,Tr=be.results.length;rt<Tr;++rt)Ye[rt][tt]=be.results[rt];z(xe.name).addKeys(Ye)})),X.mutatedParts=uc(X.mutatedParts||{},ee),be})}}),R=function(z){var j=z.query,z=j.index,j=j.range;return[z,new kn((z=j.lower)!==null&&z!==void 0?z:h.MIN_KEY,(j=j.upper)!==null&&j!==void 0?j:h.MAX_KEY)]},K={get:function(O){return[P,new kn(O.key)]},getMany:function(O){return[P,new kn().addKeys(O.keys)]},count:R,query:R,openCursor:R};return s(K).forEach(function(O){W[O]=function(z){var j=Fe.subscr,V=!!j,q=Mv(Fe,x)&&Iv(O,z)?z.obsSet={}:j;if(V){var X=function(ve){return ve="idb://".concat(p,"/").concat(_,"/").concat(ve),q[ve]||(q[ve]=new kn)},ee=X(""),se=X(":dels"),j=K[O](z),V=j[0],j=j[1];if((O==="query"&&V.isPrimaryKey&&!z.values?se:X(V.name||"")).add(j),!V.isPrimaryKey){if(O!=="count"){var ge=O==="query"&&L&&z.values&&x.query(r(r({},z),{values:!1}));return x[O].apply(this,arguments).then(function(ve){if(O==="query"){if(L&&z.values)return ge.then(function(Ye){return Ye=Ye.result,ee.addKeys(Ye),ve});var _e=z.values?ve.result.map(I):ve.result;(z.values?ee:se).addKeys(_e)}else if(O==="openCursor"){var be=ve,xe=z.values;return be&&Object.create(be,{key:{get:function(){return se.addKey(be.primaryKey),be.key}},primaryKey:{get:function(){var Ye=be.primaryKey;return se.addKey(Ye),Ye}},value:{get:function(){return xe&&ee.addKey(be.primaryKey),be.value}}})}return ve})}se.add(v)}}return x[O].apply(this,arguments)}}),W}})}};function Rv(h,p,v){if(v.numFailures===0)return p;if(p.type==="deleteRange")return null;var _=p.keys?p.keys.length:"values"in p&&p.values?p.values.length:1;return v.numFailures===_?null:(p=r({},p),a(p.keys)&&(p.keys=p.keys.filter(function(x,F){return!(F in v.failures)})),"values"in p&&a(p.values)&&(p.values=p.values.filter(function(x,F){return!(F in v.failures)})),p)}function rf(h,p){return v=h,((_=p).lower===void 0||(_.lowerOpen?0<at(v,_.lower):0<=at(v,_.lower)))&&(h=h,(p=p).upper===void 0||(p.upperOpen?at(h,p.upper)<0:at(h,p.upper)<=0));var v,_}function Lv(h,p,K,_,x,F){if(!K||K.length===0)return h;var P=p.query.index,I=P.multiEntry,L=p.query.range,B=_.schema.primaryKey.extractKey,W=P.extractKey,R=(P.lowLevelIndex||P).extractKey,K=K.reduce(function(O,z){var j=O,V=[];if(z.type==="add"||z.type==="put")for(var q=new kn,X=z.values.length-1;0<=X;--X){var ee,se=z.values[X],ge=B(se);q.hasKey(ge)||(ee=W(se),(I&&a(ee)?ee.some(function(be){return rf(be,L)}):rf(ee,L))&&(q.addKey(ge),V.push(se)))}switch(z.type){case"add":var Ee=new kn().addKeys(p.values?O.map(function(xe){return B(xe)}):O),j=O.concat(p.values?V.filter(function(xe){return xe=B(xe),!Ee.hasKey(xe)&&(Ee.addKey(xe),!0)}):V.map(function(xe){return B(xe)}).filter(function(xe){return!Ee.hasKey(xe)&&(Ee.addKey(xe),!0)}));break;case"put":var he=new kn().addKeys(z.values.map(function(xe){return B(xe)}));j=O.filter(function(xe){return!he.hasKey(p.values?B(xe):xe)}).concat(p.values?V:V.map(function(xe){return B(xe)}));break;case"delete":var ve=new kn().addKeys(z.keys);j=O.filter(function(xe){return!ve.hasKey(p.values?B(xe):xe)});break;case"deleteRange":var _e=z.range;j=O.filter(function(xe){return!rf(B(xe),_e)})}return j},h);return K===h?h:(K.sort(function(O,z){return at(R(O),R(z))||at(B(O),B(z))}),p.limit&&p.limit<1/0&&(K.length>p.limit?K.length=p.limit:h.length===p.limit&&K.length<p.limit&&(x.dirty=!0)),F?Object.freeze(K):K)}function Nv(h,p){return at(h.lower,p.lower)===0&&at(h.upper,p.upper)===0&&!!h.lowerOpen==!!p.lowerOpen&&!!h.upperOpen==!!p.upperOpen}function FS(h,p){return function(v,_,x,F){if(v===void 0)return _!==void 0?-1:0;if(_===void 0)return 1;if((_=at(v,_))===0){if(x&&F)return 0;if(x)return 1;if(F)return-1}return _}(h.lower,p.lower,h.lowerOpen,p.lowerOpen)<=0&&0<=function(v,_,x,F){if(v===void 0)return _!==void 0?1:0;if(_===void 0)return-1;if((_=at(v,_))===0){if(x&&F)return 0;if(x)return-1;if(F)return 1}return _}(h.upper,p.upper,h.upperOpen,p.upperOpen)}function kS(h,p,v,_){h.subscribers.add(v),_.addEventListener("abort",function(){var x,F;h.subscribers.delete(v),h.subscribers.size===0&&(x=h,F=p,setTimeout(function(){x.subscribers.size===0&&G(F,x)},3e3))})}var TS={stack:"dbcore",level:0,name:"Cache",create:function(h){var p=h.schema.name;return r(r({},h),{transaction:function(v,_,x){var F,P,I=h.transaction(v,_,x);return _==="readwrite"&&(P=(F=new AbortController).signal,x=function(L){return function(){if(F.abort(),_==="readwrite"){for(var B=new Set,W=0,R=v;W<R.length;W++){var K=R[W],O=_s["idb://".concat(p,"/").concat(K)];if(O){var z=h.table(K),j=O.optimisticOps.filter(function(xe){return xe.trans===I});if(I._explicit&&L&&I.mutatedParts)for(var V=0,q=Object.values(O.queries.query);V<q.length;V++)for(var X=0,ee=(Ee=q[V]).slice();X<ee.length;X++)Yh((he=ee[X]).obsSet,I.mutatedParts)&&(G(Ee,he),he.subscribers.forEach(function(xe){return B.add(xe)}));else if(0<j.length){O.optimisticOps=O.optimisticOps.filter(function(xe){return xe.trans!==I});for(var se=0,ge=Object.values(O.queries.query);se<ge.length;se++)for(var Ee,he,ve,_e=0,be=(Ee=ge[se]).slice();_e<be.length;_e++)(he=be[_e]).res!=null&&I.mutatedParts&&(L&&!he.dirty?(ve=Object.isFrozen(he.res),ve=Lv(he.res,he.req,j,z,he,ve),he.dirty?(G(Ee,he),he.subscribers.forEach(function(xe){return B.add(xe)})):ve!==he.res&&(he.res=ve,he.promise=ye.resolve({result:ve}))):(he.dirty&&G(Ee,he),he.subscribers.forEach(function(xe){return B.add(xe)})))}}}B.forEach(function(xe){return xe()})}}},I.addEventListener("abort",x(!1),{signal:P}),I.addEventListener("error",x(!1),{signal:P}),I.addEventListener("complete",x(!0),{signal:P})),I},table:function(v){var _=h.table(v),x=_.schema.primaryKey;return r(r({},_),{mutate:function(F){var P=Fe.trans;if(x.outbound||P.db._options.cache==="disabled"||P.explicit||P.idbtrans.mode!=="readwrite")return _.mutate(F);var I=_s["idb://".concat(p,"/").concat(v)];return I?(P=_.mutate(F),F.type!=="add"&&F.type!=="put"||!(50<=F.values.length||nf(x,F).some(function(L){return L==null}))?(I.optimisticOps.push(F),F.mutatedParts&&cc(F.mutatedParts),P.then(function(L){0<L.numFailures&&(G(I.optimisticOps,F),(L=Rv(0,F,L))&&I.optimisticOps.push(L),F.mutatedParts&&cc(F.mutatedParts))}),P.catch(function(){G(I.optimisticOps,F),F.mutatedParts&&cc(F.mutatedParts)})):P.then(function(L){var B=Rv(0,r(r({},F),{values:F.values.map(function(W,R){var K;return L.failures[R]?W:(W=(K=x.keyPath)!==null&&K!==void 0&&K.includes(".")?ae(W):r({},W),k(W,x.keyPath,L.results[R]),W)})}),L);I.optimisticOps.push(B),queueMicrotask(function(){return F.mutatedParts&&cc(F.mutatedParts)})}),P):_.mutate(F)},query:function(F){if(!Mv(Fe,_)||!Iv("query",F))return _.query(F);var P=((B=Fe.trans)===null||B===void 0?void 0:B.db._options.cache)==="immutable",R=Fe,I=R.requery,L=R.signal,B=function(z,j,V,q){var X=_s["idb://".concat(z,"/").concat(j)];if(!X)return[];if(!(j=X.queries[V]))return[null,!1,X,null];var ee=j[(q.query?q.query.index.name:null)||""];if(!ee)return[null,!1,X,null];switch(V){case"query":var se=ee.find(function(ge){return ge.req.limit===q.limit&&ge.req.values===q.values&&Nv(ge.req.query.range,q.query.range)});return se?[se,!0,X,ee]:[ee.find(function(ge){return("limit"in ge.req?ge.req.limit:1/0)>=q.limit&&(!q.values||ge.req.values)&&FS(ge.req.query.range,q.query.range)}),!1,X,ee];case"count":return se=ee.find(function(ge){return Nv(ge.req.query.range,q.query.range)}),[se,!!se,X,ee]}}(p,v,"query",F),W=B[0],R=B[1],K=B[2],O=B[3];return W&&R?W.obsSet=F.obsSet:(R=_.query(F).then(function(z){var j=z.result;if(W&&(W.res=j),P){for(var V=0,q=j.length;V<q;++V)Object.freeze(j[V]);Object.freeze(j)}else z.result=ae(j);return z}).catch(function(z){return O&&W&&G(O,W),Promise.reject(z)}),W={obsSet:F.obsSet,promise:R,subscribers:new Set,type:"query",req:F,dirty:!1},O?O.push(W):(O=[W],(K=K||(_s["idb://".concat(p,"/").concat(v)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[F.query.index.name||""]=O)),kS(W,O,I,L),W.promise.then(function(z){return{result:Lv(z.result,F,K?.optimisticOps,_,W,P)}})}})}})}};function hc(h,p){return new Proxy(h,{get:function(v,_,x){return _==="db"?p:Reflect.get(v,_,x)}})}var ao=(Yt.prototype.version=function(h){if(isNaN(h)||h<.1)throw new me.Type("Given version is not a positive number");if(h=Math.round(10*h)/10,this.idbdb||this._state.isBeingOpened)throw new me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,h);var p=this._versions,v=p.filter(function(_){return _._cfg.version===h})[0];return v||(v=new this.Version(h),p.push(v),p.sort(yS),v.stores({}),this._state.autoSchema=!1,v)},Yt.prototype._whenReady=function(h){var p=this;return this.idbdb&&(this._state.openComplete||Fe.letThrough||this._vip)?h():new ye(function(v,_){if(p._state.openComplete)return _(new me.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return void _(new me.DatabaseClosed);p.open().catch(ze)}p._state.dbReadyPromise.then(v,_)}).then(h)},Yt.prototype.use=function(h){var p=h.stack,v=h.create,_=h.level,x=h.name;return x&&this.unuse({stack:p,name:x}),h=this._middlewares[p]||(this._middlewares[p]=[]),h.push({stack:p,create:v,level:_??10,name:x}),h.sort(function(F,P){return F.level-P.level}),this},Yt.prototype.unuse=function(h){var p=h.stack,v=h.name,_=h.create;return p&&this._middlewares[p]&&(this._middlewares[p]=this._middlewares[p].filter(function(x){return _?x.create!==_:!!v&&x.name!==v})),this},Yt.prototype.open=function(){var h=this;return ct(un,function(){return wS(h)})},Yt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var h=this._state,p=Xt.indexOf(this);if(0<=p&&Xt.splice(p,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}h.isBeingOpened||(h.dbReadyPromise=new ye(function(v){h.dbReadyResolve=v}),h.openCanceller=new ye(function(v,_){h.cancelOpen=_}))},Yt.prototype.close=function(v){var p=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,v=this._state;p?(v.isBeingOpened&&v.cancelOpen(new me.DatabaseClosed),this._close(),v.autoOpen=!1,v.dbOpenError=new me.DatabaseClosed):(this._close(),v.autoOpen=this._options.autoOpen||v.isBeingOpened,v.openComplete=!1,v.dbOpenError=null)},Yt.prototype.delete=function(h){var p=this;h===void 0&&(h={disableAutoOpen:!0});var v=0<arguments.length&&typeof arguments[0]!="object",_=this._state;return new ye(function(x,F){function P(){p.close(h);var I=p._deps.indexedDB.deleteDatabase(p.name);I.onsuccess=Ie(function(){var L,B,W;L=p._deps,B=p.name,W=L.indexedDB,L=L.IDBKeyRange,Gh(W)||B===Po||$h(W,L).delete(B).catch(ze),x()}),I.onerror=Ii(F),I.onblocked=p._fireOnBlocked}if(v)throw new me.InvalidArgument("Invalid closeOptions argument to db.delete()");_.isBeingOpened?_.dbReadyPromise.then(P):P()})},Yt.prototype.backendDB=function(){return this.idbdb},Yt.prototype.isOpen=function(){return this.idbdb!==null},Yt.prototype.hasBeenClosed=function(){var h=this._state.dbOpenError;return h&&h.name==="DatabaseClosed"},Yt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Yt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Yt.prototype,"tables",{get:function(){var h=this;return s(this._allTables).map(function(p){return h._allTables[p]})},enumerable:!1,configurable:!0}),Yt.prototype.transaction=function(){var h=function(p,v,_){var x=arguments.length;if(x<2)throw new me.InvalidArgument("Too few arguments");for(var F=new Array(x-1);--x;)F[x-1]=arguments[x];return _=F.pop(),[p,U(F),_]}.apply(this,arguments);return this._transaction.apply(this,h)},Yt.prototype._transaction=function(h,p,v){var _=this,x=Fe.trans;x&&x.db===this&&h.indexOf("!")===-1||(x=null);var F,P,I=h.indexOf("?")!==-1;h=h.replace("!","").replace("?","");try{if(P=p.map(function(B){if(B=B instanceof _.Table?B.name:B,typeof B!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return B}),h=="r"||h===Es)F=Es;else{if(h!="rw"&&h!=Js)throw new me.InvalidArgument("Invalid transaction mode: "+h);F=Js}if(x){if(x.mode===Es&&F===Js){if(!I)throw new me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");x=null}x&&P.forEach(function(B){if(x&&x.storeNames.indexOf(B)===-1){if(!I)throw new me.SubTransaction("Table "+B+" not included in parent transaction.");x=null}}),I&&x&&!x.active&&(x=null)}}catch(B){return x?x._promise(null,function(W,R){R(B)}):ut(B)}var L=function B(W,R,K,O,z){return ye.resolve().then(function(){var j=Fe.transless||Fe,V=W._createTransaction(R,K,W._dbSchema,O);if(V.explicit=!0,j={trans:V,transless:j},O)V.idbtrans=O.idbtrans;else try{V.create(),V.idbtrans._explicit=!0,W._state.PR1398_maxLoop=3}catch(ee){return ee.name===fe.InvalidState&&W.isOpen()&&0<--W._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),W.close({disableAutoOpen:!1}),W.open().then(function(){return B(W,R,K,null,z)})):ut(ee)}var q,X=Ce(z);return X&&$e(),j=ye.follow(function(){var ee;(q=z.call(V,V))&&(X?(ee=qe.bind(null,null),q.then(ee,ee)):typeof q.next=="function"&&typeof q.throw=="function"&&(q=ef(q)))},j),(q&&typeof q.then=="function"?ye.resolve(q).then(function(ee){return V.active?ee:ut(new me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):j.then(function(){return q})).then(function(ee){return O&&V._resolve(),V._completion.then(function(){return ee})}).catch(function(ee){return V._reject(ee),ut(ee)})})}.bind(null,this,F,P,x,v);return x?x._promise(F,L,"lock"):Fe.trans?ct(Fe.transless,function(){return _._whenReady(L)}):this._whenReady(L)},Yt.prototype.table=function(h){if(!d(this._allTables,h))throw new me.InvalidTable("Table ".concat(h," does not exist"));return this._allTables[h]},Yt);function Yt(h,p){var v=this;this._middlewares={},this.verno=0;var _=Yt.dependencies;this._options=p=r({addons:Yt.addons,autoOpen:!0,indexedDB:_.indexedDB,IDBKeyRange:_.IDBKeyRange,cache:"cloned"},p),this._deps={indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},_=p.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var x,F,P,I,L,B={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ze,dbReadyPromise:null,cancelOpen:ze,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:p.autoOpen};B.dbReadyPromise=new ye(function(R){B.dbReadyResolve=R}),B.openCanceller=new ye(function(R,K){B.cancelOpen=K}),this._state=B,this.name=h,this.on=dl(this,"populate","blocked","versionchange","close",{ready:[Ur,ze]}),this.once=function(R,K){var O=function(){for(var z=[],j=0;j<arguments.length;j++)z[j]=arguments[j];v.on(R).unsubscribe(O),K.apply(v,z)};return v.on(R,O)},this.on.ready.subscribe=w(this.on.ready.subscribe,function(R){return function(K,O){Yt.vip(function(){var z,j=v._state;j.openComplete?(j.dbOpenError||ye.resolve().then(K),O&&R(K)):j.onReadyBeingFired?(j.onReadyBeingFired.push(K),O&&R(K)):(R(K),z=v,O||R(function V(){z.on.ready.unsubscribe(K),z.on.ready.unsubscribe(V)}))})}}),this.Collection=(x=this,hl(dS.prototype,function(q,V){this.db=x;var O=dv,z=null;if(V)try{O=V()}catch(X){z=X}var j=q._ctx,V=j.table,q=V.hook.reading.fire;this._ctx={table:V,index:j.index,isPrimKey:!j.index||V.schema.primKey.keyPath&&j.index===V.schema.primKey.name,range:O,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:z,or:j.or,valueMapper:q!==bt?q:null}})),this.Table=(F=this,hl(vv.prototype,function(R,K,O){this.db=F,this._tx=O,this.name=R,this.schema=K,this.hook=F._allTables[R]?F._allTables[R].hook:dl(null,{creating:[Ct,ze],reading:[je,bt],updating:[ko,ze],deleting:[Vn,ze]})})),this.Transaction=(P=this,hl(pS.prototype,function(R,K,O,z,j){var V=this;R!=="readonly"&&K.forEach(function(q){q=(q=O[q])===null||q===void 0?void 0:q.yProps,q&&(K=K.concat(q.map(function(X){return X.updatesTable})))}),this.db=P,this.mode=R,this.storeNames=K,this.schema=O,this.chromeTransactionDurability=z,this.idbtrans=null,this.on=dl(this,"complete","error","abort"),this.parent=j||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ye(function(q,X){V._resolve=q,V._reject=X}),this._completion.then(function(){V.active=!1,V.on.complete.fire()},function(q){var X=V.active;return V.active=!1,V.on.error.fire(q),V.parent?V.parent._reject(q):X&&V.idbtrans&&V.idbtrans.abort(),ut(q)})})),this.Version=(I=this,hl(_S.prototype,function(R){this.db=I,this._cfg={version:R,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(L=this,hl(wv.prototype,function(R,K,O){if(this.db=L,this._ctx={table:R,index:K===":id"?null:K,or:O},this._cmp=this._ascending=at,this._descending=function(z,j){return at(j,z)},this._max=function(z,j){return 0<at(z,j)?z:j},this._min=function(z,j){return at(z,j)<0?z:j},this._IDBKeyRange=L._deps.IDBKeyRange,!this._IDBKeyRange)throw new me.MissingAPI})),this.on("versionchange",function(R){0<R.newVersion?console.warn("Another connection wants to upgrade database '".concat(v.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(v.name,"'. Closing db now to resume the delete request.")),v.close({disableAutoOpen:!1})}),this.on("blocked",function(R){!R.newVersion||R.newVersion<R.oldVersion?console.warn("Dexie.delete('".concat(v.name,"') was blocked")):console.warn("Upgrade '".concat(v.name,"' blocked by other connection holding version ").concat(R.oldVersion/10))}),this._maxKey=gl(p.IDBKeyRange),this._createTransaction=function(R,K,O,z){return new v.Transaction(R,K,O,v._options.chromeTransactionDurability,z)},this._fireOnBlocked=function(R){v.on("blocked").fire(R),Xt.filter(function(K){return K.name===v.name&&K!==v&&!K._state.vcFired}).map(function(K){return K.on("versionchange").fire(R)})},this.use(xS),this.use(TS),this.use(AS),this.use(CS),this.use(SS);var W=new Proxy(this,{get:function(R,K,O){if(K==="_vip")return!0;if(K==="table")return function(j){return hc(v.table(j),W)};var z=Reflect.get(R,K,O);return z instanceof vv?hc(z,W):K==="tables"?z.map(function(j){return hc(j,W)}):K==="_createTransaction"?function(){return hc(z.apply(this,arguments),W)}:z}});this.vip=W,_.forEach(function(R){return R(v)})}var fc,Kr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",DS=(of.prototype.subscribe=function(h,p,v){return this._subscribe(h&&typeof h!="function"?h:{next:h,error:p,complete:v})},of.prototype[Kr]=function(){return this},of);function of(h){this._subscribe=h}try{fc={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{fc={indexedDB:null,IDBKeyRange:null}}function Bv(h){var p,v=!1,_=new DS(function(x){var F=Ce(h),P,I=!1,L={},B={},W={get closed(){return I},unsubscribe:function(){I||(I=!0,P&&P.abort(),R&&Io.storagemutated.unsubscribe(O))}};x.start&&x.start(W);var R=!1,K=function(){return qt(z)},O=function(j){uc(L,j),Yh(B,L)&&K()},z=function(){var j,V,q;!I&&fc.indexedDB&&(L={},j={},P&&P.abort(),P=new AbortController,q=function(X){var ee=le();try{F&&$e();var se=Be(h,X);return se=F?se.finally(qe):se}finally{ee&&de()}}(V={subscr:j,signal:P.signal,requery:K,querier:h,trans:null}),Promise.resolve(q).then(function(X){v=!0,p=X,I||V.signal.aborted||(L={},function(ee){for(var se in ee)if(d(ee,se))return;return 1}(B=j)||R||(Io(pl,O),R=!0),qt(function(){return!I&&x.next&&x.next(X)}))},function(X){v=!1,["DatabaseClosedError","AbortError"].includes(X?.name)||I||qt(function(){I||x.error&&x.error(X)})}))};return setTimeout(K,0),W});return _.hasValue=function(){return v},_.getValue=function(){return p},_}var ws=ao;function sf(h){var p=Ro;try{Ro=!0,Io.storagemutated.fire(h),Jh(h,!0)}finally{Ro=p}}f(ws,r(r({},wt),{delete:function(h){return new ws(h,{addons:[]}).delete()},exists:function(h){return new ws(h,{addons:[]}).open().then(function(p){return p.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(h){try{return p=ws.dependencies,v=p.indexedDB,p=p.IDBKeyRange,(Gh(v)?Promise.resolve(v.databases()).then(function(_){return _.map(function(x){return x.name}).filter(function(x){return x!==Po})}):$h(v,p).toCollection().primaryKeys()).then(h)}catch{return ut(new me.MissingAPI)}var p,v},defineClass:function(){return function(h){l(this,h)}},ignoreTransaction:function(h){return Fe.trans?ct(Fe.transless,h):h()},vip:qh,async:function(h){return function(){try{var p=ef(h.apply(this,arguments));return p&&typeof p.then=="function"?p:ye.resolve(p)}catch(v){return ut(v)}}},spawn:function(h,p,v){try{var _=ef(h.apply(v,p||[]));return _&&typeof _.then=="function"?_:ye.resolve(_)}catch(x){return ut(x)}},currentTransaction:{get:function(){return Fe.trans||null}},waitFor:function(h,p){return p=ye.resolve(typeof h=="function"?ws.ignoreTransaction(h):h).timeout(p||6e4),Fe.trans?Fe.trans.waitFor(p):p},Promise:ye,debug:{get:function(){return Sn},set:function(h){ur(h)}},derive:y,extend:l,props:f,override:w,Events:dl,on:Io,liveQuery:Bv,extendObservabilitySet:uc,getByKeyPath:D,setByKeyPath:k,delByKeyPath:function(h,p){typeof p=="string"?k(h,p,void 0):"length"in p&&[].map.call(p,function(v){k(h,v,void 0)})},shallowClone:M,deepClone:ae,getObjectDiff:tf,cmp:at,asap:T,minKey:-1/0,addons:[],connections:Xt,errnames:fe,dependencies:fc,cache:_s,semVer:"4.2.1",version:"4.2.1".split(".").map(function(h){return parseInt(h)}).reduce(function(h,p,v){return h+p/Math.pow(10,2*v)})})),ws.maxKey=gl(ws.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Io(pl,function(h){Ro||(h=new CustomEvent(Hh,{detail:h}),Ro=!0,dispatchEvent(h),Ro=!1)}),addEventListener(Hh,function(h){h=h.detail,Ro||sf(h)}));var ra,Ro=!1,Ov=function(){};return typeof BroadcastChannel<"u"&&((Ov=function(){(ra=new BroadcastChannel(Hh)).onmessage=function(h){return h.data&&sf(h.data)}})(),typeof ra.unref=="function"&&ra.unref(),Io(pl,function(h){Ro||ra.postMessage(h)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(h){if(!ao.disableBfCache&&h.persisted){Sn&&console.debug("Dexie: handling persisted pagehide"),ra?.close();for(var p=0,v=Xt;p<v.length;p++)v[p].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(h){!ao.disableBfCache&&h.persisted&&(Sn&&console.debug("Dexie: handling persisted pageshow"),Ov(),sf({all:new kn(-1/0,[[]])}))})),ye.rejectionMapper=function(h,p){return!h||h instanceof Oe||h instanceof TypeError||h instanceof SyntaxError||!h.name||!Qe[h.name]?h:(p=new Qe[h.name](p||h.message,h),"stack"in h&&m(p,"stack",{get:function(){return this.inner.stack}}),p)},ur(Sn),r(ao,Object.freeze({__proto__:null,Dexie:ao,liveQuery:Bv,Entity:hv,cmp:at,PropModification:cl,replacePrefix:function(h,p){return new cl({replacePrefix:[h,p]})},add:function(h){return new cl({add:h})},remove:function(h){return new cl({remove:h})},default:ao,RangeSet:kn,mergeRanges:yl,rangesOverlap:Fv}),{default:ao}),ao})})(cS);var KB=cS.exports;const Pg=Zd(KB),Eb=Symbol.for("Dexie"),Qd=globalThis[Eb]||(globalThis[Eb]=Pg);if(Pg.semVer!==Qd.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Pg.semVer} and ${Qd.semVer}`);const{liveQuery:JB,mergeRanges:e2,rangesOverlap:t2,RangeSet:n2,cmp:r2,Entity:i2,PropModification:o2,replacePrefix:s2,add:a2,remove:l2,DexieYProvider:u2}=Qd;class $B extends Qd{pdfs;preferences;constructor(){super("contextualRedactorDB"),this.version(1).stores({pdfs:"id",preferences:"id"})}}const pi=new $B;function GB(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)})}function qB(n){const[e,t]=n.split(";base64,"),r=e.split(":")[1],i=atob(t),o=new Uint8Array(i.length);for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return new Blob([o],{type:r})}const pp=()=>String(Math.random()).slice(2),XB=()=>document.location.hash.slice(11),YB=()=>{document.location.hash=""},QB=()=>{const[n,e]=A.useState([]),[t,r]=A.useState(null),[i,o]=A.useState([]),[s,a]=A.useState([]),l=()=>{o(Y=>[...Y,{doc:structuredClone(u),all:structuredClone(d)}]),a([])},[u,c]=A.useState({}),[d,f]=A.useState({}),g=t&&u[t]?u[t]:[],m=t&&n.length>0?n.find(Y=>Y.id===t)??null:null,[y,S]=A.useState(""),[b,E]=A.useState([]),[w,C]=A.useState(-1),T=Y=>(Y??"").trim().replace(/\s+/g," ").toLowerCase();A.useEffect(()=>{if(!t||!y.trim()){E([]),C(-1);return}const Y=T(y),pe=(d[t]??[]).filter(le=>{const de=T(le.content?.text),Se=T(le.comment);return de.includes(Y)||Se.includes(Y)});E(pe),C(pe.length>0?0:-1)},[y,t,d]);const D=A.useRef(null),k=Y=>{if(!t||Y<0||Y>=b.length)return;const Z=b[Y];Z&&D.current&&D.current.scrollToHighlight(Z)},M=()=>{b.length!==0&&C(Y=>{const Z=(Y+1)%b.length;return setTimeout(()=>k(Z),0),Z})},N=()=>{b.length!==0&&C(Y=>{const Z=(Y-1+b.length)%b.length;return setTimeout(()=>k(Z),0),Z})},U=()=>{S(""),E([]),C(-1)};A.useEffect(()=>{const Y=Z=>{Z.key==="F3"&&(Z.preventDefault(),Z.shiftKey?N():M())};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[b.length]);const[ne,oe]=A.useState([]),[ae,te]=A.useState(-1),[we,J]=A.useState(!1),Q=Y=>Object.fromEntries(Object.entries(Y).map(([Z,pe])=>[Z,pe.map(le=>({...le}))])),G=()=>({doc:Q(u),all:Q(d)}),re=(Y,Z)=>Z?Y[Z]?.length??0:0,ie=(Y,Z,pe,le)=>{const de={id:String(Math.random()).slice(2),ts:Date.now(),action:Y,prev:Z,next:pe,currentPdfId:t,counts:{prevActive:re(Z.doc,t),nextActive:re(pe.doc,t),prevAll:re(Z.all,t),nextAll:re(pe.all,t)},note:le};oe(Se=>[...Se,de]),te(Se=>Se+1)},Ce=Y=>{const Z=ne[Y];Z&&(c(Z.next.doc),f(Z.next.all),te(Y),t&&Ct(t))};A.useEffect(()=>{const Y=Z=>{Z.ctrlKey&&Z.shiftKey&&Z.key.toLowerCase()==="h"&&(Z.preventDefault(),J(pe=>!pe))};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[]);const[Te,Oe]=A.useState(null),[De,pt]=A.useState(!1),[He,fe]=A.useState(null),[nt,me]=A.useState(!1),[Qe,wt]=A.useState(!1),ze=A.useRef(null),bt=()=>{if(i.length===0)return;const Y=i[i.length-1];o(i.slice(0,-1)),a(Z=>[...Z,{doc:structuredClone(u),all:structuredClone(d)}]),c(Y.doc),f(Y.all),t&&Ct(t)},je=()=>{if(s.length===0)return;const Y=s[s.length-1];a(s.slice(0,-1)),o(Z=>[...Z,{doc:structuredClone(u),all:structuredClone(d)}]),c(Y.doc),f(Y.all),t&&Ct(t)};A.useEffect(()=>{const Y=pe=>{if(!(pe instanceof HTMLElement))return!1;const le=pe.tagName.toLowerCase(),de=pe.getAttribute("contenteditable");return le==="input"||le==="textarea"||de===""||de==="true"},Z=pe=>{if(Y(pe.target))return;const le=pe.key.toLowerCase();if(navigator.platform.toUpperCase().includes("MAC")?pe.metaKey:pe.ctrlKey){if(le==="z"&&!pe.shiftKey){pe.preventDefault(),bt();return}if(le==="z"&&pe.shiftKey){pe.preventDefault(),je();return}if(le==="y"){pe.preventDefault(),je();return}}};return window.addEventListener("keydown",Z,{passive:!1}),()=>window.removeEventListener("keydown",Z)},[bt,je]),A.useEffect(()=>{(async()=>{const Y=await pi.preferences.get("preferences");Y&&(r(Y.lastOpenedPdfId),Oe(Y.zoom),pt(Y.highlightPenEnabled));const Z=await pi.pdfs.toArray();e(Se=>(Se.forEach(et=>URL.revokeObjectURL(et.url)),[]));const pe=Z.map(Se=>{const et=Se.workingBase64??Se.originalBase64,Ie=et?qB(et):new Blob([],{type:"application/pdf"});return{id:Se.id,name:Se.name,url:URL.createObjectURL(Ie)}});e(pe);const le={},de={};for(const Se of Z){const et=Se.allHighlights??[],Ie=Se.activeHighlights??[];le[Se.id]=et,de[Se.id]=et.filter(Me=>Ie.includes(Me.id))}f(le),c(de),wt(!0)})()},[]),A.useEffect(()=>{Qe&&pi.preferences.put({id:"preferences",lastOpenedPdfId:t,sidebar:{documents:!0,highlights:!0},zoom:Te,highlightPenEnabled:De,uiMode:"dark",userIdentity:null})},[t,Te,De,Qe]);const mt=async Y=>{const Z=pp(),pe=await GB(Y);await pi.pdfs.put({id:Z,name:Y.name,originalBase64:pe,workingBase64:pe,finalBase64:null,allHighlights:[],activeHighlights:[]}),e(le=>[...le,{id:Z,name:Y.name,url:URL.createObjectURL(Y)}]),c(le=>({...le,[Z]:[]})),f(le=>({...le,[Z]:[]})),r(Z),Qe&&await pi.preferences.put({id:"preferences",lastOpenedPdfId:Z,sidebar:{documents:!0,highlights:!0},zoom:Te,highlightPenEnabled:De,uiMode:"dark",userIdentity:null})},Ct=Y=>{!Qe||!Y||(ze.current&&(window.clearTimeout(ze.current),ze.current=null),ze.current=window.setTimeout(async()=>{const Z=d[Y]??[],pe=(u[Y]??[]).map(le=>le.id);await pi.pdfs.update(Y,{allHighlights:Z,activeHighlights:pe})},250))};A.useEffect(()=>{!Qe||!t||Ct(t)},[d,u,t,Qe]),A.useEffect(()=>{const Y=async()=>{!Qe||!t||await pi.pdfs.update(t,{allHighlights:d[t]??[],activeHighlights:(u[t]??[]).map(le=>le.id)})},Z=()=>{Y()},pe=()=>{document.visibilityState==="hidden"&&Y()};return window.addEventListener("beforeunload",Z),document.addEventListener("visibilitychange",pe),()=>{window.removeEventListener("beforeunload",Z),document.removeEventListener("visibilitychange",pe)}},[Qe,t,d,u]),A.useEffect(()=>{const Y=()=>He&&fe(null);return document.addEventListener("click",Y),()=>document.removeEventListener("click",Y)},[He]);const Vn=(Y,Z)=>{Y.preventDefault(),fe({xPos:Y.clientX,yPos:Y.clientY,deleteHighlight:()=>Fr(Z),editComment:()=>li(Z)})},ko=Y=>{t&&c(Z=>{const pe=Z[t]??[],le=typeof Y=="function"?Y(pe):Y;return{...Z,[t]:le}})},no=(Y,Z)=>{if(!t)return;l();const pe=G(),le={...Y,comment:Z,id:pp()},de={...d,[t]:[...d[t]??[],le]},Se={...u,[t]:[le,...u[t]??[]]};f(de),c(Se),ie("Add highlight",pe,{doc:Se,all:de}),Ct(t)},Ur=(Y,Z)=>{t&&(ko(pe=>pe.map(le=>le.id===Y?{...le,...Z}:le)),f(pe=>({...pe,[t]:pe[t].map(le=>le.id===Y?{...le,...Z}:le)})),Ct(t))},Sn=()=>{if(!t)return;l();const Y=G(),Z={...u,[t]:[]};c(Z),ie("Reset highlights",Y,{doc:Z,all:d}),Ct(t)},ur=(Y,Z)=>{if(!t)return;l();const pe=G();let le=u[t]??[];Z?le.some(Se=>Se.id===Y.id)||(le=[...le,Y]):le=le.filter(Se=>Se.id!==Y.id);const de={...u,[t]:le};c(de),ie(`Toggle highlight (${Z?"check":"uncheck"})`,pe,{doc:de,all:d},`id=${Y.id}`),Ct(t)},Fr=Y=>{if(!t)return;l();const Z=Y.id,pe=G(),le={...u,[t]:(u[t]??[]).filter(Se=>Se.id!==Z)},de={...d,[t]:(d[t]??[]).filter(Se=>Se.id!==Z)};c(le),f(de),ie("Remove highlight",pe,{doc:le,all:de},`id=${Z}`),Ct(t)},To=Y=>{if(!t)return;l();const Z=G(),pe=new Set(Y.map(Se=>Se.id)),le={...u,[t]:(u[t]??[]).filter(Se=>!pe.has(Se.id))},de={...d,[t]:(d[t]??[]).filter(Se=>!pe.has(Se.id))};c(le),f(de),ie("Remove all (group)",Z,{doc:le,all:de},`count=${pe.size}`),Ct(t)},li=Y=>{if(!D.current)return;const Z={position:Y.position,content:$.jsx(Mb,{placeHolder:Y.comment,onSubmit:pe=>{Ur(Y.id,{comment:pe}),D.current.setTip(null),D.current.toggleEditInProgress(!1)}})};D.current.setTip(Z),D.current.toggleEditInProgress(!0)},Kn=()=>{const Y=g.find(Z=>Z.id===XB());Y&&D.current&&D.current.scrollToHighlight(Y)};A.useEffect(()=>(window.addEventListener("hashchange",Kn),()=>window.removeEventListener("hashchange",Kn)),[g]),window.dumpDB=async()=>{const Y=await pi.pdfs.toArray(),Z=await pi.preferences.toArray();console.log({pdfs:Y,prefs:Z})},window.flushDBNow=async()=>{if(!t){console.warn("No currentPdfId");return}await pi.pdfs.update(t,{allHighlights:d[t]??[],activeHighlights:(u[t]??[]).map(Y=>Y.id)}),console.log("[flushDBNow] done")};const $n=i.length>0,Di=s.length>0,ui=b.length,cr=w>=0?w+1:0,Pe=A.useRef(null),mn=A.useRef(new Map);A.useEffect(()=>{mn.current.clear()},[t]);const Pi=(Y,Z,pe=0)=>{const le=Z.transform[3],de=Z.transform[4],Se=Z.transform[5],et=de,Ie=Se,Me=Ie-le,Pt=Ie,[en,dr,Vr,ue]=Y.convertToViewportRectangle([et,Me,et+Z.width,Pt]);let Be=Math.min(en,Vr),$e=Math.min(dr,ue),qe=Math.abs(Vr-en),ft=Math.abs(ue-dr);return pe!==0&&($e-=pe),{left:Be,top:$e,width:qe,height:ft}},ro=async Y=>{const Z=Pe.current;if(!Z)return null;const pe=mn.current.get(Y);if(pe)return pe;const de=await(await Z.getPage(Y)).getTextContent(),Se=de.items.map(Ie=>({str:Ie.str,transform:Ie.transform,width:Ie.width,height:Ie.height,fontName:Ie.fontName})),et={pageNumber:Y,items:Se,styles:de.styles};return mn.current.set(Y,et),et},un=Ts.useCallback((Y,Z)=>{if(!t)return;l();const pe=G(),le=new Set(Y.map(Ie=>Ie.id)),de=u[t]??[];let Se;if(Z){const Ie=new Set(de.map(Pt=>Pt.id)),Me=Y.filter(Pt=>!Ie.has(Pt.id));Se=[...de,...Me]}else Se=de.filter(Ie=>!le.has(Ie.id));const et={...u,[t]:Se};c(et),ie(`Group toggle (${Z?"check all":"uncheck all"})`,pe,{doc:et,all:d},`count=${Y.length}`),Ct(t)},[t,u,d]),Fe=Ts.useCallback(()=>{if(!t)return;l();const Y=G(),Z={...u,[t]:[]},pe={...d,[t]:[]};c(Z),f(pe),o([]),a([]),oe([]),te(-1),ie("Full reset (delete all redactions + clear history)",Y,{doc:Z,all:pe},"Everything cleared"),Ct(t)},[t,u,d,l,G,Ct]),ci=Y=>{const Z=document.createTreeWalker(Y,NodeFilter.SHOW_TEXT,null),pe=[];let le;for(;le=Z.nextNode();)pe.push(le);return pe},Gn=(Y,Z)=>{const pe=ci(Y);let le=0;for(const de of pe){const Se=de.nodeValue?.length??0;if(Z<=le+Se)return{node:de,offset:Z-le};le+=Se}return null},Gt=Y=>Math.round(Y*1e3)/1e3,ye=Y=>{const Z=Y?.boundingRect;return Z?[Z.pageNumber,Gt(Z.x1),Gt(Z.y1),Gt(Z.x2),Gt(Z.y2),Y.usePdfCoordinates?"pdf":"vp"].join(":"):""},io=async Y=>{const Z=D.current?.getViewer?.(),pe=Pe.current;if(!Z||!pe)return[];const le=Y.trim();if(!le)return[];const de=le.toLowerCase(),Se=pe.numPages,et=[],Ie=Me=>{const Pt=Me.pageNumber,en=Z.getPageView(Pt-1).viewport;return{x1:Me.left,y1:Me.top,x2:Me.left+Me.width,y2:Me.top+Me.height,width:en.width,height:en.height,pageNumber:Pt}};for(let Me=1;Me<=Se;Me++){const Pt=Z.getPageView(Me-1),en=Pt?.viewport,dr=Pt?.textLayer;let Vr=!1;if(dr){const ue=dr.textDivs||Array.from(dr.div?.querySelectorAll("span")??[]);if(ue&&ue.length>0){Vr=!0;for(const Be of ue){const $e=Be.textContent??"";if(!$e)continue;const qe=$e.toLowerCase(),ft=de;let tn=0;for(;tn<=qe.length-ft.length;){const Ve=qe.indexOf(ft,tn);if(Ve===-1)break;{const jt=Gn(Be,Ve),ct=Gn(Be,Ve+ft.length);if(jt&&ct){const Mt=document.createRange();Mt.setStart(jt.node,jt.offset),Mt.setEnd(ct.node,ct.offset);const qt=Mt.getBoundingClientRect(),qn=Pt.div.getBoundingClientRect(),Wt={left:qt.left-qn.left,top:qt.top-qn.top,width:qt.width,height:qt.height},hr=Pt.viewport,Xt={x1:Wt.left,y1:Wt.top,x2:Wt.left+Wt.width,y2:Wt.top+Wt.height,width:hr.width,height:hr.height,pageNumber:Me};et.push({position:{boundingRect:Xt,rects:[Xt]},content:{text:$e.substr(Ve,ft.length)}})}}tn=Ve+ft.length}}}}if(!Vr){const ue=await ro(Me);if(!ue)continue;for(const Be of ue.items){const $e=(Be.str??"").trim();if($e&&$e.toLowerCase().includes(de)){const qe=Pi(en,Be),ft={boundingRect:{...qe,pageNumber:Me},rects:[{...qe,pageNumber:Me}]};et.push({position:{boundingRect:Ie(ft.boundingRect),rects:ft.rects.map(Ie)},content:{text:$e}})}}}}return et},Mi=Ts.useCallback(async Y=>{if(!t)return;const Z=Y.trim();if(!Z)return;const pe=await io(Z);if(!pe||pe.length===0)return;l();const le=G(),de=new Set((d[t]??[]).filter(Pt=>(Pt.content?.text??"").trim().toLowerCase()===Z.toLowerCase()).map(Pt=>ye(Pt.position))),Se=new Set,et=[];for(const Pt of pe){const en=ye(Pt.position);en&&(de.has(en)||Se.has(en)||(Se.add(en),et.push({id:pp(),comment:"",content:{text:Z},position:Pt.position})))}if(et.length===0)return;const Ie={...d,[t]:[...d[t]??[],...et]},Me={...u,[t]:[...u[t]??[],...et]};f(Ie),c(Me),ie("Apply To All (PDF.js search)",le,{doc:Me,all:Ie},`added=${et.length}`),Ct(t)},[t,d,u]),oo=Ts.useCallback(Y=>{if(!Y||Y.length===0)return;const pe=Y[0].content?.text??"";pe.trim()&&Mi(pe)},[Mi]),Do=async Y=>{await pi.pdfs.delete(Y),e(Z=>Z.filter(pe=>pe.id!==Y)),t===Y&&r(null)};return $.jsxs("div",{className:"App",style:{display:"flex",height:"100vh"},children:[$.jsx(WB,{uploadedPdfs:n,currentPdfId:t,setCurrentPdfId:r,allHighlights:d,currentHighlights:g,toggleHighlightCheckbox:ur,handlePdfUpload:mt,removePdf:Do,onApplyAllGroup:oo,onRemoveHighlight:Fr,onRemoveGroup:To,highlights:g,resetHighlights:Sn,toggleDocument:()=>{},onToggleGroup:un,resetEverything:Fe}),$.jsxs("div",{style:{height:"100vh",width:"75vw",overflow:"hidden",position:"relative",flexGrow:1},children:[$.jsx(OB,{setPdfScaleValue:Oe,toggleHighlightPen:()=>pt(!De),undo:bt,redo:je,canUndo:$n,canRedo:Di,onShowInfo:()=>me(!0),searchQuery:y,onChangeSearch:S,onSearchNext:M,onSearchPrev:N,onClearSearch:U,searchPos:cr,searchTotal:ui,onToggleHistory:()=>J(Y=>!Y)}),m?$.jsx(hD,{document:m.url,children:Y=>(Pe.current=Y,$.jsx(Z1,{enableAreaSelection:Z=>Z.altKey,pdfDocument:Y,onScrollAway:YB,utilsRef:Z=>{D.current=Z},pdfScaleValue:Te??void 0,textSelectionColor:De?"rgba(255, 226, 143, 1)":void 0,onSelection:De?Z=>no(Z.makeGhostHighlight(),""):void 0,selectionTip:De?void 0:$.jsx(fD,{addHighlight:no}),highlights:g,style:{height:"calc(100% - 41px)"},children:$.jsx(gD,{editHighlight:Ur,onContextMenu:Vn})}))}):$.jsx("div",{style:{height:"calc(100% - 41px)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,opacity:.6},children:"Upload a PDF to begin"})]}),He&&$.jsx(JS,{...He}),nt&&$.jsx("div",{onClick:()=>me(!1),style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:5e3},children:$.jsxs("div",{onClick:Y=>Y.stopPropagation(),style:{background:"white",padding:"24px 28px",borderRadius:8,width:380,maxHeight:"80vh",overflowY:"auto"},children:[$.jsx("h2",{style:{marginTop:0},children:"Keyboard Shortcuts"}),$.jsxs("ul",{style:{fontSize:15,lineHeight:1.7},children:[$.jsxs("li",{children:[$.jsx("strong",{children:" / "}),"  Move between redaction groups"]}),$.jsxs("li",{children:[$.jsx("strong",{children:"Space / Enter"}),"  Toggle selected group"]}),$.jsxs("li",{children:[$.jsx("strong",{children:"O"}),"  Expand/collapse selected group"]}),$.jsxs("li",{children:[$.jsx("strong",{children:"E"}),"  Expand all groups"]}),$.jsxs("li",{children:[$.jsx("strong",{children:"C"}),"  Collapse all groups"]}),$.jsxs("li",{children:[$.jsx("strong",{children:"Ctrl+Z / Z"})," - Undo"]}),$.jsxs("li",{children:[$.jsx("strong",{children:"trl+Shift+Z / Z"})," - Redo"]}),$.jsxs("li",{children:[$.jsx("strong",{children:"Ctrl + Shft + h"}),"  View history timeline"]})]}),$.jsx("div",{style:{textAlign:"right",marginTop:16},children:$.jsx(Ls,{text:"Close",onClick:()=>me(!1)})})]})}),we&&$.jsx(VB,{entries:ne,currentIndex:ae,onJump:Ce,onClose:()=>J(!1)})]})};xB();mp.createRoot(document.getElementById("root")).render($.jsx(Ts.StrictMode,{children:$.jsx(QB,{})}));
